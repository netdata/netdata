!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f4628e10-2d77-4187-9f1e-c45cf3c0a253",e._sentryDebugIdIdentifier="sentry-dbid-f4628e10-2d77-4187-9f1e-c45cf3c0a253")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"67fcafa0e89723987481f6de299b5bd1fcd6618a"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[115],{80959:function(e,t,n){var r=n(87462),a=n(45987),o=n(67294),l=n(99113),i=["message","title","footer"];t.Z=function(e){var t=e.message,n=e.title,c=e.footer,u=(0,a.Z)(e,i),s=(null===u||void 0===u?void 0:u["data-testid"])||"functionError";return o.createElement(l.Flex,(0,r.Z)({alignItems:"center",column:!0,"data-testid":s,flex:!0,gap:3,justifyContent:"center",padding:[0,20]},u),o.createElement(l.H3,{"data-testid":"".concat(s,"-title")},n),o.createElement(l.TextBig,{color:"textDescription","data-testid":"".concat(s,"-message")},t),c)}},10115:function(e,t,n){n.r(t),n.d(t,{default:function(){return Za}});n(47941),n(82526),n(57327),n(41539),n(88449),n(2490),n(59849),n(38880),n(15581),n(34514),n(54747),n(49337),n(33321),n(69070);var r=n(29439),a=n(4942),o=n(67294),l=n(91268),i=n(96929),c=n(4822),u=n(3322),s=n(24209),d=n(36560),f=n(78266),m=n(45987),p=n(87462),v=(n(69826),n(31672),n(59461),n(41817),n(99113)),g=n(96104),h=n(97945),y=n(74059),b=n(49254),x=n(89250),E=function(e){var t=(0,g.XT)(e),n=(0,x.TH)().state;return(0,o.useEffect)((function(){null!==n&&void 0!==n&&n.nodeId&&t([n.nodeId])}),[]),null===n||void 0===n?void 0:n.nodeId},w=n(91008),O=n(80959),C=["paramsKey"],P=function(e){var t=e.paramsKey,n=(0,m.Z)(e,C),r=(null===n||void 0===n?void 0:n["data-testid"])||"capableNodesError",a=(0,g.fX)(t),l=(0,h.iy)(null===a||void 0===a?void 0:a[0],"name");return o.createElement(v.Flex,(0,p.Z)({alignItems:"center",flex:!0,gap:8,justifyContent:"center"},n,{"data-testid":r}),o.createElement(v.Icon,{"data-testid":"".concat(r,"-icon"),height:"230px",name:"unreachableNode",width:"230px"}),o.createElement(O.Z,{"data-testid":"".concat(r,"-details"),gap:2,title:l?"".concat(l," is not configured for Functions"):"Your nodes are not configured for Functions",message:o.createElement(o.Fragment,null,"Learn how to configure your nodes"," ",o.createElement(w.Z,{Component:v.TextBig,"data-ga":"functions-capable-nodes-error::click-docs-link::functions-view","data-testid":"".concat(r,"-docsLink"),href:"https://learn.netdata.cloud/docs/nightly/operations/run-time-troubleshooting-with-functions#prerequisites",target:"_blank",rel:"noopener noreferrer"},"to support functions")),width:{max:"fit-content"}}))},Z=n(64599),j=n(70842),k=n(39469),I=(n(21249),n(57640),n(9924),n(85827),n(25387),n(72608),n(92222),n(36657)),F=n(91128),T=n(82351),S=n(46667),D=(n(26699),n(32023),n(54624)),K=n(71893),L=(0,K.default)(v.Flex).attrs({alignItems:"center",border:{side:"bottom",color:"borderSecondary"},padding:[2]}).withConfig({displayName:"styled__MenuItem",componentId:"sc-1bb2nho-0"})(["&:last-child{border:none;}"]),z=(0,K.default)(v.TextInput).withConfig({displayName:"styled__TextInput",componentId:"sc-1bb2nho-1"})(['margin:0 10px;min-width:unset;width:45px;> div{margin:0;}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}input[type="number"]{-moz-appearance:textfield;}']),N=["onClose","targetRef","paramsKey"];function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=o.createElement(v.Flex,{column:!0,width:{max:"500px"},gap:1},o.createElement(v.TextSmall,{color:"bright"},"Full data queries will always provide all the available facets with counters for your search, which depending on the size of the query could result in poor performance."),o.createElement(v.TextSmall,{color:"bright"},"i.e. Querying logs for multiple days with multitudes of entries."),o.createElement(v.TextSmall,{color:"bright"},"With this toggle \u201coff\u201d (default), queries will slice the data and will lower performance hit on your servers.")),B=function(e){var t=e.onClose,n=e.targetRef,a=e.paramsKey,l=(0,m.Z)(e,N),i=(null===l||void 0===l?void 0:l["data-testid"])||"config",s=(0,u.ZQ)(M({key:"acceptedParams"},a)).includes("slice"),d=(0,c.D0)("slice",M({defaultValue:!0,flavour:"bool"},a)),f=(0,r.Z)(d,2),p=f[0],g=f[1],h=(0,S.Z)(!p),y=(0,r.Z)(h,2),b=y[0],x=y[1];(0,D.Z)((function(){!!p===!!b&&g(!b)}),200,[p,b]);var E=(0,u.ZQ)(M({key:"updateEvery"},a)),w=(0,c.D0)("pollingInterval",M(M({},a),{},{flavour:"int",defaultValue:E})),O=(0,r.Z)(w,2),C=O[0],P=O[1],Z=(0,o.useState)(C),j=(0,r.Z)(Z,2),k=j[0],I=j[1];return(0,D.Z)((function(){C!==k&&P(k)}),400,[C,k]),n.current?o.createElement(v.Drop,{align:{top:"bottom",right:"right"},animation:!0,background:"dropdown",close:t,column:!0,"data-testid":i,margin:[.5,0,0],onClickOutside:t,onEsc:t,round:1,target:n.current,width:58},s&&o.createElement(L,{"data-testid":"".concat(i,"-slice-data"),justifyContent:"between"},o.createElement(v.Flex,{gap:1,alignItems:"center"},o.createElement(v.Text,{color:"textNoFocus","data-testid":"".concat(i,"-slice-data-label")},"Full data queries (slow)"),o.createElement(T.Z,{plain:!0,content:R,isBasic:!0,allowHoverOnTooltip:!0,stretch:"align"},o.createElement(v.Icon,{name:"information",color:"textDescription",width:"14px",height:"14px"}))),o.createElement(v.Toggle,{colored:!0,checked:b,"data-ga":"functions-config::auto-slice-data-switch::functions-view::".concat(b?"enabled":"disabled"),"data-testid":"".concat(i,"-slice-data-switch"),onChange:x})),o.createElement(L,{"data-testid":"".concat(i,"-pollingInterval")},o.createElement(v.Text,{color:"textNoFocus","data-testid":"".concat(i,"-pollingInterval-label")},"Refresh every"),o.createElement(z,{"data-ga":"functions-config::polling-interval::functions-view","data-testid":"".concat(i,"-pollingInterval-input"),min:1,onChange:function(e){var t=+e.target.value;t>0&&I(t)},size:"tiny",type:"number",value:k}),o.createElement(v.Text,{color:"textNoFocus","data-testid":"".concat(i,"-pollingInterval-units")},"seconds"))):null},_=n(89405),V=function(e){var t=e.paramsKey,n=(0,u.ZQ)(t).updatedAt,r=(0,_.rA)(),a=r.localeTimeString,l=r.localeDateString;return o.createElement(v.TextMicro,{color:"textLite"},"Last updated: ",l(n,{long:!0})," ",a(n,{secs:!0}))},q=n(2379),H=K.default.div.withConfig({displayName:"reload__IconsContainer",componentId:"sc-gd414j-0"})(["position:relative;"]),W=(0,K.default)(v.Icon).withConfig({displayName:"reload__SmallIcon",componentId:"sc-gd414j-1"})(["position:absolute;top:3px;left:3px;"]),G=(0,K.keyframes)(["from{transform:rotate(0deg);}to{transform:rotate(359deg);}"]),U=(0,K.default)(v.IconButton).withConfig({displayName:"reload__AnimatedIcon",componentId:"sc-gd414j-2"})(["&& svg{animation:",";}animation:rotation 2s infinite linear;"],(function(e){return e.animate?(0,K.css)([""," 3s linear infinite"],G):""})),Q=function(e){var t=e.onRefresh,n=e.onCancel,a=e.dataGa,l=e.testId,i=e.loading,c=(0,q.Cd)(),u=(0,o.useState)(!1),s=(0,r.Z)(u,2),d=s[0],f=s[1],m=(0,o.useState)(!1),p=(0,r.Z)(m,2),g=p[0],h=p[1];return(0,o.useEffect)((function(){if(!i)return f(!1),void h(!1);var e=setTimeout((function(){return f(!0)}),500),t=setTimeout((function(){return h(!0)}),3e3);return function(){clearTimeout(e),clearTimeout(t)}}),[i]),o.createElement(v.Flex,{alignItems:"center",gap:1},o.createElement(H,null,o.createElement(W,{name:c?"playSolid":"pauseSolid",width:"6px",height:"6px",color:c?"primary":"text"}),o.createElement(U,{animate:d,"data-testid":"".concat(l,"-refreshNowBtn"),"data-ga":"".concat(a,"::click-refresh-now::functions-view"),flavour:"hollow",icon:"refresh",onClick:function(){return t({merge:!1})},disabled:c,padding:[1]})),o.createElement(v.Collapsible,{open:g,direction:"horizontal",duration:300},o.createElement(v.IconButton,{"data-testid":"".concat(l,"-cancelBtn"),"data-ga":"".concat(a,"::click-cancel::functions-view"),flavour:"hollow",warning:!0,icon:"x",onClick:function(){return n()},padding:[1]})))},X=["onRefresh","onCancel","paramsKey"],J={fn:{dataGa:"functions-header",hasConfig:!0,Title:function(e){var t=e.name,n=e.fn;return n?t?"".concat(n," on ").concat(t):n:"Top"},titleTooltip:o.createElement(v.Flex,{width:{max:"500px"},alignItems:"center",flexWrap:!0},o.createElement(v.Text,{color:"bright"},"Netdata Functions enable detailed low-level monitoring at the edge."," "),o.createElement(w.Z,{Component:v.Text,"data-ga":"functions-header::click-docs-link::functions-view","data-testid":"docsLink",href:"https://learn.netdata.cloud/docs/nightly/concepts/netdata-functions",target:"_blank",rel:"noopener noreferrer"},"Read the Netdata functions documentation to learn more"),o.createElement(v.Text,{color:"bright"},"."))},logs:{dataGa:"logs-header",hasConfig:!0,Title:function(e){var t=e.name,n=e.fn;return n?t?"".concat(n," logs on ").concat(t):"".concat(n," logs"):"Logs"},titleTooltip:o.createElement(v.Flex,{width:{max:"500px"},alignItems:"center",flexWrap:!0},o.createElement(v.Text,{color:"bright"},"Explore system and applications logs. "),o.createElement(w.Z,{Component:v.Text,"data-ga":"functions-header::click-docs-link::functions-view","data-testid":"docsLink",href:"https://learn.netdata.cloud/docs/logs/systemd-journal",target:"_blank",rel:"noopener noreferrer"},"Read the Netdata logs documentation to learn more"),o.createElement(v.Text,{color:"bright"},"."))},feed:{dataGa:"feed-header",Title:function(){return"Events"},titleTooltip:o.createElement(v.Flex,{width:{max:"500px"},alignItems:"center",flexWrap:!0},o.createElement(v.Text,{color:"bright"},"Troubleshoot faster with Netdata Events. Access topology and alert events across the room in one convenient location."," "),o.createElement(w.Z,{Component:v.Text,"data-ga":"feed-header::click-docs-link::feed-view","data-testid":"docsLink",href:"https://learn.netdata.cloud/docs/nightly/concepts/events-feed",target:"_blank",rel:"noopener noreferrer"},"Read the Events feed documentation to learn more"),o.createElement(v.Text,{color:"bright"},"."))}},Y=(0,o.memo)((function(e){var t=e.onRefresh,n=e.onCancel,a=e.paramsKey,l=(0,m.Z)(e,X),i=(null===l||void 0===l?void 0:l["data-testid"])||"functionsHeader",c=(0,o.useRef)(),s=J[a.extraKey]||J.fn,d=s.dataGa,f=s.hasConfig,p=s.titleTooltip,y=s.Title,b=(0,S.Z)(!1),x=(0,r.Z)(b,4),E=x[0],w=x[1],O=x[3],C=(0,g.fX)(a),P=(0,h.iy)(null===C||void 0===C?void 0:C[0],"name"),Z=(0,u.ZQ)(a),j=Z.loaded,k=Z.data,I=Z.totalSize,F=Z.loading,D=Z.loadingMore,K=(0,u.CE)(a);return o.createElement(v.Flex,{"data-testid":i,justifyContent:"between"},o.createElement(v.Flex,{column:!0},o.createElement(v.Flex,{alignItems:"center","data-testid":"".concat(i,"-title"),gap:1},o.createElement(v.H3,null,o.createElement(y,{name:P,fn:K})),o.createElement(T.Z,{plain:!0,content:p,isBasic:!0,allowHoverOnTooltip:!0,stretch:"align"},o.createElement(v.Icon,{name:"information",color:"textDescription",width:"16px",height:"16px"}))),o.createElement(v.Flex,{alignItems:"center",gap:2},j&&o.createElement(v.TextSmall,{color:"textLite",strong:!0},"(",I||(null===k||void 0===k?void 0:k.length)||0," results)"),o.createElement(V,{paramsKey:a}))),o.createElement(v.Flex,{gap:1,alignItems:"start"},o.createElement(Q,{testId:i,dataGa:d,onRefresh:t,onCancel:n,loading:F||D}),f&&o.createElement(v.IconButton,{"data-testid":"".concat(i,"-ConfigBtn"),"data-ga":"".concat(d,"::click-config::functions-view"),flavour:"hollow",icon:"gear",ref:c,onClick:w,padding:[1]}),E&&o.createElement(B,{"data-testid":"".concat(i,"-Config"),isOpen:E,onClose:O,targetRef:c,paramsKey:a})))}),(function(e,t){return e.onRefresh===t.onRefresh})),$=(n(39714),n(74916),n(15306),n(34553),n(41331)),ee=n(93433),te=(n(88386),n(55436)),ne=["icon","iconRotate","children","onClick","strong","testId","textAlign","wrap","truncate","rowOptions"],re=["description","tooltipValue","value","valueOptions","wrap","rowOptions"];function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=(0,K.default)(v.Icon).attrs({color:"text",height:"16px",width:"16px"}).withConfig({displayName:"value__Arrow",componentId:"sc-1apuy8c-0"})(["rotate:",";transition:all 200ms ease;"],(function(e){return e.rotate})),ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=t.decimalPoints,a=void 0===r?0:r,l=t.units,i=t.defaultValue,c=(0,te.Ol)();return(0,o.useMemo)((function(){switch(n){case"number":return(0,te.Jw)(e,{decimalPoints:a,units:l,defaultValue:i});case"duration":return(0,te.kl)(e,{defaultValue:i});case"datetime":return c(e,{defaultValue:i});case"datetime_usec":return c(e,{defaultValue:i,usec:!0});default:return null===e||"undefined"===typeof e?i:e}}),[e,l])},ce=function(e){var t=e.description,n=void 0===t?"":t,r=e.value,a=e.units,l=void 0===a?"":a;return n?o.createElement(v.Flex,{column:!0,gap:1,justifyContent:"center"},o.createElement(v.TextSmall,{color:"bright"},n),o.createElement(v.TextSmall,{strong:!0,color:"bright",textAlign:"center"},r," ",l)):"".concat(r," ").concat(l)},ue=(0,K.default)(v.Flex).withConfig({displayName:"value__ValueContainer",componentId:"sc-1apuy8c-1"})(["",""],(function(e){return e.overflowWrap&&"* {\n      overflow-wrap: anywhere;\n      white-space: pre-wrap;\n      word-break: break-word;\n    }\n  "})),se={debug:{strong:!0,color:"textLite"},normal:{},notice:{strong:!0},warning:{strong:!0,color:"warningText"},critical:{strong:!0,color:"errorText"}},de=(0,K.default)(v.Text).attrs((function(e){return oe(oe({},e),se[e.severity]||se.normal)})).withConfig({displayName:"value__ValueLabel",componentId:"sc-1apuy8c-2"})([""]),fe=(0,o.forwardRef)((function(e,t){var n=e.icon,r=e.iconRotate,a=e.children,l=e.onClick,i=e.strong,c=e.testId,u=void 0===c?"cell":c,s=e.textAlign,d=e.wrap,f=e.truncate,v=void 0===f||f,g=e.rowOptions,h=(0,m.Z)(e,ne);return o.createElement(ue,(0,p.Z)({cursor:l?"pointer":"inherit",gap:.5,onClick:l,overflow:"hidden",ref:t,width:{max:"100%"},flexWrap:!0,overflowWrap:d},h),n&&o.createElement(le,{name:n,rotate:r}),o.createElement(de,(0,p.Z)({"data-testid":"".concat(u,"-value"),strong:i,textAlign:s,truncate:!d&&v,whiteSpace:d?"wrap":"nowrap"},g),a))})),me=function(e){var t=e.description,n=void 0===t?"":t,r=e.tooltipValue,a=e.value,l=e.valueOptions,i=void 0===l?{}:l,c=e.wrap,u=e.rowOptions,s=(0,m.Z)(e,re),d=ie(a,i);return o.createElement(T.Z,(0,p.Z)({content:!c&&o.createElement(ce,{description:n,value:r||a,units:i.units}),"data-testid":"valueComponent",isBasic:!0},s),o.createElement(fe,{wrap:c,rowOptions:u},d))},pe=["value"],ve=function(e){var t=e.value,n=(0,m.Z)(e,pe);return o.createElement(me,(0,p.Z)({value:t.value},n))},ge=["description","maxValue","strong","type","value","valueOptions","wrap"],he=function(e){var t=e.description,n=void 0===t?"":t,r=e.maxValue,a=e.strong,l=e.type,i=e.value,c=e.valueOptions,u=void 0===c?{}:c,s=e.wrap,d=(0,m.Z)(e,ge),f=100*i/r,p="bar"===l,g=(null===d||void 0===d?void 0:d["data-testid"])||"progressValue",h=ie(i,u);return o.createElement(T.Z,{content:o.createElement(ce,{description:n,value:i,units:u.units}),isBasic:!0,stretch:"align"},o.createElement(v.Flex,{column:!0,"data-testid":g,gap:1,flexWrap:s,flex:!0},!p&&o.createElement(fe,{strong:a,testid:g},h),null!==i&&o.createElement(v.ProgressBar,{background:"borderSecondary",border:"none",color:["green","netdata"],containerWidth:"100%","data-testid":"".concat(g,"-bar"),height:2,width:"".concat(f,"%")})))},ye=function(e){var t=e.value,n=e.wrap;return t=Array.isArray(t)?t:[t],o.createElement(v.Flex,{alignItems:"center",flexWrap:n},t.map((function(e,t){return o.createElement(v.Pill,{flavour:"neutral","data-testid":"pillValueComponent",key:"".concat(e,"-").concat(t),margin:[.3],normal:!1},e)})))},be=n(37518),xe=n(54244),Ee=["color"],we=function(e){var t=e.hide,n=e.user;return t||!n?null:o.createElement(o.Fragment,null,o.createElement(v.Text,null,"by"),o.createElement(Oe,null,n))},Oe=function(e){var t=e.color,n=void 0===t?"text":t,r=(0,m.Z)(e,Ee);return o.createElement(v.Text,(0,p.Z)({color:n,strong:!0},r))},Ce=function(e){var t=e.type,n=e.text,r=void 0===n?t:n,a=e.hollow;return o.createElement(xe.Z,(0,p.Z)({flavour:t.toLowerCase()},a&&{border:!1}),r)},Pe=(0,K.default)(v.Flex).attrs({gap:1,flexWrap:!0,alignItems:"center"}).withConfig({displayName:"components__Container",componentId:"sc-b5rk6g-0"})([""]),Ze=n(79655),je=["chart","hosts","alert"];function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fe={CLEAR:0,WARNING:1,CRITICAL:2,UNINITIALIZED:3,UNDEFINED:4},Te=function(e){var t=e.chart,n=e.context,r=e.nodeId,a=e.nodeName,l=e.spaceSlug,i=e.roomSlug,c=e.alert,u=(0,x.s0)(),s=(0,h.m3)(r),d=(0,o.useCallback)((function(){var e;null!==c&&void 0!==c&&c.id?u(s,{state:{alertId:c.id}}):u(s,{state:{contextToGo:null===n||void 0===n||null===(e=n.name)||void 0===e?void 0:e[0]}})}),[s,c]),f="/spaces/".concat(l,"/rooms/").concat(i,"/alerts/").concat(null===c||void 0===c?void 0:c.id),m=c.current,p=c.name,g=c.previous;if("ERROR"===m.status)return o.createElement(Pe,null,o.createElement(v.Text,null,"For the alert"),o.createElement(w.Z,{Component:Oe,as:Ze.rU,to:f},p),o.createElement(v.Text,null,"for"),o.createElement(w.Z,{Component:Oe,onClick:d},t.name),o.createElement(v.Text,null,"on"),o.createElement(w.Z,{Component:Oe,onClick:d},a),o.createElement(v.Text,null,"we couldn't calculate the current value"),o.createElement(T.Z,{align:"bottom",content:"Please check your alert configuration"},o.createElement(v.Icon,{color:"nodeBadgeColor",size:"small",name:"information"})));if("REMOVED"===m.status)return o.createElement(Pe,null,o.createElement(v.Text,null,"Alert"),o.createElement(w.Z,{Component:Oe,as:Ze.rU,to:f},p),o.createElement(v.Text,null,"for"),o.createElement(w.Z,{Component:Oe,onClick:d},t.name),o.createElement(v.Text,null,"on"),o.createElement(w.Z,{Component:Oe,onClick:d},a),o.createElement(v.Text,null,"is no longer available, state can't be assessed"));var y=Fe[m.status]===Fe.CLEAR;return o.createElement(Pe,null,o.createElement(v.Text,null,"Alert"),o.createElement(w.Z,{Component:Oe,as:Ze.rU,to:f},p),o.createElement(v.Text,null,"for"),o.createElement(w.Z,{Component:Oe,onClick:d},t.name),o.createElement(v.Text,null,"on"),o.createElement(w.Z,{Component:Oe,onClick:d},a),y?o.createElement(v.Text,null,"recovered"):o.createElement(o.Fragment,null,o.createElement(v.Text,{strong:!0},Fe[g.status]===Fe.CRITICAL?"was demoted":Fe[g.status]===Fe.WARNING?"escalated":Fe[m.status]===Fe.UNDEFINED?"transitioned":"was raised"),o.createElement(v.Text,null,"to"),o.createElement(Ce,{type:m.status}),Fe[m.status]===Fe.UNDEFINED&&o.createElement(v.Text,null,"state")),o.createElement(v.Text,null,"with value"),o.createElement(Ce,{type:m.status,text:m.value_string,hollow:!0,padding:[0]}))},Se=function(e){var t=e.id,n=e.name,r=(0,y.uk)(),a=(0,be.tE)(t,"slug"),l="/spaces/".concat(r,"/rooms/").concat(a,"/home");return o.createElement(w.Z,{Component:Oe,as:Ze.rU,to:l},n)},De=function(e){var t=e.rooms;return t.map((function(e,n){return o.createElement(o.Fragment,{key:e.id},n>0&&(n<t.length-1?", ":" and "),o.createElement(Se,e))}))},Ke=function(e){var t=e.rooms;if(!t.length)return null;var n=t.length>1?"rooms":"room";return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"on ",n),o.createElement(De,{rooms:t}))},Le=function(e){var t=e.contexts;t.map((function(e,n){return o.createElement(o.Fragment,{key:e},n>0&&(n<t.length-1?", ":" and "),o.createElement(Oe,null,e))}))},ze=function(e){var t=e.contexts;if(!t.length)return null;var n=t.length>1?"contexts":"context";return o.createElement(v.Text,null,"on ",n," ",o.createElement(Le,{contexts:t}))},Ne={month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",long:!1,dateStyle:void 0},Ae=function(e){var t=e.start,n=e.end,r=(0,_.rA)().localeDateString;if(!t||!n)return null;var a=r(new Date(t),Ne),l=r(new Date(n),Ne);return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"(scheduled ",a," - ",l,")"))},Me={"silencing-rule-created":"created","silencing-rule-deleted":"deleted","silencing-rule-changed":"changed"},Re=function(e){var t=e.rooms,n=void 0===t?[]:t,r=e.contexts,a=void 0===r?[]:r;return n.length||a.length?o.createElement(o.Fragment,null,!!n.length&&o.createElement(Ke,{rooms:n}),!!n.length&&!!a.length&&o.createElement(v.Text,null,"and ",o.createElement(ze,{contexts:a}))):null},Be=function(e){var t,n=e.action,r=e.notification,a=e.user,l=e.room,i=e.context,c=((null===r||void 0===r||null===(t=r.silencing)||void 0===t?void 0:t.rule)||[])[0],u=null===a||void 0===a?void 0:a.name,s=(null===i||void 0===i?void 0:i.name)||[];return o.createElement(Pe,null,o.createElement(v.Text,null,"Silencing rule"),o.createElement(Oe,null,c.name),o.createElement(Re,{rooms:l,contexts:s}),o.createElement(v.Text,null,"was ",Me[n]),o.createElement(we,{user:u}),o.createElement(Ae,c))},_e=n(62200),Ve=function(e,t){var n,r;return(null===(n=e.target)||void 0===n?void 0:n[t])||(null===(r=e.target)||void 0===r?void 0:r.id)||e[t]||e.id},qe=function(e){return Array.isArray(e)?e[0].name||e[0].id:e.name||e.id},He=function(e){var t=e.statistics,n=(null===t||void 0===t?void 0:t.nodes)||{},r=n.live,a=n.stale,l=n.removed,i=n.total;return o.createElement(Pe,null,o.createElement(v.Text,null,"Space statistics. Nodes:"),o.createElement(v.Text,{color:_e.WV.live.statusTextColor},r," live"),o.createElement(v.Text,null,","),o.createElement(v.Text,{color:_e.WV.stale.statusTextColor},a," stale"),o.createElement(v.Text,null,","),o.createElement(v.Text,{color:_e.WV.offline.statusTextColor},l," removed"),o.createElement(v.Text,null,","),o.createElement(v.Text,{strong:!0},i," total"))},We=(n(69810),n(86035),n(6973)),Ge=function(e){var t=e.stateColor,n=e.state;return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"became"),o.createElement(Oe,{color:t},n))},Ue=function(e){var t=e.stateColor,n=e.state;return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"was"),o.createElement(Oe,{color:t},n))},Qe={"node-created":Ue,"node-state-live":Ge,"node-state-stale":Ge,"node-state-offline":Ge,"node-removed":Ue,"node-deleted":Ue,"node-restored":Ue,default:Ue},Xe=function(e){var t,n=e.action,r=e.hosts,a=(void 0===r?[]:r)[0],l=a.id,i=a.name,c=(0,x.s0)(),u=(0,h.m3)(l),s=(0,o.useCallback)((function(){return c(u)}),[u]),d=Qe[n],f=n.split("-").at(-1),m=null===(t=We.B[f])||void 0===t?void 0:t.statusTextColor;return o.createElement(Pe,null,o.createElement(v.Text,null,"Node"),o.createElement(w.Z,{Component:Oe,onClick:s},i),o.createElement(d,{stateColor:m,state:f}))},Je=function(e){var t=e.room,n=(0,be.Hm)("untouchable");return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"was added to",n?" room":""),o.createElement(Oe,null,n?qe(t):"this room"))},Ye=function(e){var t=e.room,n=(0,be.Hm)("untouchable");return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"was removed from",n?" room":""),o.createElement(Oe,null,n?qe(t):"this room"))},$e={"room-created":function(){return o.createElement(v.Text,null,"was created")},"room-deleted":function(){return o.createElement(v.Text,null,"was deleted")},"room-node-added":Je,"room-node-removed":Ye,"room-user-added":Je,"room-user-removed":Ye},et=function(e){var t,n=e.action,r=e.hosts,a=void 0===r?[]:r,l=e.Netdata,i=e.user,c=$e[n],u=null===(t=a[0])||void 0===t?void 0:t.name;return o.createElement(Pe,null,o.createElement(v.Text,null,"Node"),o.createElement(Oe,null,u),o.createElement(c,{room:l.room}),o.createElement(we,{user:null===i||void 0===i?void 0:i.name}))},tt=function(e){var t=e.action,n=e.Netdata,r=e.user,a=$e[t];return o.createElement(Pe,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Ve(r,"name")),o.createElement(a,{room:n.room}),o.createElement(we,{hide:!r.target,user:r.name}))},nt=function(e){var t=e.action,n=e.Netdata,r=e.user,a=$e[t];return o.createElement(Pe,null,o.createElement(v.Text,null,"Room"),o.createElement(Oe,null,qe(n.room)),o.createElement(a,null),o.createElement(we,{user:r.name}))},rt={"alert-node-transition":function(e){var t=e.chart,n=e.hosts,r=e.alert,a=(0,m.Z)(e,je);return n.map((function(e,n){var l=e.id,i=e.name,c=Ie(Ie({},r),{},{name:r.name[n]},r.current?{current:Ie(Ie({},r.current),r.current.status?{status:r.current.status[n]||r.current.status[0]}:{})}:{});return o.createElement(Te,(0,p.Z)({key:l,chart:t,nodeId:l,nodeName:i,alert:c},a))}))},"node-created":Xe,"node-state-live":Xe,"node-state-stale":Xe,"node-state-offline":Xe,"node-removed":Xe,"node-deleted":Xe,"node-restored":Xe,"agent-connected":function(e){var t=e.agentId;return o.createElement(Pe,null,o.createElement(v.Text,null,"Agent with claim ID"),o.createElement(Oe,null,t)," ",o.createElement(v.Text,null,"has connected to Netdata"))},"agent-connection-initialized":function(e){var t=e.agentId;e.reason;return o.createElement(Pe,null,o.createElement(v.Text,null,"Agent with claim ID"),o.createElement(Oe,null,t),o.createElement(v.Text,null,"has initialized its connection to Netdata"))},"agent-disconnected":function(e){var t=e.agentId,n=e.reason;return o.createElement(Pe,null,o.createElement(v.Text,null,"Agent with claim ID"),o.createElement(Oe,null,t),o.createElement(v.Text,null,"has disconnected from Netdata with reason: \u201c",n,"\u201d"))},"agent-authenticated":function(e){var t=e.agentId;return o.createElement(Pe,null,o.createElement(v.Text,null,"Agent with claim ID"),o.createElement(Oe,null,t),o.createElement(v.Text,null,"has successfully authenticated"))},"agent-authentication-failed":function(e){var t=e.agentId;return o.createElement(Pe,null,o.createElement(v.Text,null,"Agent with claim ID"),o.createElement(Oe,null,t),o.createElement(v.Text,null,"has failed to authenticate"))},"room-created":nt,"room-deleted":nt,"room-node-added":et,"room-node-removed":et,"room-user-added":tt,"room-user-removed":tt,"space-created":function(e){var t=e.Netdata,n=e.user;return o.createElement(Pe,null,o.createElement(v.Text,null,"Space"),o.createElement(Oe,null,t.space.name||t.space.id),o.createElement(v.Text,null,"was created"),o.createElement(we,{user:n.name}))},"space-statistics":He,"space-user-added":function(e){var t=e.Netdata,n=e.user,r=((null===t||void 0===t?void 0:t.inviter)||{}).name;return o.createElement(Pe,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Ve(n,"name")),o.createElement(v.Text,null,"was added to this space"),r&&o.createElement(o.Fragment,null,o.createElement(v.Text,null,"by invite of"),o.createElement(Oe,null,r)))},"space-user-changed":function(e){var t,n=e.user;if(!(null===(t=n.changes)||void 0===t||!t.roles)&&1===Object.keys(n.changes).length){var r=n.changes.roles.length>1,a=n.changes.roles.join(", ");return o.createElement(Pe,null,o.createElement(v.Text,null,"User ",r?"roles":"role"," for"),o.createElement(Oe,null,Ve(n,"name")),o.createElement(v.Text,null,r?"were":"was"," changed to"),o.createElement(Oe,null,a),o.createElement(we,{hide:!n.target,user:n.name}))}return o.createElement(Pe,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Ve(n,"name")),o.createElement(v.Text,null,"was modified"))},"space-user-invited":function(e){var t=e.user;return o.createElement(Pe,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Ve(t,"email")),o.createElement(v.Text,null,"was invited to this space"),o.createElement(we,{user:t.name}))},"space-user-removed":function(e){var t=e.user,n=(t.target||{}).name;return o.createElement(Pe,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Ve(t,"name")),o.createElement(v.Text,null,"was removed from this space"),n&&o.createElement(we,{user:t.name}))},"space-user-uninvited":function(e){var t=e.event,n=e.user;return"space-invite-expired"===t.reason?o.createElement(Pe,null,o.createElement(v.Text,null,"The invite for"),o.createElement(Oe,null,Ve(n,"email")),o.createElement(v.Text,null,"to this space has expired")):o.createElement(Pe,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Ve(n,"email")),o.createElement(v.Text,null,"was uninvited from this space"),o.createElement(we,{hide:!n.target,user:n.name}))},"silencing-rule-created":Be,"silencing-rule-deleted":Be,"silencing-rule-changed":Be},at=function(e){var t=e.data,n=t.source,r=n.action,a=n.roomId,l=n.space,i=(0,y.vu)(l.id,"slug"),c=(0,be.tE)(a,"slug"),u=rt[r];return u?o.createElement(u,(0,p.Z)({},t.source,{spaceSlug:i,roomSlug:c})):o.createElement(Pe,null,o.createElement(v.Text,null,"Event")," ",o.createElement(v.Text,{strong:!0},r)," ",o.createElement(v.Text,null,"emitted"))},ot=["value"],lt=["visualization","type","value","data"],it={bar:he,"bar-with-integer":he,duration:he,pill:ye,number:me,string:me,feedTemplate:at,datetime:function(e){var t=e.value,n=(0,m.Z)(e,ot),r=new Date(t),a=(0,_.rA)(),l=a.localeTimeString,i=a.localeDateString,c=isNaN(r.valueOf())?"Missing date & time":"".concat(i(r,{long:!1})," ").concat(l(r,{secs:!0}));return o.createElement(me,(0,p.Z)({value:c},n))},value:me},ct={bar:he,pill:ye,value:me,richValue:ve,feedTemplate:at,rowOptions:"skip"},ut=function(e){var t=e.visualization,n=e.type,r=e.value,a=e.data,l=(0,m.Z)(e,lt),i=ct[t]||it[n]||ct.value;return i===ct.rowOptions?null:o.createElement(i,(0,p.Z)({value:r,type:n,rowOptions:null===a||void 0===a?void 0:a.rowOptions,data:a},l))},st=["displayName","name","sortable","sticky","units","max","dummy","cellSize","valueOptions","summary","type","visualization","wrap"];function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mt={sum:"sum",min:"min",max:"max",extent:"extent",mean:"mean",median:"median",unique:"unique",uniqueCount:"uniqueCount",count:"count"},pt=n(71002),vt=(n(64211),n(41874),n(69720),n(54678),n(4480));function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yt={query:function(e,t,n){var a=n.columnVisibility,o="string"===typeof t?t.toLowerCase():"";return Object.entries(e).some((function(e){var t=(0,r.Z)(e,2),n=t[0],l=t[1];return!!a[n]&&(null!==l&&"undefined"!==typeof l&&(Array.isArray(l)?l.some((function(e){return String(e).toLowerCase().includes(o)})):("object"===(0,pt.Z)(l)&&Object.keys(l).some((function(e){return String(l[e]).toLowerCase().includes(o)})),String(l).toLowerCase().includes(o))))}))}},bt=function(e){return function(t,n){return!e.some((function(e){var a=(0,r.Z)(e,2),o=a[0],l=a[1];return yt[o]?!yt[o](t,l,n):!function(e){return function(t,n,r){var a,o;if(!r.columns[e]||"facet"===(null===(a=r.columns[e])||void 0===a?void 0:a.filter))return!0;if("range"===(null===(o=r.columns[e])||void 0===o?void 0:o.filter)&&null!==n&&void 0!==n&&n.length)return t[e]>=n[0]&&t[e]<=n[1];if(!Array.isArray(n)||!n.length)return!0;var l=t[e];return"number"===typeof l?(l=parseFloat(l),n.some((function(e){return parseFloat(e)===l}))):n.includes(l)}}(o)(t,l,n)}))}},xt=(0,vt.CG)({key:"fnDataFiltered",get:function(e){var t=e.extraKey,n=e.roomId,r=e.omit,a=e.keepAll,o=e.fn;return function(e){var l,i=e.get,s=i((0,u.tD)({id:o})),d=s.columnVisibility,f=s.data,m=s.columns,p=s.aggregations,v=s.requiredParams;if(p||!f)return f||[];var g=i((0,c.dz)({key:n,extraKey:t,merge:!1})),h=Object.keys(g).reduce((function(e,t){return v.some((function(e){return e.id===t}))||r&&r.split(":::").includes(t)||e.push([t,g[t]]),e}),[]);if(!h.length)return f;var y=bt(h),b=null===(l=i((0,c.dz)({key:n,extraKey:"".concat(o,"Settings"),flavour:"val"})))||void 0===l?void 0:l.sortColumn;return a?f.map((function(e){return y(e,{columnVisibility:d,columns:m,sortColumn:b})?e:ht(ht({},e),{},{hidden:!0})})):f.filter((function(e){return y(e,{columnVisibility:d,columns:m,sortColumn:b})}))}},cachePolicy_UNSTABLE:{eviction:"most-recent"}}),Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.extraKey,n=void 0===t?"fn":t,r=e.omit,a=e.keepAll,o=void 0!==a&&a,l=(0,u.CE)({extraKey:n}),i=(0,be.UL)();return(0,vt.sJ)(xt({extraKey:"".concat(l||n,"Filters"),fn:l,roomId:i,omit:r,keepAll:o}))},wt=n(70459);function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pt,Zt=(0,K.default)(v.Table).withConfig({displayName:"table__StyledTable",componentId:"sc-1n2s6gl-0"})(["*{font-family:Courier New,monospace;letter-spacing:0.09px;}"]),jt=(0,o.memo)(Zt,(function(e,t){return(0,$.ZP)(e,t,{keep:["columnVisibility","data","fnQuery","sortBy","virtualizeOptions"]})})),kt=(0,o.memo)((0,o.forwardRef)((function(e,t){var n=e["data-testid"],a=e.paramsKey,l=e.refetch,i=e.onShowInfo,c=(0,u.ZQ)(a),s=c.columns,d=c.sortedColumns,f=c.sortColumn,p=c.sortDirection,g=c.columnVisibility,h=c.pinnedColumns,y=c.loadingMore,b=c.retentionWarning,x=c.groupByColumns,E=c.pagination,w=c.merged,O=c.latestDirection,C=c.hasDirection,P=c.tail,Z=c.aggregations,j=(0,o.useRef)();j.current=c;var k=(0,o.useState)(""),I=(0,r.Z)(k,2),F=I[0],T=I[1],S=Et(a),D="feed"===a.extraKey,K=function(e,t,n){var r=n.groupBy;return(0,o.useMemo)((function(){return(e||[]).reduce((function(e,n){var a=t[n];if(!a)return e;var l=a.displayName,i=a.name,c=a.sortable,u=(a.sticky,a.units),s=a.max,d=a.dummy,f=a.cellSize,p=a.valueOptions,g=a.summary,h=a.type,y=a.visualization,b=a.wrap,x=void 0!==b&&b,E=(0,m.Z)(a,st);return d?e:[].concat((0,ee.Z)(e),[ft(ft(ft({},E),{},{displayName:l,id:l,accessorFn:function(e){return e[n]},cell:function(e){var t=e.getValue,n=e.row,a=e.cell.getIsAggregated(),l=t(),c=a&&(mt[g]===mt.count||mt[g]===mt.uniqueCount||!mt[g]);return o.createElement(ut,{description:i,data:n.original,maxValue:s,padding:n.depth>0?[0,0,0,2.5*n.depth]:[0],strong:a,value:c?"".concat(l,"x"):l,tooltipValue:c?"".concat(l," ").concat(1===l?"item":"items"," associated with ").concat(r," grouping"):l,valueOptions:c?ft(ft({},p),{},{transform:"none"}):p,type:h,visualization:y,wrap:x})},header:o.createElement(v.Flex,{column:!0},o.createElement(v.TextSmall,{strong:!0},l),u&&o.createElement(v.TextMicro,null,"(",u,")")),enableSorting:c,aggregationFn:mt[g]||mt.count},f),{},{meta:ft({},l!==i?{tooltip:i}:{})})])}),[])}),[e,t,r])}(d,s,Ct({},D?{}:{groupBy:F})),L=(0,u.fg)(Ct({key:"sortColumn",flavour:"val"},a)),z=(0,r.Z)(L,2),N=z[0],A=z[1],M=(0,u.fg)(Ct({key:"sortDirection",flavour:"val"},a)),R=(0,r.Z)(M,2),B=R[0],_=R[1],V=(0,u.kU)(Ct({key:"query",flavour:"val"},a)),q=(0,r.Z)(V,2),H=q[0],W=q[1],G=(0,u.I_)(Ct({key:"columnVisibility"},a)),U=(0,o.useMemo)((function(){return N||f?[{id:N||f,desc:"descending"===(B||p)}]:[]}),[f,p,N,B]),Q=(0,o.useCallback)((function(e){var t=(0,r.Z)(e,1)[0],n=(null===t||void 0===t?void 0:t.id)||n,a=null!==t&&void 0!==t&&t.desc?p||"descending":"ascending";A(n),_(a)}),[N,f,p]),X=(0,o.useMemo)((function(){return{left:h}}),[h]),J=(0,o.useRef)();J.current=y;var Y=(0,wt.Z)().pause,$=(0,o.useCallback)((function(e){var t=e.data;return i({data:t.json||t,columns:s})}),[]),te=(0,o.useRef)(),ne=(0,o.useRef)(),re=(0,o.useRef)(),ae=(0,o.useRef)(0),oe=(0,o.useRef)(0),le=(0,o.useRef)(w);(0,o.useLayoutEffect)((function(){var e;w&&!P||null===(e=ne.current)||void 0===e||!e.scrollOffset||ne.current.scrollToOffset(0)}),[w,P]),(0,o.useLayoutEffect)((function(){clearTimeout(Pt),y||(Pt=setTimeout((function(){le.current=!1}),200))}),[y]),(0,o.useLayoutEffect)((function(){if(E&&C&&!P){if(oe.current!==S.length&&"forward"===O){var e,t,n=ne.current.scrollOffset,r=0,a=ne.current.getMeasurements().find((function(e,t){return 0!==t&&(r+=e.size)>n}));if(!a)a=null===(t=ne.current.getMeasurements())||void 0===t?void 0:t[1];if(!a)return;re.current=Ct(Ct({},S[S.length-oe.current+(a.index-1)]),{},{headerSize:(null===(e=ne.current.getMeasurements())||void 0===e||null===(e=e[0])||void 0===e?void 0:e.size)||0}),w&&!P?ae.current=0:re.current=null}!function e(){if(re.current&&ae.current<5){var t,n;ae.current=ae.current+1,oe.current=S.length;var r=null===(t=re.current)||void 0===t||null===(t=t[E.column])||void 0===t||null===(n=t.toString)||void 0===n?void 0:n.call(t),a=ne.current.getMeasurements().find((function(e){return e.key.replace(/-\d+?/,"")===r}));if(!a){var o=S.findIndex((function(e){return e[E.column]==r}));a=ne.current.getMeasurements()[o+1]}return a?(ne.current.scrollToOffset(a.start-re.current.headerSize),void setTimeout(e)):(ae.current=5,void(re.current=null))}ae.current=5,re.current=null}(),oe.current=S.length}}),[S]);var ie=(0,o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"backward";P||J.current||j.current.hasDirection&&(le.current||("backward"!==e||j.current.hasNextPage||j.current.anchorBefore)&&("forward"!==e||j.current.hasPrevPage||j.current.anchorAfter)&&("forward"===e&&(le.current=!0),l({anchor:"backward"===e?j.current.anchorBefore:j.current.anchorAfter,merge:!0,direction:e,data_only:!0})))}),[P]),ce=(0,o.useCallback)((function(e){var t;return"undefined"!==typeof(null===(t=j.current.data[e])||void 0===t?void 0:t[null===E||void 0===E?void 0:E.column])?"".concat(j.current.data[e][null===E||void 0===E?void 0:E.column],"-").concat(e):e}),[]),ue=(0,o.useCallback)((function(){return j.current.hasNextPage}),[]),se=(0,o.useCallback)((function(){return j.current.hasPrevPage}),[]),de=(0,o.useCallback)((function(e){e.scrollOffset>10&&Y()}),[Y]),fe=(0,o.useMemo)((function(){return{overscan:15,getHasNextPage:ue,getHasPrevPage:se,loading:y,loadMore:ie,warning:b,virtualRef:ne,getItemKey:ce,onVirtualChange:de}}),[S,y]),me=(0,u.$0)();return o.createElement(jt,{groupByColumns:x,onClickRow:$,columnPinning:X,columnVisibility:g,data:S,dataColumns:K,dataGa:"functions",enableColumnPinning:!!h.length,enableColumnVisibility:!D,enableCustomSearch:!!Z,enableResizing:!0,enableSorting:!D,globalFilter:D?null:H,onColumnVisibilityChange:G,onSearch:D?null:W,onGroupByChange:D?null:T,onSortingChange:D?null:Q,sortBy:U,testPrefix:n,virtualizeOptions:fe,ref:t,tableRef:te,onHoverCell:(0,o.useCallback)((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).row;e||me(null),me(e)}),[])})})),(function(){return!0})),It=kt,Ft=(n(88674),n(17727),n(18446)),Tt=n.n(Ft),St=n(39915),Dt=n(18997),Kt=n(4808),Lt=n(81732),zt=(n(47042),n(26833),n(2707),n(50361)),Nt=n.n(zt),At=n(38609),Mt=["updateEvery","merge","reset","groupBy","items","direction","dataOnly","showIds","facetsDelta","histogramDelta"];function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _t=90,Vt=110,qt=160,Ht=1e3,Wt={minSize:_t,maxSize:Ht},Gt=50,Ut={uniqueKey:{size:_t,downLimit:_t-Gt,upLimit:_t+Gt},bar:{size:_t,downLimit:_t-Gt,upLimit:_t+Gt},value:{size:Vt,downLimit:Vt-Gt,upLimit:Vt+Gt},feedTemplate:{size:Ht,downLimit:Ht-Gt,upLimit:Ht+Gt,minSize:230,maxSize:5e3,fullWidth:!0},pill:{size:Vt,downLimit:Vt-Gt,upLimit:Vt+Gt},timestamp:{size:qt,downLimit:qt-Gt,upLimit:qt+Gt},datetime:{size:qt,downLimit:qt-Gt,upLimit:qt+Gt}},Qt=function(e,t){e((function(e){var n,r,o,l=t.updateEvery,i=t.merge,c=t.reset,u=t.groupBy,s=t.items,d=t.direction,f=t.dataOnly,p=t.showIds,v=void 0===p?!1!==e.showIds:p,g=t.facetsDelta,h=t.histogramDelta,y=(0,m.Z)(t,Mt),b=c?t.columns:f?Nt()(e.columns):Nt()(i?(0,At.Z)(t.columns,e.columns):t.columns),x=c?{}:Bt({},e.sortedColumnsObj)||{},E=y.hasHistory||e.hasHistory,w=f?e.pagination:t.pagination,O=Object.keys(b).reduce((function(t,n){var r=b[n],a=r.id,o=r.name,l=r.sticky,i=r.visible,u=r.index;return r.displayName=v?a||n:o,t.columnVisibility[r.displayName]=!c&&e.loaded?!!t.columnVisibility[r.displayName]:i,!l||!c&&e.loaded||t.pinnedColumns.push(r.displayName),r.valueOptions=r.valueOptions||{},r.cellSize=function(e){var t=e.visualization,n=e.type,r=e.fullWidth,a=void 0!==r&&r,o=e.uniqueKey;return Bt(Bt({},Wt),{},{fullWidth:a},(o&&"timestamp"!==n?Ut.uniqueKey:Ut[n])||Ut[t]||{minSize:_t,maxSize:Ht,size:Vt,downLimit:Vt-Gt,upLimit:Vt+Gt})}(r),r.sortable=r.sortable&&!(null!==w&&void 0!==w&&w.enabled),"undefined"!==typeof u&&(x[x[u]!==n?r.displayName:u]=n),t}),{columnVisibility:Bt({},e.columnVisibility||{}),pinnedColumns:(0,ee.Z)(e.pinnedColumns||[])}),C=c?t.aggregations:i?Nt()(e.aggregations):t.aggregations||Nt()(e.aggregations);g&&g.forEach((function(e){var t=C.find((function(t){return t.id===e.id}));t?e.options.forEach((function(e){if(!isNaN(e.count)){var n=t.options.find((function(t){return t.id===e.id}));n?n.count=(n.count||0)+((null===e||void 0===e?void 0:e.count)||0):t.options.push(e)}})):C.push(e)}));var P=c?t.histogram:i?Nt()(e.histogram):t.histogram||Nt()(e.histogram);if(h){var Z;if(!c&&(null===(Z=e.histogram)||void 0===Z?void 0:Z.id)!==(null===h||void 0===h?void 0:h.id))return;var j=P.chart.result.labels;if((0,$.ZP)(j,h.chart.result.labels))P.chart.result.data=[].concat((0,ee.Z)(P.chart.result.data),(0,ee.Z)(h.chart.result.data));else{var k=function(e,t){var n=t.reduce((function(t,n,r){var a=e.findIndex((function(e){return n===e}));return-1===a||(t[a]=r),t}),{});return function(t){return e.reduce((function(e,r,a){return"undefined"===typeof n[a]?e.push([0,0,0]):e.push(t[n[a]]),e}),[])}}(j,h.chart.result.labels);h.chart.result.data.forEach((function(e){return P.chart.result.data.push(k(e))}))}}var I={};Object.keys(t.columns).forEach((function(e){I[t.columns[e].index]=e}));var F=t.data.map((function(e){return e.reduce((function(e,t,n){var r=I[n];return r?(e[r]=t,e):e}),{})})),T=c?F:i?"forward"===d?F.concat(e.data||[]):(e.data||[]).concat(F):F;y.tail&&T.slice(0,500);var S=null!==w&&void 0!==w&&w.enabled&&w.column&&Array.isArray(T)&&null!==(n=T[T.length-1])&&void 0!==n&&n[w.column]&&null!==(r=T[0])&&void 0!==r&&r[w.column]?{anchorBefore:T[T.length-1][w.column],anchorAfter:T[0][w.column],anchorUnits:w.units}:{},D=c?t.defaultSortColumn:t.defaultSortColumn||e.defaultSortColumn,K=(c?t.acceptedParams:t.acceptedParams||e.acceptedParams).includes("direction"),L=Bt(Bt(Bt(Bt(Bt(Bt(Bt({},e||Lt.Zn.table),y),{},{groupByColumns:c?u:u||e.groupByColumns,data:T,columns:b,updatedAt:(new Date).getTime(),updateEvery:l||e.updateEvery,sortedColumns:Object.values(x),sortColumn:null===(o=b[D])||void 0===o?void 0:o.displayName,sortDirection:D?b[D].sort:"descending"},O),S),{},{totalSize:y.totalSize||(null===s||void 0===s?void 0:s.matched)||(!f||"forward"===d||F.length||t.partial)&&e.totalSize||0},!!E&&{hasNextPage:!(f&&"forward"!==d&&!F.length&&!t.partial)&&(!s||0!==s.after)}),!!E&&K&&{hasPrevPage:!(f&&"forward"===d&&!F.length&&!t.partial)&&(!(!y.tail&&s)||0!==s.before)}),{},{offset:i?null:(null===s||void 0===s?void 0:s.before)||null,loading:!1,loaded:!0,showIds:v,merged:i,latestDirection:d,hasHistory:E,hasDirection:K,aggregations:C,histogram:P,sortedColumnsObj:x,filtersToRefresh:(y.requiredParams||[]).reduce((function(e,t){return t.uniqueView?Bt(Bt({},e),{},(0,a.Z)({},t.id,!0)):e}),{})});return x=null,P=null,C=null,S=null,O=null,b=null,I=null,F=null,T=null,L}))},Xt=["data","type","updateEvery"];function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $t=["checkPeriod"];function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nn={table:Qt,log:Qt,default:function(e,t){var n=t.data,r=t.type,a=t.updateEvery,o=(0,m.Z)(t,Xt);e(Yt(Yt(Yt({},Lt.Zn.default),o),{},{data:n,updateEvery:a,type:r,loading:!1,loaded:!0}))}},rn={default:{fetch:Kt.Ru,isEnabled:function(e){var t=e.nodeIds,n=e.fn,r=e.after;return!(null===t||void 0===t||!t.length)&&!!n&&!!r}},feed:{fetch:Kt.bj,isEnabled:function(e){var t=e.roomId,n=e.fn;return!!t&&!!n}}},an=function(e){var t=(0,c.by)(),n=t.after,r=t.before,a=t.highlight;return(0,o.useMemo)((function(){return n>0?[function(){return{after:n,before:r}},n,r,e||a.before]:[function(){var e=Date.now();return{after:e+1e3*n,before:e}},n,r,e||a.before]}),[n,r,null===a||void 0===a?void 0:a.before,e])},on=n(5429);function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var un={default:{fetch:Kt.HZ,isEnabled:function(e){var t=e.nodeIds,n=e.fn;return!(null===t||void 0===t||!t.length)&&!!n}},feed:{fetch:function(){return Promise.resolve({data:{type:"table"}})},isEnabled:function(){return!0}}},sn=function(e,t,n){var a=(0,y.th)(),o=(0,h.Xw)(e),l=(0,k.zp)(),i=(0,r.Z)(l,1)[0].loading,c=un[t]||un.default,s=c.fetch,d=c.isEnabled,f=(0,u.mO)(n),m=(0,r.Z)(f,2),p=m[0].infoLoaded,v=m[1],g=an(),b=(0,r.Z)(g,1)[0],x=(0,u.KO)(n.extraKey),E=x.loaded,w=x.error;return(0,on.Z)((function(){return{enabled:!p&&E&&!w&&!i&&d({nodeIds:e,fn:t}),fetch:function(){return s({spaceId:a,cloudNodeIds:o,nodeIds:e,fn:t,after:b().after,before:b().before})},onFail:function(e){var t,n;null===(t=e)||void 0===t||null===(t=t.response)||void 0===t||!t.status||400!==e.response.status&&304!==e.response.status?(null!==(n=e)&&void 0!==n&&null!==(n=n.response)&&void 0!==n&&n.data&&(e=e.response.data),v({error:e})):v((function(e){return cn(cn({},e),{},{infoLoaded:!0})}))},onSuccess:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v((function(t){return cn(cn(cn({},Lt.Zn[e.type]||Lt.Zn.default),t),{},{hasHistory:e.hasHistory||!1,acceptedParams:e.acceptedParams||[],requiredParams:e.requiredParams||[],type:e.type,help:e.help,infoLoaded:!0})}))}}}),[p,E,t,i,!(null!==e&&void 0!==e&&e.length),null===e||void 0===e?void 0:e[0]]),w},dn=n(92501),fn=n(26495),mn=n(36337),pn=n(19221),vn=n(23148),gn=(0,vt.cn)({key:"chartjs",default:{navigation:"pan"}});function hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bn=(0,vt.CG)({key:"feedChartState",get:function(e){var t=e.key;return function(e){var n=(0,e.get)(gn);return t?n[t]:n}},set:function(e){var t=e.key;return function(e,n){(0,e.set)(gn,(function(e){return t?yn(yn({},e),{},(0,a.Z)({},t,n)):yn(yn({},e),n)}))}}}),xn=function(e){return(0,vt.sJ)(bn({key:e}))},En=function(e){return(0,vt.Zl)(bn({key:e}))},wn=n(85672),On=(n(41203),(0,K.default)(v.Button).attrs((function(e){return{flavour:"borderless",iconColor:e.active?"textDescription":"border",iconSize:"small",padding:[.5],small:!0}})).withConfig({displayName:"styled__Button",componentId:"sc-8s0lqd-0"})(["&&{background-color:",";height:20px;width:20px;&:hover{background-color:",";.button-icon__color{fill:",";}}}"],(function(e){var t=e.theme;return e.active?(0,v.getColor)("borderSecondary")({theme:t}):"initial"}),(function(e){var t=e.theme;return(0,v.getColor)("borderSecondary")({theme:t})}),(function(e){var t=e.theme;return(0,v.getColor)("textDescription")({theme:t})}))),Cn=(0,K.default)(v.Flex).attrs({padding:[.5],gap:1,round:!0,border:{side:"all",color:"borderSecondary"}}).withConfig({displayName:"styled__Container",componentId:"sc-8s0lqd-1"})(["position:absolute;top:18px;right:8px;background:",";&:hover{background:",";}"],(0,v.getRgbColor)("elementBackground",.5),(0,v.getColor)("elementBackground")),Pn=["testIdPrefix"],Zn=(0,o.forwardRef)((function(e,t){var n,a=e.testIdPrefix,l=(0,m.Z)(e,Pn),i=(0,c.I0)(),u=(0,r.Z)(i,2),s=u[0],d=s.after,f=s.before,v=u[1],g=[xn(n="navigation"),En(n)],h=(0,r.Z)(g,2),y=h[0],b=h[1],x=(0,o.useCallback)((function(e){var t=d,n=f;if(d<0){var r=Date.now();t=r+1e3*d,n=r}var a=e*Math.round((n-t)/4);v({after:t+a,before:n-a})}),[d,f]),E=d>0&&Math.abs(f-d)<2e3||-1===d;return o.createElement(Cn,(0,p.Z)({"data-testid":"chartToolbox","data-track":"chart-toolbox::hover-chart::".concat(a),"data-toolbox":"true",ref:t},l),o.createElement(On,{active:"pan"===y,"data-testid":"chartToolbox-pan","data-track":"chart-toolbox::pan-click::".concat(a),icon:"panTool",onClick:function(){return b("pan")},title:"Pan"}),o.createElement(On,{active:"highlight"===y,"data-testid":"chartToolbox-highlight","data-track":"chart-toolbox::highlight-click::".concat(a),icon:"highlightArea",onClick:function(){return b("highlight")},title:"Highlight"}),o.createElement(On,{active:"zoom"===y,"data-testid":"chartToolbox-zoom","data-track":"chart-toolbox::zoom-click::".concat(a),disabled:E,icon:"dragHorizontal",onClick:function(){b("zoom")},title:"Select and zoom"}),o.createElement(On,{"data-testid":"chartToolbox-zoomIn","data-track":"chart-toolbox::zoom-in-click::".concat(a),disabled:E,icon:"zoomIn",onClick:function(){x(1)},title:"Zoom in"}),o.createElement(On,{"data-testid":"chartToolbox-zoomOut","data-track":"chart-toolbox::zoom-out-click::".concat(a),icon:"zoomOut",onClick:function(){x(-1)},title:"Zoom out"}),o.createElement(On,{"data-testid":"chartToolbox-zoomReset","data-track":"chart-toolbox::zoom-reset-click::".concat(a),disabled:-900===d&&0===f,icon:"zoomReset",onClick:function(){v({after:-900,before:0})},title:"Zoom reset"}))}));function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var In={after:null,before:null};vn.kL.register(mn.Z,vn.vn,vn.ZL,vn.uw,vn.De,vn.f$,vn.FB,vn.u,pn.ZP);var Fn=function(e){var t,n=e.paramsKey,a=e.testIdPrefix,l=(0,o.useRef)(),i=(0,o.useContext)(K.ThemeContext),s=(0,c.I0)(),d=(0,r.Z)(s,2),f=d[0],m=d[1],p=(0,o.useState)([]),g=(0,r.Z)(p,2),h=g[0],y=g[1],b=(0,o.useState)(In),x=(0,r.Z)(b,2),E=x[0],w=x[1],O=(0,o.useState)(!1),C=(0,r.Z)(O,2),P=C[0],Z=C[1],j=(0,o.useState)(!1),k=(0,r.Z)(j,2),I=k[0],F=k[1],T=(0,o.useState)([]),D=(0,r.Z)(T,2),L=D[0],z=D[1],N=(0,o.useState)(null),A=(0,r.Z)(N,2),M=A[0],R=A[1],B=(0,o.useState)("second"),V=(0,r.Z)(B,2),q=V[0],H=V[1],W=(0,S.Z)(!1),G=(0,r.Z)(W,4),U=G[0],Q=G[2],X=G[3],J=(0,u.ZQ)(n).aggregations,Y=xn().navigation,$=(0,_.rA)(),ne=$.localeTimeString,re=$.localeDateString,ae=an(),oe=(0,r.Z)(ae,1)[0],le=oe.before-oe.after,ie=(0,o.useMemo)((function(){var e=Date.now();return{min:oe.after-le,max:0===f.before?oe.before:e<oe.before+le?e:oe.before+le}}),[oe.after,oe.before,f.before]),ce=[{backgroundColor:(0,v.getColor)("primary")({theme:i}),borderWidth:0,data:h,label:"Histogram",maxBarThickness:50,minBarLength:0}];(0,o.useEffect)((function(){var e;if(null!==J&&void 0!==J&&null!==(e=J.event_histogram)&&void 0!==e&&null!==(e=e.hits)&&void 0!==e&&e.buckets){var t=J.event_histogram.hits.buckets.reduce((function(e,t){var n=t.key,r=t.doc_count;return{data:[].concat((0,ee.Z)(e.data),[r]),labels:[].concat((0,ee.Z)(e.labels),[n])}}),{data:[],labels:[]}),n=(0,te.BZ)(f.after,f.before)||{};y(t.data),z(t.labels),R(null),H(n.unit)}}),[null===J||void 0===J||null===(t=J.event_histogram)||void 0===t||null===(t=t.hits)||void 0===t?void 0:t.buckets]);var ue=(0,o.useMemo)((function(){return{animation:!1,interaction:{axis:"x"},maintainAspectRatio:!1,plugins:{annotation:{annotations:kn({},E.after&&E.before?{annotation:{type:"box",backgroundColor:"rgba(128,128,128,0.3)",borderDash:[1,5,1,1],borderWidth:1,xMax:E.before,xMin:E.after,xScaleID:"x"}}:{})},legend:{align:"start",display:!1,position:"bottom"},zoom:{limits:{x:ie},pan:{enabled:"pan"===Y&&!P,mode:"x",onPanStart:function(e){e.chart.canvas.style.cursor="grabbing"},onPanComplete:function(e){var t=e.chart;t.canvas.style.cursor="default";var n=t.scales.x,r=n.min,a=n.max;R({min:Math.round(r),max:Math.round(a)}),m({after:Math.round(r),before:Math.round(a)}),t.update()},threshold:1},zoom:{drag:{enabled:"zoom"===Y||P},mode:"x",onZoomStart:function(e){e.chart.canvas.style.cursor="col-resize"},onZoomComplete:function(e){var t=e.chart;if("zoom"===Y||P){t.canvas.style.cursor="default";var n=t.scales.x,r=n.min,a=n.max;m({after:Math.round(r),before:Math.round(a)}),Z(!1)}}}}},responsive:!0,scales:{x:kn({type:"time",grid:{drawBorder:!0,drawOnChartArea:!1,drawTicks:!0,offset:!1},parsing:!1,ticks:kn({color:(0,v.getColor)("textLite")({theme:i}),font:{size:11},autoSkip:!0,maxTicksLimit:20},"minute"===q&&le>=1e3*wn.Kl?{callback:function(e){var t=re(e,{month:"2-digit",day:"2-digit",year:"numeric",long:!1,dateStyle:void 0}).split("/").reverse().slice(1).join("-"),n=ne(e,{secs:!1});return"".concat(t," ").concat(n)}}:{}),time:{displayFormats:{week:"yyyy-MM-dd",day:"MM-dd",hour:"MM-dd HH:mm",minute:"HH:mm",second:"HH:mm:ss"},tooltipFormat:"yyyy-MM-dd HH:mm:ss",unit:q||"second"}},M?{min:M.min,max:M.max}:{}),y:{beginAtZero:!0,ticks:{precision:0,color:(0,v.getColor)("textLite")({theme:i}),font:{size:11}}}}}}),[E,le,P,Y,M,R,q,ie]);if((0,o.useEffect)((function(){var e=function(e){"Shift"===e.key&&(e.preventDefault(),Z(!0))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),!h.length)return null;return o.createElement(v.Flex,{position:"relative",height:{min:50},onMouseEnter:Q,onMouseLeave:X},U&&o.createElement(Zn,{testIdPrefix:a}),o.createElement(fn.$Q,{data:{datasets:ce,labels:L},onMouseDown:function(e){if(e.preventDefault(),"highlight"===Y){F(!0);var t=e.nativeEvent.offsetX||e.nativeEvent.layerX,n=l.current;n.canvas.style.cursor="crosshair",w({after:Math.round(n.scales.x.getValueForPixel(t)),before:null})}},onMouseMove:function(e){if(e.preventDefault(),"highlight"===Y&&I){var t=e.nativeEvent.offsetX||e.nativeEvent.layerX,n=l.current;w((function(e){return kn(kn({},e),{},{before:Math.round(n.scales.x.getValueForPixel(t))})}))}},onMouseUp:function(e){e.preventDefault(),F(!1);var t=e.nativeEvent.offsetX||e.nativeEvent.layerX,n=l.current;n.canvas.style.cursor="default",E.after===Math.round(n.scales.x.getValueForPixel(t))?w(In):w(E)},options:ue,ref:l}))},Tn=n(64637),Sn={none:!0,facet:!0},Dn=function(e,t){var n=(0,u.ZQ)({extraKey:e}),r=n.loaded,a=n.loading,l=n.columns,i=n.sortedColumns,c=(0,o.useRef)([]);return(0,o.useMemo)((function(){return!r||a||(c.current=(i||[]).reduce((function(e,n){return l[n]&&l[n].filter&&!Sn[l[n].filter]?[].concat((0,ee.Z)(e),[t(n,l)]):e}),[])),c.current}),[r,a])},Kn=(n(68216),n(79433),n(91038),n(78783),n(66992),n(33948),n(70189),n(88921),n(96248),n(13599),n(11477),n(64362),n(15389),n(90401),n(45164),n(91238),n(54837),n(87485),n(56767),n(76651),n(61437),n(35285),n(39865),{sum:function(e){return e.reduce((function(e,t){return e+("number"===typeof t?t:0)}),0)},min:function(e){var t;return e.forEach((function(e){null!=e&&(t>e||void 0===t&&e>=e)&&(t=e)})),t},max:function(e){var t;return e.forEach((function(e){null!=e&&(t<e||void 0===t&&e>=e)&&(t=e)})),t},extent:function(e){var t,n;return e.forEach((function(e){null!=e&&(void 0===t?e>=e&&(t=n=e):(t>e&&(t=e),n<e&&(n=e)))})),[t,n]},mean:function(e){var t=0,n=0;if(e.forEach((function(e){null!=e&&(e=+e)>=e&&(++t,n+=e)})),t)return n/t},median:function(e){if(e.length&&(t=e,Array.isArray(t)&&t.every((function(e){return"number"===typeof e})))){var t;if(1===e.length)return e[0];var n=Math.floor(e.length/2),r=e.sort((function(e,t){return e-t}));return e.length%2!==0?r[n]:(r[n-1]+r[n])/2}},unique:function(e){return Array.from(new Set(e.map((function(e){return e}))).values())},uniqueCount:function(e){return new Set(e.map((function(e){return e}))).size},count:function(e){return e.length}}),Ln=["sortByValue"];function zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var An=function(e){return{label:e,value:e}},Mn=(0,o.memo)((function(e){var t=e.paramsKey,n=e.initData,l=e.initFilter,i=(0,u.ZQ)(t),c=i.charts,s=i.loaded,d=i.columns,f=Et(t),p=(0,o.useContext)(K.ThemeContext),g=Object.keys(c).map(An),h=Dn(t.extraKey,An),y=(0,o.useState)(n),b=(0,r.Z)(y,2),x=b[0],E=b[1],w=(0,o.useState)(l),O=(0,r.Z)(w,2),C=O[0],P=O[1],Z=(0,u.CE)(t);(0,o.useEffect)((function(){E(n)}),[n]),(0,o.useEffect)((function(){P(l)}),[l]);var j=(0,o.useMemo)((function(){if(!c[x])return{datasets:[],labels:[]};var e=c[x].columns.reduce((function(e,t){var n,r=function(e,t,n){return e.reduce((function(e,r){return e[r[n]]||(e[r[n]]={label:r[n],data:[]}),e[r[n]].data.push(r[t]),e}),{})}(f,t,C),o=(null===(n=d[t])||void 0===n?void 0:n.summary)||"count",l=Kn[o];return Object.keys(r).forEach((function(n){var o,i=l(r[n].data);e[r[n].label]=Nn(Nn({},e[r[n].label]),{},(o={},(0,a.Z)(o,t,i),(0,a.Z)(o,"label",r[n].label),(0,a.Z)(o,"sortByValue",e[r[n].label]&&e[r[n].label].sortByValue>i?e[r[n].label].sortByValue:i),o))})),e}),{}),t=Object.values(e).sort((function(e,t){return t.sortByValue-e.sortByValue})).slice(0,15).map((function(e){e.sortByValue;return(0,m.Z)(e,Ln)}));return{datasets:c[x].columns.map((function(e,n){return{backgroundColor:wn.vK[n],borderWidth:0,data:t.map((function(t){return t[e]})),label:e,maxBarThickness:50,minBarLength:0}})),labels:t.map((function(e){return e.label}))}}),[Z,c,x,C,f]),k={animation:!1,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{boxWidth:4,boxHeight:20,title:{color:(0,v.getColor)("textLite")({theme:p})}}}},responsive:!0,scales:{x:{stacked:!0,grid:{color:(0,v.getColor)("borderSecondary")({theme:p})},afterSetDimensions:function(e){e.maxHeight=50},ticks:{callback:function(e,t){var n=j.labels[t];if(n){for(var r=0;(null===(a=n)||void 0===a?void 0:a.length)>20;){var a;n=(0,Tn.a)(n,r),r+=1}return n}}}},y:{stacked:!0,grid:{color:(0,v.getColor)("borderSecondary")({theme:p})},afterSetDimensions:function(e){e.maxWidth=50}}}},T=(0,I.useHovered)({},[s]),S=(0,r.Z)(T,2),D=S[0],L=S[1],z=(0,F.Z)();return(0,o.useEffect)((function(){z(L)}),[L]),o.createElement(v.Flex,{column:!0,"data-testid":"functionsCharts",gap:3,width:"50%",background:"mainChartBg",border:{side:"all",color:"mainChartBorder"},padding:[4],round:.5},o.createElement(v.Flex,{alignItems:"center","data-testid":"functionsChart".concat(x,"-selects"),gap:2},o.createElement(v.Select,{"data-ga":"functions-chart-".concat(x,"::select-data::functions-view"),"data-testid":"functionsChart".concat(x,"-dataSelect"),isLoading:!s,onChange:function(e){var t=e.value;return E(t)},options:g,styles:{size:"tiny",minWidth:120},value:{label:x,value:x}}),o.createElement(v.Text,{"data-testid":"functionsChart".concat(x,"-perLabel"),color:"textLite"},"per"),o.createElement(v.Select,{"data-ga":"functions-chart-".concat(C,"::select-filter::functions-view"),"data-testid":"functionsChart".concat(C,"-filterSelect"),isLoading:!s,onChange:function(e){var t=e.value;return P(t)},options:h,styles:{size:"tiny",minWidth:120},value:{label:C,value:C}})),o.createElement(v.Flex,{position:"relative",height:{min:60},width:{min:"100%"},ref:D},o.createElement(fn.$Q,{data:j,options:k})))})),Rn=Mn,Bn=n(24281),_n=(n(91058),n(36358)),Vn=n(33937),qn=(n(63840),n(51834),n(58802),{dark:{publicColor:"#FF9700",privateColor:"#0075A2",serverColor:"#00a44a",clientColor:"#DB162F",otherColor:"#3E4551",appFontColor:"#AEBBBB",appFontFamily:"Courier New, monospace",appFontSize:"12px",appFontWeight:"regular",borderFontColor:"#EDF0F0",borderFontFamily:"Courier New, monospace",borderFontSize:"14px",borderFontWeight:"bold"},light:{publicColor:"#BFA142",privateColor:"#197EA8",serverColor:"#339979",clientColor:"#CD6364",otherColor:"#AFB5BA",appFontColor:"#526161",appFontFamily:"Courier New, monospace",appFontSize:"12px",appFontWeight:"regular",borderFontColor:"#5D7070",borderFontFamily:"Courier New, monospace",borderFontSize:"14px",borderFontWeight:"bold"}}),Hn=o.memo((function(e){var t=e.data,n=e.width,r=e.height,a=(0,o.useRef)(),l=(0,o.useRef)({}),i=(0,Vn.Ro)("theme"),c=(0,St.Z)(t),u=(0,St.Z)(n),s=(0,St.Z)(r),d=(0,o.useRef)({}),f=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=!e&&(0,$.ZP)(t,c);d.current=a?d.current:t.reduce((function(e,t){return e[t.Process]||(e[t.Process]={listen:0,inbound:0,outbound:0,local:0,private:0,public:0,total:0,name:t.Process}),e[t.Process].total+=t.Count,"listen"===t.Direction?e[t.Process].listen+=t.Count:"local"===t.Direction?e[t.Process].local+=t.Count:"inbound"===t.Direction?e[t.Process].inbound+=t.Count:"outbound"===t.Direction&&(e[t.Process].outbound+=t.Count),"public"===t.RemoteAddressSpace?e[t.Process].public+=t.Count:"private"===t.RemoteAddressSpace&&(e[t.Process].private+=t.Count),e}),{});var o;function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(7!==e.length||"#"!==e[0])throw new Error("Invalid hex color format");var n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);return"rgba(".concat(n,", ").concat(r,", ").concat(a,", ").concat(t,")")}function s(e,t,n,r,a){var o=t/2,i=n/2;!function(e){e.selectAll(".app").each((function(e){e&&(l.current[e.name]={x:e.x,y:e.y})}))}(e);var c=_n.scaleOrdinal().domain(["public","private","listenInbound","outbound","others"]).range([a.publicColor,a.privateColor,a.serverColor,a.clientColor,a.otherColor]),u=_n.pie().value((function(e){return e.value})),s=_n.arc(),v=e.selectAll(".app").data(Object.values(d.current),(function(e){return e.name}));v.exit().transition().style("opacity",0).remove();var g=v.enter().append("g").attr("class","app").attr("transform",(function(e){var t=l.current[e.name];return"translate(".concat((null===t||void 0===t?void 0:t.x)||o,", ").concat((null===t||void 0===t?void 0:t.x)||i,")")}));g.each((function(e){var t=_n.select(this),n=u(e.d3.pie),r=e.d3.size;t.selectAll("path").data(n).enter().append("path").transition().attr("fill",(function(e,t){return c(t)})),t.append("text").text((function(e){return e.name})).attr("text-anchor","middle").attr("y",r+10).style("font-family",a.appFontFamily).style("font-size",a.appFontSize).style("font-weight",a.appFontWeight).style("fill",a.appFontColor)}));var h=g.merge(v);return h.each((function(e){var t=_n.select(this),n=l.current[e.name]||function(e){return e.d3.isListener?{x:e.d3.x,y:e.d3.y}:{x:o,y:i}}(e);e.x=n.x,e.y=n.y,t.selectAll("path").data(u(e.d3.pie)).transition().attr("d",s.innerRadius(0).outerRadius(e.d3.size)),t.select("text").transition().attr("y",e.d3.size+10)})),h.call(_n.drag().on("start",f).on("drag",m).on("end",p)),h}function f(e,t){e.active||o.alphaTarget(1).restart(),t.fx=t.x,t.fy=t.y}function m(e,t){t.fx=e.x,t.fy=e.y}function p(e,t){e.active||o.alphaTarget(0),t.fx=null,t.fy=null}!function(t,l){var i=_n.select("#d3-canvas").select("svg");!function(e,t,n){if(!a){var r=e/2-n,o=t/2-n,l=Math.min(2*r/3-n,2*o/3-n,Math.max(5,Math.min(e,t)/Object.keys(d.current).length)+13),i=Object.values(d.current),c={total:_n.max(i,(function(e){return e.total})),local:_n.max(i,(function(e){return e.local})),listen:_n.max(i,(function(e){return e.listen})),private:_n.max(i,(function(e){return e.private})),public:_n.max(i,(function(e){return e.public})),inbound:_n.max(i,(function(e){return e.inbound})),outbound:_n.max(i,(function(e){return e.outbound}))},u=_n.scaleLog().domain([1,c.total]).range([13,l]).clamp(!0),s=0,f=0,m=0,p=t-n;i.forEach((function(a){var l=_n.scaleLog().domain([1,a.total+1]).range([0,r-n]),i=_n.scaleLog().domain([1,a.total+1]).range([0,r-n]),v=_n.scaleLog().domain([1,a.total+1]).range([0,o-n]),g=_n.scaleLog().domain([1,a.total+1]).range([0,o-n]);d.current[a.name].forces={total:a.total/c.total,local:a.local/c.local,listen:a.listen/c.listen,private:a.private/c.private,public:a.public/c.public,inbound:a.inbound/c.inbound,outbound:a.outbound/c.outbound},d.current[a.name].pos={right:l(a.public+1),left:i(a.private+1),top:v(a.outbound+1),bottom:g((a.listen+a.inbound)/2+1)};var h=a.total-(a.public+a.private+a.listen+a.inbound+a.outbound),y=n+r+d.current[a.name].pos.right-d.current[a.name].pos.left,b=n+o+d.current[a.name].pos.bottom-d.current[a.name].pos.top,x=u(a.total);a.listen===a.total&&(x=10,m===f&&50*s>2*e/3&&(s=0,m=0,f=0,p-=80),s?m>=f?(f++,y=e/2+50*f,b=p-x-(f%2===0?0:40)):(m++,y=e/2-50*m,b=p-x-(m%2===0?0:40)):(y=e/2,b=p-x),s++),d.current[a.name].d3={isListener:a.listen===a.total,x:y,y:b,size:x,pie:[{value:a.public},{value:a.private},{value:a.listen+a.inbound},{value:a.outbound},{value:h>0?h:0}]},d.current[a.name].d3.x-d.current[a.name].d3.size/2<n&&(d.current[a.name].d3.x=n+2*d.current[a.name].d3.size),d.current[a.name].d3.x+d.current[a.name].d3.size/2>e&&(d.current[a.name].d3.x=e-2*d.current[a.name].d3.size),d.current[a.name].d3.y-d.current[a.name].d3.size/2<n&&(d.current[a.name].d3.y=n+2*d.current[a.name].d3.size),d.current[a.name].d3.y+d.current[a.name].d3.size/2>t&&(d.current[a.name].d3.y=t-2*d.current[a.name].d3.size)}))}}(n,r,t),(i.empty()||e)&&function(e,t,n,r,a){_n.select("#d3-canvas").selectAll("svg > *").remove();var o=n/2,l=e.append("defs").append("linearGradient").attr("id","clientsGradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");l.append("stop").attr("offset","0%").style("stop-color",u(a.clientColor,1)),l.append("stop").attr("offset","100%").style("stop-color",u(a.clientColor,0)),e.append("rect").attr("x",0).attr("y",0).attr("width","100%").attr("height",r/2).style("fill","url(#clientsGradient)"),e.append("text").text("Clients").attr("x","50%").attr("y",12).attr("text-anchor","middle").style("font-family",a.borderFontFamily).style("font-size",a.borderFontSize).style("font-weight",a.borderFontWeight).style("fill",a.borderFontColor);var i=e.append("defs").append("linearGradient").attr("id","serversGradient").attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%");i.append("stop").attr("offset","0%").style("stop-color",u(a.serverColor,1)),i.append("stop").attr("offset","100%").style("stop-color",u(a.serverColor,0)),e.append("rect").attr("x",0).attr("y",n-r/2).attr("width","100%").attr("height",r/2).style("fill","url(#serversGradient)"),e.append("text").text("Servers").attr("x","50%").attr("y",n-4).attr("text-anchor","middle").style("font-family",a.borderFontFamily).style("font-size",a.borderFontSize).style("font-weight",a.borderFontWeight).style("fill",a.borderFontColor);var c=e.append("defs").append("linearGradient").attr("id","publicGradient").attr("x1","100%").attr("y1","0%").attr("x2","0%").attr("y2","0%");c.append("stop").attr("offset","0%").style("stop-color",u(a.publicColor,1)),c.append("stop").attr("offset","100%").style("stop-color",u(a.publicColor,0)),e.append("rect").attr("x",t-r/2).attr("y",0).attr("width",r/2).attr("height","100%").style("fill","url(#publicGradient)"),e.append("text").text("Public").attr("x",t-r/2).attr("y",o-10).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform","rotate(90, ".concat(t-r/2,", ").concat(o,")")).style("font-family",a.borderFontFamily).style("font-size",a.borderFontSize).style("font-weight",a.borderFontWeight).style("fill",a.borderFontColor);var s=e.append("defs").append("linearGradient").attr("id","privateGradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");s.append("stop").attr("offset","0%").style("stop-color",u(a.privateColor,1)),s.append("stop").attr("offset","100%").style("stop-color",u(a.privateColor,0)),e.append("rect").attr("x",0).attr("y",0).attr("width",r/2).attr("height","100%").style("fill","url(#privateGradient)"),e.append("text").text("Private").attr("x",r/2).attr("y",o).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("transform","rotate(-90, ".concat(r/2-10,", ").concat(o,")")).style("font-family",a.borderFontFamily).style("font-size",a.borderFontSize).style("font-weight",a.borderFontWeight).style("fill",a.borderFontColor)}(i=i.empty()?_n.select("#d3-canvas").append("svg").attr("width","100%").attr("height","100%"):i,n,r,t,l);var c=s(i,n,r,0,l);o=_n.forceSimulation(Object.values(d.current)).force("x",_n.forceX((function(e){return e.d3.x})).strength((function(e){return e.d3.isListener?.2:.1}))).force("y",_n.forceY((function(e){return e.d3.y})).strength((function(e){return e.d3.isListener?.2:.1}))).force("collision",_n.forceCollide((function(e){return 1.1*e.d3.size+15})).strength(1)).on("tick",(function(){c.each((function(e){e.x>n-t?e.x=n-t:e.x<t&&(e.x=t),e.y>r-t?e.y=r-t:e.y<t&&(e.y=t)})),c.attr("transform",(function(e){return"translate(".concat(e.x,", ").concat(e.y,")")}))}))}(40,qn[i]||qn.dark)};return(0,o.useLayoutEffect)((function(){n&&r&&f(u!==n||s!==r)}),[t,n,r,i]),o.createElement(v.Flex,{id:"d3-canvas",ref:a,width:"100%",height:"100%",flex:!0,round:!0,overflow:"hidden"})})),Wn={"network-viewer":Hn},Gn=(0,o.memo)((function(e){var t,n=e.paramsKey,a=e.customCharts,l=null===(t=Object.values(a))||void 0===t||null===(t=t[0])||void 0===t?void 0:t.type,i=Wn[l],c=Et(n),u=(0,I.useHovered)({},[]),s=(0,r.Z)(u,2),d=s[0],f=s[1],m=(0,F.Z)();(0,o.useEffect)((function(){m(f)}),[f]);var p=(0,Bn.Z)(),g=(0,r.Z)(p,2),h=g[0],y=g[1],b=y.width,x=y.height;return i?o.createElement(v.Flex,{column:!0,"data-testid":"functionsCharts",gap:3,width:"100%",background:"mainChartBg",round:.5},o.createElement(v.Flex,{position:"relative",height:{min:100},width:{min:"100%"},ref:(0,v.mergeRefs)(d,h)},o.createElement(i,{data:c,width:b,height:x}))):"No chart found"})),Un=n(16978),Qn=n(24298),Xn=n(96415),Jn=n(70873),Yn=n(43460),$n=n(9058),er=n(54576),tr=n(61003),nr=n(3701),rr=function(e){var t=e.fn,n=e.histograms,a=e.selectedId,l=e.disabled,i=(0,er.useChart)(),u=(0,be.UL)(),s=(0,o.useMemo)((function(){return n.map((function(e){var t=e.id,n=e.name;return{value:t,label:n,"data-track":i.track("select-histogram-".concat(n))}}))}),[n]),d=(0,c.I0)("histogram",{defaultValue:[a],key:u,extraKey:"".concat(t,"Filters"),flavour:"val"}),f=(0,r.Z)(d,2),m=f[0],p=f[1],v=m[0];return o.createElement(tr.Z,{value:v,items:s,dropProps:{align:{top:"bottom",right:"right"},"data-toolbox":!0},onChange:function(e){return p([e])},"data-track":i.track("selectHistogram"),dropdownProps:{width:"150px"}},o.createElement(nr.Button,{disabled:l},"Source"))},ar=(0,o.memo)(rr),or=function(e){return function(t){return"histogram::".concat(e.getAttribute("id"),"::").concat(t)}},lr={width:"108px",height:"77px"},ir=function(e){var t=e.nodeId,n=e.fn,a=e.paramsKey,l=(0,u.ZQ)(a),i=l.availableHistograms,c=l.histogram,s=l.help,d=l.pagination,m=l.data,p=(0,u.hx)(),g=(0,$n.e)(),h=(0,o.useRef)();h.current=function(){return Promise.resolve(null===c||void 0===c?void 0:c.chart)};var y=(0,o.useMemo)((function(){var e="".concat(t,"-").concat(n),r=g.makeChart({attributes:{id:e,info:s},getChart:function(){return h.current()},makeTrack:or});return g.getRoot().appendChild(r),[r,E]}),[t,n]),b=(0,r.Z)(y,2),x=b[0],E=b[1];(0,o.useEffect)((function(){return x.trigger("fetch")}),[c]);var w=(0,u.MT)(),O=(0,r.Z)(w,2),C=O[0],P=O[1];(0,o.useEffect)((function(){if(x)return(0,Qn.unregister)(x.on("highlightClick",(function(e){return P(e+1e3*c.chart.view.update_every)})),x.on("highlightEnd",(function(){return P(null)})))}),[x,c]),(0,o.useEffect)((function(){var e;return!!i&&x.updateAttributes({toolboxElements:[function(e){var t=e.disabled;return o.createElement(ar,{histograms:i,fn:n,selectedId:c.id,disabled:t})},Yn.default,Xn.default,Jn.default],title:null===c||void 0===c||null===(e=c.chart)||void 0===e||null===(e=e.view)||void 0===e?void 0:e.title})}),[i]),(0,o.useEffect)((function(){if(p&&x&&d){var e=m[p],t=Math.floor((null===e||void 0===e?void 0:e[null===d||void 0===d?void 0:d.column])/1e6);t&&!isNaN(t)&&x.updateAttribute("hoverX",[1e3*Math.floor(t-t%c.chart.view.update_every),null])}}),[m,c,p]),(0,o.useEffect)((function(){C&&x&&d&&x.updateAttribute("clickX",[C,null])}),[C]),(0,o.useEffect)((function(){return function(){return x&&x.destroy()}}),[x]);var Z=(0,I.useHovered)({},[]),j=(0,r.Z)(Z,2),k=j[0],T=j[1],S=(0,F.Z)();return(0,o.useEffect)((function(){S(T)}),[T]),o.createElement(v.Flex,{flex:!1,width:"100%",height:75,ref:k},x?o.createElement(Un.Z,{"data-chartid":E,chart:x,overflow:"hidden",hasFilters:!1}):o.createElement(f.Z,{iconProps:lr,title:"Loading chart..."}))},cr=["margin","defaultCharts","hasCustom"],ur=["margin","hasHistogram"],sr=["margin"],dr=["paramsKey","testIdPrefix","availableFns","availableFnsLoaded","hasError"];function fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pr={extraKey:"fn"},vr=(0,o.memo)((function(e){var t=e.margin,n=e.defaultCharts,a=e.hasCustom,l=(0,m.Z)(e,cr),i=(0,S.Z)(!a),c=(0,r.Z)(i,2),u=c[0],s=c[1];return null!==n&&void 0!==n&&n.length?o.createElement(v.Flex,{column:!0},o.createElement(v.Flex,{alignItems:"center",justifyContent:"end",gap:1,onClick:s,cursor:"pointer"},o.createElement(v.TextMicro,{color:"textLite"},u?"Collapse":"Expand"," charts"),o.createElement(v.Icon,{name:"chevron_down",color:"textLite",rotate:u?0:3})),o.createElement(v.Collapsible,{open:u},o.createElement(v.Flex,{gap:4,margin:t},n.map((function(e,t){var n=(0,r.Z)(e,2),a=n[0],i=n[1];return o.createElement(Rn,(0,p.Z)({key:t,initData:a,initFilter:i},l))}))))):null})),gr=(0,o.memo)((function(e){var t=e.margin,n=e.hasHistogram,a=void 0!==n&&n,l=(0,m.Z)(e,ur),i=(0,S.Z)(!0),c=(0,r.Z)(i,2),u=c[0],s=c[1];return a?o.createElement(v.Flex,{column:!0},o.createElement(v.Flex,{alignItems:"center",justifyContent:"end",gap:1,onClick:s,cursor:"pointer"},o.createElement(v.TextMicro,{color:"textLite"},u?"Collapse":"Expand"," histogram"),o.createElement(v.Icon,{name:"chevron_down",color:"textLite",rotate:u?0:3})),o.createElement(v.Collapsible,{open:u},o.createElement(v.Flex,{gap:4,margin:t},o.createElement(ir,l)))):null})),hr=(0,o.memo)((function(e){var t=e.margin,n=(0,m.Z)(e,sr),a=(0,S.Z)(!0),l=(0,r.Z)(a,2),i=l[0],c=l[1];return n.customCharts?o.createElement(v.Flex,{column:!0},o.createElement(v.Flex,{alignItems:"center",justifyContent:"end",gap:1,onClick:c,cursor:"pointer"},o.createElement(v.TextMicro,{color:"textLite"},i?"Collapse":"Expand"," chart"),o.createElement(v.Icon,{name:"chevron_down",color:"textLite",rotate:i?0:3})),o.createElement(v.Collapsible,{open:i},o.createElement(v.Flex,{gap:4,margin:t},o.createElement(Gn,n)))):null})),yr={fn:{Chart:vr,CustomChart:hr,loadingMessage:"Loading function...",item:"functions"},logs:{Chart:gr,CustomChart:hr,loadingMessage:"Loading logs...",item:"logs"},feed:{Chart:Fn,CustomChart:hr,loadingMessage:"Loading events...",item:"events"}},br={table:It},xr=(0,o.memo)((function(e){var t=e.paramsKey,n=void 0===t?pr:t,a=e.testIdPrefix,l=void 0===a?"functions":a,i=e.availableFns,s=e.availableFnsLoaded,d=e.hasError,b=(0,m.Z)(e,dr),x=yr[n.extraKey]||yr.fn,E=x.Chart,w=x.loadingMessage,C=(0,u.Hv)(n),P=(0,r.Z)(C,2),Z=P[0],j=P[1],T=(0,g.fX)(mr(mr({},n),{},{merge:!1,emptyIfAll:"feed"===n.extraKey})),S=(0,u.ZQ)(n),D=S.infoLoaded,K=S.loaded,L=S.data,z=S.error,N=S.type,A=S.retentionWarning,M=S.defaultCharts,R=S.histogram,B=S.missingRequired,_=S.requiredParams,V=S.customCharts,H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,r.Z)(e,1)[0],n=(0,h.iy)(t,"name");return 0===e.length?"on your nodes":1===e.length&&n?"on ".concat(n):"on your selected node"}(T);(0,o.useEffect)((function(){var e;null!==Z&&void 0!==Z&&Z.length||null===i||void 0===i||null===(e=i[0])||void 0===e||!e.name||d||j([i.reduce((function(e,t){return"undefined"===typeof e.priority||e.priority<t.priority?e:t}),i.find((function(e){return"processes"===e.name}))||i[0]).name])}),[s,Z]);var W=(0,I.useHovered)({},[K]),G=(0,r.Z)(W,2),U=G[0],Q=G[1],X=(0,F.Z)();(0,o.useEffect)((function(){X(Q)}),[Q]);var J=sn(T,Z[0],n),ee=function(e,t,n){var a=(0,y.th)(),l=(0,be.vf)(),i=(0,q.o8)(),s=(0,c.tk)("pollingInterval",tn({flavour:"int"},n)),d=(0,c.tk)("slice",tn({defaultValue:!0,flavour:"bool"},n)),f=(0,u.mO)(n),p=(0,r.Z)(f,2),v=p[0],g=p[1],b=(0,u.MT)(),x=(0,r.Z)(b,2),E=x[0],w=x[1],O=(0,o.useRef)();O.current=v;var C=function(e){var t=e.skip,n=e.data,r=void 0===n?{}:n;!t&&r.data?((nn[r.type]||nn.default)(g,r),w((function(e){return null!==e?null:e}))):g((function(e){return tn(tn({},e),{},{tail:r.tail||!1,loading:!1})}))},P=rn[t]||rn.default,Z=P.fetch,j=P.isEnabled,I=an(E),F=(0,r.Z)(I,4),T=F[0],S=F[1],D=F[2],K=F[3],L=(0,St.Z)(K),z=(0,o.useRef)();z.current=T;var N=(0,o.useRef)();N.current=v.lastModified;var A=(0,o.useRef)();A.current=v.anchorAfter;var M=(0,be.UL)(),R=(0,c.by)(null,{key:M,extraKey:"".concat(t||n.extraKey,"Filters")}),B=(0,St.Z)(R,!0),_=(0,h.Xw)(e),V=(0,k.zp)(),H=(0,r.Z)(V,1)[0].loading;(0,o.useEffect)((function(){"feed"!==t&&(N.current=null,A.current=null,g(tn(tn({},Lt.Zn[v.type]||Lt.Zn.default),{},{type:v.type})))}),[null===e||void 0===e?void 0:e[0],t]);var W=R[Object.keys(R).find((function(e){return v.filtersToRefresh[e]&&!(0,$.ZP)(null===B||void 0===B?void 0:B[e],R[e])}))];(0,o.useEffect)((function(){"feed"!==t&&(N.current=null,A.current=null)}),[!!v.requiredParams.length&&W]),(0,o.useEffect)((function(){B&&!Tt()(B,R)&&v.loaded&&(N.current=null,A.current=null,g((function(e){return tn(tn({},e),{},{lastModified:null,anchorAfter:null,anchorBefore:null,offset:0})})))}),[!!v.aggregations&&R]),(0,o.useEffect)((function(){v.loaded&&(N.current=null,A.current=null,g((function(e){return tn(tn({},e),{},{lastModified:null,anchorAfter:null,anchorBefore:null,offset:0})})))}),[S,d]);var G=(0,o.useRef)(),U=(0,o.useRef)();U.current=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.checkPeriod,o=(0,m.Z)(n,$t),i=z.current();return g((function(e){return tn(tn({},e),{},{tail:!!o.tail,loading:!0,requestedPeriod:i})})),r&&O.current.tail&&O.current.requestedPeriod.after<i.after&&!A.current&&O.current.requestedPeriod.before-O.current.requestedPeriod.after===i.before-i.after?Promise.resolve({skip:!0}):(G.current=Z(tn(tn(tn({roomId:M,spaceId:a,nodeIds:e,cloudNodeIds:_,fn:t,roomSlug:l,filters:R,slice:d},i),o),{},{acceptedParams:v.acceptedParams,last:200})),G.current)};var Q=function(e){var t,n,r=e||{},a=r.merge,o=r.direction,l=r.dataOnly,i=r.tail;null===(t=e)||void 0===t||null===(t=t.response)||void 0===t||!t.status||400!==e.response.status&&304!==e.response.status?(null!==(n=e)&&void 0!==n&&null!==(n=n.response)&&void 0!==n&&n.data&&(e=e.response.data),g((function(t){return tn(tn({},t),{},{error:e,loaded:!0,loading:!1})})),w((function(e){return null!==e?null:e}))):g((function(t){return tn(tn({},t),{},{loaded:!0,loading:!1},!!e&&{merge:a,direction:o,dataOnly:l,tail:i})}))},X=(0,Dt.Z)((function(){return{enabled:!v.missingRequired&&v.infoLoaded&&!H&&j({nodeIds:e,fn:t,roomId:M,after:S}),fetch:function(){return U.current(!i&&S<0?tn({if_modified_since:N.current},N.current&&{direction:"forward",merge:v.hasHistory,tail:!0,delta:!0,data_only:!0,anchor:A.current,reset:!N.current&&!A.current}):!i&&function(e,t){var n=e.after;return t<e.before&&t>n}(z.current(),K)?{anchor:1e3*K,data_only:!!N.current,reset:!N.current&&!A.current}:{direction:"backward",data_only:!!N.current,checkPeriod:!0,reset:!N.current&&!A.current})},onFail:Q,onPollingFail:Q,onReceive:C,onBlurMode:function(){return O.current.loading&&g((function(e){return tn(tn({},e),{},{loading:!1})}))},polling:!i&&S<0,pollingOptions:{pollingInterval:1e3*(s||v.updateEvery),shouldPause:!0},force:!0,skip:!!L&&!K}}),[i,v.infoLoaded,v.missingRequired,M,null===e||void 0===e?void 0:e.length,null===e||void 0===e?void 0:e[0],t,s,(!!v.aggregations||!!v.requiredParams.length)&&!!B&&R,S,D,H,K,d]);return[(0,o.useCallback)((function(e){if(!O.current.loadingMore){g((function(e){return tn(tn({},e),{},{loadingMore:!0})}));var t=U.current(e);return t.then(C).catch(Q).finally((function(){return g((function(e){return tn(tn({},e),{},{loadingMore:!1})}))})),t}}),[g]),(0,o.useCallback)((function(){var e,t,n,r,a;null===X||void 0===X||null===(e=X.clearRef)||void 0===e||null===(e=e.current)||void 0===e||null===(e=e.promise)||void 0===e||null===(t=e.cancel)||void 0===t||t.call(e),clearTimeout(null===X||void 0===X||null===(n=X.clearRef)||void 0===n||null===(n=n.current)||void 0===n?void 0:n.timeoutId),null===(r=G.current)||void 0===r||null===(a=r.cancel)||void 0===a||a.call(r),g((function(e){return tn(tn({},e),{},{loaded:!0,loading:!1,loadingMore:!1})}))}),[g])]}(T,Z[0],n),te=(0,r.Z)(ee,2),ne=te[0],re=te[1];if(!s)return o.createElement(f.Z,{title:w,"data-testid":"".concat(l,"Loading")});if(J){var ae=(yr[n.extraKey]||{}).item,oe=void 0===ae?"items":ae;return o.createElement(O.Z,{title:"".concat((0,Tn.fm)(oe)," couldn't be loaded"),message:"ErrAllNodesFailed"==J.errorMsgKey?"You do not have permissions to load ".concat(oe):"Something went wrong."})}if(d)return o.createElement(dn.NY,{title:"Functions couldn't be loaded",message:"We couldn't find any available functions."});if(z&&"canceled"!==z){if("ErrNodeResourceNotFound"===(null===z||void 0===z?void 0:z.errorMsgKey))return o.createElement(O.Z,{message:"Please review your selection and try again.",title:"".concat("feed"===n.extraKey?"Events are":'Function "'.concat(Z,'" is')," not available ").concat(H,".")});if(null===L||void 0===L||!L.length)return o.createElement(dn.NY,{title:"".concat("feed"===n.extraKey?"Events":'Function "'.concat(Z,'"')," couldn't be loaded"),message:"ErrForbidden"===(null===z||void 0===z?void 0:z.errorMsgKey)?"Forbidden":(null===z||void 0===z?void 0:z.errorMessage)||""})}if(D&&B)return o.createElement(O.Z,{title:"Required filters are needed",message:'Function "'.concat(Z,'" needs: ').concat(_.map((function(e){return e.name})).join(", "),"."),footer:"Check them on the right sidebar!"});var le=br[N]||br.table;return o.createElement(v.Box,{overflow:{horizontal:"hidden",vertical:"auto"},column:!0,padding:[4,4,0],gap:2},o.createElement(Y,{nodeIds:T,onRefresh:ne,onCancel:re,paramsKey:n}),K?o.createElement(o.Fragment,null,o.createElement(hr,{paramsKey:n,testIdPrefix:l,customCharts:V,refetch:ne,fn:Z,nodeIds:T}),o.createElement(E,{paramsKey:n,testIdPrefix:l,defaultCharts:M,hasCustom:!!V,hasHistogram:!!R,refetch:ne,fn:Z,nodeIds:T}),o.createElement(le,(0,p.Z)({key:Z,"data-testid":"".concat(l,"Component"),paramsKey:n,refetch:ne,ref:U,selectedFn:Z},b)),!(null!==L&&void 0!==L&&L.length)&&o.createElement(v.Flex,{column:!0,justifyContent:"center",alignItems:"center",alignSelf:"center",margin:["feed"===n.extraKey?3:30,0,0],gap:3},o.createElement(v.H3,null,"No results to display"),o.createElement(v.Text,{color:"textDescription",textAlign:"center"},"Double-check your search or filters and dates and try again with different conditions"),A&&o.createElement(v.Text,{color:"text",textAlign:"center"},A))):o.createElement(f.Z,{title:w,"data-testid":"".concat(l,"Loading")}))})),Er=xr,wr=n(24533),Or=["paramsKey","hasError","refreshAvailableFns","availableFnsLoaded","availableFns"];function Cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zr=function(e){var t=(0,k.Hu)();return o.createElement(v.Button,(0,p.Z)({label:"Get a fresh agent token",onClick:t},e))},jr="Functions expose sensitive information about your systems and applications. To protect your privacy, Netdata exposes this information only to logged-in users and claimed agents. When viewing Functions directly on a  Netdata Agent UI, this information is sent directly from the Netdata Agent to your web browser, without exposing it to any third parties.",kr={notLoggedIn:{title:"Sign in to Netdata to use Functions",description:jr,footer:o.createElement(Z.Z,null)},notClaimed:{title:"Connect this agent to Netdata to use Functions",description:jr,footer:o.createElement(j.Z,null)},noAccess:{title:"This agent belongs to a Netdata Space you are not member of",description:jr,footer:o.createElement(v.TextBig,{color:"textDescription"},"Ask for an invitation from the administrators of the Netdata Space of the agent to use functions.")},bearerError:{title:"You are not authorized to use Functions",description:jr,footer:o.createElement(Zr,null)}},Ir={extraKey:"fn"},Fr=function(e){var t=e.paramsKey,n=void 0===t?Ir:t,a=e.hasError,l=e.refreshAvailableFns,i=e.availableFnsLoaded,c=e.availableFns,s=(0,m.Z)(e,Or),d=(0,g.fX)(Pr(Pr({},n),{},{emptyIfAll:!1,merge:!0})),f=(0,g.aQ)(n),v=(0,r.Z)(f,2),x=v[0],w=v[1],C=(0,h.M2)(),Z=E(n),j=(0,u.CE)(n),I=(0,u.I_)(n);(0,o.useEffect)((function(){return I}),[j,null===x||void 0===x?void 0:x[0]]),(0,o.useEffect)((function(){var e;if(!Z&&j){var t=null===(e=c.find((function(e){return e.name===j})))||void 0===e?void 0:e.nodes;t&&(null!==x&&void 0!==x&&x.length&&t[x[0]]||w([Object.keys(t)[0]]))}}),[Z,w,d.length,j,c]);var F=(0,b.ej)(),T=(0,r.Z)(F,1)[0],S=(0,k.zp)(),D=(0,r.Z)(S,1)[0],K=D.bearerProtection,L=D.error,z=D.token,N=(0,y.Q6)(),A=(0,wr.Lz)(),M=(0,r.Z)(A,1)[0],R=M.canBeClaimed,B=M.cloudStatus;if((0,o.useEffect)((function(){a&&l()}),[B,z]),!C.length)return o.createElement(P,{paramsKey:n});if(N&&(a||L&&K)){var _=function(e){var t=e.userStatus,n=e.userNodeStatus,r=e.accessError,a=e.canBeClaimed;return e.cloudStatus,kr[t]?kr[t]:r?kr.notLoggedIn:a?kr.notClaimed:kr[n]?kr[n]:kr.bearerError}(Pr(Pr({},T),{},{bearerError:L,canBeClaimed:R,cloudStatus:B})),V=_.title,q=_.description,H=_.footer;return o.createElement(O.Z,{title:V,message:q,footer:H})}return o.createElement(Er,(0,p.Z)({testIdPrefix:"fn",paramsKey:n,availableFnsLoaded:i,availableFns:c},s))},Tr=["paramsKey"],Sr={extraKey:"feed"},Dr=function(e){var t=e.paramsKey,n=void 0===t?Sr:t,r=(0,m.Z)(e,Tr);E(n);var a=(0,u.I_)(n);return(0,o.useEffect)((function(){return a}),[]),o.createElement(Er,(0,p.Z)({testIdPrefix:"feed",paramsKey:n},r))},Kr=n(25325),Lr=n.n(Kr),zr=n(97193),Nr=n(8144);function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rr=(0,o.memo)((function(e){var t=e.roomId,n=e.flavour,r=e.availableFns,l=function(e){var t="fn"===e;return(0,o.useMemo)((function(){return{Live:{head:{label:"Live nodes",textColor:"textLite",iconName:"connectivityStatusLive",hasFn:t},node:{textColor:"textFocus",showFn:t,requireFn:t}},Stale:{head:{label:"Stale nodes",textColor:"textLite",iconName:"connectivityStatusStale"},node:{textColor:"textFocus",disabled:t}},Offline:{head:{label:"Offline nodes",textColor:"textLite",iconName:"connectivityStatusOffline"},node:{textColor:"textLite",disabled:t}}}}),[e])}(n),i=function(e){var t=(0,u.ZQ)({extraKey:e}).aggregations;return(0,o.useMemo)((function(){return null!==t&&void 0!==t&&t.node_ids?t.node_ids.buckets.reduce((function(e,t){return Mr(Mr({},e),{},(0,a.Z)({},t.key,t.hits.doc_count))}),{}):null}),[t])}(n),c="fn"===n,s=(0,u.CE)({extraKey:n}),d=(0,o.useMemo)((function(){var e;return Array.isArray(r)&&(null===(e=r.find((function(e){return e.name===s})))||void 0===e?void 0:e.nodes)||null}),[s,r]),f=(0,o.useCallback)((function(e){return!!d&&!d[e]}),[d]),m=(0,o.useCallback)((function(e){return Lr()(d?Object.keys(d):[],e)}),[d]);return c&&!d?null:o.createElement(Nr.Z,{title:"Nodes",testIdPrefix:"nodes",baseKey:t,extraKey:n,param:"selectedNodeIds",multi:"feed"===n},o.createElement(zr.Z,(0,p.Z)({key:n,baseKey:t,extraKey:n,statusProps:l,background:"mainBackground",itemProps:{padding:[1,1,1,.5]},searchMargin:[0,0,1],height:{max:"300px"},multi:"feed"===n,nodeCounts:i},c&&{useFilteredIds:m},{checkIsDisabled:f})))})),Br=Rr,_r=n(46742),Vr=function(e){return e.name},qr=(0,o.memo)((function(e){var t=e.param,n=e.baseKey,r=e.extraKey,a=e.testIdPrefix,l=e.title,i=e.items,c=void 0===i?[]:i,u=e.multi,s=void 0!==u&&u;return c.length?o.createElement(Nr.Z,{title:l,testIdPrefix:a,baseKey:n,extraKey:r,param:t,multi:s},o.createElement(_r.ZP,{param:t,baseKey:n,extraKey:r,testIdPrefix:a,collection:c,multi:s,getValue:Vr,getLabel:Vr})):null})),Hr=n(6557),Wr=function(e){return e.id},Gr={string:function(e,t){return e.localeCompare(t,void 0,{sensitivity:"accent",ignorePunctuation:!0})},integer:function(e,t){return e-t}},Ur={table:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.param,a=t.columns;return Object.entries(e.reduce((function(e,t){var r,o;return e[t[n]]={count:((null===(r=e[t[n]])||void 0===r?void 0:r.count)||0)+(t.hidden?0:1),type:null===(o=a[n])||void 0===o?void 0:o.type},e}),{})).map((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];return{id:n,type:a.type,count:a.count}})).sort((function(e,t){return(Gr[e.type]||Gr.integer)(e.id,t.id)}))},default:n.n(Hr)()},Qr=function(e){var t=e.param,n=e.baseKey,r=e.extraKey,a=e.filtersKey,l=e.testIdPrefix,i=e.title,s=function(e){var t=e.extraKey,n=e.filtersKey,r=e.param,a=Et({extraKey:t,omit:r,keepAll:!0}),l=(0,c.tk)(r,{extraKey:n,flavour:"arr"}),i=(0,u.ZQ)({key:"type",extraKey:t}),s=Ur[i]||Ur.default,d=(0,u.ZQ)({key:"columns",extraKey:t});return(0,o.useMemo)((function(){return s(a,{param:r,columns:d})}),[r,a,l])}({param:t,extraKey:r,filtersKey:a});return s&&s.length?o.createElement(Nr.Z,{title:i,testIdPrefix:l,baseKey:n,extraKey:a,param:t,defaultIsOpen:!1},o.createElement(_r.ZP,{param:t,baseKey:n,extraKey:a,testIdPrefix:l,collection:s,capitalized:!1,getValue:Wr,getLabel:Wr})):null},Xr=n(27856),Jr=function(e){var t=e.param,n=e.baseKey,a=e.extraKey,l=e.filtersKey,i=e.testIdPrefix,s=e.title,d=(0,u.ZQ)({extraKey:a}).columns,f=(0,c.D0)(t,{extraKey:l,flavour:"arr",defaultValue:[]}),m=(0,r.Z)(f,2),p=m[0],g=m[1],h=(0,o.useCallback)((0,Xr.P)(10,(function(e){var t=e.min,n=e.max;return g([t,n])})),[]);if(!d[t])return null;var y=1*(d[t].min||0),b=1*(d[t].max||0);return o.createElement(Nr.Z,{title:s,testIdPrefix:i,baseKey:n,extraKey:l,param:t,defaultIsOpen:!1,showCounter:!1},o.createElement(v.Box,{padding:[2,0],width:"100%"},o.createElement(v.MultiRangeInput,{min:y,max:b,onChange:h,initMin:p[0]?1*p[0]:y,initMax:p[1]?1*p[1]:b,step:(b-y)/20})))},Yr=function(e,t){return{key:e,type:t[e].filter}},$r={multiselect:Qr,range:Jr},ea=function(e){var t=e.roomId,n=e.extraKey,r=(0,u.CE)({extraKey:n}),a=function(e){return Dn(e,Yr)}(n);return a.map((function(e){var a=$r[e.type]||$r.multiselect;return o.createElement(a,{key:e.key,title:e.key,testIdPrefix:"function",baseKey:t,extraKey:n,filtersKey:"".concat(r||n,"Filters"),param:e.key})}))},ta=function(e){return e.name||e.id},na=function(e){return e.id},ra=(0,o.memo)((function(e){var t=e.title,n=e.options,a=e.param,l=e.baseKey,i=e.filtersKey,c=e.testIdPrefix,u=e.multi,s=void 0===u||u,d=e.defaultIsOpen,f=void 0!==d&&d,m=e.required,p=void 0!==m&&m,g=(0,S.Z)(!1),h=(0,r.Z)(g,2),y=h[0],b=h[1],x=(0,o.useMemo)((function(){return null!==n&&void 0!==n&&n.length?n.filter((function(e){return"number"!==typeof e.count||e.count>0})):null}),[n]);return null!==n&&void 0!==n&&n.length?o.createElement(Nr.Z,{title:t,testIdPrefix:c,baseKey:l,extraKey:i,param:a,defaultIsOpen:f,required:p,multi:s,configElements:function(e){return e.isOpen&&(null===x||void 0===x?void 0:x.length)!==(null===n||void 0===n?void 0:n.length)&&o.createElement(v.Button,{padding:[0],flavour:"borderless",onClick:function(e){e.stopPropagation(),b()},"data-testid":"".concat(c,"-filter-resetAll"),label:y?"Show zeros":"Hide zeros",tiny:!0,neutral:!0})}},o.createElement(_r.ZP,{param:a,baseKey:l,extraKey:i,testIdPrefix:c,collection:y?x:n,capitalized:!1,getValue:na,getLabel:ta,multi:s})):null})),aa={nodes:!0},oa=function(e){var t=e.roomId,n=e.extraKey,r=(0,u.CE)({extraKey:n}),a=(0,u.Cf)(n);return a.length?a.map((function(e){return aa[e.id]?null:o.createElement(ra,{key:e.id,title:e.name,options:e.options,param:e.id,testIdPrefix:"function",baseKey:t,filtersKey:"".concat(r||n,"Filters")})})):null};function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ia(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ca={select:!0},ua=function(e){var t=e.roomId,n=e.extraKey;return e.requiredParams.map((function(e){return o.createElement(ra,{key:e.id,title:e.name,options:e.options,param:e.id,testIdPrefix:"function",baseKey:t,filtersKey:"".concat(n,"Filters"),multi:!ca[e.type],defaultIsOpen:!0,required:!0})}))},sa=(0,o.memo)((function(e){var t=e.extraKey,n=(0,u.CE)({extraKey:t}),l=(0,u.mO)({extraKey:t}),i=(0,r.Z)(l,2),s=i[0],d=s.requiredParams,f=s.infoLoaded,m=i[1],p=(0,be.UL)(),v=(0,c.I0)(null,{key:p,extraKey:"".concat(n,"Filters")}),g=(0,r.Z)(v,2),h=g[0],y=g[1];return(0,o.useEffect)((function(){f&&d.length&&d.forEach((function(e){var t,n;return(null===(t=e.options)||void 0===t?void 0:t.length)>0&&!(null!==(n=h[e.id])&&void 0!==n&&n.length)&&y((0,a.Z)({},e.id,[e.options[0].id]))}))}),[f]),(0,o.useEffect)((function(){f&&(d.length?h&&m((function(e){return ia(ia({},e),{},{missingRequired:!!d.length&&!d.every((function(e){var t,n;return!(null===(t=e.options)||void 0===t||!t.length)&&(Array.isArray(h[e.id])?!(null===(n=h[e.id])||void 0===n||!n.length):!!h[e.id])}))})})):m((function(e){return ia(ia({},e),{},{missingRequired:!1})})))}),[f,d,h]),o.createElement(ua,{roomId:p,extraKey:n,requiredParams:d})})),da=(0,o.memo)((function(e){var t=e.flavour,n=e.availableFns,r=(0,be.UL)(),a=(0,u.ZQ)({extraKey:t}),l=a.loaded,i=a.aggregations,c=a.error;return o.createElement(v.Flex,{column:!0,overflow:{vertical:"auto"},padding:[0,3,30]},"feed"!==t&&o.createElement(qr,{title:"Function",testIdPrefix:"function",baseKey:r,extraKey:t,param:"selectedFn",items:n}),o.createElement(Br,{roomId:r,flavour:t,availableFns:n}),o.createElement(sa,{extraKey:t}),l&&!i&&!c&&o.createElement(ea,{roomId:r,extraKey:t}),l&&i&&!c&&o.createElement(oa,{roomId:r,extraKey:t}))})),fa=da,ma=(n(38862),n(21872)),pa=n(46038),va=n(52428),ga=["selectedRowData","setSelectedRowData","flavour"],ha=function(e){var t=e.data;return o.createElement(pa.Z,{name:"Files"},o.createElement(v.Flex,{gap:1,padding:[0,1],alignItems:"center"},o.createElement(v.Box,{sx:{fontWeight:"500",letterSpacing:"1px"},as:v.Text,color:"textLite"},"{;}"),o.createElement(v.TextSmall,null,"Copy data as"),o.createElement(v.Flex,{cursor:"pointer",gap:1,onClick:(0,va.J)(JSON.stringify(t),{text:"JSON copied to clipboard"})},o.createElement(v.TextSmall,{color:"primary"},"json"),o.createElement(v.Icon,{color:"primary",size:"small",name:"copy"}))))},ya=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data,a=void 0===n?{}:n,o=t.columns,l=void 0===o?{}:o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"fn";return Object.entries(a).sort((function(e,t){var n,a,o=(0,r.Z)(e,1)[0],i=(0,r.Z)(t,1)[0];return((null===(n=l[o])||void 0===n?void 0:n.displayName)||o).localeCompare((null===(a=l[i])||void 0===a?void 0:a.displayName)||i,void 0,{sensitivity:"accent",ignorePunctuation:!0})})).reduce((function(t,n){var a,o,i,d=(0,r.Z)(n,2),f=d[0],m=d[1],p=c?"".concat(c,".").concat((null===(o=l[f])||void 0===o?void 0:o.displayName)||f):(null===(a=l[f])||void 0===a?void 0:a.displayName)||f;if(null!==(i=l[f])&&void 0!==i&&i.dummy)return t;if("feed"!==s&&!l[f])return t;var v=Array.isArray(m);if(v&&"object"===(0,pt.Z)(m[0])&&null!==m[0]||v&&m.length>1)t.push([p,JSON.stringify(m)]),u[p]=m;else if(m&&"object"===(0,pt.Z)(m))e({data:m},t,p,u,s);else{if(null===m)return t;t.push([p,v?m.length>1?"[".concat(m.join(", "),"]"):m[0]:m]),u[p]=v?m.length>1?"[".concat(m.join(", "),"]"):m[0]:m}return t}),i)},ba=(0,K.default)(v.Flex).withConfig({displayName:"sidebarInfo__Container",componentId:"sc-18vn5bm-0"})(["*{font-family:Courier New,monospace;letter-spacing:0.09px;line-height:13px;font-size:12px;overflow-wrap:anywhere;white-space:pre-wrap;word-break:break-word;}"]),xa=function(e){var t=e.selectedRowData,n=void 0===t?{}:t,a=e.setSelectedRowData,l=e.flavour,i=(0,m.Z)(e,ga),c={},u=(0,o.useMemo)((function(){return ya(n,[],null,c,l).sort((function(e,t){var n=(0,r.Z)(e,1)[0],a=(0,r.Z)(t,1)[0];return n.localeCompare(a)}))}),[n]);return o.createElement(v.Flex,(0,p.Z)({column:!0,gap:2,overflow:{vertical:"auto"},padding:[0,2,30]},i),o.createElement(v.Flex,{justifyContent:"between",padding:[2,0],border:{side:"bottom",color:"borderSecondary"}},o.createElement(v.TextBig,{strong:!0},"Row info"),u.length>0&&o.createElement(v.Box,{onClick:function(){return a()},cursor:"pointer"},o.createElement(v.TextSmall,{color:"primary"},"Clear selection"))),Array.isArray(u)&&u.length?o.createElement(o.Fragment,null,o.createElement(ba,{column:!0,gap:2},u.map((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];return o.createElement(ma.Z,{key:n,size:"small",name:n,testId:"sidebar-rowInfoContent-".concat(n),padding:[1,0,0]},a)}))),o.createElement(ha,{data:n.json||c})):o.createElement(v.Text,null,"Select a row to see raw data"))},Ea=n(63346);function wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ca={fn:{Component:Fr,paramsKey:{extraKey:"fn"},loadingMessage:"Loading functions..."},logs:{Component:Fr,paramsKey:{extraKey:"logs"},loadingMessage:"Loading logs..."},feed:{Component:Dr,paramsKey:{extraKey:"feed"},loadingMessage:"Loading events..."}},Pa={filters:Oa(Oa({iconName:"filterList"},s.Xc),{},{width:"19px",Content:fa,dataTestId:"fnFilters",label:"Filters"}),info:Oa(Oa({iconName:"information"},s.Xc),{},{width:"19px",dataTestId:"info",Content:xa,label:"Info"})},Za=function(e){var t=e.flavour,n=Ca[t]||Ca.fn,a=n.Component,m=n.paramsKey,p=n.loadingMessage,v=(0,i.zN)(),g=(0,i.fD)(),h=(0,c.Sf)("sidebarTab",{flavour:"val",extraKey:t}),y=(0,c.Sf)("sidebarOpen",{flavour:"bool"}),b=(0,o.useState)(),x=(0,r.Z)(b,2),E=x[0],w=x[1],O=(0,o.useCallback)((function(){y(!0),h("info"),w.apply(void 0,arguments)}),[]),C=(0,u.KO)(m.extraKey),P=C.loaded,Z=C.value,j=C.hasError,k=C.refresh;return g?v.length||"feed"===t?o.createElement(Ea.ZP,{feature:"Functions-".concat(t)},o.createElement(l.Z,{"data-testid":"".concat(t,"Page"),margin:[0,0,8],sidebar:o.createElement(s.ZP,{title:"Filters",flavour:t,selectedRowData:E,setSelectedRowData:w,availableFns:Z,tabs:Pa,loaded:!0,hasSearch:!1})},o.createElement(a,{testIdPrefix:t,paramsKey:m,onShowInfo:O,availableFnsLoaded:P,availableFns:Z,refreshAvailableFns:k,hasError:j}))):o.createElement(Ea.ZP,{feature:"Functions-".concat(t),mode:"NoNodesView"},o.createElement(d.Z,null)):o.createElement(f.Z,{title:p})}}}]);