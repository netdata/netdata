!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9b009d4c-f7c1-462b-a797-85b7b048eb2c",e._sentryDebugIdIdentifier="sentry-dbid-9b009d4c-f7c1-462b-a797-85b7b048eb2c")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"67fcafa0e89723987481f6de299b5bd1fcd6618a"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[4276],{39979:function(e,t,n){n.d(t,{Z:function(){return b}});n(47941),n(82526),n(57327),n(41539),n(88449),n(2490),n(59849),n(38880),n(15581),n(34514),n(54747),n(49337),n(33321),n(69070);var r=n(87462),o=n(4942),a=n(45987),i=n(67294),l=n(54005),c=["callback","feature","isStart","isSuccess","isFailure","eventReason","payload"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){return(0,i.forwardRef)((function(t,n){var u=t.callback,d=t.feature,m=t.isStart,f=t.isSuccess,p=t.isFailure,g=t.eventReason,b=t.payload,v=void 0===b?{}:b,h=(0,a.Z)(t,c),y=(0,l.Z)(),w=y.sendLog,E=y.isReady,x=(0,i.useCallback)((function(){var e=h[u],t=s(s(s(s(s({feature:d,isStart:m,isSuccess:f,isFailure:p,eventReason:g},v),h["data-ga"]?{dataGa:h["data-ga"]}:{}),h.dataGa?{dataGa:h.dataGa}:{}),h["data-track"]?{dataTrack:h["data-track"]}:{}),h.label?{label:h.label}:{});"function"==typeof e&&e(),w(t,!0)}),[u,w,E,v,h]),O=(0,i.useMemo)((function(){return s(s({},h),{},(0,o.Z)({},u,x))}),[h,u,x]);return i.createElement(e,(0,r.Z)({ref:n},O))}))},m=n(16294),f=["payload"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){return(0,i.forwardRef)((function(t,n){var o=t.payload,l=void 0===o?{}:o,c=(0,a.Z)(t,f),u=d(e);return i.createElement(u,(0,r.Z)({},c,{ref:n,callback:"onClick",payload:g(g({},l),{},{action:m.Nw.buttonClicked})}))}))}},31203:function(e,t,n){var r=n(87462),o=n(45987),a=n(66007),i=n(67294),l=n(70982),c=n(99113),u=["onClick","src","title","width","height"],s=(0,i.forwardRef)((function(e,t){var n=e.onClick,s=e.src,d=e.title,m=void 0===d?"User avatar":d,f=e.width,p=void 0===f?8:f,g=e.height,b=void 0===g?8:g,v=(0,o.Z)(e,u);return i.createElement(c.Flex,(0,r.Z)({cursor:"pointer",round:"50%","data-testid":"userAvatar",title:m,alt:m,onClick:function(e){return n&&n(e)},width:p,height:b},v,{ref:t,alignItems:"center",justifyContent:"center",background:"spaceIdle",color:"textLite",overflow:"hidden"}),s?i.createElement(c.Flex,{as:"img",src:s,alt:m,width:p,height:b}):i.createElement(l.G,{icon:a.KC,size:"lg",alt:m}))}));t.Z=s},52428:function(e,t,n){n.d(t,{J:function(){return u}});n(47941),n(82526),n(57327),n(41539),n(88449),n(2490),n(59849),n(38880),n(15581),n(34514),n(54747),n(49337),n(33321),n(69070);var r=n(4942),o=n(58206),a=n(52631),i=n(74855);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){(0,o.Z)(e);var n=(0,i.sc)(c(c({header:"Copied",text:"Command copied to your clipboard! Please run it on your node's terminal.",icon:"gear"},t),{},{success:!0}));a.Z.success(n,{context:"copy"})}}},57387:function(e,t,n){n.d(t,{ZM:function(){return g}});n(47941),n(82526),n(57327),n(41539),n(88449),n(2490),n(59849),n(38880),n(15581),n(34514),n(54747),n(49337),n(33321),n(69070);var r=n(45987),o=n(4942),a=n(67294),i=n(71893),l=n(99113),c=n(52428),u=["children"],s=["children","confirmationText","commandText"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var m=(0,i.default)(l.Box).attrs((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({color:"textDescription",background:"modalTabsBackground",border:{side:"all",color:"borderSecondary"},padding:[4,10,4,4],position:"relative",width:"100%"},e)})).withConfig({displayName:"command__StyledTerminalCommand",componentId:"sc-wnwmk3-0"})(["color:",";border-radius:2px;overflow-wrap:anywhere;white-space:pre-wrap;font-family:Courier New,monospace;letter-spacing:0.09px;line-height:18px;font-size:14px;word-break:break-word;"],(0,l.getColor)("textDescription")),f=(0,i.default)(l.Icon).withConfig({displayName:"command__StyledIcon",componentId:"sc-wnwmk3-1"})(["display:flex;align-self:flex-end;cursor:pointer;"]),p=(0,i.default)(l.Box).attrs({color:"textDescription",border:{side:"all",color:"borderSecondary"},background:"modalTabsBackground",padding:[0,1]}).withConfig({displayName:"command__CodeText",componentId:"sc-wnwmk3-2"})(["display:inline-block;color:",";border-radius:2px;font-family:Courier New,monospace;letter-spacing:0.09px;line-height:18px;font-size:14px;word-break:break-word;"],(0,l.getColor)("textDescription")),g=function(e){var t=e.children,n=(0,r.Z)(e,u);return a.createElement(p,n,t)};t.ZP=function(e){var t=e.children,n=e.confirmationText,o=void 0===n?"Command copied to your clipboard.":n,i=e.commandText,u=void 0===i?t:i,d=(0,r.Z)(e,s);return a.createElement(m,d,t,a.createElement(l.Box,{position:"absolute",bottom:"8px",right:"8px"},a.createElement(f,{name:"copy",size:"small",color:"primary",onClick:(0,c.J)(u||t,{text:o})})))}},34885:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(87462),o=n(45987),a=n(67294),i=n(4211),l=n(99113),c=function(){return a.createElement(l.Text,null,"Something went wrong during document parsing")},u=["transformConfiguration","validationConfig","validate","errorComponent","children"],s=function(e){return function(t){var n=t.transformConfiguration,l=void 0===n?{}:n,s=t.validationConfig,d=void 0===s?{}:s,m=t.validate,f=t.errorComponent,p=t.children,g=(0,o.Z)(t,u),b=function(e){var t=e.markdocContent,n=e.validate,r=e.validationConfig,o=e.transformConfiguration;return(0,a.useMemo)((function(){var e=i.ZP.parse("string"===typeof t?t:""),a=[];return n&&(a=i.ZP.validate(e,r)),{tree:a.length?null:i.ZP.transform(e,o),errors:a}}),[t,n,r,o])}({markdocContent:p,validate:m,validationConfig:d,transformConfiguration:l}),v=b.tree,h=b.errors,y=f&&"function"==typeof f?f:c;return h.length?a.createElement(y,{errors:h}):a.createElement(e,(0,r.Z)({tree:v},g))}},d=(0,a.memo)(s((function(e){var t=e.tree,n=e.renderConfiguration;return i.ZP.renderers.react(t,a,n)}))),m=(s((function(e){var t=e.tree;return i.ZP.renderers.html(t)})),d)},54244:function(e,t,n){var r=n(67294),o=n(99113);t.Z=function(e){var t=e.flavour,n=e.icon,a=e.children;return r.createElement(o.Pill,{icon:n,textProps:{textTransform:"capitalize"},flavour:t},a)}},10082:function(e,t,n){var r=n(87462),o=n(45987),a=n(67294),i=n(99113),l=["vertical","color"];t.Z=function(e){var t=e.vertical,n=e.color,c=void 0===n?"borderSecondary":n,u=(0,o.Z)(e,l);return a.createElement(i.Box,(0,r.Z)({as:"hr",height:t?"100%":"1px"},t?{}:{width:"100%"},{sx:{borderWidth:t?"0px 0px 0px 1px":"1px 0px 0px 0px",borderColor:c,borderStyle:"solid"}},u))}},94276:function(e,t,n){n.r(t),n.d(t,{AssistantAlerts:function(){return ae},AssistantChat:function(){return Me}});var r=n(29439),o=n(67294),a=n(37518),i=n(12899),l=n(87462),c=n(99113),u=n(27856),s=(n(85827),n(41539),n(25387),n(2490),n(72608),n(69826),n(31672),n(59461),n(34885)),d=n(97945),m=function(e){var t=e.label,n=e.value;return o.createElement(c.Flex,{gap:2},o.createElement(c.Text,{strong:!0},t,":"),o.createElement(c.Text,null,n))},f=function(e){var t=e.name,n=e.nodeId,l=e.chartId,u=e.alertOptions,s=(0,a.UL)(),f=(0,i.R3)(),p=(0,r.Z)(f,2)[1],g=(0,d.iy)(n,"name");return o.createElement(c.Flex,{column:!0},u.length>1&&o.createElement(c.Box,{margin:[0,0,2,0]},o.createElement(c.Select,{"data-testid":"".concat(t,"-assistant-modal-alerts-select"),onChange:function(e){var t=e.value;return p({roomId:s,alert:{name:t}})},styles:{size:"tiny"},menuPlacement:"auto",options:u,value:{value:t,label:t}})),1==u.length&&o.createElement(m,{label:"Alert",value:t}),g&&o.createElement(m,{label:"Node",value:g}),l&&o.createElement(m,{label:"Chart id",value:l}))},p=n(10082),g=n(45987),b=(n(9653),n(71893)),v=n(91008),h=n(57387),y=n(46189),w=["level"],E=["children"],x=["children","href"],O=["content"],k=["content"],C=["ordered","children"],Z=b.default.ol.withConfig({displayName:"markdocSchema__OrderedList",componentId:"sc-1maymd4-0"})(["list-style:roman;padding-left:14px;"]),j=b.default.ul.withConfig({displayName:"markdocSchema__UnorderedList",componentId:"sc-1maymd4-1"})(['list-style-image:url("','/img/list-style-image.svg");padding-left:14px;'],y.Z.assetsBaseURL),P={heading:{render:function(e){var t=e.level,n=void 0===t?1:t,r=(0,g.Z)(e,w),a=c.H1;switch(n){case 2:a=c.H2;break;case 3:a=c.H3;break;case 4:a=c.H4;break;case 5:a=c.H5;break;case 6:a=c.H6}return o.createElement(a,(0,l.Z)({margin:[2,0]},r))},attributes:{id:{type:String},level:{type:Number}}},paragraph:{render:function(e){var t=e.children,n=(0,g.Z)(e,E);return o.createElement(c.Flex,(0,l.Z)({padding:[2,0]},n),o.createElement(c.Text,null,t))}},link:{render:function(e){var t=e.children,n=e.href,r=(0,g.Z)(e,x);return o.createElement(v.Z,(0,l.Z)({href:n,rel:"noopener noreferrer",target:"_blank"},r),t)},attributes:{href:{type:String}}},code:{render:function(e){var t=e.content,n=(0,g.Z)(e,O);return o.createElement(h.ZM,n,t)},attributes:{content:{type:String}}},fence:{render:function(e){var t=e.content,n=(0,g.Z)(e,k);return o.createElement(h.ZP,n,t)},attributes:{content:{type:String}}},list:{render:function(e){var t=e.ordered,n=e.children,r=(0,g.Z)(e,C),a=t?Z:j;return o.createElement(a,r,n)},attributes:{ordered:{type:Boolean}}}},I=function(e){var t=e.selectedAlert,n=(0,i.Nu)(),a=(0,r.Z)(n,1)[0],l=t.name,u=t.nodeId,d=t.chartId,m=(0,i.TA)({alert:l,node:u,chart:d}),g=m.loaded,b=m.value,v=m.hasError,h=function(e){return e.reduce((function(e,t){var n={value:t.name,label:t.name};return e.find((function(e){return e.label==n.label}))||e.push(n),e}),[])}(a);return g?v?o.createElement(c.Text,null,"Something went wrong"):null!==b&&void 0!==b&&b.result?o.createElement(c.Flex,{column:!0,gap:3},o.createElement(f,{name:l,nodeId:u,chartId:d,alertOptions:h}),o.createElement(p.Z,null),o.createElement(s.Z,{transformConfiguration:{nodes:P}},b.result)):o.createElement(c.Text,null,"No data"):o.createElement(c.Text,null,"Loading...")},S=n(54244),D=n(82351),M=(0,b.default)(c.Flex).withConfig({displayName:"styled__ElevatedContent",componentId:"sc-16kc0pw-0"})(["box-shadow:0 18px 28px rgba(0,0,0,0.5);"]),_=(0,b.default)(c.Icon).withConfig({displayName:"styled__IconAbsolute",componentId:"sc-16kc0pw-1"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"]),N=["alert"],F=function(e){var t=e.alert,n=(0,g.Z)(e,N);return o.createElement(D.Z,{content:"Show assistant"},o.createElement(M,(0,l.Z)({position:"absolute",top:"0",right:"0",cursor:"pointer"},n),o.createElement(S.Z,{flavour:(null===t||void 0===t?void 0:t.status)||"neutral"},null===t||void 0===t?void 0:t.name)))},B=(n(47941),n(82526),n(57327),n(88449),n(59849),n(38880),n(15581),n(34514),n(54747),n(49337),n(33321),n(69070),n(4942)),A=n(61193),T=n.n(A),z=n(46667),H=b.default.ul.withConfig({displayName:"helpTooltipContent__List",componentId:"sc-uh9315-0"})(["width:350px;padding-left:16px;list-style:disc outside none;"]),R=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).disableDrag;return o.createElement(H,null,e?null:o.createElement("li",null,"You can drag around the assistant window and navigate to other tabs within the same room, and the assistant window won't go away."),o.createElement("li",null,"Use the buttons at the right to expand, or minimize the assistant window."),o.createElement("li",null,"Hold down the ",o.createElement(c.TextSmall,{strong:!0},"Shift")," button in order to select any text inside the assistant window."))},q=n(50308),L=n.n(q),U=function(e){var t=e.onModalClose,n=void 0===t?L():t;return o.createElement(D.Z,{content:"Close assistant"},o.createElement(M,{position:"absolute",bottom:"37px",right:"-10px",background:"mainBackground",sx:{borderRadius:"100%"},border:{side:"all",color:"primary",size:"1px",type:"solid"},width:"28px",height:"28px",onClick:n,cursor:"pointer"},o.createElement(_,{name:"x",color:"text",size:"sm"})))},W=function(e){var t=e.onClick,n=void 0===t?L():t;return o.createElement(M,{position:"absolute",top:"0",right:"0",onClick:n,cursor:"pointer"},o.createElement(c.Pill,{flavour:"neutral"},"Show assistant"))},G=function(e){var t=e.MaximizeComponent,n=void 0===t?W:t,a=e.isMinimized,i=e.maximize,l=void 0===i?L():i,u=e.onModalClose,s=void 0===u?L():u,d=(0,o.useState)(!1),m=(0,r.Z)(d,2),f=m[0],p=m[1];return o.createElement(c.Flex,{position:"relative",width:"56px",height:a?"95px":"56px",onMouseEnter:function(){return p(a)},onMouseLeave:function(){return p(!1)}},o.createElement(M,{position:"absolute",bottom:"0",background:"primary",sx:{borderRadius:"100%"},width:"56px",height:"56px",cursor:"move"},o.createElement(_,{name:"netdataAssistant",size:"large"})),f&&o.createElement(o.Fragment,null,o.createElement(n,{onClick:function(){a&&l()}}),o.createElement(U,{onModalClose:s})))},K=n(22648),J=["expanded","isMobile","getWidth","getHeight"];function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var V,Y=function(e){var t=e.expanded;return e.isMobile?{base:"95vw"}:t?{base:"80vw"}:{base:150,max:150,min:70}},$=function(e){var t=e.expanded;return e.isMobile?{base:"80vh",max:"80vh",min:"10vh"}:t?{base:"80vh",min:"80vh"}:{base:150,max:150,min:150}},X=(0,b.default)(c.ModalContent).attrs((function(e){var t=e.expanded,n=e.isMobile,r=e.getWidth,o=e.getHeight,a=(0,g.Z)(e,J);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:r({expanded:t,isMobile:n}),height:o({expanded:t,isMobile:n}),padding:[0,0,4,0]},a)})).withConfig({displayName:"assistantModalBase__ModalContent",componentId:"sc-15vyjlc-0"})([""]),ee=(0,b.default)(c.ModalBody).withConfig({displayName:"assistantModalBase__StyledModalBody",componentId:"sc-15vyjlc-1"})(["flex-direction:",";"],(function(e){return e.columnReverse?"column-reverse":"column"})),te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,n=e.body,a=e.modalContentProps,i=void 0===a?{}:a,u=e.modalBodyProps,s=void 0===u?{}:u,d=e.onClose,m=e.MaximizeComponent,f=e.disableDrag,p=e.getWidth,g=void 0===p?Y:p,b=e.getHeight,v=void 0===b?$:b,h=(0,z.Z)(),y=(0,r.Z)(h,2),w=y[0],E=y[1],x=(0,o.useState)(!1),O=(0,r.Z)(x,2),k=O[0],C=O[1],Z=(0,z.Z)(),j=(0,r.Z)(Z,4),P=j[0],I=j[1],S=j[3],M=(0,K.m)();return o.createElement(c.Modal,{zIndex:80,backdrop:!1},o.createElement(T(),{disabled:f||k||M},o.createElement(c.Flex,{column:!0,alignItems:"end",gap:3},!P&&o.createElement(X,(0,l.Z)({expanded:w,cursor:k?"text":"move",tabIndex:0,onKeyDown:function(e){"Shift"==e.key&&C(!0)},onKeyUp:function(){return C(!1)},isMobile:M,getWidth:g,getHeight:v},i),o.createElement(c.ModalHeader,{justifyContent:"between"},o.createElement(c.Flex,{gap:2,alignItems:"center"},o.createElement(c.Icon,{name:"netdataAssistant",color:"text"}),t||o.createElement(c.H4,null,"Netdata Assistant"),o.createElement(D.Z,{plain:!0,isBasic:!0,align:"top",content:o.createElement(R,{disableDrag:f})},o.createElement(c.Flex,null,o.createElement(c.Icon,{name:"question",color:"textLite",width:"16px",height:"16px"})))),o.createElement(c.Flex,{alignItems:"baseline"},M?null:o.createElement(o.Fragment,null,o.createElement(c.ModalButton,{iconName:"minimize_s",onClick:I,tooltip:"Minimize window",testId:"assistant-modal-minimize-button"}),o.createElement(c.ModalButton,{iconName:w?"reduceSize":"fullScreen",onClick:E,tooltip:w?"Reduce window size":"Expand window",testId:"assistant-modal-expand-collapse-button"})),o.createElement(c.ModalCloseButton,{onClose:d,position:"unset",tooltip:"Close window",testId:"assistant-modal-close-button"}))),o.createElement(ee,(0,l.Z)({overflow:{vertical:"auto"},cursor:k?"text":"default"},s),n)),o.createElement(G,{MaximizeComponent:m,isMinimized:P,maximize:S,onModalClose:d}))))},ne=function(e){var t=e.alertNameInHeader,n=e.selectedAlert;return t?o.createElement(S.Z,{flavour:(null===n||void 0===n?void 0:n.status)||"neutral"},null===n||void 0===n?void 0:n.name):o.createElement(c.H4,null,"Netdata Assistant")},re=(V=te,function(e){var t=(0,o.useState)(!1),n=(0,r.Z)(t,2),a=n[0],c=n[1],s=(0,i.R3)(),d=(0,r.Z)(s,2),m=d[0],f=d[1],p=(null===m||void 0===m?void 0:m.alert)||{},g=(0,u.D)(300,(function(e){var t=e.target;return c(t.scrollTop>150&&!(null===p||void 0===p||!p.name))})),b=(0,o.useCallback)((function(){return f(null)}),[f]);return o.createElement(V,(0,l.Z)({title:o.createElement(ne,{alertNameInHeader:a,selectedAlert:p}),body:o.createElement(I,{selectedAlert:p}),onClose:b,modalBodyProps:{onScroll:g},MaximizeComponent:function(e){return o.createElement(F,(0,l.Z)({alert:p},e))}},e))}),oe=re,ae=function(){var e=(0,a.UL)(),t=(0,i.R3)(),n=(0,r.Z)(t,2),l=n[0],c=n[1],u=l||{},s=u.roomId,d=u.alert;return(0,o.useEffect)((function(){s!=e&&c(null)}),[s,e]),d&&s==e?o.createElement(oe,null):null},ie=n(13477),le=n(31203),ce=["flavour","children"];function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,B.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=function(){return o.createElement(c.Flex,{width:12},o.createElement(c.Icon,{name:"netdataAssistant",width:"48px",height:"48px",color:"primary"}))},me=function(e){var t=e.flavour,n=void 0===t?"assistant":t,r=e.children,a=(0,g.Z)(e,ce),i="assistant"==n,u=(0,ie.Iy)("avatarURL"),s=se(se({},i?{background:"modalBackground"}:{}),{},{border:{side:"top",color:"primary"}});return o.createElement(c.Flex,(0,l.Z)({gap:2,padding:[4]},s,a),i?o.createElement(de,null):o.createElement(le.Z,{src:u||"",width:12,height:12}),o.createElement(c.Flex,{flex:{grow:1,shrink:1}},r))},fe=n(54005),pe=function(e){var t=e.text,n=(0,fe.Z)().sendButtonClickedLog,r=(0,i.gN)(),a=(0,o.useCallback)((function(){r(t),n({feature:"NetdataAssistantQuestion",question:t,kickstartQuestion:!0})}),[r,n]);return o.createElement(c.Flex,{alignItems:"center",justifyContent:"between",padding:[2],background:"inputBg",round:!0,cursor:"pointer",onClick:a},o.createElement(c.TextBig,null,t),o.createElement(c.Icon,{name:"chevron_right_s",color:"text",height:"12px",cursor:"pointer"}))},ge=function(){return o.createElement(c.Flex,{column:!0,gap:4},o.createElement(c.TextBig,null,"Hello! Welcome to Netdata Assistant! Here are some options to help you kickstart our conversation:"),o.createElement(c.Flex,{column:!0,gap:2},o.createElement(pe,{text:"Help me connect a Node"}),o.createElement(pe,{text:"How do I create a custom alert?"})),o.createElement(c.TextBig,null,"Just select the option you're interested in, or feel free to ask anything else!"))},be=function(){return o.createElement(me,{border:"none"},o.createElement(ge,null))},ve=(n(21249),n(57640),n(9924),(0,n(39979).Z)(c.Button)),he=function(e){var t=e.question,n=e.answer,r=e.feedback,a=e.setFeedback,i=e.flavour;return o.createElement(ve,{feature:"AssistantAnswerFeedback",payload:{question:t,answer:n,feedback:i},flavour:r===i?"hollow":"borderless",icon:"thumbsUp"==i?"thumb_up":"thumb_down",onClick:function(){return a(i)},"data-testid":"assistant-chat-".concat(i),small:!0})},ye=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.id,i=n.questionId,u=n.additionalInfo,s=n.messages,d=void 0===s?[]:s,m=(0,o.useState)(),f=(0,r.Z)(m,2),p=f[0],g=f[1],b=null===(e=d.find((function(e){return e.id==i})))||void 0===e?void 0:e.value,h=null===(t=d.find((function(e){return e.id==a})))||void 0===t?void 0:t.value,y=(0,o.useMemo)((function(){return{feedback:p,setFeedback:g,question:b,answer:h}}),[p,g]);return o.createElement(c.Flex,{alignItems:"center",justifyContent:"between"},o.createElement(c.Flex,null,o.createElement(he,(0,l.Z)({},y,{flavour:"thumbsUp"})),o.createElement(he,(0,l.Z)({},y,{flavour:"thumbsDown"}))),u?o.createElement(v.Z,{Component:c.Text,href:u,target:"_blank",rel:"noopener noreferrer"},"Read more..."):null)},we=n(63346),Ee=function(){return o.createElement(we.Ht,{feature:"NetdataAssistantAnswer"},o.createElement(c.TextBig,null,"Something went wrong. Please try again."))},xe=function(){var e=(0,i.zi)().messages;return e.map((function(t){var n=t.id,r=t.questionId,a=t.type,i=t.pending,l=t.value,u=t.additionalInfo,d=t.error;return o.createElement(me,{key:n,flavour:"answer"==a?"assistant":"user"},"answer"==a?i?"...":d?o.createElement(Ee,null):o.createElement(c.Flex,{column:!0,gap:1},o.createElement(s.Z,{transformConfiguration:{nodes:P}},l),o.createElement(ye,{id:n,questionId:r,additionalInfo:u,messages:e})):l)}))},Oe=(0,b.default)(c.Icon).withConfig({displayName:"input__StyledIcon",componentId:"sc-m4unkx-0"})(["opacity:",";"],(function(e){return e.disabled?".5":"1"})),ke=function(e){return o.createElement(D.Z,{plain:!0,content:"Send your message"},o.createElement(c.Box,null,o.createElement(Oe,(0,l.Z)({name:"chevron_right_s",color:"text",size:"small",cursor:"pointer"},e))))},Ce=(0,b.default)(c.Box).withConfig({displayName:"input__InputContainer",componentId:"sc-m4unkx-1"})(["box-shadow:0 0 8px rgba(0,0,0,0.5);"]),Ze=function(){var e=(0,fe.Z)().sendButtonClickedLog,t=(0,o.useState)(""),n=(0,r.Z)(t,2),a=n[0],l=n[1],u=(0,i.zi)().pending,s=(0,i.gN)(),d=(0,o.useCallback)((function(){!u&&a&&(s(a),l(""),e({feature:"NetdataAssistantQuestion",question:a}))}),[u,a,s,l,e]);return o.createElement(Ce,{width:"100%",position:"fixed",bottom:"68px",padding:[4],background:"modalBackground"},o.createElement(c.TextInput,{value:a,placeholder:"Message assistant...",iconRight:u?null:o.createElement(ke,{onClick:d,disabled:u||!a}),onChange:function(e){var t=e.target.value;return l(t)},onKeyDown:function(e){"Enter"==e.key&&d()},autoFocus:"autofocus",disabled:u}))},je=function(){return o.createElement(c.Flex,{column:!0},o.createElement(c.Flex,{column:!0,padding:[0,0,17,0]},o.createElement(be,null),o.createElement(xe,null)),o.createElement(Ze,null))},Pe=function(e){var t=e.expanded;return e.isMobile?{base:"95vw"}:t?{base:"60vw"}:{base:125,max:150,min:60}},Ie=function(e){var t=e.expanded;return e.isMobile?{base:"80vh",max:"80vh",min:"10vh"}:t?{base:"80vh",min:"80vh"}:{base:80,max:150,min:80}},Se=function(e){return function(t){return o.createElement(we.ZP,{feature:"NetdataAssistant"},o.createElement(e,(0,l.Z)({body:o.createElement(je,null),modalContentProps:{padding:[0]},modalBodyProps:{height:"100%",padding:[0],columnReverse:!0},getWidth:Pe,getHeight:Ie},t)))}}(te),De=Se,Me=function(){var e=(0,i.m5)(),t=(0,r.Z)(e,3),n=t[0],a=t[2],l=(0,i.zi)().clear,c=(0,o.useCallback)((function(){a(),l()}),[a,l]);return n?o.createElement(De,{onClose:c}):null}},12899:function(e,t,n){n.d(t,{gN:function(){return C},R3:function(){return w},TA:function(){return y},Nu:function(){return E},zi:function(){return k},m5:function(){return O}});var r=n(93433),o=n(4942),a=n(29439),i=(n(92222),n(69826),n(41539),n(31672),n(2490),n(59461),n(21249),n(57640),n(9924),n(57327),n(88449),n(59849),n(47941),n(82526),n(38880),n(15581),n(34514),n(54747),n(49337),n(33321),n(69070),n(67294)),l=n(4480),c=n(26398),u=n(66152),s=n(74059),d=n(37518),m=(0,l.cn)({key:"assistantAlert",default:null}),f=(0,l.cn)({key:"assistantAlertsAtom",default:[]}),p=(0,l.cn)({key:"assistantChatAtom",default:{open:!1,messages:[]}}),g=n(28721);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=(0,l.CG)({key:"assistantAlertSelector",get:function(e){var t=e.space,n=e.room,r=e.alert,o=e.node,a=e.chart;return function(){return function(e){var t=e.space,n=e.room,r=e.alert,o=e.node,a=e.chart;return c.Z.post("/api/v1/troubleshoot",{space:t,room:n,alarm:r,node:o,chart:a})}({space:t,room:n,alert:r,node:o||"dummy-node-id",chart:a||"dummy-chart-id"})}},cachePolicy_UNSTABLE:{eviction:"most-recent"}}),y=function(e){var t,n=e.alert,r=e.node,o=e.chart,a=(0,s.th)(),i=(0,d.UL)(),c=(0,l.$P)(h({space:a,room:i,alert:n,node:r,chart:o}));return{loaded:"loading"!==c.state,value:null===(t=c.contents)||void 0===t?void 0:t.data,hasError:"hasError"===c.state}},w=function(){return(0,l.FV)(m)},E=function(){return(0,l.FV)(f)},x=function(){return(0,l.FV)(p)},O=function(){var e=x(),t=(0,a.Z)(e,2),n=t[0],r=t[1],o=(0,i.useCallback)((function(){return r((function(e){return v(v({},e),{},{open:!0})}))}),[r]),l=(0,i.useCallback)((function(){return r((function(e){return v(v({},e),{},{open:!1})}))}),[r]);return[null===n||void 0===n?void 0:n.open,o,l]},k=function(){var e=x(),t=(0,a.Z)(e,2),n=t[0],o=t[1],l=(0,i.useCallback)((function(e){return o((function(t){return v(v({},t),{},{messages:[].concat((0,r.Z)(t.messages),[e])})}))}),[o]),c=(0,i.useCallback)((function(){o((function(e){return v(v({},e),{},{messages:[]})}))}),[o]),u=(0,i.useMemo)((function(){return n.open&&!!n.messages.find((function(e){return!!e.pending}))}),[n]);return{messages:null===n||void 0===n?void 0:n.messages,pending:u,addMessage:l,clear:c}},C=function(){var e=function(){var e=k().addMessage;return(0,i.useCallback)((function(t){var n=(0,g.Z)();return e({id:n,type:"question",value:t}),n}),[e])}(),t=function(){var e=k().addMessage;return(0,i.useCallback)((function(t){var n=t.questionId,r=t.pending,o=t.answer;return e({id:(0,g.Z)(),questionId:n,type:"answer",value:o,pending:r})}),[e])}(),n=function(){var e=x(),t=(0,a.Z)(e,2)[1];return(0,i.useCallback)((function(e){var n=e.questionId,r=e.value,o=e.additionalInfo,a=e.error;t((function(e){return v(v({},e),{},{messages:e.messages.map((function(e){return e.questionId==n?v(v({},e),{},{pending:!1,value:r,additionalInfo:o,error:a}):e}))})}))}),[])}(),r=(0,i.useCallback)((function(r){var o,a=e(r);t({questionId:a,pending:!0}),(o=r,c.Z.post("/api/v1/chat",{messages:[{role:"user",content:o}]},{transform:function(e){return(0,u.k5)(e)}})).then((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).data,t=void 0===e?{}:e,r=t.session.messages,o=t.additionalInfo,i=(r||[]).filter((function(e){return"assistant"==e.role})),l=i.length?i[i.length-1]:null;null!==l&&void 0!==l&&l.content?n({questionId:a,value:l.content,additionalInfo:o}):n({questionId:a,error:"Something went wrong"})})).catch((function(e){n({questionId:a,error:e.message||"Something went wrong"})}))}),[e,n]);return r}}}]);