!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="cf309c5e-f774-4058-8f00-6d57c60b492c",e._sentryDebugIdIdentifier="sentry-dbid-cf309c5e-f774-4058-8f00-6d57c60b492c")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"08864407160b3973b9b88c5ae92687282b21e2f4"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[9510],{39510:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Tn});var l=n(58168),o=(n(62953),n(96540)),r=n(10058),a=n(11128),i=n(47193);n(14905),n(98992),n(8872);const s=function(){let{selectedNode:e,nodes:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,o.useMemo)((()=>t.reduce(((e,t)=>{let{id:n,name:l,isLive:o,isPreferred:r}=t;return o&&r?[...e,{label:l,value:n}]:e}),[])),[t]),l=(0,o.useMemo)((()=>(e=>e?null!==e&&void 0!==e&&e.id&&null!==e&&void 0!==e&&e.name?{label:e.name,value:e.id}:e:null)(e)||(n.length?n[0]:"")),[n]),[r,a]=(0,o.useState)();return(0,o.useEffect)((()=>{l&&a(l)}),[l,a]),{options:n,node:r,setNode:a}};n(41393),n(81454);var c=n(63950),d=n.n(c);const u=function(){let{node:e,setNode:t=d(),options:n=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.createElement(r.Box,{width:"250px"},o.createElement(r.Flex,{column:!0,gap:1},o.createElement(r.TextBig,null,"Node"),o.createElement(r.Select,{placeholder:"Select a node",options:n,value:e,onChange:t})))};n(74648),n(17333),n(23215),n(54520);const m=(0,o.createContext)({}),p=()=>{const e=(0,o.useContext)(m),{searchItem:t,setSearchItem:n}=e||{},{term:l,props:r}=t||{},a=!!Object.keys(t.props||{}).length,i=(0,o.useCallback)((e=>n((t=>({...t,term:e})))),[n]),s=(0,o.useCallback)(((e,t)=>{n((n=>({...n,props:{...n.props||{},[e]:t}})))}),[n]),c=(0,o.useCallback)((e=>{n((t=>{var n;const l={...t};return null!==(n=l.props)&&void 0!==n&&n[e]&&delete l.props[e],l}))}),[n]),u=(0,o.useCallback)((e=>{try{return new RegExp(l).test(e)}catch(t){return d()}}),[l]),p=(0,o.useCallback)((e=>!r||!Object.entries(r).filter((e=>{let[,t]=e;return void 0!==t})).length||Object.entries(r).every((t=>{let[n,l]=t;return e[n]==l}))),[r]);if(!e)throw new Error("Attempt to use 'useSearch' outside of 'SearchContext.Provider'");return{searchItem:t,hasProps:a,searchForTerm:i,searchByProp:s,testString:u,testProps:p,removeSearchProp:c}},g=e=>{let{children:t}=e;const[n,l]=(0,o.useState)({});return o.createElement(m.Provider,{value:{searchItem:n,setSearchItem:l}},t)},h=()=>{const{searchItem:e,searchForTerm:t}=p(),{term:n}=e||{};return o.createElement(r.Box,{width:"250px"},o.createElement(r.Flex,{column:!0,gap:1},o.createElement(r.TextBig,null,"Search"),o.createElement(r.SearchInput,{value:n,placeholder:"Search",onChange:t,size:"large",height:"33px",padding:[2,3]})))};var f=n(29217),E=n(32089),v=n(8711);const b=(0,v.default)(r.Flex).withConfig({displayName:"styled__StyledSection",componentId:"sc-dutbst-0"})(["&:hover{background-color:",";}"],(0,r.getColor)("secondaryHighlight")),y=(0,v.default)(r.Button).withConfig({displayName:"styled__StyledButton",componentId:"sc-dutbst-1"})(["&:before{content:",";width:18px;height:18px;display:",";align-items:center;justify-content:center;font-size:11px;font-weight:bold;position:absolute;top:-6px;left:-10px;border-radius:50%;background-color:",";color:",";z-index:10;}"],(e=>{let{warningItems:t}=e;return'"'.concat(t,'"')}),(e=>{let{warningItems:t}=e;return t?"flex":"none"}),(0,r.getColor)("error"),(0,r.getColor)("bright"));var C=n(94390),x=n(49286);const k=e=>{let{title:t="",props:n={},config:l={}}=e;const{searchItem:a,searchByProp:i,removeSearchProp:s}=p(),{props:c}=a||{},d=(0,o.useCallback)(((e,t)=>{const{searchCondition:n}=l[e]||{},o=Object.entries(n||{});if(o.length){const[e,n]=o[0];t?s(e):i(e,n)}}),[i,s]);return o.createElement(r.Flex,{column:!0,gap:1},o.createElement(r.TextBig,{strong:!0},t),o.createElement(r.Flex,{column:!0},Object.entries(l).map((e=>{var t;let[a,{label:i,searchCondition:s}]=e;const u=(0,x.bn)(n||{})[a]||0,[m,p]=Object.entries(s)[0],g=!!c&&c[m]==p,h=C.zy.includes(a)&&u>0?{color:"error"}:{};return o.createElement(f.A,{key:a,content:null===(t=l[a])||void 0===t?void 0:t.tooltip,align:"bottom",isBasic:!0,base:{background:"main",padding:[2]}},o.createElement(b,{width:"100%",alignItems:"center",justifyContent:"between",gap:2,background:g?"menuItemSelected":"none",padding:[1,2],round:!0,cursor:"pointer",onClick:()=>d(a,g)},o.createElement(r.TextBig,h,i),o.createElement(r.TextBig,h,u)))}))))},w=e=>{let{attention:t,source_type:n,status:l}=e;return o.createElement(r.Flex,{column:!0,padding:[3],gap:2},o.createElement(k,{title:"Attention",props:t,config:C.lp}),o.createElement(E.A,{color:"border"}),o.createElement(k,{title:"Source type",props:n,config:C.V8}),o.createElement(E.A,{color:"border"}),o.createElement(k,{title:"Status",props:l,config:C.T_}))},S=(0,o.memo)(w),I=Object.keys(C.T_),A=Object.keys(C.V8),D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=t.reduce(((e,t)=>({...e,[t]:0})),{});return function(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;for(let n=0;n<t.length;n++)if(t[n]==l[e]){var r;const t=l[e];o[e]||(o[e]={}),o[e][t]=((null===(r=o[e])||void 0===r?void 0:r[t])||0)+1}}},F=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,l;(t.attention||(t.attention={}),e.restart_required)&&(t.attention.restart_required=((null===(n=t.attention)||void 0===n?void 0:n.restart_required)||0)+1);e.plugin_rejected&&(t.attention.plugin_rejected=((null===(l=t.attention)||void 0===l?void 0:l.plugin_rejected)||0)+1)},T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.entries(e);if(n.length)for(let l=0;l<n.length;l++){const[e,o]=n[l];if(e.match(/\/[^/]+/g))return T(o,t);o.type&&"template"!=o.type&&(D("status",I)(o,t),D("source_type",A)(o,t),F(o,t))}return t},B=e=>{let{tree:t}=e;const{attention:n,source_type:l,status:r}=(0,o.useMemo)((()=>Object.keys(t)?T(t):{}),[t]);return{warningItems:((null===n||void 0===n?void 0:n.restart_required)||0)+((null===n||void 0===n?void 0:n.plugin_rejected)||0)+((null===r||void 0===r?void 0:r.failed)||0)+((null===r||void 0===r?void 0:r.incomplete)||0),menuItems:{attention:n,source_type:l,status:r}}};var P=n(87659);const _=e=>{let{tree:t={}}=e;const n=(0,o.useRef)(),[l,a,,i]=(0,P.A)(!1),{hasProps:s}=p(),{warningItems:c,menuItems:d}=B({tree:t});return o.createElement(o.Fragment,null,o.createElement(f.A,{align:"bottom",content:"Show filters"},o.createElement(r.Flex,{ref:n},o.createElement(y,{flavour:s?"default":"hollow",icon:"filterList",onClick:a,warningItems:c}))),l&&n.current?o.createElement(r.Drop,{width:60,target:n.current,align:{top:"bottom",right:"right"},animation:!0,background:"modalTabsBackground",margin:[2,0,0],round:1,close:i,onClickOutside:i,onEsc:i},o.createElement(S,d)):null)};var L=n(8239);const N=()=>{const e=(0,L.Hj)();return o.createElement(f.A,{align:"bottom",content:"Reload"},o.createElement(r.Flex,null,o.createElement(r.Button,{flavour:"hollow",icon:"refresh",onClick:e})))};var j=n(39225);n(8159),n(37550);const O=(0,o.createContext)(),M={name:""},R=()=>{const e=(0,o.useContext)(O),{id:t,open:n,isNewItem:l,formData:r,setFormData:a,isLoading:i,startLoading:s,stopLoading:c,fullPage:d,setFullPage:u,entityProps:m,isDirty:p,setIsDirty:g,error:h}=e||{},f=(0,o.useCallback)((e=>a((t=>({...t,name:e})))),[a]);if(!e)throw new Error("Attempt to use 'useConfigItemContext' outside of 'ConfigItemContext.Provider'");return{id:t,open:n,isNewItem:l,formData:r,setFormData:a,setName:f,isLoading:i,startLoading:s,stopLoading:c,fullPage:d,setFullPage:u,entityProps:m,isDirty:p,setIsDirty:g,error:h}},z=e=>{let{children:t,...n}=e;const[l,r]=(0,o.useState)(M);return o.createElement(O.Provider,{value:{...n,formData:l,setFormData:r}},t)};var H=n(81198);const V=(0,v.default)(r.TextBig).withConfig({displayName:"styled__StyledTitle",componentId:"sc-16w9sl7-0"})(["font-family:Courier New,monospace;"]),W=(0,v.default)(r.Icon).attrs((e=>({opacity:"1",cursor:"pointer",...e}))).withConfig({displayName:"styled__StyledTemplateArrow",componentId:"sc-16w9sl7-1"})(["opacity:",";cursor:",";"],(e=>{let{hasTemplateChildren:t}=e;return t?"1":"0"}),(e=>{let{hasTemplateChildren:t}=e;return t?"pointer":"default"})),q=(0,v.default)(r.Flex).withConfig({displayName:"styled__StyledHeader",componentId:"sc-16w9sl7-2"})(["height:","px;border-top:1px solid ",";border-left:1px solid ",";border-right:1px solid ",";border-bottom:1px solid ",";border-bottom-style:",";"],C.FL,(0,r.getColor)("border"),(0,r.getColor)("border"),(0,r.getColor)("border"),(0,r.getColor)("border"),(e=>{let{isOpenEntity:t}=e;return t?"none":"solid"})),U=(0,v.default)(r.Collapsible).withConfig({displayName:"styled__StyledCollapsible",componentId:"sc-16w9sl7-3"})(["height:",";max-height:",";overflow:auto;"],(e=>{let{open:t,fullPage:n}=e;return t&&n?"100%":"auto"}),(e=>{let{flavour:t,fullPage:n,isJob:l}=e;return"path"!=t?n?"calc(100% - 55px)":l?"500px":"unset":"unset"})),K=e=>{let{source:t="",sourceType:n}=e;const l=t.split(",");return o.createElement(r.Flex,{column:!0,gap:2},o.createElement(r.Flex,{alignItems:"center",gap:1},o.createElement(r.Text,{strong:!0},"Source type"),o.createElement(r.Pill,null,n)),o.createElement(r.Flex,{column:!0,gap:1},l.length?l.map((e=>o.createElement(r.TextSmall,{key:e},e))):null))},Y=e=>{let{source:t,sourceType:n,...a}=e;const i=C.V6[n];if(!i)return null;const{icon:s}=i;return o.createElement(f.A,{isBasic:!0,content:o.createElement(K,{source:t,sourceType:n})},o.createElement(r.Box,null,o.createElement(r.Icon,(0,l.A)({name:s},a))))},J=e=>{let{type:t,status:n}=e;const l=C.bM[n];if(!l)return null;const{label:a,color:i,icon:s}=l;return"template"!=t?o.createElement(r.Flex,{width:{min:28},gap:1,padding:[1,2],border:{side:"all",color:i},round:!0,alignItems:"center",justifyContent:"center"},o.createElement(r.Icon,{name:s,height:"12px",color:i}),o.createElement(r.Text,{color:i},a)):null},Q=function(){let{title:e,type:t,source:n,sourceType:l,status:a,templateChildren:i={},onCollapseExpand:s,userDisabled:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:d}=C.g7[t]||C.g7.default,u=c||"disabled"==a?"disabled":d,{open:m,isNewItem:p,formData:g,setName:h}=R(),{name:f}=g||{},E=!!Object.keys(i).length,v=(0,o.useCallback)((e=>h(e.target.value)),[h]);return o.createElement(r.Flex,{gap:2,alignItems:"center"},"template"==t?o.createElement(W,{name:"chevron_right",color:"textLite",rotate:m?3:1,onClick:s,hasTemplateChildren:E}):null,o.createElement(J,{type:t,status:a}),o.createElement(Y,{source:n,sourceType:l,color:u}),p?null:o.createElement(V,{strong:!0,color:u},(0,H.J3)(e)),p&&m?o.createElement(r.TextInput,{width:65,value:f,onChange:v,placeholder:"Add configuration name",error:p&&!(null!==g&&void 0!==g&&g.name),hideErrorMessage:!0}):null)},Z=()=>e=>{let{template:t,formData:n={},entityProps:l}=e;return{[C.D9]:!0,template:t,name:"",sourceType:"user",type:"job",formData:n,entityProps:l}},G=e=>t=>{let{tooltip:n,onClick:a,...i}=t;const s=(0,o.useRef)(),c=(0,o.useCallback)((e=>{var t,n;null===a||void 0===a||a(e),null===(t=s.current)||void 0===t||null===(n=t.blur)||void 0===n||n.call(t)}),[a,s.current]),d=(0,o.useMemo)((()=>({...i,...a?{onClick:c}:{}})),[c]);return o.createElement(f.A,{align:"bottom",content:n},o.createElement(r.Box,null,o.createElement(e,(0,l.A)({ref:s},d))))};var $=n(92155);const X=G((0,$.A)(r.Button)),ee=function(){let{title:e,buttonProps:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[,n]=(0,L.QH)(),r=Z(),{isLoading:a,entityProps:i}=R(),{cmds:s=[]}=i||{},c=(0,o.useCallback)((()=>{n(r({template:e,entityProps:i}))}),[r,n]);return s.includes("add")?o.createElement(X,(0,l.A)({feature:"DyncnfTemplate",payload:{id:e},tooltip:"Add a new configuration item",icon:"plus",iconWidth:18,iconHeight:18,onClick:c,disabled:a},t)):null};n(9391);const te=(0,o.createContext)({}),ne=()=>(0,o.useContext)(te),le=te;var oe=n(71835);const re=()=>{const[e,t,,n]=(0,oe.A)();return[(0,o.useCallback)((function(){let{successMessage:t="Successfully saved"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l=>{let{data:{message:o}}=l;(o?n:e)({header:o?"Warning":"Success",text:o||t})}}),[e,n]),(0,o.useCallback)((function(){let{errorMessage:e="Something went wrong"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n=>{var l;const{message:o,error_message:r}=(null===n||void 0===n||null===(l=n.response)||void 0===l?void 0:l.data)||{};t({header:"Error",text:o||r||e})}}),[t])]};var ae=n(80158);const ie=G((0,$.A)(r.Button)),se=e=>{let{id:t,enable:n,open:l,onDecline:a,onConfirm:i}=e;const s=n?"enable":"disable";return l?o.createElement(r.ConfirmationDialog,{title:"".concat((0,ae.Zr)(s)," item?"),handleConfirm:i,handleDecline:a,confirmLabel:"Yes ".concat(s),declineLabel:"No",isConfirmPositive:!!n,message:o.createElement(r.Flex,{column:!0,gap:2},o.createElement(r.TextBig,null,"You are about to ",s," ",o.createElement(V,{strong:!0},t)," module and all its configurations."),o.createElement(r.TextBig,null,"Are you sure?"))}):null},ce=function(){let{id:e,userDisabled:t,buttonProps:n={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{isLoading:l,startLoading:r,stopLoading:a}=R(),{node:i}=ne(),s=(0,L.DP)({id:e,node:i}),c=(0,L.Hj)(),[d,u]=re(),[m,p]=(0,o.useState)(),[g,,h,f]=(0,P.A)(),E=(0,o.useCallback)((()=>{f(),r(),s(m).then((e=>{c(),d({successMessage:"Successfully ".concat(m?"enabled":"disabled"," module")})(e)})).catch((e=>{u()(e)})).finally((()=>{a()}))}),[s,r,a]),v=(0,o.useCallback)((e=>{l||(p(e),h())}),[l,h]),b=(0,o.useMemo)((()=>({feature:"DyncnfTemplate",payload:{id:e},isLoading:l,disabled:l,...n,...t?{tooltip:"Enable this module",icon:"switch_off",iconColor:"disabled",onClick:()=>v(!0)}:{tooltip:"Disable this module",icon:"switch_off",onClick:()=>v(!1),iconColor:"success",danger:!0}})),[e,t,l,n,v]);return o.createElement(o.Fragment,null,o.createElement(ie,b),o.createElement(se,{id:e,enable:m,open:g,onDecline:f,onConfirm:E}))},de="success",ue={iconColor:de,flavour:"borderless",color:de},me=e=>{let{title:t,userDisabled:n}=e;return o.createElement(o.Fragment,null,o.createElement(ee,{title:t,buttonProps:ue}),o.createElement(ce,{id:t,userDisabled:n,buttonProps:ue}))},pe=G(r.Button),ge=function(){let{buttonProps:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{open:t,fullPage:n,setFullPage:r,isNewItem:a}=R(),i=(0,o.useMemo)((()=>({...e,icon:n?"reduceSize":"fullScreen",tooltip:n?"Reduce window size":"Expand window size"})),[n]),s=(0,o.useCallback)((()=>{r(!n)}),[n,r]);return t&&!a?o.createElement(pe,(0,l.A)({onClick:s},i)):null},he=G(r.Button),fe=function(){let{onClick:e,buttonProps:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{open:n,isLoading:r,entityProps:a}=R(),{cmds:i=[]}=a||{},s=i.includes("update"),c=s?"Edit configuration":"View configuration";return o.createElement(he,(0,l.A)({tooltip:n?"Close":c,icon:n?"x":s?"pencilOutline":"search",onClick:e,disabled:r},t))},Ee=G(r.Button),ve=function(){let{title:e,onCollapseExpand:t=d(),buttonProps:n={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=(0,H.UE)(e),[,a]=(0,L.QH)(),{node:i,path:s}=ne(),c=(0,L.SD)({node:i,path:s}),{cmds:u,user_disabled:m}=c(e)||{},{isLoading:p,open:g,formData:h,entityProps:f}=R(),E=Z(),v=(0,o.useCallback)((()=>{p||(a(E({template:r,formData:h,entityProps:f})),t())}),[p,r,h,f,a,E]);return g&&null!==u&&void 0!==u&&u.includes("add")?o.createElement(Ee,(0,l.A)({icon:"copy",onClick:v,disabled:p||m},m?{}:{tooltip:"Copy this item"},n)):null};var be=n(50876);const ye=G((0,$.A)(r.Button)),Ce=e=>{let{id:t,open:n,onDecline:l,onConfirm:a}=e;return n?o.createElement(r.ConfirmationDialog,{title:"Delete item?",handleConfirm:a,handleDecline:l,confirmLabel:"Yes, delete",declineLabel:"No",message:o.createElement(r.Flex,{column:!0,gap:2},o.createElement(r.TextBig,null,"You are going to completely remove ",o.createElement(V,{strong:!0},t)," and this action cannot be reverted."),o.createElement(r.TextBig,null,"Are you sure that you want to delete this item?"))}):null},xe=function(){let{id:e,buttonProps:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{isLoading:n,entityProps:r,startLoading:a,stopLoading:i}=R(),{type:s,cmds:c=[]}=r||{},{node:d}=ne(),u=(0,L.OU)({id:e,node:d}),[m,p]=re(),g=(0,L.Hj)(),[h,,f,E]=(0,P.A)(),{sendButtonClickedLog:v}=(0,be.A)(),b=(0,o.useCallback)((()=>{E(),a(),u().then((t=>{m({successMessage:"Successfully removed configuration"})(t),v({feature:"DyncnfItem",description:"Confirm deletion",id:e}),g()})).catch((e=>{p()(e)})).finally((()=>{i()})),setTimeout((()=>{i()}),1e3)}),[u,E,a,i,g,v,m,p]),y=(0,o.useCallback)((()=>{n||f()}),[n,f]);return"job"==s&&c.includes("remove")?o.createElement(o.Fragment,null,o.createElement(ye,(0,l.A)({feature:"DyncnfItem",payload:{id:e},icon:"trashcan",onClick:y,disabled:n,tooltip:"Remove item"},t)),o.createElement(Ce,{id:e,open:h,onDecline:E,onConfirm:b})):null},ke=G((0,$.A)(r.Button)),we=function(){let{id:e,buttonProps:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{node:n,path:r}=ne(),a=(0,L.ZN)({id:e,node:n}),[i,s]=re(),{isLoading:c,entityProps:d,startLoading:u,stopLoading:m}=R(),p=(0,L.SD)({node:n,path:r}),{user_disabled:g}=p(e)||{},{cmds:h=[]}=d||{},f=(0,L.O_)({node:n,id:e}),E=(0,o.useCallback)((()=>{c||g||(u(),a().then((e=>{i({successMessage:"Successfully restarted configuration"})(e),f()})).catch((e=>{s()(e)})).finally((()=>{m()})))}),[c,g,a,u,f,m,i,s]);return h.includes("restart")?o.createElement(ke,(0,l.A)({feature:"DyncnfItem",payload:{id:e,label:"Restart"},icon:"refresh",onClick:E,disabled:c||g},g?{}:{tooltip:"Restart"},t)):null},Se=e=>{let{id:t}=e;const{isLoading:n,entityProps:l,startLoading:a,stopLoading:i}=R(),{cmds:s=[],userDisabled:c}=l||{},[d,u]=(0,o.useState)(!c),{node:m,path:p}=ne(),g=(0,L.SD)({node:m,path:p}),{user_disabled:h}=g(t)||{},E=(0,L.DP)({id:t,node:m}),v=(0,L.O_)({node:m,id:t}),[b,y]=re(),{sendButtonClickedLog:C}=(0,be.A)(),x=(0,o.useCallback)((e=>{if(!h){const n=e.currentTarget.checked;u(n),a(),E(n).then((e=>{C({feature:"DyncnfItem",description:n?"Enable item":"Disable item",id:t}),b({successMessage:"Successfully ".concat(n?"enabled":"disabled"," configuration")})(e),v()})).catch((e=>{C({feature:"DyncnfItem",description:"Failed to ".concat(n?"enable":"disable"," item"),id:t}),y()(e)})).finally((()=>{i()}))}}),[h,E,a,u,v,C,b,y]),k=s.includes("enable"),w=s.includes("disable");return k&&w?o.createElement(f.A,{align:"bottom",content:h?null:d?"Disable item":"Enable item"},o.createElement(r.Box,{padding:[1.5,2]},o.createElement(r.Toggle,{onChange:x,checked:d,colored:!0,disabled:n||h}))):null},Ie="text",Ae={iconColor:Ie,flavour:"borderless",color:Ie,type:"button"},De=(0,v.default)(r.Flex).attrs({alignItems:"center",border:{side:"all",color:"border"},round:!0}).withConfig({displayName:"itemActions__StyledContainer",componentId:"sc-1kpuq1a-0"})([""]),Fe=function(){let{title:e,isOpenEntity:t,onViewButtonClick:n,onCollapseExpand:l=d()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.createElement(o.Fragment,null,o.createElement(De,{gap:1},o.createElement(ve,{title:e,onCollapseExpand:l,buttonProps:Ae}),o.createElement(we,{id:e,buttonProps:Ae}),o.createElement(xe,{id:e,buttonProps:Ae}),t?null:o.createElement(Se,{id:e})),o.createElement(De,{gap:1},o.createElement(ge,{buttonProps:Ae}),o.createElement(fe,{onClick:n,buttonProps:Ae})))},Te=e=>{let{title:t,onViewButtonClick:n,onCollapseExpand:l,type:a,userDisabled:i,isOpenEntity:s}=e;return o.createElement(r.Flex,{gap:2,alignItems:"center"},"template"==a?o.createElement(me,{title:t,userDisabled:i}):o.createElement(Fe,{title:t,onViewButtonClick:n,onCollapseExpand:l,isOpenEntity:s}))},Be={vertical:2,horizontal:4},Pe=e=>{let{path:t,onClick:n,...a}=e;const{open:i}=R();return o.createElement(r.Flex,(0,l.A)({gap:2,onClick:n,cursor:"pointer"},a),o.createElement(r.Icon,{name:"chevron_right",color:"textLite",rotate:i?3:1}),o.createElement(V,{strong:!0},t))},_e=e=>{let{flavour:t,title:n,onViewButtonClick:r,onCollapseExpand:a,level:i,entityProps:s={},isOpenEntity:c}=e;const{vertical:d,horizontal:u}=Be,m=(0,o.useMemo)((()=>[d,u,d,u*i]),[i]),p="path"==t;return o.createElement(q,{alignItems:"center",justifyContent:"between",padding:m,isOpenEntity:c},p?o.createElement(Pe,{path:n,onClick:a}):o.createElement(o.Fragment,null,o.createElement(Q,(0,l.A)({title:n,onCollapseExpand:a},s)),o.createElement(Te,(0,l.A)({title:n,onViewButtonClick:r,onCollapseExpand:a,isOpenEntity:c},s))))},Le=e=>{let{open:t,onDecline:n,onConfirm:l}=e;return t?o.createElement(r.ConfirmationDialog,{title:"Discard changes?",handleConfirm:l,handleDecline:n,confirmLabel:"Yes, discard",declineLabel:"No, keep editing",message:o.createElement(r.Flex,{column:!0,gap:2},o.createElement(r.TextBig,null,"If you exit Edit mode before submit, your changes will be lost."),o.createElement(r.TextBig,null,"Are you sure?"))}):null},Ne=e=>(0,o.useEffect)((()=>{if(!e)return;const t=t=>{"Escape"==t.code&&e(t)};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)}),[e]),je=e=>{let{title:t,open:n,isLoading:l,isDirty:r,setIsDirty:a,toggle:i,entityProps:s,error:c}=e;const d=s[C.D9],u=["single","job"].includes(null===s||void 0===s?void 0:s.type),[,m]=(0,L.QH)(),[p,,g,h]=(0,P.A)(),{toggle:f,close:E}=(0,L.IP)(),v=(0,o.useCallback)((()=>{r?(a(!1),i(),h()):m(null),E(t)}),[t,E,m,r,a,h]),b=(0,o.useCallback)((()=>{l||(d||r?c?v():g():i())}),[l,d,r,c,v,g]);return Ne((e=>{"Escape"==e.code&&n&&u&&(e.preventDefault(),b())})),(0,o.useEffect)((()=>{u&&f(t,n)}),[u,n]),{confirmationOpen:p,closeConfirmation:h,onConfirm:v,onClick:b}};var Oe=n(28738);const Me=e=>{let{virtualIndex:t,virtualRowStart:n,flavour:a="path",title:i="",level:s=1,entityProps:c={},children:d,isNewItem:u,isOpen:m,...p}=e;const[g,h]=(0,P.A)(u||m),{node:f,inModal:E}=ne(),v=(0,L._O)({node:f,id:i})||c,b="job"==(null===v||void 0===v?void 0:v.type),y=["single","job"].includes(null===v||void 0===v?void 0:v.type),[C,,x,k]=(0,P.A)(),[w,S]=(0,o.useState)(u),[I,A]=(0,o.useState)(),[D,F]=(0,o.useState)(),T="path"!=a&&g&&C,{confirmationOpen:B,closeConfirmation:_,onConfirm:N,onClick:j}=je({title:i,open:g,isLoading:C,isDirty:D,setIsDirty:F,toggle:h,entityProps:v,error:I}),O=(0,o.useCallback)((e=>{var t;u||S(null===e||void 0===e||null===(t=e.uiSchema)||void 0===t||null===(t=t.uiOptions)||void 0===t?void 0:t.fullPage)}),[S]);(0,o.useEffect)((()=>{if(void 0!==t&&void 0!==n){const e=document.querySelector(".dyncnf-virtual-row[data-index='".concat(t,"']"));e&&(e.style.transform=w&&g?"none":"translateY(".concat(n,"px)"))}}),[g,w]);const{containerProps:M,collapsibleProps:R,loaderProps:H}=(0,o.useMemo)((()=>({containerProps:{...g&&w?{position:"fixed",zIndex:"100",...E?{top:0,left:0,width:"100%",height:"100%"}:{top:"5vh",left:"5vw",width:"90vw",height:"90vh"}}:{position:"relative"},...g&&y?{border:{side:"all",color:"border"}}:{},...w?{}:{height:"100%"},background:y&&g?"modalBackground":"mainBackground",round:!0},collapsibleProps:{level:s,open:g,duration:0,flavour:a,fullPage:w,isJob:b,...g&&y?{padding:[2,2,2,4*s]}:{}},loaderProps:{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:".9",zIndex:"100"}})),[g,w,E,y]);return o.createElement(o.Fragment,null,o.createElement(z,{id:i,open:g,isNewItem:u,isLoading:C,startLoading:x,stopLoading:k,fullPage:w,setFullPage:S,entityProps:v,isDirty:D,setIsDirty:F,error:I},o.createElement(r.Flex,(0,l.A)({column:!0},M,p),o.createElement(_e,{key:g,flavour:a,title:i,onViewButtonClick:j,onCollapseExpand:h,level:s,entityProps:v,isOpenEntity:g&&!!y}),o.createElement(U,R,o.Children.map(d,(e=>o.isValidElement(e)?o.cloneElement(e,{level:s+1,onSchemaFetch:O,setIsDirty:F,setError:A}):e))),T?o.createElement(Oe.A,(0,l.A)({title:"Loading..."},H)):null)),o.createElement(Le,{open:B,onDecline:_,onConfirm:N}))};var Re=n(73700),ze=n(51220);const He=e=>{let{virtualIndex:t,virtualRowStart:n,flavour:r="entity",entryKey:a,entityProps:i,configItemLevel:s=1,children:c,...d}=e;return o.createElement(o.Fragment,null,o.createElement(Me,(0,l.A)({virtualIndex:t,virtualRowStart:n,flavour:r,title:a,level:s,entityProps:i},d),c))};var Ve=n(74810),We=n(36091),qe=n(4659),Ue=n(87292),Ke=n(68831);const Ye=v.default.span.withConfig({displayName:"markdocSchema__Strong",componentId:"sc-1se2vza-0"})(["font-weight:bold;"]),Je=v.default.ol.withConfig({displayName:"markdocSchema__OrderedList",componentId:"sc-1se2vza-1"})(["list-style:roman;padding-left:14px;"]),Qe=v.default.ul.withConfig({displayName:"markdocSchema__UnorderedList",componentId:"sc-1se2vza-2"})(['list-style-image:url("','/img/list-style-image.svg");padding-left:14px;'],Ke.A.assetsBaseURL),Ze={heading:{render:e=>{let{level:t=1,...n}=e,a=r.H1;switch(t){case 2:a=r.H2;break;case 3:a=r.H3;break;case 4:a=r.H4;break;case 5:a=r.H5;break;case 6:a=r.H6}return o.createElement(a,(0,l.A)({margin:[2,0]},n))},attributes:{id:{type:String},level:{type:Number}}},paragraph:{render:e=>{let{children:t,...n}=e;return o.createElement(r.Flex,n,o.createElement(r.Text,null,t))}},strong:{render:Ye},link:{render:e=>{let{children:t,href:n,...r}=e;return o.createElement(qe.A,(0,l.A)({href:n,rel:"noopener noreferrer",target:"_blank"},r),t)},attributes:{href:{type:String}}},code:{render:e=>{let{content:t,...n}=e;return o.createElement(Ue.R0,n,t)},attributes:{content:{type:String}}},fence:{render:e=>{let{content:t,...n}=e;return o.createElement(Ue.Ay,n,t)},attributes:{content:{type:String}}},list:{render:e=>{let{ordered:t,children:n,...l}=e;const r=t?Je:Qe;return o.createElement(r,l,n)},attributes:{ordered:{type:Boolean}}}},Ge=e=>{let{children:t}=e;return o.createElement(We.A,{transformConfiguration:{nodes:Ze}},t)},$e=e=>{var t;let{description:n}=e;return("string"==typeof n&&n?n:"object"==typeof n?null===n||void 0===n||null===(t=n.props)||void 0===t?void 0:t.description:null)?o.createElement(f.A,{isBasic:!0,plain:!0,allowHoverOnTooltip:!0,content:o.createElement(r.Flex,{width:{max:70}},o.createElement(Ge,null,n))},o.createElement(r.Icon,{name:"information",color:"text",size:"small"})):null},Xe=e=>{var t;let{description:n}=e;if(!n)return null;const l="string"==typeof n?n:null===(t=n.props)||void 0===t?void 0:t.description;return o.createElement(Ge,null,l)},et=e=>{let{title:t,required:n,description:l,help:a}=e;return t?o.createElement(r.Flex,{column:!0,gap:.5},o.createElement(r.Flex,{alignItems:"center",gap:1},o.createElement(r.TextBig,{strong:!0},t,n?"*":null),a?o.createElement($e,{description:a}):null),o.createElement(Xe,{description:l})):null},tt=e=>{let{id:t,displayLabel:n,label:l,required:r,description:a,schema:i,uiSchema:s={}}=e;const c=s["ui:title"]||l,d=s["ui:help"],u=["array","boolean"].includes(i.type);return c&&(n||u)?o.createElement("label",{htmlFor:t},o.createElement(et,{title:c,required:r,description:a,help:d})):null},nt=e=>{let{id:t,label:n,required:l,description:a,errors:i,children:s,displayLabel:c,schema:d,classNames:u,hidden:m,uiSchema:p}=e;return m?null:o.createElement(r.Flex,{width:"100%",className:"".concat(u," dyncfg-field-container"),column:!0,gap:.5},o.createElement(tt,{id:t,displayLabel:c,label:n,required:l,description:a,schema:d,uiSchema:p}),o.createElement(r.Flex,{className:"dyncfg-field-content",column:!0},s,i?o.createElement(r.TextMicro,{color:"errorText"},i):null))},lt=(ot=e=>{let{onAddClick:t,schema:n,registry:a,properties:i,...s}=e;const{WrapIfAdditionalTemplate:c,ButtonTemplates:d}=a.templates,{AddButton:u}=d;return o.createElement(o.Fragment,null,o.createElement(r.Flex,(0,l.A)({className:"dyncfg-object-field-content",column:!0,gap:3,padding:[0,0,0,3],border:{side:"left",color:"border"}},s),i.map((e=>o.createElement(c,(0,l.A)({key:e.content.key,elemKey:e.content.key},e.content.props),e.content)))),n.additionalProperties?o.createElement(r.Flex,{padding:[2]},o.createElement(u,{onClick:t(n)})):null)},e=>{let{className:t,...n}=e;return null!==t&&void 0!==t&&t.includes("dyncfg-grid")?o.createElement("div",{className:t},o.createElement(ot,n)):o.createElement(ot,n)});var ot;const rt=(0,o.createContext)(),at=e=>{let{children:t}=e;const[n,l]=(0,o.useState)({});return o.createElement(rt.Provider,{value:{collapsibleItemsState:n,setCollapsibleItemsState:l}},t)},it=e=>{const{properties:t,uiSchema:n}=e,{tabs:a,rest:i}=n["ui:options"]||{},[s,c]=(0,o.useState)(0),d=(0,o.useMemo)((()=>(e=>{let{properties:t=[],tabs:n=[]}=e;return n.map((e=>({...e,properties:t.filter((t=>e.fields.includes(t.name)))})))})({properties:t,tabs:a})),[t,a]);return o.createElement(at,null,(i||[]).length?o.createElement(lt,(0,l.A)({},e,{properties:t.filter((e=>i.includes(e.name)))})):null,o.createElement(r.Tabs,{selected:s,onChange:c,height:"100%"},d.map((t=>{let{title:n,...a}=t;return o.createElement(r.Tab,{key:n,label:n},o.createElement(lt,(0,l.A)({},e,a,{border:{side:"top",color:"border"},padding:[2,0,0,3]})))}))))},st={tabs:{Component:it},default:{Component:lt}},ct=e=>{var t;const{title:n,description:l,required:a,uiSchema:i={},idSchema:s,formData:c}=e,u=s.$id,m=i["ui:flavour"],p=i["ui:help"],{Component:g}=st[m]||st.default,h=!(null===i||void 0===i||!i["ui:collapsible"])||!(null===i||void 0===i||null===(t=i["ui:options"])||void 0===t||!t.collapsible),{inContext:f,isItemDirty:E,isItemExpanded:v,setItemState:b}=(()=>{const e=(0,o.useContext)(rt),{collapsibleItemsState:t,setCollapsibleItemsState:n}=e||{},l=(0,o.useCallback)((e=>void 0!==t[e]),[t]),r=(0,o.useCallback)((e=>t[e]),[t]),a=(0,o.useCallback)(((e,t)=>{n((n=>({...n,[e]:t})))}),[n]);return{inContext:!!e,isItemDirty:e?l:d(),isItemExpanded:e?r:d(),setItemState:e?a:d()}})(),y=i["ui:initiallyExpanded"]||!!c,C=(0,o.useMemo)((()=>E(u)?v(u):y),[E,v]),[x,k]=(0,P.A)(C);return(0,o.useEffect)((()=>{f&&b(u,x)}),[f,x,b]),o.createElement(r.Flex,{className:"dyncfg-object-field-container",width:"100%",column:!0,gap:2},n?o.createElement(r.Flex,{gap:1,alignItems:"center"},o.createElement(et,{title:n,required:a,description:l,help:p}),h?o.createElement(r.Icon,{name:"chevron_down",color:"text",size:"small",onClick:k,cursor:"pointer",rotate:x?2:0}):null):null,o.createElement(r.Collapsible,{className:"dyncfg-object-field-collapsible",open:x||!h,duration:0},o.createElement(g,e)))},dt=(0,o.forwardRef)(((e,t)=>{let{title:n,active:a,index:i,setActiveTab:s,onDropIndexClick:c,onReorderClick:d,reordering:u,setReordering:m,hasRemove:p,hasMoveUp:g,hasMoveDown:h,...f}=e;const{onAddIndexClick:E,onCopyIndexClick:v,...b}=f,y=(0,o.useCallback)((e=>{p&&c(e)()}),[p,c]);return(0,o.useEffect)((()=>{if(2==(null===u||void 0===u?void 0:u.length)&&u[0]==i){const e=u[1];d(i,e)(),s(e),m()}}),[u]),o.createElement(r.NavigationTab,(0,l.A)({ref:t},b,{index:i,draggable:!!h&&!!g,active:a,icon:p?o.createElement(r.Icon,{name:"x",size:"small"}):null,onClick:()=>{s(i)},onRemove:y,fixed:!p}),o.createElement(r.TextBig,{whiteSpace:"nowrap"},n))})),ut=(0,v.default)(r.IconButton).attrs((e=>({small:!0,padding:[0,1],...e}))).withConfig({displayName:"styled__StyledIconButton",componentId:"sc-xc1c2v-0"})(["height:",";"],(e=>{let{inTabs:t}=e;return t?"auto":"24px"})),mt=e=>{let{icon:t,iconType:n,...r}=e;return o.createElement(ut,(0,l.A)({flavour:"default",icon:"plus",tooltip:"Add item",type:"button",neutral:!1},r))};var pt=n(3705);const gt=e=>{var t;let{items:n,onAddClick:l,canAdd:a}=e;const[i,{width:s}]=(0,pt.A)(),[c,d]=(0,o.useState)(0),[u,m]=(0,o.useState)();(0,o.useEffect)((()=>{c>=n.length&&d(0)}),[n.length]);const p=a?"calc(".concat(s,"px - 40px)"):"".concat(s,"px");return o.createElement(r.Flex,{ref:i,column:!0},o.createElement(r.Flex,{width:"".concat(s,"px"),margin:[0,0,2,0]},o.createElement(r.NavigationTabs,{width:p,overflow:{horizontal:"auto"}},o.createElement(r.DraggableTabs,{items:n.map(((e,t)=>({id:e.key,title:"Item ".concat(t),active:c==t,setActiveTab:d,reordering:u,setReordering:m,...e}))),Item:dt,onDragEnd:(e,t)=>{m([e,t])}})),a?o.createElement(mt,{onClick:l,padding:[1,3],inTabs:!0}):null),o.Children.map(null===(t=n[c])||void 0===t?void 0:t.children,(e=>o.isValidElement(e)?o.cloneElement(e,{title:""}):e)))},ht=(0,o.memo)(gt),ft=e=>{let{icon:t,iconType:n,...r}=e;return o.createElement(ut,(0,l.A)({flavour:"hollow",icon:"checkmark_partial_s",danger:!0,tooltip:"Remove item",type:"button"},r))},Et=e=>{let{icon:t,iconType:n,...r}=e;return o.createElement(ut,(0,l.A)({flavour:"hollow",icon:"sort_ascending",tooltip:"Move up",type:"button"},r))},vt=e=>{let{icon:t,iconType:n,...r}=e;return o.createElement(ut,(0,l.A)({flavour:"hollow",icon:"sort_descending",tooltip:"Move down",type:"button"},r))};var bt=n(47130);const yt=(0,v.default)(r.Flex).attrs((e=>({open:!0,...e}))).withConfig({displayName:"collapsible__ContentWrapper",componentId:"sc-6ate9-0"})(["display:",";"],(e=>{let{open:t}=e;return t?"flex":"none"})),Ct=(0,bt.A)(r.Icon),xt=e=>{let{title:t="",isCollapsible:n,isOpen:a,onChange:i,children:s,...c}=e;const[d,u]=(0,P.A)(a);return(0,o.useEffect)((()=>{i(d)}),[d]),n?o.createElement(r.Flex,{width:"100%",column:!0,padding:[3,0]},o.createElement(r.Flex,{gap:2},o.createElement(Ct,{name:"chevron_left",size:"small",color:"textLite",rotate:d?1:3,onClick:u,cursor:"pointer",tooltip:d?"Hide contents":"Show contents"}),t?o.createElement(r.Text,{strong:!0},t):null),o.createElement(yt,(0,l.A)({open:d},c),s)):s},kt=e=>{var t,n;let{hasMoveDown:l,hasMoveUp:a,hasRemove:i,index:s,totalItems:c,onAddIndexClick:d,onDropIndexClick:u,onReorderClick:m,canAdd:p,uiSchema:g={},children:h}=e;const[f,E]=(0,o.useState)(!0),v=a||l||i||p,b=m(s,s-1),y=m(s,s+1),C=u(s),x=d(s+1),k=!(null===g||void 0===g||!g["ui:collapsible"])||!(null===g||void 0===g||null===(t=g["ui:options"])||void 0===t||!t.collapsible),w=(0,o.useCallback)((e=>{E(e)}),[E]);return o.createElement(r.Flex,{width:"100%",gap:2,alignItems:f?"start":"center",justifyContent:"between",border:{side:"all",color:"border"},padding:[2,4]},o.createElement(xt,{isCollapsible:k,title:null===(n=h.props)||void 0===n?void 0:n.title,isOpen:f,onChange:w},h),v?o.createElement(r.Flex,{gap:2,padding:[2,0]},a?o.createElement(Et,{onClick:b}):null,l?o.createElement(vt,{onClick:y}):null,i?o.createElement(ft,{onClick:C}):null,p&&s==c-1?o.createElement(mt,{onClick:x}):null):null)},wt=e=>{let{items:t}=e;return t.map((e=>o.createElement(kt,(0,l.A)({key:e.key},e))))},St=(0,o.memo)(wt),It=e=>{let{canAdd:t,onAddClick:n}=e;return o.createElement(r.Flex,{gap:2,alignItems:"center"},o.createElement(r.TextBig,null,"No items"),t?o.createElement(mt,{onClick:n}):null)},At=(0,bt.A)(r.Toggle),Dt=e=>{var t;const{items:n,canAdd:l,onAddClick:a}=e,i="list"==(null===e||void 0===e||null===(t=e.uiSchema)||void 0===t?void 0:t["ui:listFlavour"]),[s,c]=(0,P.A)(i),d=s?St:ht;return o.createElement(r.Flex,{width:"100%",column:!0,gap:2},o.createElement(r.Flex,null,o.createElement(At,{labelRight:"List",labelLeft:"Tabs",onChange:c,checked:s,tooltip:"Switch between list and tabs layout"})),n.length?o.createElement(d,e):o.createElement(It,{canAdd:l,onAddClick:a}))};var Ft=n(45576);const Tt=e=>{var t;let{elemKey:n,onKeyChange:l,schema:a,onDropPropertyClick:i,registry:s,children:c}=e;const[d,u]=(0,o.useState)((null===c||void 0===c||null===(t=c.props)||void 0===t?void 0:t.name)||""),{RemoveButton:m}=s.templates.ButtonTemplates,p=Ft.Rr in a,g=(0,o.useCallback)((e=>{i(n)(e)}),[i,n]),h=(0,o.useCallback)((e=>u(e.target.value)),[u]);return p?o.createElement(r.Flex,{width:"100%",gap:2,alignItems:"center"},o.createElement(r.Flex,{column:!0,gap:1,flex:{grow:1,shrink:1}},o.createElement(r.TextBig,{strong:!0},"Key"),o.createElement(r.TextInput,{value:d,onInput:h,onBlur:e=>l(e.target.value),border:"inputBorder",size:"small"})),o.createElement(r.Flex,{flex:{grow:2,shrink:1}},c),o.createElement(r.Flex,{column:!0,gap:.5},o.createElement(r.TextBig,{opacity:"0"},"x"),o.createElement(m,{onClick:g}))):c},Bt={FieldTemplate:nt,ArrayFieldTemplate:Dt,ObjectFieldTemplate:ct,WrapIfAdditionalTemplate:Tt,ErrorListTemplate:()=>null,ButtonTemplates:{SubmitButton:()=>o.createElement(r.Button,{label:"Save"}),AddButton:mt,RemoveButton:ft,MoveUpButton:Et,MoveDownButton:vt}},Pt=e=>{let{value:t,type:n,disabled:l,onChange:a,onBlur:i,placeholder:s,schema:c,rawErrors:d}=e;const u=n||(e=>"integer"==e||Array.isArray(e)&&e.includes("integer")?"number":"text")(c.type),m="number"==u?null==t||void 0==t?0:t:t||"";return o.createElement(r.TextInput,{value:m,type:u,placeholder:s,onChange:e=>{var t;return a(null===(t=e.target)||void 0===t?void 0:t.value)},onBlur:i,disabled:l,error:!(null===d||void 0===d||!d.length),hideErrorMessage:!0,border:"inputBorder",size:"small"})},_t=e=>{let{value:t,disabled:n,onChange:l}=e;return o.createElement(r.Flex,null,o.createElement(r.Checkbox,{checked:t,onChange:l,disabled:n}))};n(3064),n(72577);const Lt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e||0==t.length)return"";if(Array.isArray(e)){return[...t.filter((t=>e.map((e=>"string"==typeof e?e:e.value)).includes(t.value))),...e.filter((e=>"object"==typeof e&&e.__isNew__))]}return t.find((t=>t.value==e))},Nt=e=>{let{value:t,options:n,disabled:l,multiple:a,onChange:i,uiSchema:s}=e;const{enumOptions:c}=n||{},d=null===s||void 0===s?void 0:s["ui:creatable"],u=(0,o.useCallback)((e=>{var t;i((t=e)?Array.isArray(t)?t.map((e=>e.value)):t.value||"":"")}),[]);return c?o.createElement(r.Select,{value:Lt(t,c),isMulti:a,options:c,onChange:u,isDisabled:l,isCreatable:d,styles:{size:"tiny"}}):null},jt=e=>{let{value:t,disabled:n,onChange:l,uiSchema:a,options:i}=e;const s=a[Ft.ce],c=(null===s||void 0===s?void 0:s.enumOptions)||(null===i||void 0===i?void 0:i.enumOptions),d=null===s||void 0===s?void 0:s.inline,u="buttonGroup"==(null===s||void 0===s?void 0:s.flavour),m=(0,o.useMemo)((()=>({gap:2,...d?{alignItems:"center"}:{column:!0}})),[d]);if(u){const e=c.map((e=>{var t;return{...e,title:null===(t=e.schema)||void 0===t?void 0:t.description}}));return o.createElement(r.ButtonGroup,{items:e,checked:t,onChange:l,buttonProps:{type:"button",small:!0}})}return c?o.createElement(r.Flex,m,c.map((e=>{var a;return o.createElement(r.RadioButton,{key:e.value,checked:t==e.value,onChange:()=>l(e.value),disabled:n},o.createElement("label",{title:null===e||void 0===e||null===(a=e.schema)||void 0===a?void 0:a.description},e.label))}))):null},Ot=v.default.textarea.withConfig({displayName:"textareaWidget__Textarea",componentId:"sc-3aqoej-0"})(["background:",";border-width:1px;border-style:solid;border-color:",";border-radius:2px;color:",";padding:8px 12px;opacity:",';font-size:14px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Ubuntu,"Helvetica Neue",sans-serif;'],(0,r.getColor)("inputBg"),(e=>{let{hasValue:t,error:n}=e;return t?(0,r.getColor)("text"):n?(0,r.getColor)("error"):(0,r.getColor)("inputBorder")}),(e=>{let{disabled:t,hasValue:n}=e;return n?(0,r.getColor)("text"):t?(0,r.getColor)("placeholder"):(0,r.getColor)("textLite")}),(e=>{let{disabled:t}=e;return t?".4":"1"})),Mt={TextWidget:Pt,CheckboxWidget:_t,SelectWidget:Nt,RadioWidget:jt,TextareaWidget:e=>{let{value:t,placeholder:n,disabled:l,onChange:r,options:a,rawErrors:i}=e;const{rows:s=2}=a||{};return o.createElement(Ot,{placeholder:n,disabled:l,onChange:e=>r(e.target.value),rows:s,hasValue:!!t,error:!(null===i||void 0===i||!i.length)},t)},PasswordWidget:e=>o.createElement(Pt,(0,l.A)({type:"password"},e)),URLWidget:e=>o.createElement(Pt,(0,l.A)({type:"url"},e))};var Rt=n(22086);const zt=(0,v.default)(Rt.Ay).withConfig({displayName:"styled__StyledForm",componentId:"sc-epjsfn-0"})(["display:flex;flex-direction:column;justify-content:space-between;height:100%;overflow-y:auto;padding-right:8px;"]),Ht=()=>{const[e,t]=(0,o.useState)([]),n=(0,o.useCallback)((e=>t(e)),[t]);return{errors:e,onError:n,resetErrors:(0,o.useCallback)((()=>t([])),[t])}},Vt=e=>{let{id:t,node:n,data:l,submitMethod:r,onSchemaFetch:a,setIsDirty:i,setError:s}=e;const[c,d]=(0,oe.A)(),{isNewItem:u,setFormData:m,isLoading:p,startLoading:g,stopLoading:h}=R(),{sendLog:f}=(0,be.A)(),{loaded:E,value:v,hasError:b,error:y,refresh:C}=(0,L.t8)({id:t,node:n}),{loaded:x,value:k,hasError:w,refresh:S}=l,I=E&&x,A=y||w,[D,F]=(0,o.useState)(),T=(0,L.Hj)(),{errors:B,onError:P,resetErrors:_}=Ht();(0,o.useEffect)((()=>{E&&v&&!b&&a(v)}),[E,v]),(0,o.useEffect)((()=>{s(A)}),[A]);const N=(0,o.useCallback)((e=>{m(e.formData),u||i(!0)}),[m,u]),j=(0,o.useCallback)((e=>{var n;if(_(),u&&(null===(n=e.formData)||void 0===n||!n.name))return P([{message:"Please provide a name"}]),!1;g(),r(e.formData).then((e=>{let{data:n}=e;F(n),i(!1),u?T():(C(),S()),c({header:"Success",text:"Successfully submitted configuration"}),f({feature:"DyncnfForm",description:"Submit success",id:t})})).catch((n=>{var l,o,r;const a=(null===(l=n.response)||void 0===l?void 0:l.data)||n;F({...a,status:null===(o=n.response)||void 0===o?void 0:o.status,formData:e.formData}),d({header:"Error",text:(null===a||void 0===a?void 0:a.message)||"Something went wrong"}),f({feature:"DyncnfForm",description:"Submit error",id:t,error:JSON.stringify((null===(r=n.response)||void 0===r?void 0:r.data)||{})})})).finally((()=>{h()}))}),[g,h,F,C,S,P]);return{isLoading:p,loaded:I,formData:k,schema:v,response:D,resourcesError:A,errors:B,setResponse:F,onChange:N,onSubmit:j,onError:P}},Wt=e=>{let{title:t="Error",children:n,...a}=e;return o.createElement(r.Flex,(0,l.A)({column:!0,gap:2},a),o.createElement(r.Flex,{alignItems:"center",gap:2},o.createElement(r.Icon,{name:"warning_triangle",color:"errorText"}),o.createElement(r.TextBigger,{color:"errorText"},t)),n)};var qt=n(63314);const Ut=function(){let{remainingErrors:e=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,n]=(0,P.A)();return o.createElement(o.Fragment,null,o.createElement(r.Collapsible,{open:t,duration:0},e.map((e=>{let{message:t}=e;return o.createElement(r.Text,{key:t,color:"errorText"},t)}))),o.createElement(r.Flex,{padding:[2,0,0,0]},o.createElement(r.Button,{flavour:"hollow",neutral:!0,small:!0,label:t?"Hide":"Show ".concat(e.length," more"),onClick:n})))},Kt=function(){let{id:e,errors:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.length?o.createElement(qt.Ay,{feature:"DyncnfForm",id:e,validationErrors:!0},o.createElement(Wt,null,o.createElement(r.Flex,{alignItems:"start",column:!0},o.createElement(r.Text,{color:"errorText"},t[0].message),t.length>1?o.createElement(Ut,{remainingErrors:t.slice(1)}):null))):null},Yt=e=>{let{response:t}=e;const n=((null===t||void 0===t?void 0:t.status)||0)>=400,l=n?"error":"success",{message:a,error_message:i,errorMessage:s}=t,c=i||s||"Status: ".concat(t.status);return n?o.createElement(Wt,null,o.createElement(r.TextBig,{color:l},c)):a?o.createElement(r.TextBig,{color:l},a):o.createElement(r.Flex,null)};var Jt=n(53285);const Qt=G(r.Button),Zt=e=>{let{loading:t}=e;const{id:n,isNewItem:l,entityProps:r={}}=R(),{cmds:a=[]}=r,{node:i,path:s}=ne(),c=(0,L.SD)({node:i,path:s}),{user_disabled:d}=c(n)||{},u=l||a.includes("update");return o.createElement(Jt.A,{permission:"agent:EditDynCfg"},(e=>(!0,o.createElement(Qt,{label:"Submit",small:!0,disabled:!u||t||d,isLoading:t,tooltip:u?"Submit your changes":"You don't have permissions to save your changes"}))))},Gt=G(r.Button),$t=e=>{let{loading:t,setResponse:n}=e;const{node:l,path:r}=ne(),{id:a,formData:i,entityProps:s={}}=R(),{cmds:c=[]}=s,d=(0,L.SD)({node:l,path:r}),{user_disabled:u}=d(a)||{},m=c.includes("test"),p=(0,L.EZ)({id:a,node:l}),[g,h]=(0,oe.A)(),f=(0,o.useCallback)((()=>{p({payload:i}).then((()=>{g({header:"Success",text:"Successfully tested configuration"})})).catch((e=>{var t,l;const{message:o}=(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)||{};h({header:"Error",text:o||"Something went wrong"}),n(null===e||void 0===e||null===(l=e.response)||void 0===l?void 0:l.data)}))}),[p,i,g,h,n]);return m?o.createElement(Gt,{label:"Test",small:!0,tooltip:"Test your configurations",flavour:"hollow",onClick:f,disabled:t||u,type:"button"}):null},Xt=e=>{let{id:t,loading:n,response:l={},setResponse:a,errors:i=[]}=e;return o.createElement(r.Flex,{position:"sticky",bottom:0,gap:2,padding:[4,0,0,0],alignItems:"baseline",justifyContent:"between",zIndex:10},i.length?o.createElement(Kt,{id:t,errors:i}):o.createElement(Yt,{response:l}),o.createElement(r.Flex,{gap:2},o.createElement($t,{loading:n,setResponse:a}),o.createElement(Zt,{loading:n})))},en=function(){let{id:e,error:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n="string"==typeof t?{error_message:t}:"object"==typeof t?t:{},{error_message:l,message:a}=n;return o.createElement(qt.DL,{feature:"DyncnfForm",id:e,error:JSON.stringify(t)},o.createElement(r.Flex,{column:!0,gap:2},o.createElement(r.Flex,{alignItems:"center",gap:2},o.createElement(r.Icon,{name:"warning_triangle",color:"text"}),o.createElement(r.H3,null,"Error")),o.createElement(r.TextBig,null,l||a||C.Fn)))},tn=function(){let{id:e,node:t,isNewItem:n,data:l=C.gh,submitMethod:r,onSchemaFetch:a=d(),setIsDirty:i=d(),setError:s=d()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const c=(0,o.useRef)(0),{isLoading:u,loaded:m,formData:p,schema:g,response:h,resourcesError:f,errors:E,setResponse:v,onChange:b,onSubmit:y,onError:x}=Vt({id:e,node:t,data:l,submitMethod:r,onSchemaFetch:a,setIsDirty:i,setError:s}),{jsonSchema:k,uiSchema:w}=g||{};(0,o.useEffect)((()=>(c.current=Date.now(),()=>c.current=0)),[]);const S=(0,o.useCallback)((e=>{const t=Date.now()-c.current;!n&&(0==c.current||t<100)||b(e)}),[]),I=(null===h||void 0===h?void 0:h.formData)||p;return m?f?o.createElement(en,{id:e,error:f}):o.createElement(qt.Ay,{feature:"DyncnfForm",id:e,isNewItem:n},o.createElement(zt,{className:"dyncfg-form",disabled:u,schema:k,uiSchema:w,formData:I,templates:Bt,widgets:Mt,validator:Ve.Ay,onError:x,onChange:S,onSubmit:y},o.createElement(Xt,{id:e,loading:u,response:h,setResponse:v,errors:E}))):o.createElement(Oe.A,{title:"Loading form...",background:"modalBackground"})},nn=e=>{let{id:t,node:n,children:l}=e;const{setFormData:r}=R(),{loaded:a,value:i,hasError:s,error:c,refresh:d}=(0,L.SW)({id:t,node:n});return(0,o.useEffect)((()=>{a&&!s&&r(i)}),[a,s,r]),a?s?o.createElement(en,{id:t,error:c}):o.Children.map(l,(e=>o.isValidElement(e)?o.cloneElement(e,{id:t,node:n,data:{loaded:a,value:i,hasError:s,refresh:d}}):e)):null},ln=e=>{let{formData:t={},children:n}=e;const{formData:l}=R();return o.Children.map(n,(e=>o.isValidElement(e)?o.cloneElement(e,{data:{...C.gh,value:{...t,...l}}}):e))},on=e=>{let{id:t,formData:n,...r}=e;const{node:a}=ne(),{isNewItem:i}=R(),s=(0,L.Nj)({id:t,node:a}),c=(0,L.xS)({id:t,node:a});return i?o.createElement(ln,{formData:n},o.createElement(tn,(0,l.A)({id:t,node:a,isNewItem:i,submitMethod:s},r))):o.createElement(nn,{id:t,node:a},o.createElement(tn,(0,l.A)({submitMethod:c},r)))},rn=e=>{var t,n;let{entries:r=[],rowHeight:a=C.FL,level:i=1}=e;const s=(0,o.useRef)(),{node:c,path:d,containerRef:u}=ne(),[m,p]=(0,L._F)({node:c,path:d}),g=null===(t=u.current)||void 0===t||null===(t=t.getBoundingClientRect())||void 0===t?void 0:t.bottom,h=null===(n=s.current)||void 0===n||null===(n=n.getBoundingClientRect())||void 0===n?void 0:n.top,f=g&&h?g-h:500,E=Math.floor(f/a),v=r.length>E,b=(0,ze.Te)({count:r.length,getScrollElement:()=>s.current,enableSmoothScroll:!0,estimateSize:()=>a,overscan:5}),y=(0,o.useCallback)((0,Re.s)(300,(e=>{p(e.target.scrollTop)})),[p]);return(0,o.useEffect)((()=>{s.current&&(s.current.scrollTop=m)}),[]),v?o.createElement("div",{ref:s,style:{height:"".concat(f,"px"),overflow:"auto"},onScroll:y},o.createElement("div",{style:{minHeight:"".concat(b.getTotalSize(),"px"),width:"100%",position:"relative"}},b.getVirtualItems().map((e=>{const[t,n]=r[e.index];return o.createElement("div",{className:"dyncnf-virtual-row",key:e.key,style:{position:"absolute",top:0,left:0,width:"100%",transform:"translateY(".concat(e.start,"px)"),overflow:"hidden"},ref:b.measureElement,"data-index":e.index},o.createElement(He,{virtualIndex:e.index,virtualRowStart:e.start,entryKey:t,entityProps:(0,x.bn)(n),configItemLevel:i},o.createElement(on,(0,l.A)({id:t},n))))})))):r.map((e=>{let[t,n]=e;return o.createElement(He,{key:t,entryKey:t,entityProps:(0,x.bn)(n),configItemLevel:i},o.createElement(on,(0,l.A)({id:t},n)))}))},an=e=>{let{entries:t=[],level:n=0}=e;const{testString:r,testProps:a}=p();return t.map((e=>{let[t,i]=e;const{templateChildren:s}=i||{},c=(0,x.bn)(i);if(s){const e=Object.entries(s).filter((e=>{let[t,n]=e;return r(t)&&a(n)}));return o.createElement(He,{key:t,flavour:"template",entryKey:t,entityProps:c,configItemLevel:n,isOpen:!0},o.createElement(rn,{entries:e,level:n}))}return o.createElement(He,{key:t,entryKey:t,entityProps:c,configItemLevel:n},o.createElement(on,(0,l.A)({id:t},c)))}))},sn=(0,o.memo)(an),cn=function(){let{tree:e={},level:t=1,isVirtual:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{testString:l,testProps:r}=p();return n?o.createElement(sn,{entries:Object.entries(e),level:t}):Object.entries(e).map((e=>{let[n,a]=e;const i=n.match(/\/[^/]+/g),s=Object.keys(a).filter((e=>{const{templateChildren:t={}}=a[e],o=Object.values(t).some((e=>r(e)));return!(!r(a[e])&&!o)&&(l(n)||l(e)||Object.keys(t).some((e=>l(e))))})).reduce(((e,t)=>({...e,[t]:a[t]})),{});if(1==i.length)return o.createElement(Me,{key:n,title:i[0],level:t,isOpen:!0},o.createElement(cn,{tree:s,level:t+1,isVirtual:!0}));const c=i.slice(1).join("");return o.createElement(Me,{key:c,title:i[0],level:t,isOpen:!0},o.createElement(cn,{tree:{[c]:s},level:t+1}))}))},dn=(0,o.memo)(cn),un=()=>o.createElement(r.Flex,null,o.createElement(r.TextBigger,null,"No available configuration found.")),mn=()=>{const{node:e,path:t}=ne(),n=(0,L.sh)({node:e,path:t}),{entityProps:r,...a}=n||{};return n?o.createElement(Me,{flavour:"entity",title:"".concat(n.template,":placeholder"),entityProps:{...r,...a},isNewItem:!0},o.createElement(on,(0,l.A)({id:n.template,formData:n.formData},r))):null},pn=(0,j.A)((()=>n.e(4414).then(n.bind(n,74414))),"DyncfgStyles"),gn=e=>{let{node:t,path:n,tree:l,inModal:a}=e;const i=(0,o.useRef)();return o.createElement(le.Provider,{value:{node:t,path:n,inModal:a,containerRef:i}},o.createElement(pn,null),o.createElement(r.Flex,{ref:i,width:"100%",padding:[0,2],column:!0},o.createElement(r.Flex,{column:!0},Object.keys(l).length?o.createElement(dn,{tree:(0,H.m8)(l)}):o.createElement(un,null)),o.createElement(mn,null)))};n(25440);const hn=e=>{let{node:t}=e;const{loaded:n,value:l,hasError:o}=(0,L.wd)({node:t}),r=n&&l&&!o?Object.keys(l.tree||{}).reduce(((e,t)=>{t.startsWith("/")||(t="/".concat(t));const n=t.match(/\/[^/]+/g);if(n.length){const t=n[0],l=(0,ae.Zr)(t.replace(/^\/?/,""));e.find((e=>e.value==t))||e.push({value:t,label:l})}return e}),[]):[];return r},fn=e=>{var t;let{flavour:n,inModal:l,selectedNode:a,setNode:i,options:s}=e;const[c,d]=(0,o.useState)(0),m=hn({node:null===a||void 0===a?void 0:a.value}),{loaded:p,value:f,hasError:E}=(0,L.wd)({node:null===a||void 0===a?void 0:a.value,path:null===m||void 0===m||null===(t=m[c])||void 0===t?void 0:t.value}),{tree:v}=f||{},b=l?"60px":"110px",y=(0,o.useMemo)((()=>({height:"settings"==n?"calc(100% - ".concat(b,")"):"100%",padding:[4,0],border:{side:"top",color:"border"},overflow:{vertical:"auto"}})),[]);return s.length?o.createElement(g,null,o.createElement(r.Flex,{column:!0,height:"100%",gap:4},o.createElement(r.Flex,{alignItems:"center",justifyContent:"between"},o.createElement(r.Flex,{alignItems:"center",gap:4},o.createElement(u,{node:a,setNode:i,options:s}),o.createElement(h,null)),o.createElement(r.Flex,{alignItems:"center",gap:3},o.createElement(_,{tree:v}),o.createElement(N,null))),m.length?o.createElement(r.Tabs,{height:"100%",selected:c,onChange:d},m.map((e=>{let{label:t,value:n}=e;return o.createElement(r.Tab,{key:n,label:t},o.createElement(r.Flex,y,p?E?o.createElement(r.TextBigger,null,"Something went wrong"):v?o.createElement(gn,{key:n,node:null===a||void 0===a?void 0:a.value,path:n,tree:v,inModal:l}):o.createElement(un,null):o.createElement(Oe.A,{height:"calc(100% - ".concat(b,")"),title:"Loading..."})))}))):o.createElement(r.TextBigger,null,"There are no available configuration."))):o.createElement(r.TextBigger,null,"There are no available nodes.")};var En=n(3914),vn=n(20378),bn=n(78459),yn=n(15255),Cn=n(68741),xn=n(40982);const kn=e=>{let{message:t,title:n,footer:a,...i}=e;const s=(null===i||void 0===i?void 0:i["data-testid"])||"dyncnfError";return o.createElement(r.Flex,(0,l.A)({alignItems:"center",column:!0,"data-testid":s,flex:!0,gap:3,justifyContent:"center",padding:[0,20]},i),o.createElement(r.H3,{"data-testid":"".concat(s,"-title")},n),o.createElement(r.TextBig,{color:"textDescription","data-testid":"".concat(s,"-message")},t),a)},wn=e=>{const t=(0,a.eO)({extraKey:"nodesView",merge:!1,scoped:!0});return o.createElement(In,(0,l.A)({},e,{nodes:t}))},Sn=e=>{const{nodes:t}=(0,i.A)({polling:!1});return o.createElement(In,(0,l.A)({},e,{nodes:t}))},In=e=>{let{flavour:t,inModal:n,node:l,nodes:r}=e;const{options:a,node:i,setNode:c}=s({selectedNode:l,nodes:r});return null!==i&&void 0!==i&&i.value?o.createElement(fn,{flavour:t,inModal:n,selectedNode:i,setNode:c,options:a}):null},An=e=>{const t=(0,bn.OS)();return o.createElement(r.Button,(0,l.A)({label:"Get a fresh agent token",onClick:t},e))},Dn="Configurations expose sensitive information about your systems and applications. To protect your privacy, Netdata exposes this information only to logged-in users and claimed agents. When viewing Configurations directly on a Netdata Agent UI, this information is sent directly from the Netdata Agent to your web browser, without exposing it to any third parties.",Fn={notLoggedIn:{title:"Sign in to Netdata to use Configurations",description:Dn,footer:o.createElement(Cn.A,null)},notClaimed:{title:"Connect this agent to Netdata to use Configurations",description:Dn,footer:o.createElement(xn.A,null)},noAccess:{title:"This agent belongs to a Netdata Space you are not member of",description:Dn,footer:o.createElement(r.TextBig,{color:"textDescription"},"Ask for an invitation from the administrators of the Netdata Space of the agent to use configurations.")},bearerError:{title:"You are not authorized to use Configurations",description:Dn,footer:o.createElement(An,null)}},Tn=e=>{let{flavour:t="settings",node:n,inModal:l}=e;const r=(0,En.dg)(),a={flavour:t,node:n,inModal:l},[i]=(0,vn.Q8)(),[{bearerProtection:s,error:c}]=(0,bn.f7)(),[{canBeClaimed:d,cloudStatus:u}]=(0,yn.RJ)();if(r&&c&&s){const{title:e,description:t,footer:n}=(e=>{let{userStatus:t,userNodeStatus:n,accessError:l,canBeClaimed:o}=e;return Fn[t]?Fn[t]:l?Fn.notLoggedIn:o?Fn.notClaimed:Fn[n]?Fn[n]:Fn.bearerError})({...i,bearerError:c,canBeClaimed:d,cloudStatus:u});return o.createElement(kn,{title:e,message:t,footer:n})}return r?o.createElement(wn,a):o.createElement(Sn,a)}}}]);