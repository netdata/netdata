plugin_name: otel.plugin
modules:
  - meta:
      id: collector-otel.plugin-otel
      plugin_name: otel.plugin
      module_name: otel
      monitored_instance:
        name: OpenTelemetry
        link: https://opentelemetry.io/
        categories:
          - data-collection.cloud-and-devops
        icon_filename: opentelemetry.svg
      alternative_monitored_instances: []
      keywords:
        - opentelemetry
        - otel
        - otlp
        - grpc
        - metrics
        - logs
        - observability
      related_resources:
        integrations:
          list: []
      info_provided_to_referring_integrations:
        description: ""
      most_popular: true
    overview:
      data_collection:
        metrics_description: |
          This plugin enables the Netdata Agent to receive OpenTelemetry metrics and logs
          via the OTLP/gRPC protocol from any compatible source — collectors, SDKs, or
          instrumented applications.

          Metrics are automatically visualized as Netdata charts with full alerting support.
          Logs are stored in systemd-compatible journal files and can be explored through
          the Netdata Logs tab.
        method_description: |
          The plugin listens on a configurable gRPC endpoint for incoming OTLP data.

          Incoming metrics are mapped to Netdata charts using YAML mapping rules placed in the
          chart configs directory (default `/etc/netdata/otel.d/v1/metrics/`). Each file can
          contain entries that match metrics by instrumentation scope and metric name, and control
          how data point attributes translate to chart instances and dimensions. Per-metric
          overrides for the collection interval and grace period are also supported. Without a
          matching rule, the plugin creates charts using default settings. Charts with no incoming
          data are automatically expired and removed.

          | Mapping file option | Description |
          |:--------------------|:------------|
          | `instrumentation_scope.name` | Regex to match the instrumentation scope name |
          | `instrumentation_scope.version` | Regex to match the instrumentation scope version |
          | `dimension_attribute_key` | Data point attribute whose value becomes the dimension name |
          | `interval_secs` | Per-metric collection interval override (1–3600 seconds) |
          | `grace_period_secs` | Per-metric grace period override |

          Incoming logs are written to journal files with configurable rotation and retention
          policies.
      supported_platforms:
        include:
          - Linux
        exclude: []
      multi_instance: false
      additional_permissions:
        description: ""
      default_behavior:
        auto_detection:
          description: |
            The plugin starts automatically and listens on `127.0.0.1:4317` for incoming OTLP/gRPC connections.
        limits:
          description: ""
        performance_impact:
          description: ""
    setup:
      prerequisites:
        list:
          - title: OpenTelemetry data source
            description: |
              An OpenTelemetry Collector, SDK, or instrumented application configured to send OTLP data
              to the Netdata agent's gRPC endpoint.
      configuration:
        file:
          name: otel.yaml
        options:
          description: |
            The plugin is configured via `otel.yaml` in the Netdata configuration directory.
          folding:
            title: Config options
            enabled: true
          list:
            - name: endpoint.path
              description: gRPC endpoint to listen on for incoming OTLP data.
              default_value: "127.0.0.1:4317"
              required: false
            - name: endpoint.tls_cert_path
              description: Path to TLS certificate file. Enables TLS when provided.
              default_value: ""
              required: false
            - name: endpoint.tls_key_path
              description: Path to TLS private key file. Required when TLS certificate is provided.
              default_value: ""
              required: false
            - name: endpoint.tls_ca_cert_path
              description: Path to TLS CA certificate file for client authentication.
              default_value: ""
              required: false
            - name: metrics.chart_configs_dir
              description: Directory containing YAML files that define how OTLP metrics are mapped to Netdata charts. Each file can match metrics by instrumentation scope and name, set the dimension attribute key, and override timing parameters. The plugin ships stock mappings; user files in this directory take priority.
              default_value: "/etc/netdata/otel.d/v1/metrics/"
              required: false
            - name: metrics.interval_secs
              description: Collection interval in seconds (1–3600). Defines the Netdata chart update frequency.
              default_value: 10
              required: false
            - name: metrics.grace_period_secs
              description: Grace period in seconds. After the last data point, the plugin waits this long before gap-filling.
              default_value: 60
              required: false
            - name: metrics.expiry_duration_secs
              description: Expiry duration in seconds. Charts with no data for this long are removed.
              default_value: 900
              required: false
            - name: metrics.max_new_charts_per_request
              description: Maximum number of new charts that can be created per gRPC request. Limits cardinality explosion from high-cardinality label combinations.
              default_value: 100
              required: false
            - name: logs.journal_dir
              description: Directory to store journal files for ingested logs.
              default_value: ""
              required: true
            - name: logs.size_of_journal_file
              description: Maximum file size before rotating to a new journal file.
              default_value: "100MB"
              required: false
            - name: logs.entries_of_journal_file
              description: Maximum log entries per journal file.
              default_value: 50000
              required: false
            - name: logs.duration_of_journal_file
              description: Maximum time span within a single journal file.
              default_value: "2 hours"
              required: false
            - name: logs.number_of_journal_files
              description: Maximum number of journal files to keep.
              default_value: 10
              required: false
            - name: logs.size_of_journal_files
              description: Maximum total size of all journal files.
              default_value: "1GB"
              required: false
            - name: logs.duration_of_journal_files
              description: Maximum age of journal files.
              default_value: "7 days"
              required: false
        examples:
          folding:
            title: Config
            enabled: true
          list:
            - name: Basic configuration
              folding:
                enabled: false
              description: Listen on default endpoint with default settings.
              config: |
                endpoint:
                  path: "127.0.0.1:4317"
                metrics:
                  chart_configs_dir: /etc/netdata/otel.d/v1/metrics/
                  interval_secs: 10
                  grace_period_secs: 60
                  expiry_duration_secs: 900
                  max_new_charts_per_request: 100
                logs:
                  journal_dir: /var/log/netdata/otel-journals
            - name: Metric mapping file
              description: |
                Place YAML files like this in `/etc/netdata/otel.d/v1/metrics/` to control how
                OTLP metrics are mapped to Netdata charts. This example maps metrics from the
                OpenTelemetry Collector hostmetrics receiver.
              config: |
                metrics:
                  "system.network.connections":
                    - instrumentation_scope:
                        name: .*hostmetricsreceiver.*networkscraper$
                      dimension_attribute_key: state

                  "system.cpu.utilization":
                    - instrumentation_scope:
                        name: .*hostmetricsreceiver.*cpuscraper$
                      dimension_attribute_key: state

                  "system.memory.usage":
                    - instrumentation_scope:
                        name: .*hostmetricsreceiver.*memoryscraper$
                      dimension_attribute_key: state
                      interval_secs: 5
            - name: TLS-enabled configuration
              description: Listen with TLS enabled for secure connections.
              config: |
                endpoint:
                  path: "0.0.0.0:4317"
                  tls_cert_path: /etc/netdata/ssl/cert.pem
                  tls_key_path: /etc/netdata/ssl/key.pem
                metrics:
                  chart_configs_dir: /etc/netdata/otel.d/v1/metrics/
                  interval_secs: 10
                  grace_period_secs: 60
                  expiry_duration_secs: 900
                  max_new_charts_per_request: 100
                logs:
                  journal_dir: /var/log/netdata/otel-journals
    troubleshooting:
      problems:
        list: []
    alerts: []
    metrics:
      folding:
        title: Metrics
        enabled: false
      description: |
        Metrics are dynamically created based on the OpenTelemetry data received.
        The specific metrics depend on the OTLP sources sending data to the plugin.
      availability: []
      scopes: []
