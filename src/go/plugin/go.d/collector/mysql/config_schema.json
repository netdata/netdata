{
  "jsonSchema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "MySQL collector configuration.",
    "type": "object",
    "properties": {
      "update_every": {
        "title": "Update every",
        "description": "Data collection interval, measured in seconds.",
        "type": "integer",
        "minimum": 1,
        "default": 1
      },
      "autodetection_retry": {
        "title": "Detection retry",
        "description": "Recheck interval in seconds. Zero means no recheck will be scheduled.",
        "type": "integer",
        "minimum": 0,
        "default": 60
      },
      "dsn": {
        "title": "DSN",
        "description": "MySQL server [Data Source Name (DSN)](https://github.com/go-sql-driver/mysql#dsn-data-source-name) specifying the connection details.",
        "type": "string",
        "default": "netdata@tcp(localhost:3306)/"
      },
      "timeout": {
        "title": "Timeout",
        "description": "Timeout for queries, in seconds.",
        "type": "number",
        "minimum": 0.5,
        "default": 1
      },
      "my.cnf": {
        "title": "my.cnf path",
        "description": "Optional. Specifies the path to the my.cnf file containing connection settings under the [client] section.",
        "type": "string"
      },
      "vnode": {
        "title": "Vnode",
        "description": "Associates this data collection job with a [Virtual Node](https://learn.netdata.cloud/docs/netdata-agent/configuration/organize-systems-metrics-and-alerts#virtual-nodes).",
        "type": "string"
      },
      "functions": {
        "title": "Functions",
        "description": "Configuration for Netdata functions exposed by this collector.",
        "type": "object",
        "properties": {
          "top_queries": {
            "title": "Top Queries",
            "description": "Configuration for the top-queries function.",
            "type": "object",
            "properties": {
              "disabled": {
                "title": "Disabled",
                "description": "Disable the top-queries function.",
                "type": "boolean",
                "default": false
              },
              "timeout": {
                "title": "Timeout",
                "description": "Query timeout in seconds. Uses collector timeout if not set.",
                "type": "number",
                "minimum": 0
              },
              "limit": {
                "title": "Limit",
                "description": "Maximum number of queries to return in the response.",
                "type": "integer",
                "minimum": 0,
                "maximum": 5000,
                "default": 500
              }
            }
          },
          "deadlock_info": {
            "title": "Deadlock Info",
            "description": "Configuration for the deadlock-info function.",
            "type": "object",
            "properties": {
              "disabled": {
                "title": "Disabled",
                "description": "Disable the deadlock-info function.",
                "type": "boolean",
                "default": false
              },
              "timeout": {
                "title": "Timeout",
                "description": "Query timeout in seconds. Uses collector timeout if not set.",
                "type": "number",
                "minimum": 0
              }
            }
          },
          "error_info": {
            "title": "Error Info",
            "description": "Configuration for the error-info function.",
            "type": "object",
            "properties": {
              "disabled": {
                "title": "Disabled",
                "description": "Disable the error-info function.",
                "type": "boolean",
                "default": false
              },
              "timeout": {
                "title": "Timeout",
                "description": "Query timeout in seconds. Uses collector timeout if not set.",
                "type": "number",
                "minimum": 0
              }
            }
          }
        }
      }
    },
    "required": [
      "dsn"
    ]
  },
  "uiSchema": {
    "uiOptions": {
      "fullPage": true
    },
    "vnode": {
      "ui:placeholder": "To use this option, first create a Virtual Node and then reference its name here."
    },
    "autodetection_retry": {
      "ui:help": "This option determines how frequently (in seconds) Netdata will retry data collection jobs that failed initially, with the value of 60 meaning it retries to start data collection jobs every 60 seconds, while setting it to 0 disables this retry mechanism entirely."
    },
    "dsn": {
      "ui:placeholder": "username:password@protocol(address)/dbname"
    },
    "timeout": {
      "ui:help": "Accepts decimals for precise control (e.g., type 1.5 for 1.5 seconds)."
    },
    "functions": {
      "top_queries": {
        "disabled": {
          "ui:help": "WARNING: Query text may contain unmasked sensitive literals (PII)."
        }
      },
      "deadlock_info": {
        "disabled": {
          "ui:help": "WARNING: Query text may contain unmasked sensitive literals. Requires PROCESS privilege."
        }
      },
      "error_info": {
        "disabled": {
          "ui:help": "WARNING: Error messages and query text may contain unmasked sensitive literals."
        }
      }
    },
    "ui:flavour": "tabs",
    "ui:options": {
      "tabs": [
        {
          "title": "Base",
          "fields": [
            "update_every",
            "dsn",
            "timeout",
            "my.cnf",
            "vnode",
            "autodetection_retry"
          ]
        },
        {
          "title": "Functions",
          "fields": [
            "functions"
          ]
        }
      ]
    }
  }
}
