# Metrics mixin for Cisco Catalyst devices.
# Stored in a separate file for reuse within the cisco-3850 compat shim.

# Example sysDescr:
#   "Cisco Systems WS-C6509.Cisco Catalyst Operating System Software, Version 5.5(8).Copyright (c) 1995-2001 by Cisco Systems."
#   "Cisco IOS Software, IOS-XE Software, Catalyst L3 Switch Software (CAT3K_CAA-UNIVERSALK9-M), Version 03.06.06E RELEASE SOFTWARE (fc1) Technical Support: http://www.cisco.com/techsupport Copyright (c) 1986-2016 by Cisco Systems, Inc. Compiled Sat 17-Dec-"

metadata:
  device:
    fields:
      serial_number:
        symbol:
          # Cisco Catalyst devices are using CISCO-STACK-MIB
          # Source1: http://www.circitor.fr/Mibs/Html/C/CISCO-STACK-MIB.php
          #   "This MIB provides configuration and runtime status for chassis, modules, ports, etc. on the Catalyst systems."
          # Source2: chassisSerialNumberString is present for this device:
          #   Cisco Systems WS-C6509.Cisco Catalyst Operating System Software, Version 5.5(8).Copyright (c) 1995-2001 by Cisco Systems.
          MIB: CISCO-STACK-MIB
          OID: 1.3.6.1.4.1.9.5.1.2.19.0
          name: chassisSerialNumberString
          description: "Chassis Serial Number"

metrics:
  - MIB: CISCO-ENTITY-SENSOR-MIB
    table:
      OID: 1.3.6.1.4.1.9.9.91.1.1.1
      name: entSensorValueTable
    symbols:
      - OID: 1.3.6.1.4.1.9.9.91.1.1.1.1.4
        # The current value of the sensor.
        name: entSensorValue
        description: "The current value of the sensor."
        unit: TBD
    metric_tags:
      - symbol:
          OID: 1.3.6.1.4.1.9.9.91.1.1.1.1.1
          # Indicates the type of data provided by the sensor.
          name: entSensorType
        tag: sensor_type
        description: "Indicates the type of data provided by the sensor."
      - index: 1
        tag: sensor_id
        description: "Sensor ID"
  - MIB: CISCO-IF-EXTENSION-MIB
    table:
      OID: 1.3.6.1.4.1.9.9.276.1.1.1
      name: cieIfPacketStatsTable
    metric_type: gauge
    symbols:
      - OID: 1.3.6.1.4.1.9.9.276.1.1.1.1.1
        name: cieIfLastInTime
        description: "Time of the last input packet"
        unit: s
      - OID: 1.3.6.1.4.1.9.9.276.1.1.1.1.2
        name: cieIfLastOutTime
        description: "Time of the last output packet"
        unit: s
      - OID: 1.3.6.1.4.1.9.9.276.1.1.1.1.10
        name: cieIfInputQueueDrops
        description: "Number of dropped packets in the input queue"
        unit: packets
      - OID: 1.3.6.1.4.1.9.9.276.1.1.1.1.11
        name: cieIfOutputQueueDrops
        description: "Number of dropped packets in the output queue"
        unit: packets
    metric_tags:
      - MIB: IF-MIB
        symbol:
          OID: 1.3.6.1.2.1.31.1.1.1.1
          name: ifName
        table: ifXTable
        tag: interface
        description: "Interface Name"