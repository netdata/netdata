!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c7a66f4d-b945-4d8c-bce0-9daed55e9298",e._sentryDebugIdIdentifier="sentry-dbid-c7a66f4d-b945-4d8c-bce0-9daed55e9298")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"833aaee1cc06f5081274f22d18347a1cce30fb04"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[2785],{62785:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var r=n(29439),l=(n(41539),n(88674),n(17727),n(21249),n(57640),n(9924),n(67294)),o=n(50308),a=n.n(o),c=n(13655),i=n(22648),d=n(93017),s=n(39979),u=n(63346),f=n(10082),m=(n(82526),n(38880),n(15581),n(34514),n(54747),n(49337),n(33321),n(69070),n(4942)),p=n(93433),b=(n(47941),n(92222),n(85827),n(25387),n(2490),n(72608),n(69826),n(31672),n(59461),n(57327),n(88449),n(59849),n(71893));function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var v=(0,b.default)(c.MenuDropdown).attrs((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({background:"transparent",hideShadow:!0,height:{max:"300px"},width:{max:"600px"},overflow:"auto",padding:[2]},e)})).withConfig({displayName:"styled__CheckboxesContainer",componentId:"sc-8uj6na-0"})([""]),y=function(e){var t=e.index,n=e.item,r=e.onItemClick,o=n.group,a=n.label,i=n.value,d=n.node,s=void 0===d?{}:d,u=s.selected,f=s.disabled,m=o&&t>0?[3,0,1,0]:[1,0];return l.createElement(c.Flex,{padding:m},o?l.createElement(c.Flex,{gap:2,alignItems:"center"},l.createElement(c.Icon,{name:o.iconName,size:"small"}),l.createElement(c.Text,{color:o.textColor||"textFocus"},o.label)):l.createElement(c.Flex,null,l.createElement(c.Checkbox,{checked:u,disabled:f,onChange:function(e){f||r({value:i,label:a,checked:e})},label:a,value:i,labelPosition:"right"})))},E=n(43656);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var O={live:{iconName:"connectivityStatusLive",label:"Live",textColor:"primary"},offline:{iconName:"connectivityStatusOffline",label:"Offline",textColor:"textFocus"},stale:{iconName:"connectivityStatusStale",label:"Stale",textColor:"textFocus"}},x=function(e,t){var n;return t&&Object.keys(t)&&null!==(n=t[e])&&void 0!==n&&n.length?[{group:O[e]}].concat((0,p.Z)(t[e])):[]},w=function(e,t,n){var r=e.reduce((function(e,r){var l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r),o=r.isLive?"live":r.isOffline?"offline":"stale";t.find((function(e){return e.value==r.id}))?l.selected=!0:n==t.length&&(l.disabled=!0);var a={label:r.name,value:r.id,node:l};return e[o]?e[o]=[].concat((0,p.Z)(e[o]),[a]):e[o]=[a],e}),{});return[].concat((0,p.Z)(x("live",r)),(0,p.Z)(x("offline",r)),(0,p.Z)(x("stale",r)))},N=function(e){var t=e.selectedNodes,n=e.setSelectedNodes,o=e.activeNodesLimit,a=void 0===o?0:o,c=(0,E.Z)().nodes,i=(0,l.useState)([]),d=(0,r.Z)(i,2),s=d[0],u=d[1],f=(0,l.useCallback)((function(e){var r=e.value,l=e.label,o=e.checked;o&&!t.find((function(e){return e.value==r}))?n((function(e){return[].concat((0,p.Z)(e),[{value:r,label:l}])})):!o&&t.find((function(e){return e.value==r}))&&n((function(e){return e.filter((function(e){return e.value!=r}))}))}),[t]);return(0,l.useEffect)((function(){c&&u(w(c,t,a))}),[c,t]),l.createElement(v,{items:s,Item:y,onItemClick:f,searchMargin:[0,0,4,0],hasSearch:!0})},S=n(5710),j=n(78266),P=n(87462),Z=n(45987),k=["label"];function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var I=function(e){var t=e.isTitle,n=e.value,r=e.selectedNodes,o=e.setSelectedNodes,i=void 0===o?a():o,d=e.children,s=(0,l.useCallback)((function(){t||i((function(e){return e.filter((function(e){return e.value!=n}))}))}),[t,n,r,i]),u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({gap:1,height:"18px",alignItems:"center",padding:[0,2],margin:[0,0,2,0],round:!0},t?{}:{background:"nodeBadgeBackground"});return l.createElement(c.Flex,u,!t&&l.createElement(c.Icon,{name:"x",size:"small",onClick:s,color:"text",cursor:"pointer"}),d)},D=function(e){var t=e.selectedNodes,n=e.setSelectedNodes;return t.length?l.createElement(c.Flex,{flexWrap:!0,gap:2},l.createElement(I,{isTitle:!0},l.createElement(c.TextBig,null,"Selected Nodes:")),t.map((function(e){var r=e.label,o=(0,Z.Z)(e,k);return l.createElement(I,(0,P.Z)({key:o.value,selectedNodes:t,setSelectedNodes:n},o),l.createElement(c.TextSmall,{color:"text"},r))}))):null},T=n(37503),B=n(34735),F=function(e){var t=e.selectedNodes,n=e.setSelectedNodes,r=e.loading,o=e.error,a=(0,B.Z)(),i=a.loaded,d=a.currentPlan,s=a.maxNodes;return l.createElement(c.Flex,{column:!0,gap:4},r&&i?l.createElement(j.Z,{height:"280px",title:"Saving selection..."}):l.createElement(l.Fragment,null,l.createElement(c.Flex,{column:!0,margin:[3,0,0,0],gap:4},l.createElement(c.TextBig,null,"Your current"," ",l.createElement(c.TextBig,{strong:!0},d.class," (",d.version,")")," ","plan does not allow more than ",l.createElement(c.TextBig,{strong:!0},s," active nodes"),"."),l.createElement(c.TextBig,null,"To proceed, select the ",l.createElement(c.TextBig,{strong:!0},s," Nodes")," that you wish to keep active. Any Nodes beyond this limit will be deactivated."),o&&l.createElement(c.Flex,{gap:2,alignItems:"center"},l.createElement(c.Icon,{name:"warning_triangle",size:"medium",color:"warning"}),l.createElement(c.TextBig,null,"For some reason, we coudn't save your selection. Please retry."))),l.createElement(f.Z,null),l.createElement(N,{selectedNodes:t,setSelectedNodes:n,activeNodesLimit:s}),l.createElement(f.Z,null),l.createElement(c.Flex,{column:!0,gap:4},l.createElement(D,{selectedNodes:t,setSelectedNodes:n}),l.createElement(c.TextBig,null,"Remember, you can"," ",l.createElement(T.Z,null,l.createElement(c.TextBig,{color:"primary"},"upgrade your space back to the Business plan"))," ","for unlimited access at any time."),l.createElement(c.TextBig,null,"The node selection isn't a commitment, you can modify the active Nodes any time on the"," ",l.createElement(S.Z,null,l.createElement(c.TextBig,{color:"primary"},"Space Settings page")),"."))))},_=(0,b.default)(c.ModalContent).attrs((function(e){return{width:e.isMobile?{base:"95vw"}:{base:150}}})).withConfig({displayName:"styled__PreferredNodesModalContent",componentId:"sc-1v8zr4l-0"})([""]),M=n(97945),L=n(65840),R=n(46667),z=(0,s.Z)(c.Button),A=function(e){var t=e.onSuccessfulSave,n=void 0===t?a():t,o=(0,L.HK)(),s=(0,i.m)(),f=(0,d.Z)(),m=(0,r.Z)(f,2),p=m[0],b=m[1],g=(0,M.dJ)(),v=(0,l.useState)([]),y=(0,r.Z)(v,2),E=y[0],h=y[1],O=(0,l.useState)(),x=(0,r.Z)(O,2),w=x[0],N=x[1],S=(0,R.Z)(),j=(0,r.Z)(S,4),P=j[0],Z=j[2],k=j[3],C=(0,l.useCallback)((function(){Z(),g(E.map((function(e){return e.value}))).then((function(){p({header:"Success",text:"You selection was successfully saved"}),n(),o()})).catch((function(){N(!0),b({header:"Error",text:"Selection failed to be saved"})})).finally((function(){k()}))}),[E,g]);return l.createElement(c.Modal,{backdropProps:{backdropBlur:!0}},l.createElement(u.ZP,{feature:"PreferredNodesModal"},l.createElement(_,{isMobile:s},l.createElement(c.ModalHeader,null,l.createElement(c.Flex,{gap:2,alignItems:"center"},l.createElement(c.Icon,{name:"netdataPress",color:"text"}),l.createElement(c.H4,null,"Required Action"))),l.createElement(c.ModalBody,null,l.createElement(F,{selectedNodes:E,setSelectedNodes:h,loading:P,error:w})),!P&&l.createElement(c.ModalFooter,null,l.createElement(c.Flex,{gap:4,justifyContent:"end",padding:[1,2]},l.createElement(z,{feature:"SavePreferredNodes",label:"Save",onClick:C,disabled:P||!E.length}))))))}},43656:function(e,t,n){var r=n(29439),l=n(37518),o=n(96929),a=n(41379),c=n(74059),i=n(97945),d=n(46667);t.Z=function(){var e=(0,l.Jb)().id,t=void 0===e?"":e,n=(0,o.X7)(t,"ids"),s=(0,o.X7)(t,"loaded"),u=(0,i.Ne)(n),f=(0,c.th)(),m=(0,d.Z)(),p=(0,r.Z)(m,4),b=p[0],g=p[3];return(0,a.Z)({id:t,spaceId:f,polling:!0}),{areDefaultRoomNodesLoaded:s,nodes:u,isClaimNodeModalOpen:b,closeClaimNodeModal:g}}}}]);