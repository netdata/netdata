!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="7fd339e2-7c63-4aaa-86b5-f44407fd2cc2",e._sentryDebugIdIdentifier="sentry-dbid-7fd339e2-7c63-4aaa-86b5-f44407fd2cc2")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"32bc201d4a26e6ab17d208aa0df5704cd8335a7f"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[324],{80959:function(e,t,n){var r=n(87462),a=n(45987),o=n(67294),l=n(15557),i=["message","title","footer"];t.Z=function(e){var t=e.message,n=e.title,c=e.footer,u=(0,a.Z)(e,i),s=(null===u||void 0===u?void 0:u["data-testid"])||"functionError";return o.createElement(l.Flex,(0,r.Z)({alignItems:"center",column:!0,"data-testid":s,flex:!0,gap:3,justifyContent:"center",padding:[0,20]},u),o.createElement(l.H3,{"data-testid":"".concat(s,"-title")},n),o.createElement(l.TextBig,{color:"textDescription","data-testid":"".concat(s,"-message")},t),c)}},34324:function(e,t,n){n.r(t),n.d(t,{default:function(){return fr}});var r={};n.r(r),n.d(r,{base:function(){return gn},table:function(){return vn}});var a=n(29439),o=n(67294),l=n(91268),i=n(96929),c=n(3322),u=(n(82526),n(57327),n(41539),n(88449),n(2490),n(59849),n(38880),n(15581),n(34514),n(54747),n(49337),n(33321),n(69070),n(4942)),s=(n(47941),n(21249),n(57640),n(9924),n(60677)),d=n(15557),m=n(54316),f=n(46667),p=n(82351),v=n(29814),g=n(72843),b=n(37518),y=n(87462),h=(n(85827),n(25387),n(72608),n(97945)),E=n(97193),x=n(8144);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){var t=e.roomId,n=e.flavour,r=function(e){var t="fn"===e;return(0,o.useMemo)((function(){return{Live:{head:{label:"Live nodes",textColor:"textLite",iconName:"connectivityStatusLive",hasFn:t},node:{textColor:"text",showFn:t,requireFn:t}},Stale:{head:{label:"Stale nodes",textColor:"textLite",iconName:"connectivityStatusStale"},node:{textColor:"text",disabled:t}},Offline:{head:{label:"Offline nodes",textColor:"textLite",iconName:"connectivityStatusOffline",disabled:t},node:{textColor:"textLite",disabled:t}}}}),[e])}(n),a=function(e){var t=(0,c.ZQ)({extraKey:e}).aggregations;return(0,o.useMemo)((function(){return null!==t&&void 0!==t&&t.node_ids?t.node_ids.buckets.reduce((function(e,t){return w(w({},e),{},(0,u.Z)({},t.key,t.hits.doc_count))}),{}):null}),[t])}(n),l="fn"===n,i=(0,c.CE)({extraKey:n});return o.createElement(x.Z,{title:"Nodes",testIdPrefix:"nodes",baseKey:t,extraKey:n,param:"selectedNodeIds",multi:"feed"===n},o.createElement(E.Z,(0,y.Z)({key:n,baseKey:t,extraKey:n,statusProps:r,background:"mainBackground",itemProps:{padding:[1,1,1,.5],maxLength:30},searchMargin:[0,0,2],height:{max:"300px"},multi:"feed"===n,nodeCounts:a},l&&{useFilteredIds:h.HZ},{currentFn:i})))},C=n(46742),Z=function(e){var t=e.param,n=e.baseKey,r=e.extraKey,a=e.testIdPrefix,l=e.title,i=e.items,c=void 0===i?["processes"]:i,u=e.multi,s=void 0!==u&&u;return c.length?o.createElement(x.Z,{title:l,testIdPrefix:a,baseKey:n,extraKey:r,param:t,multi:s},o.createElement(C.ZP,{param:t,baseKey:n,extraKey:r,testIdPrefix:a,collection:c,multi:s})):null},j=n(93433),k=(n(92222),function(e,t){var n=(0,c.ZQ)({extraKey:e}),r=n.loaded,a=n.loading,l=n.columns,i=n.sortedColumns,u=(0,o.useRef)([]);return(0,o.useMemo)((function(){return!r||a||(u.current=i.reduce((function(e,n){return l[n].filter?[].concat((0,j.Z)(e),[t(n,l)]):e}),[])),u.current}),[r,a])}),P=n(95248),T=n(71002),I=(n(64211),n(41874),n(69720),n(26699),n(32023),n(54678),n(4480));function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F={query:function(e,t,n){var r=n.columnVisibility,o=(null===t||void 0===t?void 0:t.toLowerCase())||"";return Object.entries(e).some((function(e){var t=(0,a.Z)(e,2),n=t[0],l=t[1];return!!r[n]&&(null!==l&&"undefined"!==typeof l&&(Array.isArray(l)?l.some((function(e){return String(e).toLowerCase().includes(o)})):("object"===(0,T.Z)(l)&&Object.keys(l).some((function(e){return String(l[e]).toLowerCase().includes(o)})),String(l).toLowerCase().includes(o))))}))}},N=function(e){return function(t,n){return!e.some((function(e){var r=(0,a.Z)(e,2),o=r[0],l=r[1];return F[o]?!F[o](t,l,n):!function(e){return function(t,n,r){var a;if("range"===(null===(a=r.columns[e])||void 0===a?void 0:a.filter)&&null!==n&&void 0!==n&&n.length)return t[e]>=n[0]&&t[e]<=n[1];if(!Array.isArray(n)||!n.length)return!0;var o=t[e];return"number"===typeof o?(o=parseFloat(o),n.some((function(e){return parseFloat(e)===o}))):n.includes(o)}}(o)(t,l,n)}))}},z=(0,I.CG)({key:"fnDataFiltered",get:function(e){var t=e.extraKey,n=e.roomId,r=e.omit,a=void 0===r?[]:r,o=e.keepAll,l=e.fn;return function(e){var r,i=e.get,u=null===(r=i((0,P.dz)({key:n,extraKey:"".concat(l,"Settings")})))||void 0===r?void 0:r.sortColumn,s=i((0,P.dz)({key:n,extraKey:t})),d=Object.keys(s).reduce((function(e,t){return a.includes(t)||e.push([t,s[t]]),e}),[]),m=i((0,c.tD)({id:l})),f=m.columnVisibility,p=m.data,v=m.columns;if("feed"===l||!d.length||!p)return p||[];var g=N(d);return o?p.map((function(e){return g(e,{columnVisibility:f,columns:v,sortColumn:u})?e:K(K({},e),{},{hidden:!0})})):p.filter((function(e){return g(e,{columnVisibility:f,columns:v,sortColumn:u})}))}},cachePolicy_UNSTABLE:{eviction:"most-recent"}}),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.extraKey,n=void 0===t?"fn":t,r=e.omit,a=void 0===r?[]:r,o=e.keepAll,l=void 0!==o&&o,i=(0,c.CE)({extraKey:n}),u=(0,b.UL)();return(0,I.sJ)(z({extraKey:"".concat(i||n,"Filters"),fn:i,roomId:u,omit:a,keepAll:l}))},A=(n(2707),n(6557)),R=function(e){return e.id},M={string:function(e,t){return e.localeCompare(t,void 0,{sensitivity:"accent"})},integer:function(e,t){return e-t}},B={table:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.param,r=t.columns;return Object.entries(e.reduce((function(e,t){var a,o;return e[t[n]]={count:((null===(a=e[t[n]])||void 0===a?void 0:a.count)||0)+(t.hidden?0:1),type:null===(o=r[n])||void 0===o?void 0:o.type},e}),{})).map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return{id:n,type:r.type,count:r.count}})).sort((function(e,t){return(M[e.type]||M.integer)(e.id,t.id)}))},default:n.n(A)()},_=function(e,t){return{key:e,type:t[e].filter}},V={multiselect:function(e){var t=e.param,n=e.baseKey,r=e.extraKey,a=e.filtersKey,l=e.testIdPrefix,i=e.title,u=function(e){var t=e.extraKey,n=e.filtersKey,r=e.param,a=L({extraKey:t,omit:[r],keepAll:!0}),l=(0,P.tk)(r,{extraKey:n}),i=(0,c.ZQ)({key:"type",extraKey:t}),u=B[i]||B.default,s=(0,c.ZQ)({key:"columns",extraKey:t});return(0,o.useMemo)((function(){return u(a,{param:r,columns:s})}),[r,a,l])}({param:t,extraKey:r,filtersKey:a});return u&&u.length?o.createElement(x.Z,{title:i,testIdPrefix:l,baseKey:n,extraKey:a,param:t,defaultIsOpen:!1},o.createElement(C.ZP,{param:t,baseKey:n,extraKey:a,testIdPrefix:l,collection:u,capitalized:!1,getValue:R,getLabel:R})):null},range:function(e){var t=e.param,n=e.baseKey,r=e.extraKey,l=e.filtersKey,i=e.testIdPrefix,u=e.title,s=(0,c.ZQ)({extraKey:r}).columns,m=(0,P.I0)(t,{defaultValue:[],key:n,extraKey:l}),f=(0,a.Z)(m,2),p=f[0],v=f[1];if(!s[t])return null;var g=1*s[t].range.min,b=1*s[t].range.max;return o.createElement(x.Z,{title:u,testIdPrefix:i,baseKey:n,extraKey:l,param:t,defaultIsOpen:!1},o.createElement(d.Box,{padding:[2,0],width:"100%"},o.createElement(d.MultiRangeInput,{min:g,max:b,onChange:function(e){var t=e.min,n=e.max;return v([t,n])},initMin:p[0]?1*p[0]:g,initMax:p[1]?1*p[1]:b})))}},H=function(e){var t=e.roomId,n=e.extraKey,r=(0,c.CE)({extraKey:n}),a=function(e){return k(e,_)}(n);return a.map((function(e){var a=V[e.type]||V.multiselect;return o.createElement(a,{key:e.key,title:e.key,testIdPrefix:"function",baseKey:t,extraKey:n,filtersKey:"".concat(r||n,"Filters"),param:e.key})}))},U=function(e){return e.name||e.id},W=function(e){return e.id},Q=function(e){var t=e.title,n=e.options,r=e.param,a=e.baseKey,l=e.filtersKey,i=e.testIdPrefix;return null!==n&&void 0!==n&&n.length?o.createElement(x.Z,{title:t,testIdPrefix:i,baseKey:a,extraKey:l,param:r,defaultIsOpen:!1},o.createElement(C.ZP,{param:r,baseKey:a,extraKey:l,testIdPrefix:i,collection:n,capitalized:!1,getValue:W,getLabel:U})):null},q={nodes:!0},G=function(e){var t=e.roomId,n=e.extraKey,r=(0,c.CE)({extraKey:n}),a=(0,c.Cf)(n);return a.length?a.map((function(e){return q[e.id]?null:o.createElement(Q,{key:e.id,title:e.name,options:e.options,param:e.id,testIdPrefix:"function",baseKey:t,filtersKey:"".concat(r||n,"Filters")})})):null},X=(0,o.memo)((function(e){var t=e.flavour,n=e.refetch,r=e.availableFns,a=(0,b.UL)(),l=(0,c.ZQ)({extraKey:t}),i=l.loaded,u=l.aggregations,s=l.error;return o.createElement(d.Flex,{column:!0,overflow:{vertical:"auto"},padding:[0,3,30]},"fn"===t&&o.createElement(Z,{title:"Function",testIdPrefix:"function",baseKey:a,extraKey:t,param:"selected",items:r}),o.createElement(S,{roomId:a,flavour:t}),i&&!u&&!s&&o.createElement(H,{roomId:a,extraKey:t}),i&&u&&!s&&o.createElement(G,{roomId:a,extraKey:t,onFilter:n}))})),J=n(45987),Y=(n(38862),n(32586)),$=n(76184),ee=n(52428),te=["selectedRowData","setSelectedRowData"],ne=function(e){var t=e.data;return o.createElement($.Z,{name:"Files"},o.createElement(d.Flex,{gap:1,padding:[0,1],alignItems:"center"},o.createElement(d.Box,{sx:{fontWeight:"500",letterSpacing:"1px"},as:d.Text,color:"textLite"},"{;}"),o.createElement(d.TextSmall,null,"Copy data as"),o.createElement(d.Flex,{cursor:"pointer",gap:1,onClick:(0,ee.JG)(JSON.stringify(t),{text:"JSON copied to clipboard"})},o.createElement(d.TextSmall,{color:"primary"},"json"),o.createElement(d.Icon,{color:"primary",size:"small",name:"copy"}))))},re=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return Object.entries(t).reduce((function(t,n){var o=(0,a.Z)(n,2),l=o[0],i=o[1],c=r?"".concat(r,".").concat(l):l,u=Array.isArray(i),s=u&&"object"===(0,T.Z)(i[0])&&null!==i[0];return!i||"object"!==(0,T.Z)(i)||u&&!s?[].concat((0,j.Z)(t),[[c,u?i.length>1?"[".concat(i.join(", "),"]"):i[0]:i]]):e(s?function(e){return e.reduce((function(e,t){return Object.entries(t).forEach((function(t){var n=(0,a.Z)(t,2),r=n[0],o=n[1];e[r]=[].concat((0,j.Z)(e[r]||[]),[o])})),e}),{})}(i):i,t,c)}),n)},ae=function(e){var t=e.selectedRowData,n=void 0===t?{}:t,r=e.setSelectedRowData,l=(0,J.Z)(e,te),i=(0,o.useMemo)((function(){return re(n).sort((function(e,t){var n=(0,a.Z)(e,1)[0],r=(0,a.Z)(t,1)[0];return n.localeCompare(r)}))}),[n]);return o.createElement(d.Flex,(0,y.Z)({column:!0,gap:2,overflow:{vertical:"auto"},padding:[2,3]},l),o.createElement(d.Flex,{justifyContent:"between",padding:[2,0],border:{side:"bottom",color:"borderSecondary"}},o.createElement(d.TextBig,{strong:!0},"Row info"),i.length>0&&o.createElement(d.Box,{onClick:function(){return r()},cursor:"pointer"},o.createElement(d.TextSmall,{color:"primary"},"Clear selection"))),Array.isArray(i)&&i.length?o.createElement(o.Fragment,null,i.map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return o.createElement(Y.Z,{key:n,size:"small",name:n,testId:"rightBar-rowInfoContent-".concat(n),padding:[1,0,0]},r)})),o.createElement(ne,{data:n})):o.createElement(d.Text,null,"Select a row to see raw data"))};function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie={color:{active:"success",notActive:"textLite"}},ce={filters:le(le({iconName:"filterList"},ie),{},{width:"19px",Content:X,dataTestId:"fnFilters",label:"Filters"}),info:le(le({iconName:"information"},ie),{},{width:"19px",dataTestId:"info",Content:ae,label:"Info"})},ue=Object.keys(ce),se=(0,s.default)(d.Tabs).withConfig({displayName:"sidebar__StyledTabs",componentId:"sc-1x1ez62-0"})(["overflow:hidden;height:100%;"]),de=function(e){var t=e.isActive,n=e.color,r=e.name,a=e.label;return o.createElement(p.Z,{plain:!0,content:a},o.createElement(d.Icon,{name:r,color:t?n.active:n.notActive,height:"18px",width:"18px"}))},me=function(e){var t=(0,f.Z)(!0),n=(0,a.Z)(t,2),r=n[0],l=n[1],i=(0,o.useState)(0),c=(0,a.Z)(i,2),u=c[0],s=c[1];return(0,o.useEffect)((function(){e.selectedRowData&&s(1)}),[e.selectedRowData]),o.createElement(m.ZP,{collapsedComponent:o.createElement(v.Z,{availableTabs:ce,onClickTab:l,tabsToShow:ue}),header:o.createElement(g.Z,{icon:"filterList",isOpen:r,onToggle:l,title:"Filters"}),isOpen:r},o.createElement(d.Flex,{"data-testid":"overview-info",column:!0,overflow:"hidden",height:"100%"},o.createElement(se,{selected:u,onChange:s,noDefaultBorder:!0},ue.map((function(t,n){var r=ce[t],a=r.iconName,l=r.color,i=r.Content,c=r.dataTestId,s=r.label;return o.createElement(d.Tab,{style:{display:1===ue.length?"none":"inherit"},"data-testid":c,maxWidth:"100%",key:a,small:!0,label:o.createElement(de,{isActive:u===n,name:a,color:l,label:s})},o.createElement(d.Flex,{column:!0,overflow:"hidden",height:"calc(100% - 60px)",position:"relative"},o.createElement(i,e)))})))))},fe=n(36560),pe=n(78266),ve=(n(41817),n(74059)),ge=n(49254),be=n(89250),ye=function(e){var t=(0,P.XT)(e),n=(0,be.TH)().state;return(0,o.useEffect)((function(){null!==n&&void 0!==n&&n.nodeId&&t([n.nodeId])}),[]),null===n||void 0===n?void 0:n.nodeId},he=n(91008),Ee=n(80959),xe=["paramsKey"],Oe=function(e){var t=e.paramsKey,n=(0,J.Z)(e,xe),r=(null===n||void 0===n?void 0:n["data-testid"])||"capableNodesError",a=(0,P.c6)(t),l=(0,h.bV)(null===a||void 0===a?void 0:a[0],"name");return o.createElement(d.Flex,(0,y.Z)({alignItems:"center",flex:!0,gap:8,justifyContent:"center"},n,{"data-testid":r}),o.createElement(d.Icon,{"data-testid":"".concat(r,"-icon"),height:"230px",name:"unreachableNode",width:"230px"}),o.createElement(Ee.Z,{"data-testid":"".concat(r,"-details"),gap:2,title:l?"".concat(l," is not configured for Functions"):"Your nodes are not configured for Functions",message:o.createElement(o.Fragment,null,"Learn how to configure your nodes"," ",o.createElement(he.Z,{Component:d.TextBig,"data-ga":"functions-capable-nodes-error::click-docs-link::functions-view","data-testid":"".concat(r,"-docsLink"),href:"https://learn.netdata.cloud/docs/nightly/operations/run-time-troubleshooting-with-functions#prerequisites",target:"_blank",rel:"noopener noreferrer"},"to support functions")),width:{max:"fit-content"}}))},we=n(64599),Se=n(70842),Ce=n(39469),Ze=n(36657),je=n(91128),ke=n(62554),Pe=(0,s.default)(d.Flex).attrs({alignItems:"center",border:{side:"bottom",color:"borderSecondary"},padding:[2]}).withConfig({displayName:"styled__MenuItem",componentId:"sc-fmyuo7-0"})(["&:last-child{border:none;}"]),Te=(0,s.default)(d.TextInput).withConfig({displayName:"styled__TextInput",componentId:"sc-fmyuo7-1"})(['margin:0 10px;min-width:unset;width:45px;> div{margin:0;}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}input[type="number"]{-moz-appearance:textfield;}']),Ie=["onClose","targetRef","paramsKey"];function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fe=function(e){var t=e.onClose,n=e.targetRef,r=e.paramsKey,l=(0,J.Z)(e,Ie),i=(null===l||void 0===l?void 0:l["data-testid"])||"refreshOptions",u=(0,c.ZQ)(Ke({key:"updateEvery"},r)),s=(0,c.WO)(r),m=(0,a.Z)(s,2),p=m[0],v=m[1],g=(0,f.Z)(p),b=(0,a.Z)(g,2),y=b[0],h=b[1];(0,ke.Z)((function(){!!p!==!!y&&v(y)}),200,[p,y]);var E=(0,c.FF)(Ke(Ke({},r),{},{defaultValue:u})),x=(0,a.Z)(E,2),O=x[0],w=x[1],S=(0,o.useState)(O),C=(0,a.Z)(S,2),Z=C[0],j=C[1];return(0,ke.Z)((function(){O!==Z&&w(Z)}),400,[O,Z]),n.current?o.createElement(d.Drop,{align:{top:"bottom",right:"right"},animation:!0,background:"dropdown",close:t,column:!0,"data-testid":i,margin:[.5,0,0],onClickOutside:t,onEsc:t,round:1,target:n.current,width:58},o.createElement(Pe,{"data-testid":"".concat(i,"-autoRefresh"),justifyContent:"between"},o.createElement(d.Text,{color:"menuItem","data-testid":"".concat(i,"-autoRefresh-label")},"Auto Refresh"),o.createElement(d.Toggle,{colored:!0,checked:y,"data-ga":"functions-refresh-options::auto-refresh-switch::functions-view::".concat(y?"enabled":"disabled"),"data-testid":"".concat(i,"-autoRefresh-switch"),onChange:h})),o.createElement(Pe,{"data-testid":"".concat(i,"-pollingInterval")},o.createElement(d.Text,{color:"menuItem","data-testid":"".concat(i,"-pollingInterval-label")},"Refresh every"),o.createElement(Te,{"data-ga":"functions-refresh-options::polling-interval::functions-view","data-testid":"".concat(i,"-pollingInterval-input"),min:1,onChange:function(e){var t=+e.target.value;t>0&&j(t)},size:"tiny",type:"number",value:Z}),o.createElement(d.Text,{color:"menuItem","data-testid":"".concat(i,"-pollingInterval-units")},"seconds"))):null},Ne=n(89405),ze=function(e){var t=e.paramsKey,n=(0,c.ZQ)(t).updatedAt,r=(0,Ne.rA)(),a=r.localeTimeString,l=r.localeDateString;return o.createElement(d.TextMicro,{color:"textLite"},"Last updated: ",l(n,{long:!0})," ",a(n,{secs:!0}))},Le=s.default.div.withConfig({displayName:"reload__IconsContainer",componentId:"sc-1nbamjz-0"})(["position:relative;"]),Ae=(0,s.default)(d.Icon).withConfig({displayName:"reload__SmallIcon",componentId:"sc-1nbamjz-1"})(["position:absolute;top:3px;left:3px;"]),Re=function(e){var t=e.onRefresh,n=e.dataGa,r=e.testId,a=e.paramsKey,l=(0,c.T2)(a);return o.createElement(Le,null,o.createElement(Ae,{name:l?"playSolid":"pauseSolid",width:"8px",height:"8px",color:l?"primary":"text"}),o.createElement(d.IconButton,{"data-testid":"".concat(r,"-refreshNowBtn"),"data-ga":"".concat(n,"::click-refresh-now::functions-view"),flavour:"hollow",icon:"refresh",onClick:function(){return t({merge:!1})},disabled:l}))},Me=["onRefresh","paramsKey"],Be={fn:{dataGa:"functions-header",hasAutoRefresh:!0,Title:function(e){var t=e.name,n=e.fn,r=void 0===n?"Processes":n;return t?"".concat(r," on ").concat(t):r},TextContent:function(e){var t=e.testId;return o.createElement(o.Fragment,null,"Netdata Functions enable detailed low-level monitoring at the edge. Use this tab to execute functions on your node and see the results immediately."," ",o.createElement(he.Z,{Component:d.Text,"data-ga":"functions-header::click-docs-link::functions-view","data-testid":"".concat(t,"-docsLink"),href:"https://learn.netdata.cloud/docs/nightly/concepts/netdata-functions",target:"_blank",rel:"noopener noreferrer"},"Read the Netdata functions documentation to learn more"),".")}},feed:{dataGa:"feed-header",Title:function(){return"Events"},TextContent:function(e){var t=e.testId;return o.createElement(o.Fragment,null,"Troubleshoot faster with Netdata Events. Access topology and alert events across the war room in one convenient location."," ",o.createElement(he.Z,{Component:d.Text,"data-ga":"feed-header::click-docs-link::feed-view","data-testid":"".concat(t,"-docsLink"),href:"https://learn.netdata.cloud/docs/nightly/concepts/events-feed",target:"_blank",rel:"noopener noreferrer"},"Read the Events feed documentation to learn more"),".")}}},_e=(0,o.memo)((function(e){var t=e.onRefresh,n=e.paramsKey,r=(0,J.Z)(e,Me),l=(null===r||void 0===r?void 0:r["data-testid"])||"functionsHeader",i=(0,o.useRef)(),u=Be[n.extraKey],s=u.dataGa,m=u.hasAutoRefresh,p=u.TextContent,v=u.Title,g=(0,f.Z)(!1),b=(0,a.Z)(g,4),y=b[0],E=b[1],x=b[3],O=(0,P.c6)(n),w=(0,h.bV)(null===O||void 0===O?void 0:O[0],"name"),S=(0,c.ZQ)(n),C=S.loaded,Z=S.data,j=S.totalSize,k=(0,c.CE)(n);return o.createElement(d.Flex,{"data-testid":l,justifyContent:"between",margin:[0,0,3]},o.createElement(d.Flex,{column:!0,gap:2,"data-testid":"".concat(l,"-info"),width:{max:164}},o.createElement(d.Flex,{gap:2,alignItems:"baseline"},o.createElement(d.H1,{"data-testid":"".concat(l,"-title")},o.createElement(v,{name:w,fn:k})),C&&o.createElement(d.TextSmall,{color:"textLite",strong:!0},"(",j||(null===Z||void 0===Z?void 0:Z.length)||0," results)")),o.createElement(d.Flex,{column:!0,gap:2},o.createElement(d.Text,{"data-testid":"".concat(l,"-description"),color:"textLite"},o.createElement(p,{testId:l})))),o.createElement(d.Flex,{alignItems:"end",column:!0,gap:1},o.createElement(d.Flex,{gap:1},o.createElement(Re,{testId:l,dataGa:s,onRefresh:t,paramsKey:n}),m&&o.createElement(d.IconButton,{"data-testid":"".concat(l,"-refreshOptionsBtn"),"data-ga":"".concat(s,"::click-refresh-options::functions-view"),flavour:"hollow",icon:"chevron_down",ref:i,onClick:E}),y&&o.createElement(Fe,{"data-testid":"".concat(l,"-refreshOptions"),isOpen:y,onClose:x,targetRef:i,paramsKey:n})),o.createElement(ze,{paramsKey:n})))}),(function(e,t){return e.onRefresh===t.onRefresh})),Ve=n(41331),He=(n(88386),n(78150)),Ue=["icon","iconRotate","children","onClick","strong","testId","textAlign"],We=["description","tooltipValue","value","valueOptions"],Qe=(0,s.default)(d.Icon).attrs({color:"text",height:"16px",width:"16px"}).withConfig({displayName:"value__Arrow",componentId:"sc-1ahoh2y-0"})(["rotate:",";transition:all 200ms ease;"],(function(e){return e.rotate})),qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=t.decimalPoints,a=void 0===r?0:r,l=t.units,i=t.defaultValue,c=(0,He.Ol)();return(0,o.useMemo)((function(){switch(n){case"number":return(0,He.Jw)(e,{decimalPoints:a,units:l,defaultValue:i});case"duration":return(0,He.kl)(e,{defaultValue:i});case"datetime":return c(e,{defaultValue:i});default:return null===e?i:e}}),[e,l])},Ge=function(e){var t=e.description,n=void 0===t?"":t,r=e.value,a=e.units,l=void 0===a?"":a;return n?o.createElement(d.Flex,{column:!0,gap:1,justifyContent:"center"},o.createElement(d.TextSmall,{color:"bright"},n),o.createElement(d.TextSmall,{strong:!0,color:"bright",textAlign:"center"},r," ",l)):"".concat(r," ").concat(l)},Xe=(0,o.forwardRef)((function(e,t){var n=e.icon,r=e.iconRotate,a=e.children,l=e.onClick,i=e.strong,c=e.testId,u=void 0===c?"cell":c,s=e.textAlign,m=(0,J.Z)(e,Ue);return o.createElement(d.Flex,(0,y.Z)({cursor:l?"pointer":"inherit",gap:.5,onClick:l,overflow:"hidden",ref:t,width:{max:"100%"}},m),n&&o.createElement(Qe,{name:n,rotate:r}),o.createElement(d.TextSmall,{"data-testid":"".concat(u,"-value"),strong:i,textAlign:s,truncate:!0,whiteSpace:"nowrap"},a))})),Je=function(e){var t=e.description,n=void 0===t?"":t,r=e.tooltipValue,a=e.value,l=e.valueOptions,i=void 0===l?{}:l,c=(0,J.Z)(e,We),u=qe(a,i);return o.createElement(p.Z,(0,y.Z)({content:o.createElement(Ge,{description:n,value:r||a,units:i.units}),"data-testid":"tableCell",isBasic:!0},c),o.createElement(Xe,null,u))},Ye=["description","maxValue","strong","type","value","valueOptions"],$e=function(e){var t=e.description,n=void 0===t?"":t,r=e.maxValue,a=e.strong,l=e.type,i=e.value,c=e.valueOptions,u=void 0===c?{}:c,s=(0,J.Z)(e,Ye),m=100*i/r,f="bar"===l,v=(null===s||void 0===s?void 0:s["data-testid"])||"progressTableCell",g=qe(i,u);return o.createElement(p.Z,{content:o.createElement(Ge,{description:n,value:i,units:u.units}),isBasic:!0,stretch:"align"},o.createElement(d.Flex,{column:!0,"data-testid":v,gap:1},!f&&o.createElement(Xe,{strong:a,testid:v},g),o.createElement(d.ProgressBar,{background:"sideBarMini",border:"none",color:["green","netdata"],containerWidth:"100%","data-testid":"".concat(v,"-bar"),height:2,width:"".concat(m,"%")})))},et=["value"],tt=function(e){var t=e.value,n=(0,J.Z)(e,et);return t=Array.isArray(t)?t:[t],o.createElement(d.Flex,{alignItems:"center",gap:1},t.map((function(e,t){return o.createElement(d.Flex,(0,y.Z)({"data-testid":"tableCell",key:"".concat(e,"-").concat(t)},n),o.createElement(d.Pill,{flavour:"neutral",color:"neutralPillColor",size:"small"},e))})))},nt=n(20686),rt=["color"],at=function(e){var t=e.hide,n=e.user;return t||!n?null:o.createElement(o.Fragment,null,o.createElement(d.TextSmall,null,"by"),o.createElement(ot,null,n))},ot=function(e){var t=e.color,n=void 0===t?"textDescription":t,r=(0,J.Z)(e,rt);return o.createElement(d.TextSmall,(0,y.Z)({color:n,strong:!0},r))},lt=function(e){var t=e.type,n=e.text,r=void 0===n?t:n,a=e.hollow,l=a?"".concat(t.toLowerCase(),"AlertsTable"):t.toLowerCase();return o.createElement(nt.Z,(0,y.Z)({type:l},a&&{border:!1}),r)},it=(0,s.default)(d.Flex).attrs({gap:1,flexWrap:!0,alignItems:"center"}).withConfig({displayName:"components__Container",componentId:"sc-1qr6qv2-0"})([""]),ct=n(79655),ut=["chart","hosts","alert"];function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mt={CLEAR:0,WARNING:1,CRITICAL:2,UNINITIALIZED:3,UNDEFINED:4},ft=function(e){var t=e.chart,n=e.nodeId,r=e.nodeName,a=e.spaceSlug,l=e.roomSlug,i=e.alert,c=(0,be.s0)(),u=(0,h.m3)(n),s=(0,o.useCallback)((function(){i?c(u,{state:{alertId:null===i||void 0===i?void 0:i.id}}):c(u)}),[u,i]),m="/spaces/".concat(a,"/rooms/").concat(l,"/alerts/").concat(null===i||void 0===i?void 0:i.id),f=i.current,v=i.name,g=i.previous;if("ERROR"===f.status)return o.createElement(it,null,o.createElement(d.TextSmall,null,"For the alert"),o.createElement(he.Z,{Component:ot,as:ct.rU,to:m},v),o.createElement(d.TextSmall,null,"for"),o.createElement(he.Z,{Component:ot,onClick:s},t.name),o.createElement(d.TextSmall,null,"on"),o.createElement(he.Z,{Component:ot,onClick:s},r),o.createElement(d.TextSmall,null,"we couldn't calculate the current value"),o.createElement(p.Z,{align:"bottom",content:"Please check your alert configuration"},o.createElement(d.Icon,{color:"nodeBadgeColor",size:"small",name:"information"})));if("REMOVED"===f.status)return o.createElement(it,null,o.createElement(d.TextSmall,null,"Alert"),o.createElement(he.Z,{Component:ot,as:ct.rU,to:m},v),o.createElement(d.TextSmall,null,"for"),o.createElement(he.Z,{Component:ot,onClick:s},t.name),o.createElement(d.TextSmall,null,"on"),o.createElement(he.Z,{Component:ot,onClick:s},r),o.createElement(d.TextSmall,null,"is no longer available, state can't be assessed"));var b=mt[f.status]===mt.CLEAR;return o.createElement(it,null,o.createElement(d.TextSmall,null,"Alert"),o.createElement(he.Z,{Component:ot,as:ct.rU,to:m},v),o.createElement(d.TextSmall,null,"for"),o.createElement(he.Z,{Component:ot,onClick:s},t.name),o.createElement(d.TextSmall,null,"on"),o.createElement(he.Z,{Component:ot,onClick:s},r),b?o.createElement(d.TextSmall,null,"recovered"):o.createElement(o.Fragment,null,o.createElement(d.TextSmall,null,mt[g.status]===mt.CRITICAL?"was demoted":mt[g.status]===mt.WARNING?"escalated":mt[f.status]===mt.UNDEFINED?"transitioned":"was raised"),o.createElement(d.TextSmall,null,"to"),o.createElement(lt,{type:f.status}),mt[f.status]===mt.UNDEFINED&&o.createElement(d.TextSmall,null,"state")),o.createElement(d.TextSmall,null,"with value"),o.createElement(lt,{type:f.status,text:f.value_string,hollow:!0,padding:[0]}))},pt=function(e){var t=e.id,n=e.name,r=(0,ve.uk)(),a=(0,b.tE)(t,"slug"),l="/spaces/".concat(r,"/rooms/").concat(a,"/home");return o.createElement(he.Z,{Component:ot,as:ct.rU,to:l},n)},vt=function(e){var t=e.rooms;return t.map((function(e,n){return o.createElement(o.Fragment,{key:e.id},n>0&&(n<t.length-1?", ":" and "),o.createElement(pt,e))}))},gt=function(e){var t=e.rooms;if(!t.length)return null;var n=t.length>1?"rooms":"room";return o.createElement(o.Fragment,null,o.createElement(d.TextSmall,null,"on ",n),o.createElement(vt,{rooms:t}))},bt=function(e){var t=e.contexts;t.map((function(e,n){return o.createElement(o.Fragment,{key:e},n>0&&(n<t.length-1?", ":" and "),o.createElement(ot,null,e))}))},yt=function(e){var t=e.contexts;if(!t.length)return null;var n=t.length>1?"contexts":"context";return o.createElement(d.TextSmall,null,"on ",n," ",o.createElement(bt,{contexts:t}))},ht={month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",long:!1,dateStyle:void 0},Et=function(e){var t=e.start,n=e.end,r=(0,Ne.rA)().localeDateString;if(!t||!n)return null;var a=r(new Date(t),ht),l=r(new Date(n),ht);return o.createElement(o.Fragment,null,o.createElement(d.TextSmall,null,"(scheduled ",a," - ",l,")"))},xt={"silencing-rule-created":"created","silencing-rule-deleted":"deleted","silencing-rule-changed":"changed"},Ot=function(e){var t=e.rooms,n=void 0===t?[]:t,r=e.contexts,a=void 0===r?[]:r;return n.length||a.length?o.createElement(o.Fragment,null,!!n.length&&o.createElement(gt,{rooms:n}),!!n.length&&!!a.length&&o.createElement(d.TextSmall,null,"and ",o.createElement(yt,{contexts:a}))):null},wt=function(e){var t,n=e.action,r=e.notification,a=e.user,l=e.room,i=e.context,c=((null===r||void 0===r||null===(t=r.silencing)||void 0===t?void 0:t.rule)||[])[0],u=null===a||void 0===a?void 0:a.name,s=(null===i||void 0===i?void 0:i.name)||[];return o.createElement(it,null,o.createElement(d.TextSmall,null,"Silencing rule"),o.createElement(ot,null,c.name),o.createElement(Ot,{rooms:l,contexts:s}),o.createElement(d.TextSmall,null,"was ",xt[n]),o.createElement(at,{user:u}),o.createElement(Et,c))},St=n(62200),Ct=function(e,t){var n,r;return(null===(n=e.target)||void 0===n?void 0:n[t])||(null===(r=e.target)||void 0===r?void 0:r.id)||e[t]||e.id},Zt=function(e){return Array.isArray(e)?e[0].name||e[0].id:e.name||e.id},jt=function(e){var t=e.statistics,n=(null===t||void 0===t?void 0:t.nodes)||{},r=n.live,a=n.stale,l=n.removed,i=n.total;return o.createElement(it,null,o.createElement(d.TextSmall,null,"Space statistics. Nodes:"),o.createElement(d.TextSmall,{color:St.WV.live.statusTextSmallColor},r," live"),o.createElement(d.TextSmall,null,","),o.createElement(d.TextSmall,{color:St.WV.stale.statusTextSmallColor},a," stale"),o.createElement(d.TextSmall,null,","),o.createElement(d.TextSmall,{color:St.WV.offline.statusTextSmallColor},l," removed"),o.createElement(d.TextSmall,null,","),o.createElement(d.TextSmall,{strong:!0},i," total"))},kt=(n(69810),n(86035),n(6973)),Pt=function(e){var t=e.stateColor,n=e.state;return o.createElement(o.Fragment,null,o.createElement(d.TextSmall,null,"became"),o.createElement(ot,{color:t},n))},Tt=function(e){var t=e.stateColor,n=e.state;return o.createElement(o.Fragment,null,o.createElement(d.TextSmall,null,"was"),o.createElement(ot,{color:t},n))},It={"node-created":Pt,"node-state-live":Pt,"node-state-stale":Pt,"node-state-offline":Pt,"node-removed":Tt,"node-deleted":Tt,"node-restored":Tt,default:Tt},Dt=function(e){var t,n=e.action,r=e.hosts,a=(void 0===r?[]:r)[0],l=a.id,i=a.name,c=(0,be.s0)(),u=(0,h.m3)(l),s=(0,o.useCallback)((function(){return c(u)}),[u]),m=It[n],f=n.split("-").at(-1),p=null===(t=kt.B[f])||void 0===t?void 0:t.statusTextSmallColor;return o.createElement(it,null,o.createElement(d.TextSmall,null,"Node"),o.createElement(he.Z,{Component:ot,onClick:s},i),o.createElement(m,{stateColor:p,state:f}))},Kt=function(e){var t=e.room,n=(0,b.Hm)("untouchable");return o.createElement(o.Fragment,null,o.createElement(d.TextSmall,null,"was added to",n?" room":""),o.createElement(ot,null,n?Zt(t):"this room"))},Ft=function(e){var t=e.room,n=(0,b.Hm)("untouchable");return o.createElement(o.Fragment,null,o.createElement(d.TextSmall,null,"was removed from",n?" room":""),o.createElement(ot,null,n?Zt(t):"this room"))},Nt={"room-created":function(){return o.createElement(d.TextSmall,null,"was created")},"room-deleted":function(){return o.createElement(d.TextSmall,null,"was deleted")},"room-node-added":Kt,"room-node-removed":Ft,"room-user-added":Kt,"room-user-removed":Ft},zt=function(e){var t,n=e.action,r=e.hosts,a=void 0===r?[]:r,l=e.Netdata,i=e.user,c=Nt[n],u=null===(t=a[0])||void 0===t?void 0:t.name;return o.createElement(it,null,o.createElement(d.TextSmall,null,"Node"),o.createElement(ot,null,u),o.createElement(c,{room:l.room}),o.createElement(at,{user:null===i||void 0===i?void 0:i.name}))},Lt=function(e){var t=e.action,n=e.Netdata,r=e.user,a=Nt[t];return o.createElement(it,null,o.createElement(d.TextSmall,null,"User"),o.createElement(ot,null,Ct(r,"name")),o.createElement(a,{room:n.room}),o.createElement(at,{hide:!r.target,user:r.name}))},At=function(e){var t=e.action,n=e.Netdata,r=e.user,a=Nt[t];return o.createElement(it,null,o.createElement(d.TextSmall,null,"Room"),o.createElement(ot,null,Zt(n.room)),o.createElement(a,null),o.createElement(at,{user:r.name}))},Rt={"alert-node-transition":function(e){var t=e.chart,n=e.hosts,r=e.alert,a=(0,J.Z)(e,ut);return n.map((function(e,n){var l=e.id,i=e.name,c=dt(dt({},r),{},{name:r.name[n]},r.current?{current:dt(dt({},r.current),r.current.status?{status:r.current.status[n]||r.current.status[0]}:{})}:{});return o.createElement(ft,(0,y.Z)({key:l,chart:t,nodeId:l,nodeName:i,alert:c},a))}))},"node-created":Dt,"node-state-live":Dt,"node-state-stale":Dt,"node-state-offline":Dt,"node-removed":Dt,"node-deleted":Dt,"node-restored":Dt,"agent-connected":function(e){var t=e.agentId;return o.createElement(it,null,o.createElement(d.TextSmall,null,"Agent with claim ID"),o.createElement(ot,null,t)," ",o.createElement(d.TextSmall,null,"has connected to Netdata"))},"agent-disconnected":function(e){var t=e.agentId,n=e.reason;return o.createElement(it,null,o.createElement(d.TextSmall,null,"Agent with claim ID"),o.createElement(ot,null,t),o.createElement(d.TextSmall,null,"has disconnected from Netdata with reason: \u201c",n,"\u201d"))},"agent-authenticated":function(e){var t=e.agentId;return o.createElement(it,null,o.createElement(d.TextSmall,null,"Agent with claim ID"),o.createElement(ot,null,t),o.createElement(d.TextSmall,null,"has successfully authenticated"))},"agent-authentication-failed":function(e){var t=e.agentId;return o.createElement(it,null,o.createElement(d.TextSmall,null,"Agent with claim ID"),o.createElement(ot,null,t),o.createElement(d.TextSmall,null,"has failed to authenticate"))},"room-created":At,"room-deleted":At,"room-node-added":zt,"room-node-removed":zt,"room-user-added":Lt,"room-user-removed":Lt,"space-created":function(e){var t=e.Netdata,n=e.user;return o.createElement(it,null,o.createElement(d.TextSmall,null,"Space"),o.createElement(ot,null,t.space.name||t.space.id),o.createElement(d.TextSmall,null,"was created"),o.createElement(at,{user:n.name}))},"space-statistics":jt,"space-user-added":function(e){var t=e.Netdata,n=e.user,r=((null===t||void 0===t?void 0:t.inviter)||{}).name;return o.createElement(it,null,o.createElement(d.TextSmall,null,"User"),o.createElement(ot,null,Ct(n,"name")),o.createElement(d.TextSmall,null,"was added to this space"),r&&o.createElement(o.Fragment,null,o.createElement(d.TextSmall,null,"by invite of"),o.createElement(ot,null,r)))},"space-user-changed":function(e){var t,n=e.user;if(!(null===(t=n.changes)||void 0===t||!t.roles)&&1===Object.keys(n.changes).length){var r=n.changes.roles.length>1,a=n.changes.roles.join(", ");return o.createElement(it,null,o.createElement(d.TextSmall,null,"User ",r?"roles":"role"," for"),o.createElement(ot,null,Ct(n,"name")),o.createElement(d.TextSmall,null,r?"were":"was"," changed to"),o.createElement(ot,null,a),o.createElement(at,{hide:!n.target,user:n.name}))}return o.createElement(it,null,o.createElement(d.TextSmall,null,"User"),o.createElement(ot,null,Ct(n,"name")),o.createElement(d.TextSmall,null,"was modified"))},"space-user-invited":function(e){var t=e.user;return o.createElement(it,null,o.createElement(d.TextSmall,null,"User"),o.createElement(ot,null,Ct(t,"email")),o.createElement(d.TextSmall,null,"was invited to this space"),o.createElement(at,{user:t.name}))},"space-user-removed":function(e){var t=e.user,n=(t.target||{}).name;return o.createElement(it,null,o.createElement(d.TextSmall,null,"User"),o.createElement(ot,null,Ct(t,"name")),o.createElement(d.TextSmall,null,"was removed from this space"),n&&o.createElement(at,{user:t.name}))},"space-user-uninvited":function(e){var t=e.event,n=e.user;return"space-invite-expired"===t.reason?o.createElement(it,null,o.createElement(d.TextSmall,null,"The invite for"),o.createElement(ot,null,Ct(n,"email")),o.createElement(d.TextSmall,null,"to this space has expired")):o.createElement(it,null,o.createElement(d.TextSmall,null,"User"),o.createElement(ot,null,Ct(n,"email")),o.createElement(d.TextSmall,null,"was uninvited from this space"),o.createElement(at,{hide:!n.target,user:n.name}))},"silencing-rule-created":wt,"silencing-rule-deleted":wt,"silencing-rule-changed":wt},Mt=function(e){var t=e.data,n=t.source,r=n.action,a=n.roomId,l=n.space,i=(0,ve.vu)(l.id,"slug"),c=(0,b.tE)(a,"slug"),u=Rt[r];return u?o.createElement(u,(0,y.Z)({},t.source,{spaceSlug:i,roomSlug:c})):o.createElement(it,null,o.createElement(d.Text,null,"Event")," ",o.createElement(d.Text,{strong:!0},r)," ",o.createElement(d.Text,null,"emitted"))},Bt=["value"],_t=["visualization","type","value"],Vt={bar:$e,"bar-with-integer":$e,duration:$e,pill:tt,number:Je,string:Je,feedTemplate:Mt,datetime:function(e){var t=e.value,n=(0,J.Z)(e,Bt),r=new Date(t),a=(0,Ne.rA)(),l=a.localeTimeString,i=a.localeDateString,c=isNaN(r.valueOf())?"Missing date & time":"".concat(i(r,{long:!1})," ").concat(l(r,{secs:!0}));return o.createElement(Je,(0,y.Z)({value:c},n))},value:Je},Ht={bar:$e,pill:tt,value:Je,feedTemplate:Mt},Ut=function(e){var t=e.visualization,n=e.type,r=e.value,a=(0,J.Z)(e,_t),l=Ht[t]||Vt[n]||Ht.value;return o.createElement(l,(0,y.Z)({value:r,type:n},a))},Wt=["name","sortable","sticky","units","max","maxValue","dummy","cellSize","valueOptions","summary","type","visualization"];function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gt={sum:"sum",min:"min",max:"max",extent:"extent",mean:"mean",median:"median",unique:"unique",uniqueCount:"uniqueCount",count:"count"};function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yt=(0,o.memo)(d.NetdataTable,(function(e,t){return(0,Ve.ZP)(e,t,{keep:["columnVisibility","data","fnQuery","sortBy","virtualizeOptions"]})})),$t={cellStyles:{height:"46px"},headStyles:{height:"44px"},styles:{verticalAlign:"middle"}},en=(0,o.memo)((0,o.forwardRef)((function(e,t){var n=e["data-testid"],r=e.paramsKey,l=e.refetch,i=e.onShowInfo,u=(0,c.ZQ)(r),s=u.columns,m=u.sortedColumns,f=u.sortColumn,p=u.sortDirection,v=u.columnVisibility,g=u.pinnedColumns,y=u.loading,h=u.totalSize,E=u.anchor,x=u.retentionWarning,O=u.groupByColumns,w=(0,o.useState)(""),S=(0,a.Z)(w,2),C=S[0],Z=S[1],k=L(r),T="feed"===r.extraKey,I=function(e,t,n){var r=n.groupBy;return(0,o.useMemo)((function(){return e.reduce((function(e,n){var a=t[n],l=a.name,i=a.sortable,c=a.sticky,u=a.units,s=a.max,m=a.maxValue,f=a.dummy,p=a.cellSize,v=a.valueOptions,g=a.summary,b=a.type,y=a.visualization,h=(0,J.Z)(a,Wt);return f?e:[].concat((0,j.Z)(e),[qt(qt(qt({},h),{},{id:n,accessor:n,cell:function(e){var t=e.getValue,n=e.row,a=n.getCanExpand(),i=t(),c=Gt[g]===Gt.count||Gt[g]===Gt.uniqueCount||!Gt[g];return o.createElement(Ut,{description:l,data:n.original,maxValue:s||m.value,padding:n.depth>0?[0,0,0,2.5*n.depth]:[0],strong:a,value:a&&c?"".concat(i,"x"):i,tooltipValue:a&&c?"".concat(i," ").concat(1===i?"item":"items"," associated with ").concat(r," grouping"):i,valueOptions:c?qt(qt({},v),{},{transform:"none"}):v,type:b,visualization:y})},header:o.createElement(d.Flex,{column:!0},n,u&&o.createElement(d.TextMicro,null,"(",u,")")),enableSorting:i,aggregationFn:Gt[g]||Gt.count},p),{},{meta:qt({biggestCellIndexPerColumn:null===m||void 0===m?void 0:m.index,sticky:c,styles:{verticalAlign:"middle"}},n!==l?{tooltip:l}:{})})])}),[])}),[t,r])}(m,s,Jt({},T?{}:{groupBy:C})),D=(0,c.CE)(r),K=(0,b.UL)(),F=(0,c.fg)(Jt({key:"sortColumn"},r)),N=(0,a.Z)(F,2),z=N[0],A=N[1],R=(0,c.fg)(Jt({key:"sortDirection"},r)),M=(0,a.Z)(R,2),B=M[0],_=M[1],V=(0,c.kU)(Jt({key:"query"},r)),H=(0,a.Z)(V,2),U=H[0],W=H[1],Q=(0,c.I_)(Jt({key:"columnVisibility"},r)),q=(0,P.I0)(z,{defaultValue:[],key:K,extraKey:"".concat(D,"RangeFilter")}),G=(0,a.Z)(q,2)[1],X=(0,o.useMemo)((function(){return z||f?[{id:z||f,desc:"descending"===(B||p)}]:[]}),[f,p,z,B]),Y=(0,o.useCallback)((function(e){var t=e(),n=(0,a.Z)(t,1)[0],r=(null===n||void 0===n?void 0:n.id)||r,o=null!==n&&void 0!==n&&n.desc?p||"descending":"ascending";A(r),_(o),z!==r&&G([])}),[z,G,f,p]),$=(0,o.useCallback)((function(e){Q((function(t){return Jt(Jt({},t),e())}))}),[]),ee=(0,o.useMemo)((function(){return{left:g}}),[g]),te=(0,o.useMemo)((function(){return{overscan:10,hasNextPage:h>k.length,loading:y,loadMore:function(){y||h<=k.length||l({anchor:E,merge:!0})},warning:x}}),[k.length,y]),ne=(0,o.useCallback)((function(e){var t=e.data;return i(t.json||t)}),[]);return o.createElement(Yt,{groupByColumns:O,onClickRow:ne,autoFixedColumns:!0,columnPinning:ee,columnVisibility:v,data:k,dataColumns:I,dataGa:"functions",enableColumnPinning:!!g.length,enableColumnVisibility:!T,enableCustomSearch:!T,enablePinning:!T&&!!g.length,enableResize:!0,enableSorting:!T,globalFilter:T?null:U,onColumnVisibilityChange:$,onGlobalSearchChange:T?null:W,onGroupByChange:T?null:Z,onSortingChange:T?null:Y,sortBy:X,testPrefix:n,virtualizeOptions:te,meta:$t,ref:t})})),(function(){return!0})),tn=n(18997),nn=n(4808),rn=(n(26833),n(50361)),an=n.n(rn),on=n(38609),ln=n(81732),cn=n(85672),un=["defaultSortColumn","updateEvery","merge","groupBy"],sn=["data","type","updateEvery"];function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fn={minSize:cn.bb.xs,maxSize:cn.bb.xl},pn={bar:{size:cn.bb.xs},value:{minSize:cn.bb.sm,size:cn.bb.md},feedTemplate:{size:cn.bb.xxl,minSize:cn.bb.lg,maxSize:5e3},pill:{size:cn.bb.md,minSize:cn.bb.md}},vn=function(e,t,n){var r=t.defaultSortColumn,a=t.updateEvery,o=t.merge,l=t.groupBy,i=(0,J.Z)(t,un),c=an()(o?(0,on.Z)(n.columns,t.columns):t.columns),u={},s=Object.keys(c).reduce((function(e,t){var n,r=c[t],a=r.sticky,o=r.visible,l=r.index;return e.columnVisibility[t]=o,a&&e.pinnedColumns.push(t),r.valueOptions=r.valueOptions||{},r.cellSize=(n=r.visualization||r.type,r.uniqueKey?{minSize:cn.bb.xs,maxSize:cn.bb.md,size:cn.bb.xs}:mn(mn({},fn),pn[n]||pn.xs)),"undefined"!==typeof l&&(u[l]=t),e}),{columnVisibility:{},pinnedColumns:[]}),d=t.data.map((function(e){return e.reduce((function(e,t,n){var r,a,o=u[n];if(!o)return e;var l=c[o],i=isNaN(t)?(null===t||void 0===t?void 0:t.length)||0:t;"flexTemplate"!==l.type&&(!l.maxValue||i>l.maxValue.value)&&(l.maxValue={index:n,value:i});var s=(null===l||void 0===l||null===(r=l.range)||void 0===r?void 0:r.min)||t,d=(null===l||void 0===l||null===(a=l.range)||void 0===a?void 0:a.max)||l.max||t;return l.range={min:s<t?s:t,max:d>t?d:t},e[o]=t,e}),{})}));e(mn(mn(mn(mn({},ln.Zn.table),i),{},{groupByColumns:l,data:o?(n.data||[]).concat(d):d,columns:o?(0,on.Z)(n.columns,c):c,updatedAt:(new Date).getTime(),updateEvery:a,sortedColumns:Object.values(u),sortColumn:r,sortDirection:r?c[r].sort:"descending"},s),{},{loading:!1,loaded:!0}))},gn=function(e,t){var n=t.data,r=t.type,a=t.updateEvery,o=(0,J.Z)(t,sn);e(mn(mn(mn({},ln.Zn.default),o),{},{data:n,updateEvery:a,type:r,loading:!1,loaded:!0}))};function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hn={default:{fetch:nn.Ru,isEnabled:function(e){var t=e.nodeIds,n=e.fn;return!(null===t||void 0===t||!t.length)&&!!n}},feed:{fetch:nn.bj,isEnabled:function(e){var t=e.roomId,n=e.fn;return!!t&&!!n}}},En=function(){var e=(0,P.by)(),t=e.after,n=e.before;return(0,o.useMemo)((function(){if(t>0)return[{after:t,before:n},t,n];var e=Date.now();return[{after:e+1e3*t,before:e},t,n]}),[t,n])},xn=n(92501),On=(n(47042),n(26495)),wn=n(36337),Sn=n(19221),Cn=n(23148),Zn=(0,I.cn)({key:"feedChart",default:{navigation:"pan"}});function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pn=(0,I.CG)({key:"feedChartState",get:function(e){var t=e.key;return function(e){var n=(0,e.get)(Zn);return t?n[t]:n}},set:function(e){var t=e.key;return function(e,n){(0,e.set)(Zn,(function(e){return t?kn(kn({},e),{},(0,u.Z)({},t,n)):kn(kn({},e),n)}))}}}),Tn=function(e){return(0,I.sJ)(Pn({key:e}))},In=function(e){return(0,I.Zl)(Pn({key:e}))},Dn=(n(41203),["icon","hoverIndicator","padding"]);function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nn=(0,s.default)(d.Button).attrs((function(e){return{flavour:"borderless",iconColor:e.active?"textDescription":"border",iconSize:"small",padding:[.5],small:!0}})).withConfig({displayName:"styled__Button",componentId:"sc-8s0lqd-0"})(["&&{background-color:",";height:20px;width:20px;&:hover{background-color:",";.button-icon__color{fill:",";}}}"],(function(e){var t=e.theme;return e.active?(0,d.getColor)("borderSecondary")({theme:t}):"initial"}),(function(e){var t=e.theme;return(0,d.getColor)("borderSecondary")({theme:t})}),(function(e){var t=e.theme;return(0,d.getColor)("textDescription")({theme:t})})),zn=(0,s.default)(d.Flex).attrs({padding:[.5],gap:1,round:!0,border:{side:"all",color:"borderSecondary"}}).withConfig({displayName:"styled__Container",componentId:"sc-8s0lqd-1"})(["position:absolute;top:18px;right:8px;background:",";&:hover{background:",";}"],(0,d.getRgbColor)("elementBackground",.5),(0,d.getColor)("elementBackground")),Ln=function(e){var t=e.active,n=e.disabled,r=e.defaultColor;return t?"textDescription":n?"disabled":void 0===r?"border":r},An=(s.default.button.attrs((function(e){var t=e.icon,n=e.hoverIndicator,r=void 0===n||n,a=e.padding,o=void 0===a?0:a,l=(0,J.Z)(e,Dn);return Fn(Fn({},l),{},{children:t,active:l.active||l["aria-expanded"],hoverIndicator:r,padding:o})})).withConfig({displayName:"styled__StyledButton",componentId:"sc-8s0lqd-2"})(["border:initial;padding:",";height:fit-content;line-height:0;background:",";cursor:pointer;svg{fill:",";stroke:",";}"," &:hover{",";svg{fill:",";stroke:",";}}"],(function(e){return e.padding}),(function(e){var t=e.theme;return e.active?(0,d.getColor)("borderSecondary")({theme:t}):"initial"}),(function(e){var t=e.active,n=e.disabled,r=e.theme;return e.stroked?"none":(0,d.getColor)(Ln({active:t,disabled:n}))({theme:r})}),(function(e){var t=e.active,n=e.disabled,r=e.theme;return e.stroked?(0,d.getColor)(Ln({active:t,disabled:n}))({theme:r}):"none"}),(function(e){var t=e.active,n=e.hoverIndicator;return(t||n)&&"\n    border-radius: 4px;\n  "}),(function(e){var t=e.theme,n=e.hoverIndicator,r=e.disabled;return n&&!r&&"background: ".concat((0,d.getColor)("borderSecondary")({theme:t}),";")}),(function(e){var t=e.theme,n=e.stroked,r=e.disabled;return n?"none":(0,d.getColor)(Ln({defaultColor:"textDescription",disabled:r}))({theme:t})}),(function(e){var t=e.theme,n=e.stroked,r=e.disabled;return n?(0,d.getColor)(Ln({defaultColor:"textDescription",disabled:r}))({theme:t}):"none"})),["testIdPrefix"]),Rn=(0,o.forwardRef)((function(e,t){var n,r=e.testIdPrefix,l=(0,J.Z)(e,An),i=(0,P.I0)(),c=(0,a.Z)(i,2),u=c[0],s=u.after,d=u.before,m=c[1],f=[Tn(n="navigation"),In(n)],p=(0,a.Z)(f,2),v=p[0],g=p[1],b=(0,o.useCallback)((function(e){var t=s,n=d;if(s<0){var r=Date.now();t=r+1e3*s,n=r}var a=e*Math.round((n-t)/4);m({after:t+a,before:n-a})}),[s,d]),h=s>0&&Math.abs(d-s)<2e3||-1===s;return o.createElement(zn,(0,y.Z)({"data-testid":"chartToolbox","data-track":"chart-toolbox::hover-chart::".concat(r),"data-toolbox":"true",ref:t},l),o.createElement(Nn,{active:"pan"===v,"data-testid":"chartToolbox-pan","data-track":"chart-toolbox::pan-click::".concat(r),icon:"panTool",onClick:function(){return g("pan")},title:"Pan"}),o.createElement(Nn,{active:"highlight"===v,"data-testid":"chartToolbox-highlight","data-track":"chart-toolbox::highlight-click::".concat(r),icon:"highlightArea",onClick:function(){return g("highlight")},title:"Highlight"}),o.createElement(Nn,{active:"zoom"===v,"data-testid":"chartToolbox-zoom","data-track":"chart-toolbox::zoom-click::".concat(r),disabled:h,icon:"dragHorizontal",onClick:function(){g("zoom")},title:"Select and zoom"}),o.createElement(Nn,{"data-testid":"chartToolbox-zoomIn","data-track":"chart-toolbox::zoom-in-click::".concat(r),disabled:h,icon:"zoomIn",onClick:function(){b(1)},title:"Zoom in"}),o.createElement(Nn,{"data-testid":"chartToolbox-zoomOut","data-track":"chart-toolbox::zoom-out-click::".concat(r),icon:"zoomOut",onClick:function(){b(-1)},title:"Zoom out"}),o.createElement(Nn,{"data-testid":"chartToolbox-zoomReset","data-track":"chart-toolbox::zoom-reset-click::".concat(r),disabled:-900===s&&0===d,icon:"zoomReset",onClick:function(){m({after:-900,before:0})},title:"Zoom reset"}))}));function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _n={after:null,before:null};Cn.kL.register(wn.Z,Cn.vn,Cn.ZL,Cn.uw,Cn.De,Cn.f$,Cn.FB,Cn.u,Sn.ZP);var Vn=function(e){var t,n=e.paramsKey,r=e.testIdPrefix,l=(0,o.useRef)(),i=(0,o.useContext)(s.ThemeContext),u=(0,P.I0)(),m=(0,a.Z)(u,2),p=m[0],v=m[1],g=(0,o.useState)([]),b=(0,a.Z)(g,2),y=b[0],h=b[1],E=(0,o.useState)(_n),x=(0,a.Z)(E,2),O=x[0],w=x[1],S=(0,o.useState)(!1),C=(0,a.Z)(S,2),Z=C[0],k=C[1],T=(0,o.useState)(!1),I=(0,a.Z)(T,2),D=I[0],K=I[1],F=(0,o.useState)([]),N=(0,a.Z)(F,2),z=N[0],L=N[1],A=(0,o.useState)(null),R=(0,a.Z)(A,2),M=R[0],B=R[1],_=(0,o.useState)("second"),V=(0,a.Z)(_,2),H=V[0],U=V[1],W=(0,f.Z)(!1),Q=(0,a.Z)(W,4),q=Q[0],G=Q[2],X=Q[3],J=(0,c.ZQ)(n).aggregations,Y=Tn().navigation,$=(0,Ne.rA)(),ee=$.localeTimeString,te=$.localeDateString,ne=En(),re=(0,a.Z)(ne,1)[0],ae=re.before-re.after,oe=(0,o.useMemo)((function(){var e=Date.now();return{min:re.after-ae,max:0===p.before?re.before:e<re.before+ae?e:re.before+ae}}),[re.after,re.before,p.before]),le=[{backgroundColor:(0,d.getColor)("primary")({theme:i}),borderWidth:0,data:y,label:"Histogram",maxBarThickness:50,minBarLength:0}];(0,o.useEffect)((function(){var e;if(null!==J&&void 0!==J&&null!==(e=J.event_histogram)&&void 0!==e&&null!==(e=e.hits)&&void 0!==e&&e.buckets){var t=J.event_histogram.hits.buckets.reduce((function(e,t){var n=t.key,r=t.doc_count;return{data:[].concat((0,j.Z)(e.data),[r]),labels:[].concat((0,j.Z)(e.labels),[n])}}),{data:[],labels:[]}),n=(0,He.BZ)(p.after,p.before)||{};h(t.data),L(t.labels),B(null),U(n.unit)}}),[null===J||void 0===J||null===(t=J.event_histogram)||void 0===t||null===(t=t.hits)||void 0===t?void 0:t.buckets]);var ie=(0,o.useMemo)((function(){return{animation:!1,interaction:{axis:"x"},maintainAspectRatio:!1,plugins:{annotation:{annotations:Bn({},O.after&&O.before?{annotation:{type:"box",backgroundColor:"rgba(128,128,128,0.3)",borderDash:[1,5,1,1],borderWidth:1,xMax:O.before,xMin:O.after,xScaleID:"x"}}:{})},legend:{align:"start",display:!1,position:"bottom"},zoom:{limits:{x:oe},pan:{enabled:"pan"===Y&&!Z,mode:"x",onPanStart:function(e){e.chart.canvas.style.cursor="grabbing"},onPanComplete:function(e){var t=e.chart;t.canvas.style.cursor="default";var n=t.scales.x,r=n.min,a=n.max;B({min:Math.round(r),max:Math.round(a)}),v({after:Math.round(r),before:Math.round(a)}),t.update()},threshold:1},zoom:{drag:{enabled:"zoom"===Y||Z},mode:"x",onZoomStart:function(e){e.chart.canvas.style.cursor="col-resize"},onZoomComplete:function(e){var t=e.chart;if("zoom"===Y||Z){t.canvas.style.cursor="default";var n=t.scales.x,r=n.min,a=n.max;v({after:Math.round(r),before:Math.round(a)}),k(!1)}}}}},responsive:!0,scales:{x:Bn({type:"time",grid:{drawBorder:!0,drawOnChartArea:!1,drawTicks:!0,offset:!1},parsing:!1,ticks:Bn({color:(0,d.getColor)("textLite")({theme:i}),font:{size:11},autoSkip:!0,maxTicksLimit:20},"minute"===H&&ae>=1e3*cn.Kl?{callback:function(e){var t=te(e,{month:"2-digit",day:"2-digit",year:"numeric",long:!1,dateStyle:void 0}).split("/").reverse().slice(1).join("-"),n=ee(e,{secs:!1});return"".concat(t," ").concat(n)}}:{}),time:{displayFormats:{week:"yyyy-MM-dd",day:"MM-dd",hour:"MM-dd HH:mm",minute:"HH:mm",second:"HH:mm:ss"},tooltipFormat:"yyyy-MM-dd HH:mm:ss",unit:H||"second"}},M?{min:M.min,max:M.max}:{}),y:{beginAtZero:!0,ticks:{precision:0,color:(0,d.getColor)("textLite")({theme:i}),font:{size:11}}}}}}),[O,ae,Z,Y,M,B,H,oe]);if((0,o.useEffect)((function(){var e=function(e){"Shift"===e.key&&(e.preventDefault(),k(!0))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),!y.length)return null;return o.createElement(d.Flex,{position:"relative",height:{min:50},onMouseEnter:G,onMouseLeave:X},q&&o.createElement(Rn,{testIdPrefix:r}),o.createElement(On.$Q,{data:{datasets:le,labels:z},onMouseDown:function(e){if(e.preventDefault(),"highlight"===Y){K(!0);var t=e.nativeEvent.offsetX||e.nativeEvent.layerX,n=l.current;n.canvas.style.cursor="crosshair",w({after:Math.round(n.scales.x.getValueForPixel(t)),before:null})}},onMouseMove:function(e){if(e.preventDefault(),"highlight"===Y&&D){var t=e.nativeEvent.offsetX||e.nativeEvent.layerX,n=l.current;w((function(e){return Bn(Bn({},e),{},{before:Math.round(n.scales.x.getValueForPixel(t))})}))}},onMouseUp:function(e){e.preventDefault(),K(!1);var t=e.nativeEvent.offsetX||e.nativeEvent.layerX,n=l.current;n.canvas.style.cursor="default",O.after===Math.round(n.scales.x.getValueForPixel(t))?w(_n):w(O)},options:ie,ref:l}))},Hn=["sorter"];function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qn=function(e){return{label:e,value:e}},qn=function(e){var t=e.paramsKey,n=e.initData,r=e.initFilter,l=(0,c.ZQ)(t),i=l.charts,m=l.loading,f=L(t),p=(0,o.useContext)(s.ThemeContext),v=Object.keys(i).map(Qn),g=k(t.extraKey,Qn),b=(0,o.useState)(n),y=(0,a.Z)(b,2),h=y[0],E=y[1],x=(0,o.useState)(r),O=(0,a.Z)(x,2),w=O[0],S=O[1],C=(0,c.CE)(t);(0,o.useEffect)((function(){E(n)}),[n]),(0,o.useEffect)((function(){S(r)}),[r]);var Z=(0,o.useMemo)((function(){if(!i[h])return{datasets:[],labels:[]};var e=i[h].columns,t=null===f||void 0===f?void 0:f.reduce((function(t,n){var r=n[w];return t[r]?Wn(Wn({},t),{},(0,u.Z)({},r,e.reduce((function(e,t){var r;return Wn(Wn({},e),{},(r={},(0,u.Z)(r,t,e[t]+n[t]),(0,u.Z)(r,"sorter",e.sorter+n[t]),r))}),t[r]))):Wn(Wn({},t),{},(0,u.Z)({},r,e.reduce((function(e,t,a){var o;return Wn(Wn(Wn({},e),0===a?{label:r,sorter:n[t]}:{}),{},(o={},(0,u.Z)(o,t,n[t]),(0,u.Z)(o,"sorter",e.sorter?e.sorter+n[t]:n[t]),o))}),{})))}),{}),n=Object.values(t).sort((function(e,t){return t.sorter-e.sorter})).slice(0,15).map((function(e){e.sorter;return Wn({},(0,J.Z)(e,Hn))}));return{datasets:i[h].columns.map((function(e,t){return{backgroundColor:cn.vK[t],borderWidth:0,data:n.map((function(t){return t[e]})),label:e,maxBarThickness:50,minBarLength:0}})),labels:n.map((function(e){return e.label}))}}),[C,i,h,w,f]),j={animation:!1,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{boxWidth:4,boxHeight:20,title:{color:(0,d.getColor)("textLite")({theme:p})}}}},responsive:!0,scales:{x:{stacked:!0},y:{stacked:!0}}};return o.createElement(d.Flex,{column:!0,"data-testid":"functionsCharts",gap:3,width:"50%"},o.createElement(d.Flex,{alignItems:"center","data-testid":"functionsChart".concat(h,"-selects"),gap:2},o.createElement(d.Select,{"data-ga":"functions-chart-".concat(h,"::select-data::functions-view"),"data-testid":"functionsChart".concat(h,"-dataSelect"),isLoading:m,onChange:function(e){var t=e.value;return E(t)},options:v,styles:{size:"tiny",minWidth:120},value:{label:h,value:h}}),o.createElement(d.Text,{"data-testid":"functionsChart".concat(h,"-perLabel"),color:"textLite"},"per"),o.createElement(d.Select,{"data-ga":"functions-chart-".concat(w,"::select-filter::functions-view"),"data-testid":"functionsChart".concat(w,"-filterSelect"),isLoading:m,onChange:function(e){var t=e.value;return S(t)},options:g,styles:{size:"tiny",minWidth:120},value:{label:w,value:w}})),o.createElement(d.Flex,{position:"relative",height:{min:60},width:{min:"100%"}},o.createElement(On.$Q,{data:Z,options:j})))},Gn=["margin","defaultCharts"],Xn=["paramsKey","testIdPrefix","availableFns","availableFnsLoaded","hasError"],Jn={extraKey:"fn"},Yn={fn:{Chart:function(e){var t=e.margin,n=e.defaultCharts,r=(0,J.Z)(e,Gn);return o.createElement(d.Flex,{gap:6,margin:t},n.map((function(e,t){var n=(0,a.Z)(e,2),l=n[0],i=n[1];return o.createElement(qn,(0,y.Z)({key:t,initData:l,initFilter:i},r))})))},loadingMessage:"Loading function..."},feed:{Chart:Vn,loadingMessage:"Loading events..."}},$n={table:en},er=(0,o.memo)((function(e){var t=e.paramsKey,n=void 0===t?Jn:t,l=e.testIdPrefix,i=void 0===l?"functions":l,u=e.availableFns,s=e.availableFnsLoaded,m=e.hasError,f=(0,J.Z)(e,Xn),p=Yn[n.extraKey]||Yn.fn,v=p.Chart,g=p.loadingMessage,E=(0,c.Hv)(n),x=(0,a.Z)(E,2),O=x[0],w=x[1],S=(0,P.c6)(n),C=(0,c.ZQ)(n),Z=C.loaded,j=C.data,k=C.error,T=C.type,I=C.retentionWarning,D=C.defaultCharts,K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,a.Z)(e,1)[0],n=(0,h.bV)(t,"name");return 1===e.length&&n?"on ".concat(n):"on your selected node"}(S);(0,o.useEffect)((function(){null!==O&&void 0!==O&&O.length||null===u||void 0===u||!u.length||m||w([u[0]])}),[s,O]);var F=(0,Ze.useHovered)({},[Z]),N=(0,a.Z)(F,2),z=N[0],L=N[1],A=(0,je.Z)();(0,o.useEffect)((function(){A(L)}),[L]);var R=function(e,t,n){var l=(0,ve.th)(),i=(0,b.vf)(),u=(0,c.T2)(n),s=(0,c.e6)(n),d=(0,c.mO)(n),m=(0,a.Z)(d,2),f=m[0],p=m[1],v=(0,o.useRef)();v.current=f;var g=function(e){var t=e.data,n=void 0===t?{}:t;(r[n.type]||gn)(p,n,v.current)},y=hn[t]||hn.default,E=y.fetch,x=y.isEnabled,O=En(),w=(0,a.Z)(O,3),S=w[0],C=w[1],Z=w[2],j=(0,o.useRef)();j.current=S;var k=(0,b.UL)(),T=(0,P.by)(null,{key:k,extraKey:"".concat(t||n.extraKey,"Filters")}),I=(0,h.Xw)(e),D=(0,Ce.zp)(),K=(0,a.Z)(D,1)[0].loading;return(0,tn.Z)((function(){return{enabled:!K&&x({nodeIds:e,fn:t,roomId:k}),fetch:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return E(yn(yn(yn({roomId:k,spaceId:l,nodeIds:e,cloudNodeIds:I,fn:t,roomSlug:i},T),j.current),n))},onStart:function(){return p({loading:!0})},onFail:function(e){var t;null!==(t=e)&&void 0!==t&&null!==(t=t.response)&&void 0!==t&&t.data&&(e=e.response.data),p({error:e,loading:!1,loaded:!0})},onReceive:g,polling:u||!1,pollingOptions:{pollingInterval:1e3*(s||f.updateEvery),shouldPause:!0},force:!0}}),[k,null===e||void 0===e?void 0:e.length,null===e||void 0===e?void 0:e[0],t,u,u&&s,"feed"===t&&T,C,Z])}(S,O[0],n);if(!Z||!s)return o.createElement(pe.Z,{title:g,"data-testid":"".concat(i,"Loading")});if(m)return o.createElement(xn.NY,{title:"Functions couldn't be loaded",message:"We couldn't find any available functions."});if(k&&"canceled"!==k)return"ErrNodeResourceNotFound"===(null===k||void 0===k?void 0:k.errorMsgKey)?o.createElement(Ee.Z,{message:"Please review your selection and try again.",title:"".concat("feed"===n.extraKey?"Events are":'Function "'.concat(O,' is"')," not available ").concat(K,".")}):o.createElement(xn.NY,{title:"".concat("feed"===n.extraKey?"Events":"Functions"," couldn't be loaded"),message:"ErrForbidden"===(null===k||void 0===k?void 0:k.errorMsgKey)?"Forbidden":""});var M=$n[T]||$n.table;return o.createElement(d.Box,{overflow:{horizontal:"hidden",vertical:"auto"},column:!0,padding:[4,4,0],gap:2},o.createElement(_e,{nodeIds:S,onRefresh:R,paramsKey:n}),o.createElement(v,{paramsKey:n,testIdPrefix:i,defaultCharts:D}),Z&&null!==j&&void 0!==j&&j.length?o.createElement(M,(0,y.Z)({"data-testid":"".concat(i,"Component"),paramsKey:n,refetch:R,ref:z},f)):o.createElement(d.Flex,{column:!0,justifyContent:"center",alignItems:"center",alignSelf:"center",margin:["feed"===n.extraKey?3:30,0,0],gap:3},o.createElement(d.H3,null,"No results to display"),o.createElement(d.Text,{color:"textDescription",textAlign:"center"},"Double-check your search or filters and dates and try again with different conditions"),I&&o.createElement(d.Text,{color:"text",textAlign:"center"},I)))})),tr=er,nr=n(24533),rr=["paramsKey","hasError","refreshAvailableFns","availableFnsLoaded"];function ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lr=function(e){var t=(0,Ce.Hu)();return o.createElement(d.Button,(0,y.Z)({label:"Get a fresh agent token",onClick:t},e))},ir="Functions expose sensitive information about your systems and applications. To protect your privacy, Netdata exposes this information only to logged-in users and claimed agents. When viewing Functions directly on a  Netdata Agent UI, this information is sent directly from the Netdata Agent to your web browser, without exposing it to any third parties.",cr={notLoggedIn:{title:"Sign in to Netdata to use Functions",description:ir,footer:o.createElement(we.Z,null)},notClaimed:{title:"Connect this agent to Netdata to use Functions",description:ir,footer:o.createElement(Se.Z,null)},noAccess:{title:"This agent belongs to a Netdata Space you are not member of",description:ir,footer:o.createElement(d.TextBig,{color:"textDescription"},"Ask for an invitation from the administrators of the Netdata Space of the agent to use functions.")},bearerError:{title:"You are not authorized to use Functions",description:ir,footer:o.createElement(lr,null)}},ur={extraKey:"fn"},sr=["paramsKey"],dr={extraKey:"feed"},mr={fn:{Component:function(e){var t=e.paramsKey,n=void 0===t?ur:t,r=e.hasError,l=e.refreshAvailableFns,i=e.availableFnsLoaded,c=(0,J.Z)(e,rr),u=(0,P.H7)(n),s=(0,P.wT)(n),d=(0,a.Z)(s,2),m=d[0],f=d[1],p=(0,h.M2)(u),v=(0,a.Z)(p,1)[0],g=ye(n);(0,o.useEffect)((function(){null!==u&&void 0!==u&&u.length&&(g||null!==m&&void 0!==m&&m.length||!v||f([v]))}),[g,f,m]);var b=(0,ge.ej)(),E=(0,a.Z)(b,1)[0],x=(0,Ce.zp)(),O=(0,a.Z)(x,1)[0],w=O.bearerProtection,S=O.error,C=O.token,Z=(0,ve.Q6)(),j=(0,nr.Lz)(),k=(0,a.Z)(j,1)[0],T=k.canBeClaimed,I=k.cloudStatus;if((0,o.useEffect)((function(){r&&l()}),[I,C]),!v)return o.createElement(Oe,{paramsKey:n});if(Z&&(r||S&&w)){var D=function(e){var t=e.userStatus,n=e.userNodeStatus,r=e.accessError,a=e.canBeClaimed;return e.cloudStatus,cr[t]?cr[t]:r?cr.notLoggedIn:a?cr.notClaimed:cr[n]?cr[n]:cr.bearerError}(or(or({},E),{},{bearerError:S,canBeClaimed:T,cloudStatus:I})),K=D.title,F=D.description,N=D.footer;return o.createElement(Ee.Z,{title:K,message:F,footer:N})}return o.createElement(tr,(0,y.Z)({testIdPrefix:"fn",paramsKey:n,availableFnsLoaded:i},c))},paramsKey:{extraKey:"fn"},loading:"Loading functions..."},feed:{Component:function(e){var t=e.paramsKey,n=void 0===t?dr:t,r=(0,J.Z)(e,sr);return ye(n),o.createElement(tr,(0,y.Z)({testIdPrefix:"feed",paramsKey:n},r))},paramsKey:{extraKey:"feed"},loading:"Loading events..."}},fr=function(e){var t=e.flavour,n=mr[t]||mr.fn,r=n.Component,u=n.paramsKey,s=n.loading,d=(0,i.zN)(),m=(0,i.fD)(),f=(0,o.useState)(),p=(0,a.Z)(f,2),v=p[0],g=p[1],b=(0,c.KO)(u.extraKey),y=b.loaded,h=b.value,E=b.hasError,x=b.refresh;return m?d.length||"fn"!==t?o.createElement(l.Z,{"data-testid":"".concat(t,"Page"),margin:[0,0,8,0],rightBar:o.createElement(me,{flavour:t,selectedRowData:v,setSelectedRowData:g,availableFns:h})},o.createElement(r,{testIdPrefix:t,paramsKey:u,onShowInfo:g,availableFnsLoaded:y,availableFns:h,refreshAvailableFns:x,hasError:E})):o.createElement(fe.Z,null):o.createElement(pe.Z,{title:s})}}}]);