!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="fac75d26-ba62-424f-9819-76d1b2c29f27",e._sentryDebugIdIdentifier="sentry-dbid-fac75d26-ba62-424f-9819-76d1b2c29f27")}catch(e){}}(),(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[355],{63150:(e,t,r)=>{r.d(t,{JG:()=>c,Qj:()=>f,Ym:()=>n,Zg:()=>i,k0:()=>a,lI:()=>u,mD:()=>d,sr:()=>l,xQ:()=>o,yu:()=>s});var n="silencingRules",a={system:{text:"All users",tooltip:"Rule affects all users"},personal:{text:"Myself",tooltip:"Limit the silencing effect to your account only"}},o="system",l={label:"All rooms",value:""},i={now:{text:"Silence for a specific duration",tooltip:"Rule starts immediately and lasts until the specified duration"},schedule:{text:"Schedule silence",tooltip:"Schedule the rule to start taking effect at some point at the future"}},c="now",u={untilTurnedOff:"Until turned off",oneHour:"1 hour",sixHours:"6 hours",twelveHours:"12 hours",oneDay:"1 day",custom:"Custom"},s={label:"Until turned off",value:"untilTurnedOff"},d={border:{side:"all",color:"inputBorder"},padding:[1,2],margin:[0,0,.5,0],round:!0,justifyContent:"start"},f={ErrInvalidName:"No rule name provided",ErrCodeInvalidStartsAt:"Invalid or no start date provided",ErrCodeInvalidSLastUntil:"Invalid or no end date provided",ErrCodeInvalidScheduleDuration:"Invalid duration selected",ErrCodeInvalidSeverity:"Invalid severity",ErrCodeInvalidIntegration:"Invalid integration",ErrCodeNotOwnRule:"Not permitted to create system rules"}},89960:(e,t,r)=>{r.d(t,{B:()=>m,Z:()=>p});var n=r(15861),a=r(64687),o=r.n(a),l=r(67294),i=r(4480),c=r(38700),u=r(25464),s=r(31981),d=r(62594),f=function(){var e=(0,c.th)();return(0,i._8)((function(t){var r=t.set,a=t.snapshot;return function(){var t=(0,n.Z)(o().mark((function t(n){var l,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getPromise((0,u.Nj)({id:n,key:"nodes"}));case 2:return l=t.sent,i=null,(null===l||void 0===l?void 0:l.length)||(r((0,u.Nj)({id:n,key:"loaded"}),!1),(i=(0,s.Fz)({roomId:n,spaceId:e})).then((function(e){var t=e.data;r((0,u.Nj)({id:n,key:"nodes"}),t.map((function(e){var t=e.id;return{label:e.name,value:t}}))),r((0,u.Nj)({id:n,key:"loaded"}),!0)})).catch((function(e){return r((0,u.Nj)({id:n,key:"error"}),e)}))),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),[e])},m=function(){var e=f(),t=(0,d.p)("id");(0,l.useEffect)((function(){var r=null;return t&&(r=e(t)),function(){return!!(null===r||void 0===r?void 0:r.cancel)&&r.cancel()}}),[t,e])};const p=f},14355:(e,t,r)=>{r.r(t),r.d(t,{default:()=>je});var n=r(67294),a=r(41659),o=r(11012),l=r(29439),i=r(15267),c=r(91403),u=r(74038),s=r(59532),d=r(4942),f=r(54851),m=r(6264),p=r(59564),y=r(41729),b=r(45987),v=r(4480),g=r(38700),h=r(8534),O=r(62594),j=["rules"];function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x,P=function(e){return function(t,r){var n=t[e];return!Array.isArray(r)||!r.length||(Array.isArray(n)?r.some((function(e){return n.includes(e)})):r.includes(n))}},k={roomIds:P("roomIds"),nodeIds:P("nodeIds"),hostLabels:(x="hostLabels",function(e,t){var r=e[x];if(!r)return!t.length;var n=Object.entries(r).map((function(e){var t=(0,l.Z)(e,2),r=t[0],n=t[1];return"".concat(r,": ").concat(n)}));return P(x)(w(w({},e),{},(0,d.Z)({},x,n)),t)}),alertNames:P("alertNames"),alertRoles:P("alertRoles"),alertContexts:P("alertContexts")},Z=(0,v.CG)({key:"silencingRulesFiltered",get:function(e){var t=e.extraKey,r=e.spaceId,n=e.omit,a=void 0===n?[]:n,o=e.keepAll,i=e.allNodesRoomId;return function(e){var n=e.get,c=n((0,m.dz)({key:r,extraKey:t})),u=Object.keys(c).reduce((function(e,t){return a.includes(t)||e.push([t,c[t]]),e}),[]),s=n((0,h.z5)({id:r,allNodesRoomId:i}));if(!u.length)return s;var d=function(e){return function(t){return!e.some((function(e){var r=(0,l.Z)(e,2),n=r[0],a=r[1];return!!k[n]&&!k[n](t,a)}))}}(u),f=s.rules,p=(0,b.Z)(s,j);return o?s:w(w({},p),{},{rules:f.filter(d)})}}}),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.extraKey,r=e.omit,n=void 0===r?[]:r,a=e.keepAll,o=void 0!==a&&a,l=(0,g.th)(),i=(0,O.p)("id");return(0,v.sJ)(Z({extraKey:t,spaceId:l,omit:n,keepAll:o,allNodesRoomId:i}))},S=r(29620);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=function(e,t,r){var n=e.id,a=e.name;-1==r?t.push({id:n,name:a,count:1}):t[r]=A(A({},t[r]),{},{count:t[r].count+1})},K=function(e){return e.id},N=function(e){return e.name};const R=function(e){var t=e.title,r=e.baseKey,a=e.param,o=e.paramKey,i=e.extraKey,c=e.testIdPrefix,u=function(e){var t=e.baseKey,r=e.extraKey,a=e.param,o=e.paramKey,i=I({extraKey:r,omit:[a],keepAll:!0}).rules,c=(0,m.by)(a,{key:t,extraKey:r});return(0,n.useMemo)((function(){return i.reduce((function(e,t){var r=t[o];if(!r)return e;var n=e.findIndex((function(e){return e.id==r.id}));return["rooms","nodes"].includes(o)?r.forEach((function(t){var r=t.id,a=t.name,o=t.notAvailable?"Not available (".concat(r,")"):a;C({id:r,name:o},e,n)})):["alertNames","alertContexts","alertRoles"].includes(o)?r.forEach((function(t){C({id:t,name:t},e,n)})):"hostLabels"==o&&Object.entries(r).forEach((function(t){var r=(0,l.Z)(t,2),a=r[0],o=r[1],i=(0,S.q)({key:a,value:o});C({id:i,name:i},e,n)})),e}),[])}),[i,c])}({baseKey:r,extraKey:i,param:a,paramKey:o});return u.length?n.createElement(p.Z,{title:t,testIdPrefix:c,param:a,baseKey:r,extraKey:i},n.createElement(y.ZP,{param:a,baseKey:r,extraKey:i,testIdPrefix:c,collection:u,getValue:K,getLabel:N,capitalized:!1})):null};var T=r(63150);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var F=[{title:"War rooms",param:"roomIds",paramKey:"rooms"},{title:"Nodes",param:"nodeIds",paramKey:"nodes"},{title:"Host labels",param:"hostLabels",paramKey:"hostLabels"},{title:"Alert names",param:"alertNames",paramKey:"alertNames"},{title:"Alert contexts",param:"alertContexts",paramKey:"alertContexts"},{title:"Alert roles",param:"alertRoles",paramKey:"alertRoles"}],M=(0,n.memo)((function(e){var t=(0,g.th)();return n.createElement(f.Flex,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({column:!0,height:"calc(100vh - 266px)",overflow:{vertical:"auto"},padding:[0,0,30]},e),F.map((function(e){var r=e.title,a=e.param,o=e.paramKey;return n.createElement(R,{key:r,baseKey:t,extraKey:T.Ym,title:r,param:a,paramKey:o})})))}));var _={filters:{iconName:"filterList",color:{active:"success",notActive:"textLite"},width:"19px",Content:M,dataTestId:"filterBar",label:"Filters"}},z=["filters"],B=function(e){return e.some((function(e){var t=e.roomIds,r=void 0===t?[]:t,n=e.nodeIds,a=void 0===n?[]:n,o=e.hostLabels,l=void 0===o?{}:o,i=e.alertNames,c=void 0===i?[]:i,u=e.alertContexts,s=void 0===u?[]:u,d=e.alertRoles,f=void 0===d?[]:d;return r.length||a.length||Object.keys(l).length||c.length||s.length||f.length}))};const G=function(e){var t=e.rules,r=(0,i.Z)((function(){return B(t)})),a=(0,l.Z)(r,2),o=a[0],d=a[1],f=_.filters.Content;return(0,n.useEffect)((function(){d(B(t))}),[t]),n.createElement(s.ZP,{collapsedComponent:n.createElement(c.Z,{onClickTab:d,availableTabs:_,tabsToShow:z}),isOpen:o,header:n.createElement(u.Z,{isOpen:o,onToggle:d,title:"Filters",icon:"filterList"})},n.createElement(f,{padding:[0,3,30]}))};var H=r(80986),V=r(87053),U=r(68535),J=r(41174),W=r(88715),Y=r(22464),Q=["value"];function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $=function(e){var t=e.value,r=(0,b.Z)(e,Q);return n.createElement(Y.Z,{content:t},n.createElement(f.Pill,X({maxWidth:"100%",overflow:"hidden",flavour:"neutral",color:"neutralPillColor",size:"small",justifyContent:"start",margin:[1]},r),t))},ee=function(){return n.createElement(f.Text,null,"*")},te=function(e){var t=(0,e.getValue)();return(null===t||void 0===t?void 0:t.length)?n.createElement(f.Flex,{flexWrap:!0},t.map((function(e){return n.createElement($,{key:e,value:e})}))):n.createElement(ee,null)},re=function(e){var t=e.getValue,r=(0,J.rA)().localeDateString;if(!t())return n.createElement(f.Text,null,"-");var a=r(new Date(t()),{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",long:!1,dateStyle:void 0});return n.createElement(f.Text,{whiteSpace:"nowrap"},a)},ne=[{id:"disabled",name:"Disable rule",accessorKey:"disabled",header:"",cell:function(e){var t=e.row,r=e.getValue,a=t.original,o=(0,n.useState)(!r()),c=(0,l.Z)(o,2),u=c[0],s=c[1],d=(0,i.Z)(),m=(0,l.Z)(d,2),p=m[0],y=m[1],b=(0,W.Z)(),v=(0,l.Z)(b,2)[1],g=(0,h.j6)(),O=(0,h._A)();return n.createElement(f.Toggle,{colored:!0,checked:u,disabled:p,onChange:function(e){y();var t=e.target.checked;s(t),g(X(X({},a),{},{disabled:!t})).then((function(){O()})).catch((function(e){s(!t),v(e)})).finally(y)}})},size:50,maxSize:50,minSize:50},{id:"name",name:"Name",accessorKey:"name",header:"Rule name",cell:function(e){var t=e.row,r=e.getValue,a=t.original.accountId;return n.createElement(f.Flex,{gap:2,alignItems:"center"},n.createElement(f.Text,{wordBreak:"break-word"},r()),a&&n.createElement(Y.Z,{align:"bottom",content:"This rule affects only your account"},n.createElement(f.Icon,{color:"textLite",height:"16px",name:"userPress",width:"16px"})))}},{id:"rooms",name:"Rooms",accessorKey:"rooms",header:"War rooms",cell:function(e){var t=(0,e.getValue)();return(null===t||void 0===t?void 0:t.length)?n.createElement(f.Text,null,t.map((function(e){return e.name})).join(", ")):n.createElement(f.Text,null,"All rooms")}},{id:"nodes",name:"Nodes",accessorKey:"nodes",header:"Nodes",cell:function(e){var t=(0,e.getValue)();return(null===t||void 0===t?void 0:t.length)?n.createElement(f.Flex,{flexWrap:!0},t.map((function(e){var t=e.id,r=e.name,a=e.notAvailable?n.createElement(f.Flex,{alignItems:"center",gap:1},n.createElement(f.Icon,{name:"warning_triangle",size:"small",color:"neutralPillColor"}),n.createElement(f.Text,null,"Node no longer available")):r;return n.createElement($,{key:t,value:a})}))):n.createElement(ee,null)}},{id:"hostLabels",name:"Host labels",accessorKey:"hostLabels",header:"Host labels",cell:function(e){var t=(0,e.getValue)(),r=Object.entries(t||{});return r.length?n.createElement(f.Flex,{flexWrap:!0},r.map((function(e){var t=(0,l.Z)(e,2),r=t[0],a=t[1],o=(0,S.q)({key:r,value:a});return n.createElement($,{key:o,value:o})}))):n.createElement(ee,null)}},{id:"alertNames",name:"Alert names",accessorKey:"alertNames",header:"Alert name",cell:te},{id:"alertContexts",name:"Alert contexts",accessorKey:"alertContexts",header:"Alert context",cell:te},{id:"alertRoles",name:"Alert roles",accessorKey:"alertRoles",header:"Alert role",cell:te},{id:"startDate",name:"Start date",accessorKey:"startsAt",header:"Start date",cell:re,size:120},{id:"endDate",name:"End date",accessorKey:"lastsUntil",header:"End date",cell:re,size:120}],ae=r(93433),oe=r(28969),le=r(26503),ie={month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",long:!1,dateStyle:void 0};var ce=(0,H.Z)((function(){return r.e(147).then(r.bind(r,65147))}),"CreateOrUpdateRuleModal"),ue=(0,n.memo)(f.NetdataTable,(function(e,t){return(0,U.ZP)(e,t)})),se={right:["actions"]},de=function(){return n.createElement(f.Flex,null,n.createElement(f.Text,null,"Create or Maintain Alert Notification Silencing Rules on this Space. These rules can be applicable to all users or just you, depending on their definition."," ",n.createElement(V.Z,{"data-ga":"alert-silencing::click-link-docs::rules-table","data-testid":"silencing-rules-doc",href:"https://learn.netdata.cloud/docs/alerts-and-notifications/notifications/netdata-cloud-notifications/#silencing-alert-notifications",rel:"noopener noreferrer",target:"_blank"},"Read the Alert Notification Silencing Rules documentation to learn more.")))};const fe=function(e){var t=e.data,r=function(){var e=(0,n.useState)(""),t=(0,l.Z)(e,2),r=t[0],a=t[1],o=(0,n.useState)({}),i=(0,l.Z)(o,2),c=i[0],u=i[1],s=(0,W.Z)(),d=(0,l.Z)(s,2)[1],m=(0,J.rA)().localeDateString,p=(0,h.hr)(),y=(0,h._A)(),b=function(){return u({type:"create"})},v=function(e){return u({type:"edit",rule:e})},g=function(e){var t=e.id;p([t]).then((function(){y()})).catch(d)},O=(0,oe.gI)(le.mk.spaceDeletePersonalSilencingRule),j=(0,oe.gI)(le.mk.spaceDeleteSystemSilencingRule),E=(0,n.useMemo)((function(){return{addEntry:{dataGa:"",flavour:"hollow",handleAction:b,iconColor:"success",label:"Add rule",small:!0,width:"auto"}}}),[]),w=function(e){var t=e.name;return n.createElement(n.Fragment,null,"Delete ",n.createElement(f.H3,{wordBreak:"break-word"},t)," rule")};return{search:r,setSearch:a,bulkActions:E,rowActions:(0,n.useMemo)((function(){return{edit:{handleAction:v,disabledTooltipText:"Edit is disabled",isDisabled:function(e){return!!e.readOnly},dataGa:"alert-silencing::click-edit-row::rules-table"},delete:{handleAction:g,confirmationTitle:w,confirmationMessage:function(e){return n.createElement(f.Text,{wordBreak:"break-word"},"You are about to delete ",n.createElement("strong",null,e.name)," silencing rule.",n.createElement("br",null),"Are you sure you want to continue?")},dataGa:"alert-silencing::click-delete-row::rules-table",disabledTooltipText:"Delete is disabled",confirmLabel:"Yes, delete",declineLabel:"Cancel",isDisabled:function(e){return e.accountId?!O:!j}}}}),[]),onFilter:(0,n.useCallback)((function(e,t,r){var n=e.original,a=r.toLowerCase(),o=(n.rooms||[]).map((function(e){return e.name})),l=(n.nodes||[]).map((function(e){return e.name})),i=n.alertNames||[],c=n.alertContexts||[],u=n.alertRoles||[],s=n.hostLabels||{},d=n.startsAt?m(new Date(n.startsAt),ie):"",f=n.lastsUntil?m(new Date(n.lastsUntil),ie):"";return function(e,t){return e.some((function(e){return e.toLowerCase().includes(t)}))}([n.name.toLowerCase()].concat((0,ae.Z)(o),(0,ae.Z)(l),(0,ae.Z)(i),(0,ae.Z)(c),(0,ae.Z)(u),(0,ae.Z)(Object.entries(s).flat()),[d,f]),a)}),[]),modalDetails:c,closeModal:function(){return u({})}}}(),a=r.search,o=r.setSearch,i=r.bulkActions,c=r.rowActions,u=r.onFilter,s=r.modalDetails,d=r.closeModal;return n.createElement(n.Fragment,null,n.createElement(f.Flex,{column:!0,gap:4,padding:[2,4],height:"calc(100vh - 241px)"},n.createElement(de,null),n.createElement(ue,{key:JSON.stringify(t||{}),enableSorting:!0,enableColumnVisibility:!0,data:t,dataColumns:ne,bulkActions:i,rowActions:c,globalFilter:a,globalFilterFn:u,onGlobalSearchChange:o,columnPinning:se,enableColumnPinning:!0,enablePinning:!0})),"create"==s.type&&n.createElement(n.Suspense,null,n.createElement(ce,{onClose:d})),"edit"==s.type&&s.rule&&n.createElement(n.Suspense,null,n.createElement(ce,{rule:s.rule,onClose:d,isEdit:!0})))};var me=r(94111),pe=r(91126),ye=r(14111);function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ge=function(e){var t=(0,h.oO)({id:e,key:"initialLoad"}),r=(0,h.tZ)(),n=(0,h.XJ)(e);(0,ye.Z)((function(){return{enabled:!!e&&!t,fetch:function(){return(0,me.KH)(e)},onFail:function(e){return n(ve(ve({},pe.R),{},{loading:!1,loaded:!0,error:e}))},onSuccess:function(e){return n(function(e,t){return ve(ve({},e),{},{loading:!1,loaded:!0,initialLoad:!0,rules:t})}(pe.R,e))}}}),[e,r])},he=function(e){var t=e.errorMessage;return n.createElement(f.Flex,{column:!0,gap:2,alignItems:"center",justifyContent:"center",flex:!0},n.createElement(f.TextBig,null,"Something went wrong"),t&&n.createElement(f.Text,null,"(",t,")"))};var Oe=r(89960);const je=function(){var e=(0,g.th)();ge(e),(0,Oe.B)();var t=I({extraKey:T.Ym}),r=t.loaded,l=t.rules,i=t.error;return r?i?n.createElement(he,{errorMessage:i.message}):n.createElement(a.Z,{rightBar:n.createElement(G,{rules:l}),margin:[3,0]},n.createElement(fe,{data:l})):n.createElement(o.Z,{height:"calc(100% - 44px)",title:"Loading silencing rules..."})}},29620:(e,t,r)=>{r.d(t,{_:()=>o,q:()=>l});var n=r(29439),a=r(63150),o=function(e){var t,r=(null===(t=null===e||void 0===e?void 0:e.response)||void 0===t?void 0:t.data)||{},o=r.validationErrors,l=r.errorMessage;return o&&Object.keys(o).length?Object.entries(o).reduce((function(e,t){var r=(0,n.Z)(t,2)[1].Code;return a.Qj[r]&&e.push({errorMessage:a.Qj[r]}),e}),[]):[{errorMessage:l}]},l=function(e){var t=e.key,r=e.value;return"".concat(t,": ").concat(r)}},94111:(e,t,r)=>{r.d(t,{KF:()=>u,KH:()=>l,nt:()=>i,oG:()=>c});var n=r(35835),a=r(78128),o=function(e){return e.map((function(e){return(0,a.k5)(e)}))},l=function(e){return n.Z.get("/api/v2/spaces/".concat(e,"/notifications/silencing/rules"),{transform:o})},i=function(e,t){return n.Z.post("/api/v2/spaces/".concat(e,"/notifications/silencing/rules/delete"),t)},c=function(e,t){return n.Z.post("/api/v2/spaces/".concat(e,"/notifications/silencing/rule"),(0,a.v)(t))},u=function(e,t){return n.Z.put("/api/v2/spaces/".concat(e,"/notifications/silencing/rule/").concat(t.id),(0,a.v)(t))}},8534:(e,t,r)=>{r.d(t,{XJ:()=>g,_A:()=>j,hr:()=>x,j6:()=>w,oO:()=>v,tZ:()=>O,wK:()=>E,z5:()=>b});var n=r(4942),a=r(45987),o=r(4480),l=r(38700),i=r(72840),c=r(94111),u=r(91126),s=r(25464),d=r(62594),f=["rules"],m=["roomIds","nodeIds"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=(0,o.CG)({key:"silencingRulesState",get:function(e){var t=e.id,r=e.key,n=e.allNodesRoomId;return function(e){var o=e.get,l=o((0,u.Z)(t)),i=l.rules,c=(0,a.Z)(l,f),d=o((0,s.Nj)({id:n,key:"nodes"})),m=y(y({},c),{},{rules:i.map((function(e){return y(y({},e),e.nodeIds?{nodes:e.nodeIds.map((function(e){var t=d.find((function(t){return t.value==e}));return{id:e,name:(null===t||void 0===t?void 0:t.label)||"-",notAvailable:!t}}))}:{})}))});return r?m[r]:m}},set:function(e){var t=e.id,r=e.key;return function(e,o){var l=e.get,c=e.set,s=o.rules;c((0,u.Z)(t),(function(e){if(s){var t=s.map((function(e){var t=e.roomIds,r=e.nodeIds,n=(0,a.Z)(e,m),o=t?t.map((function(e){var t=l((0,i.n2)({id:e}));return{id:t.id,name:t.name}})):void 0;return y(y(y(y({},n),t?{roomIds:t}:{}),o?{rooms:o}:{}),r?{nodeIds:r}:{})}));o.rules=t}return r?y(y({},e),{},(0,n.Z)({},r,o)):y(y({},e),o)}))}}}),v=function(e){var t=e.id,r=e.key,n=(0,d.p)("id");return(0,o.sJ)(b({id:t,key:r,allNodesRoomId:n}))},g=function(e,t){return(0,o.Zl)(b({id:e,key:t}))},h=(0,o.cn)({key:"forceUpdateRulesSelector",default:0}),O=function(){return(0,o.sJ)(h)},j=function(){var e=(0,l.th)(),t=g(e),r=(0,o.Zl)(h);return function(){t((function(e){return y(y({},e),{},{initialLoad:!1})})),r((function(e){return e+1}))}},E=function(){var e=(0,l.th)();return function(t){return(0,c.oG)(e,t)}},w=function(){var e=(0,l.th)();return function(t){return(0,c.KF)(e,t)}},x=function(){var e=(0,l.th)();return function(t){return(0,c.nt)(e,t)}}},91126:(e,t,r)=>{r.d(t,{R:()=>i,Z:()=>c});var n=r(4942),a=r(4480);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i={rules:[],error:"",id:null,loading:!0,loaded:!1,initialLoad:!1};const c=(0,a.xu)({key:"silencingRulesState",default:function(e){return function(e){return l(l({},i),{},{id:e})}(e)}})}}]);