!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ca979bbe-446d-4566-a681-f7126393bf59",e._sentryDebugIdIdentifier="sentry-dbid-ca979bbe-446d-4566-a681-f7126393bf59")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"42ec0d6f0c4ba08a06a38e1a5fa6664dccfae1bf"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[6682],{80959:function(e,t,n){var r=n(87462),a=n(45987),o=n(67294),l=n(59978),i=["message","title","footer"];t.Z=function(e){var t=e.message,n=e.title,c=e.footer,u=(0,a.Z)(e,i),s=(null===u||void 0===u?void 0:u["data-testid"])||"functionError";return o.createElement(l.Flex,(0,r.Z)({alignItems:"center",column:!0,"data-testid":s,flex:!0,gap:3,justifyContent:"center",padding:[0,20]},u),o.createElement(l.H3,{"data-testid":"".concat(s,"-title")},n),o.createElement(l.TextBig,{color:"textDescription","data-testid":"".concat(s,"-message")},t),c)}},16682:function(e,t,n){n.r(t),n.d(t,{default:function(){return na}});n(47941),n(82526),n(57327),n(41539),n(88449),n(2490),n(59849),n(38880),n(15581),n(34514),n(54747),n(49337),n(33321),n(69070);var r=n(29439),a=n(4942),o=n(67294),l=n(91268),i=n(96929),c=n(4822),u=n(3322),s=n(71181),d=n(36560),f=n(78266),m=n(45987),p=n(87462),v=(n(69826),n(31672),n(59461),n(41817),n(59978)),g=n(97945),h=n(74059),y=n(49254),b=n(89250),E=function(e){var t=(0,c.XT)(e),n=(0,b.TH)().state;return(0,o.useEffect)((function(){null!==n&&void 0!==n&&n.nodeId&&t([n.nodeId])}),[]),null===n||void 0===n?void 0:n.nodeId},x=n(91008),O=n(80959),w=["paramsKey"],C=function(e){var t=e.paramsKey,n=(0,m.Z)(e,w),r=(null===n||void 0===n?void 0:n["data-testid"])||"capableNodesError",a=(0,c.c6)(t),l=(0,g.iy)(null===a||void 0===a?void 0:a[0],"name");return o.createElement(v.Flex,(0,p.Z)({alignItems:"center",flex:!0,gap:8,justifyContent:"center"},n,{"data-testid":r}),o.createElement(v.Icon,{"data-testid":"".concat(r,"-icon"),height:"230px",name:"unreachableNode",width:"230px"}),o.createElement(O.Z,{"data-testid":"".concat(r,"-details"),gap:2,title:l?"".concat(l," is not configured for Functions"):"Your nodes are not configured for Functions",message:o.createElement(o.Fragment,null,"Learn how to configure your nodes"," ",o.createElement(x.Z,{Component:v.TextBig,"data-ga":"functions-capable-nodes-error::click-docs-link::functions-view","data-testid":"".concat(r,"-docsLink"),href:"https://learn.netdata.cloud/docs/nightly/operations/run-time-troubleshooting-with-functions#prerequisites",target:"_blank",rel:"noopener noreferrer"},"to support functions")),width:{max:"fit-content"}}))},Z=n(64599),P=n(70842),j=n(39469),k=(n(21249),n(57640),n(9924),n(92222),n(36657)),I=n(91128),T=n(82351),S=n(46667),D=(n(26699),n(32023),n(62554)),K=n(71893),F=(0,K.default)(v.Flex).attrs({alignItems:"center",border:{side:"bottom",color:"borderSecondary"},padding:[2]}).withConfig({displayName:"styled__MenuItem",componentId:"sc-1bb2nho-0"})(["&:last-child{border:none;}"]),L=(0,K.default)(v.TextInput).withConfig({displayName:"styled__TextInput",componentId:"sc-1bb2nho-1"})(['margin:0 10px;min-width:unset;width:45px;> div{margin:0;}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}input[type="number"]{-moz-appearance:textfield;}']),N=["onClose","targetRef","paramsKey"];function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=o.createElement(v.Flex,{column:!0,width:{max:"500px"},gap:1},o.createElement(v.TextSmall,{color:"bright"},"Full data queries will always provide all the available facets with counters for your search, which depending on the size of the query could result in poor performance."),o.createElement(v.TextSmall,{color:"bright"},"i.e. Querying logs for multiple days with multitudes of entries."),o.createElement(v.TextSmall,{color:"bright"},"With this toggle \u201coff\u201d (default), queries will slice the data and will lower performance hit on your servers.")),A=function(e){var t=e.onClose,n=e.targetRef,a=e.paramsKey,l=(0,m.Z)(e,N),i=(null===l||void 0===l?void 0:l["data-testid"])||"config",s=(0,u.ZQ)(M({key:"acceptedParams"},a)).includes("slice"),d=(0,c.D0)("slice",M({defaultValue:!0,flavour:"bool"},a)),f=(0,r.Z)(d,2),p=f[0],g=f[1],h=(0,S.Z)(!p),y=(0,r.Z)(h,2),b=y[0],E=y[1];(0,D.Z)((function(){!!p===!!b&&g(!b)}),200,[p,b]);var x=(0,u.ZQ)(M({key:"updateEvery"},a)),O=(0,c.D0)("pollingInterval",M(M({},a),{},{flavour:"int",defaultValue:x})),w=(0,r.Z)(O,2),C=w[0],Z=w[1],P=(0,o.useState)(C),j=(0,r.Z)(P,2),k=j[0],I=j[1];return(0,D.Z)((function(){C!==k&&Z(k)}),400,[C,k]),n.current?o.createElement(v.Drop,{align:{top:"bottom",right:"right"},animation:!0,background:"dropdown",close:t,column:!0,"data-testid":i,margin:[.5,0,0],onClickOutside:t,onEsc:t,round:1,target:n.current,width:58},s&&o.createElement(F,{"data-testid":"".concat(i,"-slice-data"),justifyContent:"between"},o.createElement(v.Flex,{gap:1,alignItems:"center"},o.createElement(v.Text,{color:"menuItem","data-testid":"".concat(i,"-slice-data-label")},"Full data queries (slow)"),o.createElement(T.Z,{plain:!0,content:R,isBasic:!0,allowHoverOnTooltip:!0,stretch:"align"},o.createElement(v.Icon,{name:"information",color:"textDescription",width:"14px",height:"14px"}))),o.createElement(v.Toggle,{colored:!0,checked:b,"data-ga":"functions-config::auto-slice-data-switch::functions-view::".concat(b?"enabled":"disabled"),"data-testid":"".concat(i,"-slice-data-switch"),onChange:E})),o.createElement(F,{"data-testid":"".concat(i,"-pollingInterval")},o.createElement(v.Text,{color:"menuItem","data-testid":"".concat(i,"-pollingInterval-label")},"Refresh every"),o.createElement(L,{"data-ga":"functions-config::polling-interval::functions-view","data-testid":"".concat(i,"-pollingInterval-input"),min:1,onChange:function(e){var t=+e.target.value;t>0&&I(t)},size:"tiny",type:"number",value:k}),o.createElement(v.Text,{color:"menuItem","data-testid":"".concat(i,"-pollingInterval-units")},"seconds"))):null},_=n(89405),B=function(e){var t=e.paramsKey,n=(0,u.ZQ)(t).updatedAt,r=(0,_.rA)(),a=r.localeTimeString,l=r.localeDateString;return o.createElement(v.TextMicro,{color:"textLite"},"Last updated: ",l(n,{long:!0})," ",a(n,{secs:!0}))},V=n(2379),H=K.default.div.withConfig({displayName:"reload__IconsContainer",componentId:"sc-gd414j-0"})(["position:relative;"]),q=(0,K.default)(v.Icon).withConfig({displayName:"reload__SmallIcon",componentId:"sc-gd414j-1"})(["position:absolute;top:3px;left:3px;"]),U=(0,K.keyframes)(["from{transform:rotate(0deg);}to{transform:rotate(359deg);}"]),W=(0,K.default)(v.IconButton).withConfig({displayName:"reload__AnimatedIcon",componentId:"sc-gd414j-2"})(["&& svg{animation:",";}animation:rotation 2s infinite linear;"],(function(e){return e.animate?(0,K.css)([""," 3s linear infinite"],U):""})),Q=function(e){var t=e.onRefresh,n=e.onCancel,a=e.dataGa,l=e.testId,i=e.loading,c=(0,V.Cd)(),u=(0,o.useState)(!1),s=(0,r.Z)(u,2),d=s[0],f=s[1],m=(0,o.useState)(!1),p=(0,r.Z)(m,2),g=p[0],h=p[1];return(0,o.useEffect)((function(){if(!i)return f(!1),void h(!1);var e=setTimeout((function(){return f(!0)}),500),t=setTimeout((function(){return h(!0)}),3e3);return function(){clearTimeout(e),clearTimeout(t)}}),[i]),o.createElement(v.Flex,{alignItems:"center",gap:1},o.createElement(H,null,o.createElement(q,{name:c?"playSolid":"pauseSolid",width:"6px",height:"6px",color:c?"primary":"text"}),o.createElement(W,{animate:d,"data-testid":"".concat(l,"-refreshNowBtn"),"data-ga":"".concat(a,"::click-refresh-now::functions-view"),flavour:"hollow",icon:"refresh",onClick:function(){return t({merge:!1})},disabled:c,padding:[1]})),o.createElement(v.Collapsible,{open:g,direction:"horizontal",duration:300},o.createElement(v.IconButton,{"data-testid":"".concat(l,"-cancelBtn"),"data-ga":"".concat(a,"::click-cancel::functions-view"),flavour:"hollow",warning:!0,icon:"x",onClick:function(){return n()},padding:[1]})))},X=["onRefresh","onCancel","paramsKey"],G={fn:{dataGa:"functions-header",hasConfig:!0,Title:function(e){var t=e.name,n=e.fn,r=void 0===n?"Processes":n;return t?"".concat(r," on ").concat(t):r},titleTooltip:o.createElement(v.Flex,{width:{max:"500px"},alignItems:"center",flexWrap:!0},o.createElement(v.Text,{color:"bright"},"Netdata Functions enable detailed low-level monitoring at the edge. Use this tab to execute functions on your node and see the results immediately."," "),o.createElement(x.Z,{Component:v.Text,"data-ga":"functions-header::click-docs-link::functions-view","data-testid":"docsLink",href:"https://learn.netdata.cloud/docs/nightly/concepts/netdata-functions",target:"_blank",rel:"noopener noreferrer"},"Read the Netdata functions documentation to learn more"),o.createElement(v.Text,{color:"bright"},"."))},feed:{dataGa:"feed-header",Title:function(){return"Events"},titleTooltip:o.createElement(v.Flex,{width:{max:"500px"},alignItems:"center",flexWrap:!0},o.createElement(v.Text,{color:"bright"},"Troubleshoot faster with Netdata Events. Access topology and alert events across the war room in one convenient location."," "),o.createElement(x.Z,{Component:v.Text,"data-ga":"feed-header::click-docs-link::feed-view","data-testid":"docsLink",href:"https://learn.netdata.cloud/docs/nightly/concepts/events-feed",target:"_blank",rel:"noopener noreferrer"},"Read the Events feed documentation to learn more"),o.createElement(v.Text,{color:"bright"},"."))}},J=(0,o.memo)((function(e){var t=e.onRefresh,n=e.onCancel,a=e.paramsKey,l=(0,m.Z)(e,X),i=(null===l||void 0===l?void 0:l["data-testid"])||"functionsHeader",s=(0,o.useRef)(),d=G[a.extraKey],f=d.dataGa,p=d.hasConfig,h=d.titleTooltip,y=d.Title,b=(0,S.Z)(!1),E=(0,r.Z)(b,4),x=E[0],O=E[1],w=E[3],C=(0,c.c6)(a),Z=(0,g.iy)(null===C||void 0===C?void 0:C[0],"name"),P=(0,u.ZQ)(a),j=P.loaded,k=P.data,I=P.totalSize,D=P.loading,K=P.loadingMore,F=(0,u.CE)(a);return o.createElement(v.Flex,{"data-testid":i,justifyContent:"between"},o.createElement(v.Flex,{column:!0},o.createElement(v.Flex,{alignItems:"center","data-testid":"".concat(i,"-title"),gap:1},o.createElement(v.H3,null,o.createElement(y,{name:Z,fn:F})),o.createElement(T.Z,{plain:!0,content:h,isBasic:!0,allowHoverOnTooltip:!0,stretch:"align"},o.createElement(v.Icon,{name:"information",color:"textDescription",width:"16px",height:"16px"}))),o.createElement(v.Flex,{alignItems:"center",gap:2},j&&o.createElement(v.TextSmall,{color:"textLite",strong:!0},"(",I||(null===k||void 0===k?void 0:k.length)||0," results)"),o.createElement(B,{paramsKey:a}))),o.createElement(v.Flex,{gap:1,alignItems:"start"},o.createElement(Q,{testId:i,dataGa:f,onRefresh:t,onCancel:n,loading:D||K}),p&&o.createElement(v.IconButton,{"data-testid":"".concat(i,"-ConfigBtn"),"data-ga":"".concat(f,"::click-config::functions-view"),flavour:"hollow",icon:"chevron_down",ref:s,onClick:O,padding:[1]}),x&&o.createElement(A,{"data-testid":"".concat(i,"-Config"),isOpen:x,onClose:w,targetRef:s,paramsKey:a})))}),(function(e,t){return e.onRefresh===t.onRefresh})),Y=(n(39714),n(74916),n(15306),n(34553),n(41331)),$=n(93433),ee=(n(85827),n(25387),n(72608),n(88386),n(55436)),te=["icon","iconRotate","children","onClick","strong","testId","textAlign","wrap","truncate","rowOptions"],ne=["description","tooltipValue","value","valueOptions","wrap","rowOptions"];function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=(0,K.default)(v.Icon).attrs({color:"text",height:"16px",width:"16px"}).withConfig({displayName:"value__Arrow",componentId:"sc-1apuy8c-0"})(["rotate:",";transition:all 200ms ease;"],(function(e){return e.rotate})),le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=t.decimalPoints,a=void 0===r?0:r,l=t.units,i=t.defaultValue,c=(0,ee.Ol)();return(0,o.useMemo)((function(){switch(n){case"number":return(0,ee.Jw)(e,{decimalPoints:a,units:l,defaultValue:i});case"duration":return(0,ee.kl)(e,{defaultValue:i});case"datetime":return c(e,{defaultValue:i});case"datetime_usec":return c(e,{defaultValue:i,usec:!0});default:return null===e||"undefined"===typeof e?i:e}}),[e,l])},ie=function(e){var t=e.description,n=void 0===t?"":t,r=e.value,a=e.units,l=void 0===a?"":a;return n?o.createElement(v.Flex,{column:!0,gap:1,justifyContent:"center"},o.createElement(v.TextSmall,{color:"bright"},n),o.createElement(v.TextSmall,{strong:!0,color:"bright",textAlign:"center"},r," ",l)):"".concat(r," ").concat(l)},ce=(0,K.default)(v.Flex).withConfig({displayName:"value__ValueContainer",componentId:"sc-1apuy8c-1"})(["",""],(function(e){return e.wrap&&"* {\n      overflow-wrap: anywhere;\n      white-space: pre-wrap;\n      word-break: break-word;\n    }\n  "})),ue={debug:{strong:!0,color:"textLite"},normal:{},notice:{strong:!0},warning:{strong:!0,color:"warningText"},critical:{strong:!0,color:"errorText"}},se=(0,K.default)(v.Text).attrs((function(e){return ae(ae({},e),ue[e.severity]||ue.normal)})).withConfig({displayName:"value__ValueLabel",componentId:"sc-1apuy8c-2"})([""]),de=(0,o.forwardRef)((function(e,t){var n=e.icon,r=e.iconRotate,a=e.children,l=e.onClick,i=e.strong,c=e.testId,u=void 0===c?"cell":c,s=e.textAlign,d=e.wrap,f=e.truncate,v=void 0===f||f,g=e.rowOptions,h=(0,m.Z)(e,te);return o.createElement(ce,(0,p.Z)({cursor:l?"pointer":"inherit",gap:.5,onClick:l,overflow:"hidden",ref:t,width:{max:"100%"},flexWrap:!0,wrap:d},h),n&&o.createElement(oe,{name:n,rotate:r}),o.createElement(se,(0,p.Z)({"data-testid":"".concat(u,"-value"),strong:i,textAlign:s,truncate:!d&&v,whiteSpace:d?"wrap":"nowrap"},g),a))})),fe=function(e){var t=e.description,n=void 0===t?"":t,r=e.tooltipValue,a=e.value,l=e.valueOptions,i=void 0===l?{}:l,c=e.wrap,u=e.rowOptions,s=(0,m.Z)(e,ne),d=le(a,i);return o.createElement(T.Z,(0,p.Z)({content:!c&&o.createElement(ie,{description:n,value:r||a,units:i.units}),"data-testid":"valueComponent",isBasic:!0},s),o.createElement(de,{wrap:c,rowOptions:u},d))},me=["value"],pe=function(e){var t=e.value,n=(0,m.Z)(e,me);return o.createElement(fe,(0,p.Z)({value:t.value},n))},ve=["description","maxValue","strong","type","value","valueOptions","wrap"],ge=function(e){var t=e.description,n=void 0===t?"":t,r=e.maxValue,a=e.strong,l=e.type,i=e.value,c=e.valueOptions,u=void 0===c?{}:c,s=e.wrap,d=(0,m.Z)(e,ve),f=100*i/r,p="bar"===l,g=(null===d||void 0===d?void 0:d["data-testid"])||"progressValue",h=le(i,u);return o.createElement(T.Z,{content:o.createElement(ie,{description:n,value:i,units:u.units}),isBasic:!0,stretch:"align"},o.createElement(v.Flex,{column:!0,"data-testid":g,gap:1,flexWrap:s,flex:!0},!p&&o.createElement(de,{strong:a,testid:g},h),o.createElement(v.ProgressBar,{background:"borderSecondary",border:"none",color:["green","netdata"],containerWidth:"100%","data-testid":"".concat(g,"-bar"),height:2,width:"".concat(f,"%")})))},he=function(e){var t=e.value,n=e.wrap;return t=Array.isArray(t)?t:[t],o.createElement(v.Flex,{alignItems:"center",gap:1,flexWrap:n},t.map((function(e,t){return o.createElement(v.Pill,{border:{side:"all",color:"neutralPillColor"},color:"neutralPillColor","data-testid":"pillValueComponent",key:"".concat(e,"-").concat(t)},e)})))},ye=n(37518),be=n(20686),Ee=["color"],xe=function(e){var t=e.hide,n=e.user;return t||!n?null:o.createElement(o.Fragment,null,o.createElement(v.Text,null,"by"),o.createElement(Oe,null,n))},Oe=function(e){var t=e.color,n=void 0===t?"text":t,r=(0,m.Z)(e,Ee);return o.createElement(v.Text,(0,p.Z)({color:n,strong:!0},r))},we=function(e){var t=e.type,n=e.text,r=void 0===n?t:n,a=e.hollow,l=a?"".concat(t.toLowerCase(),"AlertsTable"):t.toLowerCase();return o.createElement(be.Z,(0,p.Z)({type:l},a&&{border:!1}),r)},Ce=(0,K.default)(v.Flex).attrs({gap:1,flexWrap:!0,alignItems:"center"}).withConfig({displayName:"components__Container",componentId:"sc-b5rk6g-0"})([""]),Ze=n(79655),Pe=["chart","hosts","alert"];function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie={CLEAR:0,WARNING:1,CRITICAL:2,UNINITIALIZED:3,UNDEFINED:4},Te=function(e){var t=e.chart,n=e.nodeId,r=e.nodeName,a=e.spaceSlug,l=e.roomSlug,i=e.alert,c=(0,b.s0)(),u=(0,g.m3)(n),s=(0,o.useCallback)((function(){i?c(u,{state:{alertId:null===i||void 0===i?void 0:i.id}}):c(u)}),[u,i]),d="/spaces/".concat(a,"/rooms/").concat(l,"/alerts/").concat(null===i||void 0===i?void 0:i.id),f=i.current,m=i.name,p=i.previous;if("ERROR"===f.status)return o.createElement(Ce,null,o.createElement(v.Text,null,"For the alert"),o.createElement(x.Z,{Component:Oe,as:Ze.rU,to:d},m),o.createElement(v.Text,null,"for"),o.createElement(x.Z,{Component:Oe,onClick:s},t.name),o.createElement(v.Text,null,"on"),o.createElement(x.Z,{Component:Oe,onClick:s},r),o.createElement(v.Text,null,"we couldn't calculate the current value"),o.createElement(T.Z,{align:"bottom",content:"Please check your alert configuration"},o.createElement(v.Icon,{color:"nodeBadgeColor",size:"small",name:"information"})));if("REMOVED"===f.status)return o.createElement(Ce,null,o.createElement(v.Text,null,"Alert"),o.createElement(x.Z,{Component:Oe,as:Ze.rU,to:d},m),o.createElement(v.Text,null,"for"),o.createElement(x.Z,{Component:Oe,onClick:s},t.name),o.createElement(v.Text,null,"on"),o.createElement(x.Z,{Component:Oe,onClick:s},r),o.createElement(v.Text,null,"is no longer available, state can't be assessed"));var h=Ie[f.status]===Ie.CLEAR;return o.createElement(Ce,null,o.createElement(v.Text,null,"Alert"),o.createElement(x.Z,{Component:Oe,as:Ze.rU,to:d},m),o.createElement(v.Text,null,"for"),o.createElement(x.Z,{Component:Oe,onClick:s},t.name),o.createElement(v.Text,null,"on"),o.createElement(x.Z,{Component:Oe,onClick:s},r),h?o.createElement(v.Text,null,"recovered"):o.createElement(o.Fragment,null,o.createElement(v.Text,{strong:!0},Ie[p.status]===Ie.CRITICAL?"was demoted":Ie[p.status]===Ie.WARNING?"escalated":Ie[f.status]===Ie.UNDEFINED?"transitioned":"was raised"),o.createElement(v.Text,null,"to"),o.createElement(we,{type:f.status}),Ie[f.status]===Ie.UNDEFINED&&o.createElement(v.Text,null,"state")),o.createElement(v.Text,null,"with value"),o.createElement(we,{type:f.status,text:f.value_string,hollow:!0,padding:[0]}))},Se=function(e){var t=e.id,n=e.name,r=(0,h.uk)(),a=(0,ye.tE)(t,"slug"),l="/spaces/".concat(r,"/rooms/").concat(a,"/home");return o.createElement(x.Z,{Component:Oe,as:Ze.rU,to:l},n)},De=function(e){var t=e.rooms;return t.map((function(e,n){return o.createElement(o.Fragment,{key:e.id},n>0&&(n<t.length-1?", ":" and "),o.createElement(Se,e))}))},Ke=function(e){var t=e.rooms;if(!t.length)return null;var n=t.length>1?"rooms":"room";return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"on ",n),o.createElement(De,{rooms:t}))},Fe=function(e){var t=e.contexts;t.map((function(e,n){return o.createElement(o.Fragment,{key:e},n>0&&(n<t.length-1?", ":" and "),o.createElement(Oe,null,e))}))},Le=function(e){var t=e.contexts;if(!t.length)return null;var n=t.length>1?"contexts":"context";return o.createElement(v.Text,null,"on ",n," ",o.createElement(Fe,{contexts:t}))},Ne={month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",long:!1,dateStyle:void 0},ze=function(e){var t=e.start,n=e.end,r=(0,_.rA)().localeDateString;if(!t||!n)return null;var a=r(new Date(t),Ne),l=r(new Date(n),Ne);return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"(scheduled ",a," - ",l,")"))},Me={"silencing-rule-created":"created","silencing-rule-deleted":"deleted","silencing-rule-changed":"changed"},Re=function(e){var t=e.rooms,n=void 0===t?[]:t,r=e.contexts,a=void 0===r?[]:r;return n.length||a.length?o.createElement(o.Fragment,null,!!n.length&&o.createElement(Ke,{rooms:n}),!!n.length&&!!a.length&&o.createElement(v.Text,null,"and ",o.createElement(Le,{contexts:a}))):null},Ae=function(e){var t,n=e.action,r=e.notification,a=e.user,l=e.room,i=e.context,c=((null===r||void 0===r||null===(t=r.silencing)||void 0===t?void 0:t.rule)||[])[0],u=null===a||void 0===a?void 0:a.name,s=(null===i||void 0===i?void 0:i.name)||[];return o.createElement(Ce,null,o.createElement(v.Text,null,"Silencing rule"),o.createElement(Oe,null,c.name),o.createElement(Re,{rooms:l,contexts:s}),o.createElement(v.Text,null,"was ",Me[n]),o.createElement(xe,{user:u}),o.createElement(ze,c))},_e=n(62200),Be=function(e,t){var n,r;return(null===(n=e.target)||void 0===n?void 0:n[t])||(null===(r=e.target)||void 0===r?void 0:r.id)||e[t]||e.id},Ve=function(e){return Array.isArray(e)?e[0].name||e[0].id:e.name||e.id},He=function(e){var t=e.statistics,n=(null===t||void 0===t?void 0:t.nodes)||{},r=n.live,a=n.stale,l=n.removed,i=n.total;return o.createElement(Ce,null,o.createElement(v.Text,null,"Space statistics. Nodes:"),o.createElement(v.Text,{color:_e.WV.live.statusTextColor},r," live"),o.createElement(v.Text,null,","),o.createElement(v.Text,{color:_e.WV.stale.statusTextColor},a," stale"),o.createElement(v.Text,null,","),o.createElement(v.Text,{color:_e.WV.offline.statusTextColor},l," removed"),o.createElement(v.Text,null,","),o.createElement(v.Text,{strong:!0},i," total"))},qe=(n(69810),n(86035),n(6973)),Ue=function(e){var t=e.stateColor,n=e.state;return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"became"),o.createElement(Oe,{color:t},n))},We=function(e){var t=e.stateColor,n=e.state;return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"was"),o.createElement(Oe,{color:t},n))},Qe={"node-created":We,"node-state-live":Ue,"node-state-stale":Ue,"node-state-offline":Ue,"node-removed":We,"node-deleted":We,"node-restored":We,default:We},Xe=function(e){var t,n=e.action,r=e.hosts,a=(void 0===r?[]:r)[0],l=a.id,i=a.name,c=(0,b.s0)(),u=(0,g.m3)(l),s=(0,o.useCallback)((function(){return c(u)}),[u]),d=Qe[n],f=n.split("-").at(-1),m=null===(t=qe.B[f])||void 0===t?void 0:t.statusTextColor;return o.createElement(Ce,null,o.createElement(v.Text,null,"Node"),o.createElement(x.Z,{Component:Oe,onClick:s},i),o.createElement(d,{stateColor:m,state:f}))},Ge=function(e){var t=e.room,n=(0,ye.Hm)("untouchable");return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"was added to",n?" room":""),o.createElement(Oe,null,n?Ve(t):"this room"))},Je=function(e){var t=e.room,n=(0,ye.Hm)("untouchable");return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"was removed from",n?" room":""),o.createElement(Oe,null,n?Ve(t):"this room"))},Ye={"room-created":function(){return o.createElement(v.Text,null,"was created")},"room-deleted":function(){return o.createElement(v.Text,null,"was deleted")},"room-node-added":Ge,"room-node-removed":Je,"room-user-added":Ge,"room-user-removed":Je},$e=function(e){var t,n=e.action,r=e.hosts,a=void 0===r?[]:r,l=e.Netdata,i=e.user,c=Ye[n],u=null===(t=a[0])||void 0===t?void 0:t.name;return o.createElement(Ce,null,o.createElement(v.Text,null,"Node"),o.createElement(Oe,null,u),o.createElement(c,{room:l.room}),o.createElement(xe,{user:null===i||void 0===i?void 0:i.name}))},et=function(e){var t=e.action,n=e.Netdata,r=e.user,a=Ye[t];return o.createElement(Ce,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Be(r,"name")),o.createElement(a,{room:n.room}),o.createElement(xe,{hide:!r.target,user:r.name}))},tt=function(e){var t=e.action,n=e.Netdata,r=e.user,a=Ye[t];return o.createElement(Ce,null,o.createElement(v.Text,null,"Room"),o.createElement(Oe,null,Ve(n.room)),o.createElement(a,null),o.createElement(xe,{user:r.name}))},nt={"alert-node-transition":function(e){var t=e.chart,n=e.hosts,r=e.alert,a=(0,m.Z)(e,Pe);return n.map((function(e,n){var l=e.id,i=e.name,c=ke(ke({},r),{},{name:r.name[n]},r.current?{current:ke(ke({},r.current),r.current.status?{status:r.current.status[n]||r.current.status[0]}:{})}:{});return o.createElement(Te,(0,p.Z)({key:l,chart:t,nodeId:l,nodeName:i,alert:c},a))}))},"node-created":Xe,"node-state-live":Xe,"node-state-stale":Xe,"node-state-offline":Xe,"node-removed":Xe,"node-deleted":Xe,"node-restored":Xe,"agent-connected":function(e){var t=e.agentId;return o.createElement(Ce,null,o.createElement(v.Text,null,"Agent with claim ID"),o.createElement(Oe,null,t)," ",o.createElement(v.Text,null,"has connected to Netdata"))},"agent-connection-initialized":function(e){var t=e.agentId;e.reason;return o.createElement(Ce,null,o.createElement(v.Text,null,"Agent with claim ID"),o.createElement(Oe,null,t),o.createElement(v.Text,null,"has initialized its connection to Netdata"))},"agent-disconnected":function(e){var t=e.agentId,n=e.reason;return o.createElement(Ce,null,o.createElement(v.Text,null,"Agent with claim ID"),o.createElement(Oe,null,t),o.createElement(v.Text,null,"has disconnected from Netdata with reason: \u201c",n,"\u201d"))},"agent-authenticated":function(e){var t=e.agentId;return o.createElement(Ce,null,o.createElement(v.Text,null,"Agent with claim ID"),o.createElement(Oe,null,t),o.createElement(v.Text,null,"has successfully authenticated"))},"agent-authentication-failed":function(e){var t=e.agentId;return o.createElement(Ce,null,o.createElement(v.Text,null,"Agent with claim ID"),o.createElement(Oe,null,t),o.createElement(v.Text,null,"has failed to authenticate"))},"room-created":tt,"room-deleted":tt,"room-node-added":$e,"room-node-removed":$e,"room-user-added":et,"room-user-removed":et,"space-created":function(e){var t=e.Netdata,n=e.user;return o.createElement(Ce,null,o.createElement(v.Text,null,"Space"),o.createElement(Oe,null,t.space.name||t.space.id),o.createElement(v.Text,null,"was created"),o.createElement(xe,{user:n.name}))},"space-statistics":He,"space-user-added":function(e){var t=e.Netdata,n=e.user,r=((null===t||void 0===t?void 0:t.inviter)||{}).name;return o.createElement(Ce,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Be(n,"name")),o.createElement(v.Text,null,"was added to this space"),r&&o.createElement(o.Fragment,null,o.createElement(v.Text,null,"by invite of"),o.createElement(Oe,null,r)))},"space-user-changed":function(e){var t,n=e.user;if(!(null===(t=n.changes)||void 0===t||!t.roles)&&1===Object.keys(n.changes).length){var r=n.changes.roles.length>1,a=n.changes.roles.join(", ");return o.createElement(Ce,null,o.createElement(v.Text,null,"User ",r?"roles":"role"," for"),o.createElement(Oe,null,Be(n,"name")),o.createElement(v.Text,null,r?"were":"was"," changed to"),o.createElement(Oe,null,a),o.createElement(xe,{hide:!n.target,user:n.name}))}return o.createElement(Ce,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Be(n,"name")),o.createElement(v.Text,null,"was modified"))},"space-user-invited":function(e){var t=e.user;return o.createElement(Ce,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Be(t,"email")),o.createElement(v.Text,null,"was invited to this space"),o.createElement(xe,{user:t.name}))},"space-user-removed":function(e){var t=e.user,n=(t.target||{}).name;return o.createElement(Ce,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Be(t,"name")),o.createElement(v.Text,null,"was removed from this space"),n&&o.createElement(xe,{user:t.name}))},"space-user-uninvited":function(e){var t=e.event,n=e.user;return"space-invite-expired"===t.reason?o.createElement(Ce,null,o.createElement(v.Text,null,"The invite for"),o.createElement(Oe,null,Be(n,"email")),o.createElement(v.Text,null,"to this space has expired")):o.createElement(Ce,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Be(n,"email")),o.createElement(v.Text,null,"was uninvited from this space"),o.createElement(xe,{hide:!n.target,user:n.name}))},"silencing-rule-created":Ae,"silencing-rule-deleted":Ae,"silencing-rule-changed":Ae},rt=function(e){var t=e.data,n=t.source,r=n.action,a=n.roomId,l=n.space,i=(0,h.vu)(l.id,"slug"),c=(0,ye.tE)(a,"slug"),u=nt[r];return u?o.createElement(u,(0,p.Z)({},t.source,{spaceSlug:i,roomSlug:c})):o.createElement(Ce,null,o.createElement(v.Text,null,"Event")," ",o.createElement(v.Text,{strong:!0},r)," ",o.createElement(v.Text,null,"emitted"))},at=["value"],ot=["visualization","type","value","data"],lt={bar:ge,"bar-with-integer":ge,duration:ge,pill:he,number:fe,string:fe,feedTemplate:rt,datetime:function(e){var t=e.value,n=(0,m.Z)(e,at),r=new Date(t),a=(0,_.rA)(),l=a.localeTimeString,i=a.localeDateString,c=isNaN(r.valueOf())?"Missing date & time":"".concat(i(r,{long:!1})," ").concat(l(r,{secs:!0}));return o.createElement(fe,(0,p.Z)({value:c},n))},value:fe},it={bar:ge,pill:he,value:fe,richValue:pe,feedTemplate:rt,rowOptions:"skip"},ct=function(e){var t=e.visualization,n=e.type,r=e.value,a=e.data,l=(0,m.Z)(e,ot),i=it[t]||lt[n]||it.value;return i===it.rowOptions?null:o.createElement(i,(0,p.Z)({value:r,type:n,rowOptions:a.rowOptions,data:a},l))},ut=["displayName","name","sortable","sticky","units","max","maxValue","dummy","cellSize","valueOptions","summary","type","visualization","wrap"];function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft={sum:"sum",min:"min",max:"max",extent:"extent",mean:"mean",median:"median",unique:"unique",uniqueCount:"uniqueCount",count:"count"},mt=n(71002),pt=(n(64211),n(41874),n(69720),n(54678),n(4480));function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ht={query:function(e,t,n){var a=n.columnVisibility,o=(null===t||void 0===t?void 0:t.toLowerCase())||"";return Object.entries(e).some((function(e){var t=(0,r.Z)(e,2),n=t[0],l=t[1];return!!a[n]&&(null!==l&&"undefined"!==typeof l&&(Array.isArray(l)?l.some((function(e){return String(e).toLowerCase().includes(o)})):("object"===(0,mt.Z)(l)&&Object.keys(l).some((function(e){return String(l[e]).toLowerCase().includes(o)})),String(l).toLowerCase().includes(o))))}))}},yt=function(e){return function(t,n){return!e.some((function(e){var a=(0,r.Z)(e,2),o=a[0],l=a[1];return ht[o]?!ht[o](t,l,n):!function(e){return function(t,n,r){var a;if("range"===(null===(a=r.columns[e])||void 0===a?void 0:a.filter)&&null!==n&&void 0!==n&&n.length)return t[e]>=n[0]&&t[e]<=n[1];if(!Array.isArray(n)||!n.length)return!0;var o=t[e];return"number"===typeof o?(o=parseFloat(o),n.some((function(e){return parseFloat(e)===o}))):n.includes(o)}}(o)(t,l,n)}))}},bt=(0,pt.CG)({key:"fnDataFiltered",get:function(e){var t=e.extraKey,n=e.roomId,r=e.omit,a=void 0===r?[]:r,o=e.keepAll,l=e.fn;return function(e){var r,i=e.get,s=i((0,u.tD)({id:l})),d=s.columnVisibility,f=s.data,m=s.columns;if(s.aggregations||!f)return f||[];var p=i((0,c.dz)({key:n,extraKey:t})),v=Object.keys(p).reduce((function(e,t){return a.includes(t)||e.push([t,p[t]]),e}),[]);if(!v.length)return f;var g=yt(v),h=null===(r=i((0,c.dz)({key:n,extraKey:"".concat(l,"Settings"),flavour:"val"})))||void 0===r?void 0:r.sortColumn;return o?f.map((function(e){return g(e,{columnVisibility:d,columns:m,sortColumn:h})?e:gt(gt({},e),{},{hidden:!0})})):f.filter((function(e){return g(e,{columnVisibility:d,columns:m,sortColumn:h})}))}},cachePolicy_UNSTABLE:{eviction:"most-recent"}}),Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.extraKey,n=void 0===t?"fn":t,r=e.omit,a=void 0===r?[]:r,o=e.keepAll,l=void 0!==o&&o,i=(0,u.CE)({extraKey:n}),c=(0,ye.UL)();return(0,pt.sJ)(bt({extraKey:"".concat(i||n,"Filters"),fn:i,roomId:c,omit:a,keepAll:l}))},xt=n(70459);function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ct,Zt=(0,K.default)(v.Table).withConfig({displayName:"table__StyledTable",componentId:"sc-1n2s6gl-0"})(['*{font-family:"Courier New",Courier,monospace;letter-spacing:0.09px;}']),Pt=(0,o.memo)(Zt,(function(e,t){return(0,Y.ZP)(e,t,{keep:["columnVisibility","data","fnQuery","sortBy","virtualizeOptions"]})})),jt={bulkActionsStyles:{padding:[0,0,2]},searchStyles:{inputContainerStyles:{height:"32px",border:{side:"all",size:"1px",color:"inputBg"},background:"inputBg",round:!0,padding:[1,2],_hover:{border:{side:"all",size:"1px",color:"borderSecondary"}}}}},kt=(0,o.memo)((0,o.forwardRef)((function(e,t){var n=e["data-testid"],a=e.paramsKey,l=e.refetch,i=e.onShowInfo,s=(0,u.ZQ)(a),d=s.columns,f=s.sortedColumns,p=s.sortColumn,g=s.sortDirection,h=s.columnVisibility,y=s.pinnedColumns,b=s.loadingMore,E=s.retentionWarning,x=s.groupByColumns,O=s.pagination,w=s.merged,C=s.latestDirection,Z=s.hasDirection,P=s.tail,j=s.aggregations,k=(0,o.useRef)();k.current=s;var I=(0,o.useState)(""),T=(0,r.Z)(I,2),S=T[0],D=T[1],K=Et(a),F="feed"===a.extraKey,L=function(e,t,n){var r=n.groupBy;return(0,o.useMemo)((function(){return e.reduce((function(e,n){var a=t[n],l=a.displayName,i=a.name,c=a.sortable,u=(a.sticky,a.units),s=a.max,d=a.maxValue,f=a.dummy,p=a.cellSize,g=a.valueOptions,h=a.summary,y=a.type,b=a.visualization,E=a.wrap,x=void 0!==E&&E,O=(0,m.Z)(a,ut);return f?e:[].concat((0,$.Z)(e),[dt(dt(dt({},O),{},{displayName:l,id:l,accessorFn:function(e){return e[n]},cell:function(e){var t=e.getValue,n=e.row,a=e.cell.getIsAggregated(),l=t(),c=a&&(ft[h]===ft.count||ft[h]===ft.uniqueCount||!ft[h]);return o.createElement(ct,{description:i,data:n.original,maxValue:s||(null===d||void 0===d?void 0:d.value),padding:n.depth>0?[0,0,0,2.5*n.depth]:[0],strong:a,value:c?"".concat(l,"x"):l,tooltipValue:c?"".concat(l," ").concat(1===l?"item":"items"," associated with ").concat(r," grouping"):l,valueOptions:c?dt(dt({},g),{},{transform:"none"}):g,type:y,visualization:b,wrap:x})},header:o.createElement(v.Flex,{column:!0},o.createElement(v.TextSmall,{strong:!0},l),u&&o.createElement(v.TextMicro,null,"(",u,")")),enableSorting:c,aggregationFn:ft[h]||ft.count},p),{},{meta:dt({},l!==i?{tooltip:i}:{})})])}),[])}),[e,t,r])}(f,d,wt({},F?{}:{groupBy:S})),N=(0,u.CE)(a),z=(0,ye.UL)(),M=(0,u.fg)(wt({key:"sortColumn",flavour:"val"},a)),R=(0,r.Z)(M,2),A=R[0],_=R[1],B=(0,u.fg)(wt({key:"sortDirection",flavour:"val"},a)),H=(0,r.Z)(B,2),q=H[0],U=H[1],W=(0,u.kU)(wt({key:"query",flavour:"val"},a)),Q=(0,r.Z)(W,2),X=Q[0],G=Q[1],J=(0,u.I_)(wt({key:"columnVisibility"},a)),Y=(0,c.I0)(A,{defaultValue:[],key:z,extraKey:"".concat(N,"RangeFilter"),flavour:"arr"}),ee=(0,r.Z)(Y,2)[1],te=(0,o.useMemo)((function(){return A||p?[{id:A||p,desc:"descending"===(q||g)}]:[]}),[p,g,A,q]),ne=(0,o.useCallback)((function(e){var t=(0,r.Z)(e,1)[0],n=(null===t||void 0===t?void 0:t.id)||n,a=null!==t&&void 0!==t&&t.desc?g||"descending":"ascending";_(n),U(a),A!==n&&ee([])}),[A,ee,p,g]),re=(0,o.useMemo)((function(){return{left:y}}),[y]),ae=(0,o.useRef)();ae.current=b;var oe=(0,xt.Z)().pause,le=(0,V.Cd)(),ie=(0,o.useCallback)((function(e){var t=e.data;return i({data:t.json||t,columns:d})}),[]),ce=(0,o.useRef)(),ue=(0,o.useRef)(),se=(0,o.useRef)(),de=(0,o.useRef)(0),fe=(0,o.useRef)(0),me=(0,o.useRef)(w);(0,o.useLayoutEffect)((function(){var e;w&&!P||null===(e=ue.current)||void 0===e||!e.scrollOffset||ue.current.scrollToOffset(0)}),[w,P]),(0,o.useLayoutEffect)((function(){clearTimeout(Ct),b||(Ct=setTimeout((function(){me.current=!1}),200))}),[b]),(0,o.useLayoutEffect)((function(){var e,t;if(ue.current.scrollOffset>10&&le&&oe(),O&&Z){fe.current!==K.length&&"forward"===C&&(w&&!P?de.current=0:se.current=null);if(function e(){if(se.current&&de.current<5){var t,n;de.current=de.current+1,fe.current=K.length;var r=null===(t=se.current)||void 0===t||null===(t=t[O.column])||void 0===t||null===(n=t.toString)||void 0===n?void 0:n.call(t),a=ue.current.getMeasurements().find((function(e){return e.key.replace(/-\d+?/,"")===r}));if(!a){var o=K.findIndex((function(e){return e[O.column]==r}));a=ue.current.getMeasurements()[o]}return a?(ue.current.scrollToOffset(a.start-se.current.scrollOffset),void setTimeout(e)):(de.current=5,void(se.current=null))}de.current=5,se.current=null}(),!(de.current<5)){fe.current=K.length;var n=null===(e=ue.current.getMeasurements())||void 0===e?void 0:e[1];n&&(se.current=wt(wt({},K[n.index-1]),{},{scrollOffset:(null===(t=ue.current.getMeasurements())||void 0===t||null===(t=t[0])||void 0===t?void 0:t.size)||0}))}}}),[K,le]);var pe=(0,o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"backward";ae.current||k.current.hasDirection&&(me.current||("backward"!==e||k.current.hasNextPage||k.current.anchorBefore)&&("forward"!==e||k.current.hasPrevPage||k.current.anchorAfter)&&("forward"===e&&(me.current=!0),l({anchor:"backward"===e?k.current.anchorBefore:k.current.anchorAfter,merge:!0,direction:e,data_only:!0})))}),[]),ve=(0,o.useCallback)((function(e){var t;return"undefined"!==typeof(null===(t=k.current.data[e])||void 0===t?void 0:t[null===O||void 0===O?void 0:O.column])?"".concat(k.current.data[e][null===O||void 0===O?void 0:O.column],"-").concat(e):e}),[]),ge=(0,o.useCallback)((function(){return k.current.hasNextPage}),[]),he=(0,o.useCallback)((function(){return k.current.hasPrevPage}),[]),be=(0,o.useMemo)((function(){return{overscan:15,getHasNextPage:ge,getHasPrevPage:he,loading:b,loadMore:pe,warning:E,virtualRef:ue,getItemKey:ve}}),[K,le,b]),Ee=(0,u.$0)();return o.createElement(Pt,{groupByColumns:x,onClickRow:ie,columnPinning:re,columnVisibility:h,data:K,dataColumns:L,dataGa:"functions",enableColumnPinning:!!y.length,enableColumnVisibility:!F,enableCustomSearch:!!j,enableResizing:!0,enableSorting:!F,globalFilter:F?null:X,onColumnVisibilityChange:J,onSearch:F?null:G,onGroupByChange:F?null:D,onSortingChange:F?null:ne,sortBy:te,testPrefix:n,virtualizeOptions:be,meta:jt,ref:t,tableRef:ce,onHoverCell:(0,o.useCallback)((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).row;e||Ee(null),Ee(e)}),[])})})),(function(){return!0})),It=kt,Tt=(n(88674),n(17727),n(18446)),St=n.n(Tt),Dt=n(37176),Kt=n(44536),Ft=n(18997),Lt=n(4808),Nt=n(81732),zt=(n(26833),n(2707),n(50361)),Mt=n.n(zt),Rt=n(38609),At=["updateEvery","merge","groupBy","items","direction","dataOnly","showIds","facetsDelta","histogramDelta"],_t=["data","type","updateEvery"];function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ht=90,qt=110,Ut=160,Wt=500,Qt={minSize:Ht,maxSize:Wt},Xt=50,Gt={uniqueKey:{size:Ht,downLimit:Ht-Xt,upLimit:Ht+Xt},bar:{size:Ht,downLimit:Ht-Xt,upLimit:Ht+Xt},value:{size:qt,downLimit:qt-Xt,upLimit:qt+Xt},feedTemplate:{size:Wt,downLimit:Wt-Xt,upLimit:Wt+Xt,minSize:230,maxSize:5e3,fullWidth:!0},pill:{size:qt,downLimit:qt-Xt,upLimit:qt+Xt},timestamp:{size:Ut,downLimit:Ut-Xt,upLimit:Ut+Xt},datetime:{size:Ut,downLimit:Ut-Xt,upLimit:Ut+Xt}},Jt=function(e,t,n){var r,a,o=t.updateEvery,l=t.merge,i=t.groupBy,c=t.items,u=t.direction,s=t.dataOnly,d=t.showIds,f=void 0===d?!1!==n.showIds:d,p=t.facetsDelta,v=t.histogramDelta,g=(0,m.Z)(t,At),h=s?Mt()(n.columns):Mt()(l?(0,Rt.Z)(n.columns,t.columns):t.columns),y={},b=g.hasHistory||n.hasHistory,E=s?n.pagination:t.pagination,x=Object.keys(h).reduce((function(e,t){var n=h[t],r=n.id,a=n.name,o=n.sticky,l=n.visible,i=n.index;return n.displayName=f?r||t:a,e.columnVisibility[n.displayName]=l,o&&e.pinnedColumns.push(n.displayName),n.valueOptions=n.valueOptions||{},n.cellSize=function(e){var t=e.visualization,n=e.type,r=e.fullWidth,a=e.uniqueKey;return r?Gt.feedTemplate:Vt(Vt({},Qt),(a&&"timestamp"!==n?Gt.uniqueKey:Gt[n])||Gt[t]||{minSize:Ht,maxSize:Wt,size:qt,downLimit:qt-Xt,upLimit:qt+Xt})}(n),n.sortable=n.sortable&&!(null!==E&&void 0!==E&&E.enabled),"undefined"!==typeof i&&(y[i]=t),e}),{columnVisibility:{},pinnedColumns:[]}),O=l?Mt()(n.aggregations):t.aggregations||Mt()(n.aggregations);p&&p.forEach((function(e){var t=O.find((function(t){return t.id===e.id}));t?e.options.forEach((function(e){if(!isNaN(e.count)){var n=t.options.find((function(t){return t.id===e.id}));n?n.count=(n.count||0)+((null===e||void 0===e?void 0:e.count)||0):t.options.push(e)}})):O.push(e)}));var w=l?Mt()(n.histogram):t.histogram||Mt()(n.histogram);if(v){var C;if((null===(C=n.histogram)||void 0===C?void 0:C.id)!==(null===v||void 0===v?void 0:v.id))return;var Z=w.chart.result.labels;if((0,Y.ZP)(Z,v.chart.result.labels))w.chart.result.data=[].concat((0,$.Z)(w.chart.result.data),(0,$.Z)(v.chart.result.data));else{var P=function(e,t){var n=t.reduce((function(t,n,r){var a=e.findIndex((function(e){return n===e}));return-1===a||(t[a]=r),t}),{});return function(t){return e.reduce((function(e,r,a){return"undefined"===typeof n[a]?e.push([0,0,0]):e.push(t[n[a]]),e}),[])}}(Z,v.chart.result.labels);v.chart.result.data.forEach((function(e){return w.chart.result.data.push(P(e))}))}}var j={};s&&t.columns?Object.keys(t.columns).forEach((function(e){j[t.columns[e].index]=e})):j=y;var k=t.data.map((function(e){return e.reduce((function(e,t,n){var r,a,o=j[n];if(!o)return e;var l=h[o],i=isNaN(t)?(null===t||void 0===t?void 0:t.length)||0:t;"flexTemplate"!==l.type&&(!l.maxValue||i>l.maxValue.value)&&(l.maxValue={index:n,value:i});var c=(null===l||void 0===l||null===(r=l.range)||void 0===r?void 0:r.min)||t,u=(null===l||void 0===l||null===(a=l.range)||void 0===a?void 0:a.max)||l.max||t;return l.range={min:c<t?c:t,max:u>t?u:t},e[o]=t,e}),{})})),I=l?"forward"===u?k.concat(n.data||[]):(n.data||[]).concat(k):k,T=null!==E&&void 0!==E&&E.enabled&&E.column&&Array.isArray(I)&&null!==(r=I[I.length-1])&&void 0!==r&&r[E.column]&&null!==(a=I[0])&&void 0!==a&&a[E.column]?{anchorBefore:I[I.length-1][E.column],anchorAfter:I[0][E.column],anchorUnits:E.units}:{},S=t.defaultSortColumn||n.defaultSortColumn,D=(t.acceptedParams||n.acceptedParams).includes("direction");e((function(e){var n;return Vt(Vt(Vt(Vt(Vt(Vt(Vt(Vt({},Nt.Zn.table),e),g),{},{groupByColumns:i||e.groupByColumns,data:I,columns:l?(0,Rt.Z)(e.columns,h):h,updatedAt:(new Date).getTime(),updateEvery:o||e.updateEvery,sortedColumns:Object.values(y),sortColumn:null===(n=h[S])||void 0===n?void 0:n.displayName,sortDirection:S?h[S].sort:"descending"},x),T),{},{totalSize:g.totalSize||(null===c||void 0===c?void 0:c.matched)||(!s||"forward"===u||k.length||t.partial)&&e.totalSize||0},!!b&&{hasNextPage:!(s&&"forward"!==u&&!k.length&&!t.partial)&&(!c||0!==c.after)}),!!b&&D&&{hasPrevPage:!(s&&"forward"===u&&!k.length&&!t.partial)&&(!(!g.tail&&c)||0!==c.before)}),{},{offset:l?null:(null===c||void 0===c?void 0:c.before)||null,loading:!1,loaded:!0,showIds:f,merged:l,latestDirection:u,hasHistory:b,hasDirection:D,aggregations:O,histogram:w,clickPoint:void 0})}))};function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var en={table:Jt,log:Jt,default:function(e,t){var n=t.data,r=t.type,a=t.updateEvery,o=(0,m.Z)(t,_t);e(Vt(Vt(Vt({},Nt.Zn.default),o),{},{data:n,updateEvery:a,type:r,loading:!1,loaded:!0}))}},tn={default:{fetch:Lt.Ru,isEnabled:function(e){var t=e.nodeIds,n=e.fn,r=e.after;return!(null===t||void 0===t||!t.length)&&!!n&&!!r}},feed:{fetch:Lt.bj,isEnabled:function(e){var t=e.roomId,n=e.fn;return!!t&&!!n}}},nn=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clickPoint,t=(0,c.by)(),n=t.after,r=t.before,a=t.highlight;return(0,o.useMemo)((function(){return n>0?[function(){return{after:n,before:r}},n,r,e||a.before]:[function(){var e=Date.now();return{after:e+1e3*n,before:e}},n,r,e||a.before]}),[n,r,null===a||void 0===a?void 0:a.before,e])},rn=n(5429);function an(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?an(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ln={default:{fetch:Lt.HZ,isEnabled:function(e){var t=e.nodeIds,n=e.fn;return!(null===t||void 0===t||!t.length)&&!!n}},feed:{fetch:function(){return Promise.resolve({data:{type:"table"}})},isEnabled:function(){return!0}}},cn=function(e,t,n){var a=(0,h.th)(),o=(0,g.Xw)(e),l=(0,j.zp)(),i=(0,r.Z)(l,1)[0].loading,c=ln[t]||ln.default,s=c.fetch,d=c.isEnabled,f=(0,u.mO)(n),m=(0,r.Z)(f,2),p=m[0].infoLoaded,v=m[1],y=nn(),b=(0,r.Z)(y,1)[0],E=(0,u.KO)(n.extraKey).loaded;(0,rn.Z)((function(){return{enabled:!p&&E&&!i&&d({nodeIds:e,fn:t}),fetch:function(){return s({spaceId:a,cloudNodeIds:o,nodeIds:e,fn:t,after:b().after,before:b().before})},onFail:function(e){var t,n;null===(t=e)||void 0===t||null===(t=t.response)||void 0===t||!t.status||400!==e.response.status&&304!==e.response.status?(null!==(n=e)&&void 0!==n&&null!==(n=n.response)&&void 0!==n&&n.data&&(e=e.response.data),v({error:e})):v((function(e){return on(on({},e),{},{infoLoaded:!0})}))},onSuccess:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v((function(t){return on(on(on({},Nt.Zn[e.type]||Nt.Zn.default),t),{},{hasHistory:e.hasHistory||!1,acceptedParams:e.acceptedParams||[],requiredParams:e.requiredParams||[],type:e.type,help:e.help,infoLoaded:!0})}))}}}),[p,E,t,i,!(null!==e&&void 0!==e&&e.length),null===e||void 0===e?void 0:e[0]])},un=n(92501),sn=(n(47042),n(26495)),dn=n(36337),fn=n(19221),mn=n(23148),pn=(0,pt.cn)({key:"chartjs",default:{navigation:"pan"}});function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hn=(0,pt.CG)({key:"feedChartState",get:function(e){var t=e.key;return function(e){var n=(0,e.get)(pn);return t?n[t]:n}},set:function(e){var t=e.key;return function(e,n){(0,e.set)(pn,(function(e){return t?gn(gn({},e),{},(0,a.Z)({},t,n)):gn(gn({},e),n)}))}}}),yn=function(e){return(0,pt.sJ)(hn({key:e}))},bn=function(e){return(0,pt.Zl)(hn({key:e}))},En=n(85672),xn=(n(41203),(0,K.default)(v.Button).attrs((function(e){return{flavour:"borderless",iconColor:e.active?"textDescription":"border",iconSize:"small",padding:[.5],small:!0}})).withConfig({displayName:"styled__Button",componentId:"sc-8s0lqd-0"})(["&&{background-color:",";height:20px;width:20px;&:hover{background-color:",";.button-icon__color{fill:",";}}}"],(function(e){var t=e.theme;return e.active?(0,v.getColor)("borderSecondary")({theme:t}):"initial"}),(function(e){var t=e.theme;return(0,v.getColor)("borderSecondary")({theme:t})}),(function(e){var t=e.theme;return(0,v.getColor)("textDescription")({theme:t})}))),On=(0,K.default)(v.Flex).attrs({padding:[.5],gap:1,round:!0,border:{side:"all",color:"borderSecondary"}}).withConfig({displayName:"styled__Container",componentId:"sc-8s0lqd-1"})(["position:absolute;top:18px;right:8px;background:",";&:hover{background:",";}"],(0,v.getRgbColor)("elementBackground",.5),(0,v.getColor)("elementBackground")),wn=["testIdPrefix"],Cn=(0,o.forwardRef)((function(e,t){var n,a=e.testIdPrefix,l=(0,m.Z)(e,wn),i=(0,c.I0)(),u=(0,r.Z)(i,2),s=u[0],d=s.after,f=s.before,v=u[1],g=[yn(n="navigation"),bn(n)],h=(0,r.Z)(g,2),y=h[0],b=h[1],E=(0,o.useCallback)((function(e){var t=d,n=f;if(d<0){var r=Date.now();t=r+1e3*d,n=r}var a=e*Math.round((n-t)/4);v({after:t+a,before:n-a})}),[d,f]),x=d>0&&Math.abs(f-d)<2e3||-1===d;return o.createElement(On,(0,p.Z)({"data-testid":"chartToolbox","data-track":"chart-toolbox::hover-chart::".concat(a),"data-toolbox":"true",ref:t},l),o.createElement(xn,{active:"pan"===y,"data-testid":"chartToolbox-pan","data-track":"chart-toolbox::pan-click::".concat(a),icon:"panTool",onClick:function(){return b("pan")},title:"Pan"}),o.createElement(xn,{active:"highlight"===y,"data-testid":"chartToolbox-highlight","data-track":"chart-toolbox::highlight-click::".concat(a),icon:"highlightArea",onClick:function(){return b("highlight")},title:"Highlight"}),o.createElement(xn,{active:"zoom"===y,"data-testid":"chartToolbox-zoom","data-track":"chart-toolbox::zoom-click::".concat(a),disabled:x,icon:"dragHorizontal",onClick:function(){b("zoom")},title:"Select and zoom"}),o.createElement(xn,{"data-testid":"chartToolbox-zoomIn","data-track":"chart-toolbox::zoom-in-click::".concat(a),disabled:x,icon:"zoomIn",onClick:function(){E(1)},title:"Zoom in"}),o.createElement(xn,{"data-testid":"chartToolbox-zoomOut","data-track":"chart-toolbox::zoom-out-click::".concat(a),icon:"zoomOut",onClick:function(){E(-1)},title:"Zoom out"}),o.createElement(xn,{"data-testid":"chartToolbox-zoomReset","data-track":"chart-toolbox::zoom-reset-click::".concat(a),disabled:-900===d&&0===f,icon:"zoomReset",onClick:function(){v({after:-900,before:0})},title:"Zoom reset"}))}));function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jn={after:null,before:null};mn.kL.register(dn.Z,mn.vn,mn.ZL,mn.uw,mn.De,mn.f$,mn.FB,mn.u,fn.ZP);var kn=function(e){var t,n=e.paramsKey,a=e.testIdPrefix,l=(0,o.useRef)(),i=(0,o.useContext)(K.ThemeContext),s=(0,c.I0)(),d=(0,r.Z)(s,2),f=d[0],m=d[1],p=(0,o.useState)([]),g=(0,r.Z)(p,2),h=g[0],y=g[1],b=(0,o.useState)(jn),E=(0,r.Z)(b,2),x=E[0],O=E[1],w=(0,o.useState)(!1),C=(0,r.Z)(w,2),Z=C[0],P=C[1],j=(0,o.useState)(!1),k=(0,r.Z)(j,2),I=k[0],T=k[1],D=(0,o.useState)([]),F=(0,r.Z)(D,2),L=F[0],N=F[1],z=(0,o.useState)(null),M=(0,r.Z)(z,2),R=M[0],A=M[1],B=(0,o.useState)("second"),V=(0,r.Z)(B,2),H=V[0],q=V[1],U=(0,S.Z)(!1),W=(0,r.Z)(U,4),Q=W[0],X=W[2],G=W[3],J=(0,u.ZQ)(n).aggregations,Y=yn().navigation,te=(0,_.rA)(),ne=te.localeTimeString,re=te.localeDateString,ae=nn(),oe=(0,r.Z)(ae,1)[0],le=oe.before-oe.after,ie=(0,o.useMemo)((function(){var e=Date.now();return{min:oe.after-le,max:0===f.before?oe.before:e<oe.before+le?e:oe.before+le}}),[oe.after,oe.before,f.before]),ce=[{backgroundColor:(0,v.getColor)("primary")({theme:i}),borderWidth:0,data:h,label:"Histogram",maxBarThickness:50,minBarLength:0}];(0,o.useEffect)((function(){var e;if(null!==J&&void 0!==J&&null!==(e=J.event_histogram)&&void 0!==e&&null!==(e=e.hits)&&void 0!==e&&e.buckets){var t=J.event_histogram.hits.buckets.reduce((function(e,t){var n=t.key,r=t.doc_count;return{data:[].concat((0,$.Z)(e.data),[r]),labels:[].concat((0,$.Z)(e.labels),[n])}}),{data:[],labels:[]}),n=(0,ee.BZ)(f.after,f.before)||{};y(t.data),N(t.labels),A(null),q(n.unit)}}),[null===J||void 0===J||null===(t=J.event_histogram)||void 0===t||null===(t=t.hits)||void 0===t?void 0:t.buckets]);var ue=(0,o.useMemo)((function(){return{animation:!1,interaction:{axis:"x"},maintainAspectRatio:!1,plugins:{annotation:{annotations:Pn({},x.after&&x.before?{annotation:{type:"box",backgroundColor:"rgba(128,128,128,0.3)",borderDash:[1,5,1,1],borderWidth:1,xMax:x.before,xMin:x.after,xScaleID:"x"}}:{})},legend:{align:"start",display:!1,position:"bottom"},zoom:{limits:{x:ie},pan:{enabled:"pan"===Y&&!Z,mode:"x",onPanStart:function(e){e.chart.canvas.style.cursor="grabbing"},onPanComplete:function(e){var t=e.chart;t.canvas.style.cursor="default";var n=t.scales.x,r=n.min,a=n.max;A({min:Math.round(r),max:Math.round(a)}),m({after:Math.round(r),before:Math.round(a)}),t.update()},threshold:1},zoom:{drag:{enabled:"zoom"===Y||Z},mode:"x",onZoomStart:function(e){e.chart.canvas.style.cursor="col-resize"},onZoomComplete:function(e){var t=e.chart;if("zoom"===Y||Z){t.canvas.style.cursor="default";var n=t.scales.x,r=n.min,a=n.max;m({after:Math.round(r),before:Math.round(a)}),P(!1)}}}}},responsive:!0,scales:{x:Pn({type:"time",grid:{drawBorder:!0,drawOnChartArea:!1,drawTicks:!0,offset:!1},parsing:!1,ticks:Pn({color:(0,v.getColor)("textLite")({theme:i}),font:{size:11},autoSkip:!0,maxTicksLimit:20},"minute"===H&&le>=1e3*En.Kl?{callback:function(e){var t=re(e,{month:"2-digit",day:"2-digit",year:"numeric",long:!1,dateStyle:void 0}).split("/").reverse().slice(1).join("-"),n=ne(e,{secs:!1});return"".concat(t," ").concat(n)}}:{}),time:{displayFormats:{week:"yyyy-MM-dd",day:"MM-dd",hour:"MM-dd HH:mm",minute:"HH:mm",second:"HH:mm:ss"},tooltipFormat:"yyyy-MM-dd HH:mm:ss",unit:H||"second"}},R?{min:R.min,max:R.max}:{}),y:{beginAtZero:!0,ticks:{precision:0,color:(0,v.getColor)("textLite")({theme:i}),font:{size:11}}}}}}),[x,le,Z,Y,R,A,H,ie]);if((0,o.useEffect)((function(){var e=function(e){"Shift"===e.key&&(e.preventDefault(),P(!0))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),!h.length)return null;return o.createElement(v.Flex,{position:"relative",height:{min:50},onMouseEnter:X,onMouseLeave:G},Q&&o.createElement(Cn,{testIdPrefix:a}),o.createElement(sn.$Q,{data:{datasets:ce,labels:L},onMouseDown:function(e){if(e.preventDefault(),"highlight"===Y){T(!0);var t=e.nativeEvent.offsetX||e.nativeEvent.layerX,n=l.current;n.canvas.style.cursor="crosshair",O({after:Math.round(n.scales.x.getValueForPixel(t)),before:null})}},onMouseMove:function(e){if(e.preventDefault(),"highlight"===Y&&I){var t=e.nativeEvent.offsetX||e.nativeEvent.layerX,n=l.current;O((function(e){return Pn(Pn({},e),{},{before:Math.round(n.scales.x.getValueForPixel(t))})}))}},onMouseUp:function(e){e.preventDefault(),T(!1);var t=e.nativeEvent.offsetX||e.nativeEvent.layerX,n=l.current;n.canvas.style.cursor="default",x.after===Math.round(n.scales.x.getValueForPixel(t))?O(jn):O(x)},options:ue,ref:l}))},In={none:!0,facet:!0},Tn=function(e,t){var n=(0,u.ZQ)({extraKey:e}),r=n.loaded,a=n.loading,l=n.columns,i=n.sortedColumns,c=(0,o.useRef)([]);return(0,o.useMemo)((function(){return!r||a||(c.current=i.reduce((function(e,n){return!l[n].filter||In[l[n].filter]?e:[].concat((0,$.Z)(e),[t(n,l)])}),[])),c.current}),[r,a])},Sn=["sorter"];function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fn=function(e){return{label:e,value:e}},Ln=(0,o.memo)((function(e){var t=e.paramsKey,n=e.initData,l=e.initFilter,i=(0,u.ZQ)(t),c=i.charts,s=i.loaded,d=Et(t),f=(0,o.useContext)(K.ThemeContext),p=Object.keys(c).map(Fn),g=Tn(t.extraKey,Fn),h=(0,o.useState)(n),y=(0,r.Z)(h,2),b=y[0],E=y[1],x=(0,o.useState)(l),O=(0,r.Z)(x,2),w=O[0],C=O[1],Z=(0,u.CE)(t);(0,o.useEffect)((function(){E(n)}),[n]),(0,o.useEffect)((function(){C(l)}),[l]);var P=(0,o.useMemo)((function(){if(!c[b])return{datasets:[],labels:[]};var e=c[b].columns,t=null===d||void 0===d?void 0:d.reduce((function(t,n){var r=n[w];return t[r]?Kn(Kn({},t),{},(0,a.Z)({},r,e.reduce((function(e,t){var r;return Kn(Kn({},e),{},(r={},(0,a.Z)(r,t,e[t]+n[t]),(0,a.Z)(r,"sorter",e.sorter+n[t]),r))}),t[r]))):Kn(Kn({},t),{},(0,a.Z)({},r,e.reduce((function(e,t,o){var l;return Kn(Kn(Kn({},e),0===o?{label:r,sorter:n[t]}:{}),{},(l={},(0,a.Z)(l,t,n[t]),(0,a.Z)(l,"sorter",e.sorter?e.sorter+n[t]:n[t]),l))}),{})))}),{}),n=Object.values(t).sort((function(e,t){return t.sorter-e.sorter})).slice(0,15).map((function(e){e.sorter;return Kn({},(0,m.Z)(e,Sn))}));return{datasets:c[b].columns.map((function(e,t){return{backgroundColor:En.vK[t],borderWidth:0,data:n.map((function(t){return t[e]})),label:e,maxBarThickness:50,minBarLength:0}})),labels:n.map((function(e){return e.label}))}}),[Z,c,b,w,d]),j={animation:!1,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{boxWidth:4,boxHeight:20,title:{color:(0,v.getColor)("textLite")({theme:f})}}}},responsive:!0,scales:{x:{stacked:!0,grid:{color:(0,v.getColor)("borderSecondary")({theme:f})}},y:{stacked:!0,grid:{color:(0,v.getColor)("borderSecondary")({theme:f})}}}};return o.createElement(v.Flex,{column:!0,"data-testid":"functionsCharts",gap:3,width:"50%",background:"mainChartBg",border:{side:"all",color:"mainChartBorder"},padding:[4],round:.5},o.createElement(v.Flex,{alignItems:"center","data-testid":"functionsChart".concat(b,"-selects"),gap:2},o.createElement(v.Select,{"data-ga":"functions-chart-".concat(b,"::select-data::functions-view"),"data-testid":"functionsChart".concat(b,"-dataSelect"),isLoading:!s,onChange:function(e){var t=e.value;return E(t)},options:p,styles:{size:"tiny",minWidth:120},value:{label:b,value:b}}),o.createElement(v.Text,{"data-testid":"functionsChart".concat(b,"-perLabel"),color:"textLite"},"per"),o.createElement(v.Select,{"data-ga":"functions-chart-".concat(w,"::select-filter::functions-view"),"data-testid":"functionsChart".concat(w,"-filterSelect"),isLoading:!s,onChange:function(e){var t=e.value;return C(t)},options:g,styles:{size:"tiny",minWidth:120},value:{label:w,value:w}})),o.createElement(v.Flex,{position:"relative",height:{min:60},width:{min:"100%"}},o.createElement(sn.$Q,{data:P,options:j})))})),Nn=Ln,zn=n(16978),Mn=n(24298),Rn=n(96415),An=n(70873),_n=n(43460),Bn=n(9058),Vn=n(54576),Hn=n(61003),qn=n(3701),Un=function(e){var t=e.fn,n=e.histograms,a=e.selectedId,l=e.disabled,i=(0,Vn.useChart)(),u=(0,ye.UL)(),s=(0,o.useMemo)((function(){return n.map((function(e){var t=e.id,n=e.name;return{value:t,label:n,"data-track":i.track("select-histogram-".concat(n))}}))}),[n]),d=(0,c.I0)("histogram",{defaultValue:[a],key:u,extraKey:"".concat(t,"Filters"),flavour:"val"}),f=(0,r.Z)(d,2),m=f[0],p=f[1],v=m[0];return o.createElement(Hn.Z,{value:v,items:s,dropProps:{align:{top:"bottom",right:"right"},"data-toolbox":!0},onChange:function(e){return p([e])},"data-track":i.track("selectHistogram"),dropdownProps:{width:"150px"}},o.createElement(qn.Button,{disabled:l},"Source"))},Wn=(0,o.memo)(Un);function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Xn=function(e){return function(t){return"histogram::".concat(e.getAttribute("id"),"::").concat(t)}},Gn={width:"108px",height:"77px"},Jn=function(e){var t=e.nodeId,n=e.fn,l=e.paramsKey,i=(0,u.ZQ)(l),c=i.availableHistograms,s=i.histogram,d=i.help,m=i.pagination,p=i.clickPoint,g=i.data,h=(0,u.hx)(),y=(0,Bn.e)(),b=(0,o.useRef)();b.current=function(){return Promise.resolve(null===s||void 0===s?void 0:s.chart)};var E=(0,o.useMemo)((function(){var e="".concat(t,"-").concat(n),r=y.makeChart({attributes:{id:e,enabledHeightResize:!1,info:d},getChart:function(){return b.current()},makeTrack:Xn});return y.getRoot().appendChild(r),[r,w]}),[t,n]),x=(0,r.Z)(E,2),O=x[0],w=x[1];(0,o.useEffect)((function(){return O.trigger("fetch")}),[s]);var C=(0,u.I_)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:"clickPoint"},l));return(0,o.useEffect)((function(){if(O)return(0,Mn.unregister)(O.on("highlightClick",(function(e){return C(e+1e3*s.chart.view.update_every)})),O.on("highlightEnd",(function(){return C(null)})))}),[O,s]),(0,o.useEffect)((function(){var e;return!!c&&O.updateAttributes({toolboxElements:[function(e){var t=e.disabled;return o.createElement(Wn,{histograms:c,fn:n,selectedId:s.id,disabled:t})},_n.default,Rn.default,An.default],title:null===s||void 0===s||null===(e=s.chart)||void 0===e||null===(e=e.view)||void 0===e?void 0:e.title})}),[c]),(0,o.useEffect)((function(){if(h&&O&&m){var e=g[h],t=Math.floor((null===e||void 0===e?void 0:e[null===m||void 0===m?void 0:m.column])/1e6);t&&!isNaN(t)&&O.updateAttribute("hoverX",[1e3*Math.floor(t-t%s.chart.view.update_every),null])}}),[g,s,h]),(0,o.useEffect)((function(){p&&O&&m&&O.updateAttribute("clickX",[p,null])}),[p]),(0,o.useEffect)((function(){return function(){return O&&O.destroy()}}),[O]),o.createElement(v.Flex,{flex:!1,width:"100%",height:75},O?o.createElement(zn.Z,{"data-chartid":w,chart:O,overflow:"hidden",hasFilters:!1}):o.createElement(f.Z,{iconProps:Gn,title:"Loading chart..."}))},Yn=["margin","defaultCharts","hasHistogram"],$n=["paramsKey","testIdPrefix","availableFns","availableFnsLoaded","hasError"],er={extraKey:"fn"},tr={fn:{Chart:(0,o.memo)((function(e){var t=e.margin,n=e.defaultCharts,a=e.hasHistogram,l=void 0!==a&&a,i=(0,m.Z)(e,Yn);return o.createElement(v.Flex,{gap:4,margin:t},n.map((function(e,t){var n=(0,r.Z)(e,2),a=n[0],l=n[1];return o.createElement(Nn,(0,p.Z)({key:t,initData:a,initFilter:l},i))})),l&&o.createElement(Jn,i))})),loadingMessage:"Loading function..."},feed:{Chart:kn,loadingMessage:"Loading events..."}},nr={table:It},rr=(0,o.memo)((function(e){var t=e.paramsKey,n=void 0===t?er:t,a=e.testIdPrefix,l=void 0===a?"functions":a,i=e.availableFns,s=e.availableFnsLoaded,d=e.hasError,y=(0,m.Z)(e,$n),b=tr[n.extraKey]||tr.fn,E=b.Chart,x=b.loadingMessage,w=(0,u.Hv)(n),C=(0,r.Z)(w,2),Z=C[0],P=C[1],T=(0,c.c6)(n),S=(0,u.ZQ)(n),D=S.infoLoaded,K=S.loaded,F=S.data,L=S.error,N=S.type,z=S.retentionWarning,M=S.defaultCharts,R=S.histogram,A=S.missingRequired,_=S.requiredParams,B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,r.Z)(e,1)[0],n=(0,g.iy)(t,"name");return 1===e.length&&n?"on ".concat(n):"on your selected node"}(T);(0,o.useEffect)((function(){var e;null!==Z&&void 0!==Z&&Z.length||null===i||void 0===i||null===(e=i[0])||void 0===e||!e.name||d||P([i[0].name])}),[s,Z]);var H=(0,k.useHovered)({},[K]),q=(0,r.Z)(H,2),U=q[0],W=q[1],Q=(0,I.Z)();(0,o.useEffect)((function(){Q(W)}),[W]),cn(T,Z[0],n);var X=function(e,t,n){var a=(0,h.th)(),l=(0,ye.vf)(),i=(0,V.o8)(),s=(0,c.tk)("pollingInterval",$t({flavour:"int"},n)),d=(0,c.tk)("slice",$t({defaultValue:!0,flavour:"bool"},n)),f=(0,u.mO)(n),m=(0,r.Z)(f,2),p=m[0],v=m[1],y=(0,o.useRef)();y.current=p;var b=function(e){var t=e.data,n=void 0===t?{}:t;(en[n.type]||en.default)(v,n,y.current)},E=tn[t]||tn.default,x=E.fetch,O=E.isEnabled,w=nn(p),C=(0,r.Z)(w,4),Z=C[0],P=C[1],k=C[2],I=C[3],T=(0,Dt.Z)(I),S=(0,o.useRef)();S.current=Z;var D=(0,o.useRef)();D.current=p.lastModified;var K=(0,o.useRef)();K.current=p.anchorAfter;var F=(0,ye.UL)(),L=(0,c.by)(null,{key:F,extraKey:"".concat(t||n.extraKey,"Filters")}),N=(0,Kt.Z)(L),z=(0,g.Xw)(e),M=(0,j.zp)(),R=(0,r.Z)(M,1)[0].loading;(0,o.useEffect)((function(){"feed"!==t&&(D.current=null,K.current=null,v($t($t({},Nt.Zn[p.type]||Nt.Zn.default),{},{type:p.type})))}),[null===e||void 0===e?void 0:e[0],t]),(0,o.useEffect)((function(){N&&!St()(N,L)&&p.loaded&&(D.current=null,K.current=null,v((function(e){return $t($t({},e),{},{lastModified:null,anchorAfter:null,anchorBefore:null,offset:0})})))}),[!!p.aggregations&&L]),(0,o.useEffect)((function(){p.loaded&&(D.current=null,K.current=null,v((function(e){return $t($t({},e),{},{lastModified:null,anchorAfter:null,anchorBefore:null,offset:0})})))}),[P,d]);var A=(0,o.useRef)(),_=(0,o.useRef)();_.current=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v((function(e){return $t($t({},e),{},{loading:!0})})),A.current=x($t($t($t({roomId:F,spaceId:a,nodeIds:e,cloudNodeIds:z,fn:t,roomSlug:l,filters:L,slice:d},S.current()),n),{},{acceptedParams:p.acceptedParams,last:200})),A.current};var B=function(e){var t,n,r=e||{},a=r.merge,o=r.direction,l=r.dataOnly,i=r.tail;null===(t=e)||void 0===t||null===(t=t.response)||void 0===t||!t.status||400!==e.response.status&&304!==e.response.status?(null!==(n=e)&&void 0!==n&&null!==(n=n.response)&&void 0!==n&&n.data&&(e=e.response.data),v((function(t){return $t($t({},t),{},{error:e,loaded:!0,loading:!1})}))):v((function(t){return $t($t({},t),{},{loaded:!0,loading:!1},!!e&&{merge:a,direction:o,dataOnly:l,tail:i})}))},H=(0,Ft.Z)((function(){return{enabled:!p.missingRequired&&p.infoLoaded&&!R&&O({nodeIds:e,fn:t,roomId:F,after:P}),fetch:function(){return _.current(!i&&P<0?$t({if_modified_since:D.current},D.current&&{direction:"forward",merge:!0,tail:!0,delta:!0,data_only:!0,anchor:K.current}):!i&&function(e,t){var n=e.after;return t<e.before&&t>n}(S.current(),I)?{anchor:1e3*I,data_only:!!D.current}:{direction:"backward",data_only:!!D.current})},onFail:B,onPollingFail:B,onReceive:b,onBlurMode:function(){return v((function(e){return $t($t({},e),{},{loading:!1})}))},polling:!i&&P<0,pollingOptions:{pollingInterval:1e3*(s||p.updateEvery),shouldPause:!0},force:!0,skip:!!T&&!I}}),[i,p.infoLoaded,p.missingRequired,F,null===e||void 0===e?void 0:e.length,null===e||void 0===e?void 0:e[0],t,s,!!p.aggregations&&!!N&&L,P,k,R,I,d]);return[(0,o.useCallback)((function(e){if(!y.current.loadingMore){v((function(e){return $t($t({},e),{},{loadingMore:!0})}));var t=_.current(e);return t.then(b).catch(B).finally((function(){return v((function(e){return $t($t({},e),{},{loadingMore:!1})}))})),t}}),[v]),(0,o.useCallback)((function(){var e,t,n,r,a;null===H||void 0===H||null===(e=H.clearRef)||void 0===e||null===(e=e.current)||void 0===e||null===(e=e.promise)||void 0===e||null===(t=e.cancel)||void 0===t||t.call(e),clearTimeout(null===H||void 0===H||null===(n=H.clearRef)||void 0===n||null===(n=n.current)||void 0===n?void 0:n.timeoutId),null===(r=A.current)||void 0===r||null===(a=r.cancel)||void 0===a||a.call(r),v((function(e){return $t($t({},e),{},{loaded:!0,loading:!1,loadingMore:!1})}))}),[v])]}(T,Z[0],n),G=(0,r.Z)(X,2),Y=G[0],$=G[1];if(!s)return o.createElement(f.Z,{title:x,"data-testid":"".concat(l,"Loading")});if(d)return o.createElement(un.NY,{title:"Functions couldn't be loaded",message:"We couldn't find any available functions."});if(L&&"canceled"!==L){if("ErrNodeResourceNotFound"===(null===L||void 0===L?void 0:L.errorMsgKey))return o.createElement(O.Z,{message:"Please review your selection and try again.",title:"".concat("feed"===n.extraKey?"Events are":'Function "'.concat(Z,'" is')," not available ").concat(B,".")});if(null===F||void 0===F||!F.length)return o.createElement(un.NY,{title:"".concat("feed"===n.extraKey?"Events":'Function "'.concat(Z,'"')," couldn't be loaded"),message:"ErrForbidden"===(null===L||void 0===L?void 0:L.errorMsgKey)?"Forbidden":(null===L||void 0===L?void 0:L.errorMessage)||""})}if(D&&A)return o.createElement(O.Z,{title:"Required filters are needed",message:'Function "'.concat(Z,'" needs: ').concat(_.map((function(e){return e.name})).join(", "),"."),footer:"Check them on the right sidebar!"});var ee=nr[N]||nr.table;return o.createElement(v.Box,{overflow:{horizontal:"hidden",vertical:"auto"},column:!0,padding:[4,4,0],gap:2},o.createElement(J,{nodeIds:T,onRefresh:Y,onCancel:$,paramsKey:n}),K?o.createElement(o.Fragment,null,o.createElement(E,{paramsKey:n,testIdPrefix:l,defaultCharts:M,hasHistogram:!!R,refetch:Y,fn:Z,nodeIds:T}),o.createElement(ee,(0,p.Z)({key:Z,"data-testid":"".concat(l,"Component"),paramsKey:n,refetch:Y,ref:U},y)),!(null!==F&&void 0!==F&&F.length)&&o.createElement(v.Flex,{column:!0,justifyContent:"center",alignItems:"center",alignSelf:"center",margin:["feed"===n.extraKey?3:30,0,0],gap:3},o.createElement(v.H3,null,"No results to display"),o.createElement(v.Text,{color:"textDescription",textAlign:"center"},"Double-check your search or filters and dates and try again with different conditions"),z&&o.createElement(v.Text,{color:"text",textAlign:"center"},z))):o.createElement(f.Z,{title:x,"data-testid":"".concat(l,"Loading")}))})),ar=rr,or=n(24533),lr=["paramsKey","hasError","refreshAvailableFns","availableFnsLoaded","availableFns"];function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ur=function(e){var t=(0,j.Hu)();return o.createElement(v.Button,(0,p.Z)({label:"Get a fresh agent token",onClick:t},e))},sr="Functions expose sensitive information about your systems and applications. To protect your privacy, Netdata exposes this information only to logged-in users and claimed agents. When viewing Functions directly on a  Netdata Agent UI, this information is sent directly from the Netdata Agent to your web browser, without exposing it to any third parties.",dr={notLoggedIn:{title:"Sign in to Netdata to use Functions",description:sr,footer:o.createElement(Z.Z,null)},notClaimed:{title:"Connect this agent to Netdata to use Functions",description:sr,footer:o.createElement(P.Z,null)},noAccess:{title:"This agent belongs to a Netdata Space you are not member of",description:sr,footer:o.createElement(v.TextBig,{color:"textDescription"},"Ask for an invitation from the administrators of the Netdata Space of the agent to use functions.")},bearerError:{title:"You are not authorized to use Functions",description:sr,footer:o.createElement(ur,null)}},fr={extraKey:"fn"},mr=function(e){var t=e.paramsKey,n=void 0===t?fr:t,a=e.hasError,l=e.refreshAvailableFns,i=e.availableFnsLoaded,s=e.availableFns,d=(0,m.Z)(e,lr),f=(0,c.H7)(n),v=(0,c.wT)(n),b=(0,r.Z)(v,2),x=b[0],w=b[1],Z=(0,g.M2)(f),P=E(n),k=(0,u.CE)(n);(0,o.useEffect)((function(){var e;if(null!==f&&void 0!==f&&f.length&&!P&&(null===x||void 0===x||!x.length)&&k){var t=null===(e=s.find((function(e){return e.name===k})))||void 0===e?void 0:e.nodes;t&&w([Object.keys(t)[0]])}}),[P,w,x,k]);var I=(0,y.ej)(),T=(0,r.Z)(I,1)[0],S=(0,j.zp)(),D=(0,r.Z)(S,1)[0],K=D.bearerProtection,F=D.error,L=D.token,N=(0,h.Q6)(),z=(0,or.Lz)(),M=(0,r.Z)(z,1)[0],R=M.canBeClaimed,A=M.cloudStatus;if((0,o.useEffect)((function(){a&&l()}),[A,L]),!Z.length)return o.createElement(C,{paramsKey:n});if(N&&(a||F&&K)){var _=function(e){var t=e.userStatus,n=e.userNodeStatus,r=e.accessError,a=e.canBeClaimed;return e.cloudStatus,dr[t]?dr[t]:r?dr.notLoggedIn:a?dr.notClaimed:dr[n]?dr[n]:dr.bearerError}(cr(cr({},T),{},{bearerError:F,canBeClaimed:R,cloudStatus:A})),B=_.title,V=_.description,H=_.footer;return o.createElement(O.Z,{title:B,message:V,footer:H})}return o.createElement(ar,(0,p.Z)({testIdPrefix:"fn",paramsKey:n,availableFnsLoaded:i,availableFns:s},d))},pr=["paramsKey"],vr={extraKey:"feed"},gr=function(e){var t=e.paramsKey,n=void 0===t?vr:t,r=(0,m.Z)(e,pr);E(n);var a=(0,u.I_)(n);return(0,o.useEffect)((function(){return a}),[]),o.createElement(ar,(0,p.Z)({testIdPrefix:"feed",paramsKey:n},r))},hr=n(97193),yr=n(8144);function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xr=function(e){var t=e.roomId,n=e.flavour,r=e.availableFns,l=function(e){var t="fn"===e;return(0,o.useMemo)((function(){return{Live:{head:{label:"Live nodes",textColor:"textLite",iconName:"connectivityStatusLive",hasFn:t},node:{textColor:"text",showFn:t,requireFn:t}},Stale:{head:{label:"Stale nodes",textColor:"textLite",iconName:"connectivityStatusStale"},node:{textColor:"text",disabled:t}},Offline:{head:{label:"Offline nodes",textColor:"textLite",iconName:"connectivityStatusOffline",disabled:t},node:{textColor:"textLite",disabled:t}}}}),[e])}(n),i=function(e){var t=(0,u.ZQ)({extraKey:e}).aggregations;return(0,o.useMemo)((function(){return null!==t&&void 0!==t&&t.node_ids?t.node_ids.buckets.reduce((function(e,t){return Er(Er({},e),{},(0,a.Z)({},t.key,t.hits.doc_count))}),{}):null}),[t])}(n),c="fn"===n,s=(0,u.CE)({extraKey:n}),d=(0,o.useMemo)((function(){var e;return Array.isArray(r)&&(null===(e=r.find((function(e){return e.name===s})))||void 0===e?void 0:e.nodes)||null}),[s,r]),f=(0,o.useCallback)((function(e){return!!d&&!d[e]}),[d]),m=(0,o.useCallback)((function(){return d?Object.keys(d):[]}),[d]);return o.createElement(yr.Z,{title:"Nodes",testIdPrefix:"nodes",baseKey:t,extraKey:n,param:"selectedNodeIds",multi:"feed"===n},o.createElement(hr.Z,(0,p.Z)({key:n,baseKey:t,extraKey:n,statusProps:l,background:"mainBackground",itemProps:{padding:[1,1,1,.5],maxLength:30},searchMargin:[0,0,2],height:{max:"300px"},multi:"feed"===n,nodeCounts:i},c&&{useFilteredIds:m},{checkIsDisabled:f})))},Or=n(46742),wr=function(e){return e.name},Cr=function(e){var t=e.param,n=e.baseKey,r=e.extraKey,a=e.testIdPrefix,l=e.title,i=e.items,c=void 0===i?[]:i,u=e.multi,s=void 0!==u&&u;return c.length?o.createElement(yr.Z,{title:l,testIdPrefix:a,baseKey:n,extraKey:r,param:t,multi:s},o.createElement(Or.ZP,{param:t,baseKey:n,extraKey:r,testIdPrefix:a,collection:c,multi:s,getValue:wr,getLabel:wr})):null},Zr=n(6557),Pr=function(e){return e.id},jr={string:function(e,t){return e.localeCompare(t,void 0,{sensitivity:"accent"})},integer:function(e,t){return e-t}},kr={table:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.param,a=t.columns;return Object.entries(e.reduce((function(e,t){var r,o;return e[t[n]]={count:((null===(r=e[t[n]])||void 0===r?void 0:r.count)||0)+(t.hidden?0:1),type:null===(o=a[n])||void 0===o?void 0:o.type},e}),{})).map((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];return{id:n,type:a.type,count:a.count}})).sort((function(e,t){return(jr[e.type]||jr.integer)(e.id,t.id)}))},default:n.n(Zr)()},Ir=function(e,t){return{key:e,type:t[e].filter}},Tr={multiselect:function(e){var t=e.param,n=e.baseKey,r=e.extraKey,a=e.filtersKey,l=e.testIdPrefix,i=e.title,s=function(e){var t=e.extraKey,n=e.filtersKey,r=e.param,a=Et({extraKey:t,omit:[r],keepAll:!0}),l=(0,c.tk)(r,{extraKey:n,flavour:"arr"}),i=(0,u.ZQ)({key:"type",extraKey:t}),s=kr[i]||kr.default,d=(0,u.ZQ)({key:"columns",extraKey:t});return(0,o.useMemo)((function(){return s(a,{param:r,columns:d})}),[r,a,l])}({param:t,extraKey:r,filtersKey:a});return s&&s.length?o.createElement(yr.Z,{title:i,testIdPrefix:l,baseKey:n,extraKey:a,param:t,defaultIsOpen:!1},o.createElement(Or.ZP,{param:t,baseKey:n,extraKey:a,testIdPrefix:l,collection:s,capitalized:!1,getValue:Pr,getLabel:Pr})):null},range:function(e){var t=e.param,n=e.baseKey,a=e.extraKey,l=e.filtersKey,i=e.testIdPrefix,s=e.title,d=(0,u.ZQ)({extraKey:a}).columns,f=(0,c.I0)(t,{defaultValue:[],key:n,extraKey:l,flavour:"arr"}),m=(0,r.Z)(f,2),p=m[0],g=m[1];if(!d[t])return null;var h=1*d[t].range.min,y=1*d[t].range.max;return o.createElement(yr.Z,{title:s,testIdPrefix:i,baseKey:n,extraKey:l,param:t,defaultIsOpen:!1},o.createElement(v.Box,{padding:[2,0],width:"100%"},o.createElement(v.MultiRangeInput,{min:h,max:y,onChange:function(e){var t=e.min,n=e.max;return g([t,n])},initMin:p[0]?1*p[0]:h,initMax:p[1]?1*p[1]:y})))}},Sr=function(e){var t=e.roomId,n=e.extraKey,r=(0,u.CE)({extraKey:n}),a=function(e){return Tn(e,Ir)}(n);return a.map((function(e){var a=Tr[e.type]||Tr.multiselect;return o.createElement(a,{key:e.key,title:e.key,testIdPrefix:"function",baseKey:t,extraKey:n,filtersKey:"".concat(r||n,"Filters"),param:e.key})}))},Dr=function(e){return e.name||e.id},Kr=function(e){return e.id},Fr=function(e){var t=e.title,n=e.options,a=e.param,l=e.baseKey,i=e.filtersKey,c=e.testIdPrefix,u=e.multi,s=void 0===u||u,d=e.defaultIsOpen,f=void 0!==d&&d,m=e.required,p=void 0!==m&&m,g=(0,S.Z)(!1),h=(0,r.Z)(g,2),y=h[0],b=h[1],E=(0,o.useMemo)((function(){return null!==n&&void 0!==n&&n.length?n.filter((function(e){return"number"!==typeof e.count||e.count>0})):null}),[n]);return null!==n&&void 0!==n&&n.length?o.createElement(yr.Z,{title:t,testIdPrefix:c,baseKey:l,extraKey:i,param:a,defaultIsOpen:f,required:p,multi:s,configElements:function(e){return e.isOpen&&(null===E||void 0===E?void 0:E.length)!==(null===n||void 0===n?void 0:n.length)&&o.createElement(v.Button,{padding:[0],flavour:"borderless",onClick:function(e){e.stopPropagation(),b()},"data-testid":"".concat(c,"-filter-resetAll"),label:"Hide zeros",tiny:!0,neutral:!0})}},o.createElement(Or.ZP,{param:a,baseKey:l,extraKey:i,testIdPrefix:c,collection:y?E:n,capitalized:!1,getValue:Kr,getLabel:Dr,multi:s})):null},Lr={nodes:!0},Nr=function(e){var t=e.roomId,n=e.extraKey,r=(0,u.CE)({extraKey:n}),a=(0,u.Cf)(n);return a.length?a.map((function(e){return Lr[e.id]?null:o.createElement(Fr,{key:e.id,title:e.name,options:e.options,param:e.id,testIdPrefix:"function",baseKey:t,filtersKey:"".concat(r||n,"Filters")})})):null};n(68216),n(79433);function zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rr={select:!0},Ar=function(e){var t=e.roomId,n=e.extraKey;return e.requiredParams.map((function(e){return o.createElement(Fr,{key:e.id,title:e.name,options:e.options,param:e.id,testIdPrefix:"function",baseKey:t,filtersKey:"".concat(n,"Filters"),multi:!Rr[e.type],defaultIsOpen:!0,required:!0})}))},_r=function(e){var t=e.extraKey,n=(0,u.CE)({extraKey:t}),l=(0,u.mO)({extraKey:t}),i=(0,r.Z)(l,2),s=i[0],d=s.requiredParams,f=s.infoLoaded,m=i[1],p=(0,ye.UL)(),v=(0,c.I0)(null,{key:p,extraKey:"".concat(n,"Filters")}),g=(0,r.Z)(v,2),h=g[0],y=g[1];return(0,o.useEffect)((function(){f&&d.length&&d.forEach((function(e){var t,n;return(null===(t=e.options)||void 0===t?void 0:t.length)>0&&!(null!==(n=h[e.id])&&void 0!==n&&n.length)&&y((0,a.Z)({},e.id,[e.options[0].id]))}))}),[f]),(0,o.useEffect)((function(){f&&(d.length?h&&m((function(e){return Mr(Mr({},e),{},{missingRequired:!!d.length&&!d.every((function(e){var t,n;return!(null===(t=e.options)||void 0===t||!t.length)&&(Array.isArray(h[e.id])?!(null===(n=h[e.id])||void 0===n||!n.length):!!h[e.id])}))})})):m((function(e){return Mr(Mr({},e),{},{missingRequired:!1})})))}),[f,d,h]),o.createElement(Ar,{roomId:p,extraKey:n,requiredParams:d})},Br=(0,o.memo)((function(e){var t=e.flavour,n=e.availableFns,r=(0,ye.UL)(),a=(0,u.ZQ)({extraKey:t}),l=a.loaded,i=a.aggregations,c=a.error;return o.createElement(v.Flex,{column:!0,overflow:{vertical:"auto"},padding:[0,3,30]},"fn"===t&&o.createElement(Cr,{title:"Function",testIdPrefix:"function",baseKey:r,extraKey:t,param:"selectedFn",items:n}),o.createElement(xr,{roomId:r,flavour:t,availableFns:n}),o.createElement(_r,{extraKey:t}),l&&!i&&!c&&o.createElement(Sr,{roomId:r,extraKey:t}),l&&i&&!c&&o.createElement(Nr,{roomId:r,extraKey:t}))})),Vr=(n(38862),n(21872)),Hr=n(46038),qr=n(52428),Ur=["selectedRowData","setSelectedRowData"],Wr=function(e){var t=e.data;return o.createElement(Hr.Z,{name:"Files"},o.createElement(v.Flex,{gap:1,padding:[0,1],alignItems:"center"},o.createElement(v.Box,{sx:{fontWeight:"500",letterSpacing:"1px"},as:v.Text,color:"textLite"},"{;}"),o.createElement(v.TextSmall,null,"Copy data as"),o.createElement(v.Flex,{cursor:"pointer",gap:1,onClick:(0,qr.J)(JSON.stringify(t),{text:"JSON copied to clipboard"})},o.createElement(v.TextSmall,{color:"primary"},"json"),o.createElement(v.Icon,{color:"primary",size:"small",name:"copy"}))))},Qr=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data,a=void 0===n?{}:n,o=t.columns,l=void 0===o?{}:o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object.entries(a).reduce((function(t,n){var a,o,i,s=(0,r.Z)(n,2),d=s[0],f=s[1],m=c?"".concat(c,".").concat((null===(o=l[d])||void 0===o?void 0:o.displayName)||d):(null===(a=l[d])||void 0===a?void 0:a.displayName)||d;if(null!==(i=l[d])&&void 0!==i&&i.dummy)return t;if(!l[d])return t;var p=Array.isArray(f);if(p&&"object"===(0,mt.Z)(f[0])&&null!==f[0]||p&&f.length>1)t.push([m,JSON.stringify(f)]),u[m]=f;else if(f&&"object"===(0,mt.Z)(f))e({data:f},t,m,u);else{if(null===f)return t;t.push([m,p?f.length>1?"[".concat(f.join(", "),"]"):f[0]:f]),u[m]=p?f.length>1?"[".concat(f.join(", "),"]"):f[0]:f}return t}),i)},Xr=(0,K.default)(v.Flex).withConfig({displayName:"sidebarInfo__Container",componentId:"sc-18vn5bm-0"})(['*{font-family:"Courier New",Courier,monospace;letter-spacing:0.09px;line-height:13px;font-size:12px;}']),Gr=function(e){var t=e.selectedRowData,n=void 0===t?{}:t,a=e.setSelectedRowData,l=(0,m.Z)(e,Ur),i={},c=(0,o.useMemo)((function(){return Qr(n,[],null,i).sort((function(e,t){var n=(0,r.Z)(e,1)[0],a=(0,r.Z)(t,1)[0];return n.localeCompare(a)}))}),[n]);return o.createElement(v.Flex,(0,p.Z)({column:!0,gap:2,overflow:{vertical:"auto"},padding:[2,3]},l),o.createElement(v.Flex,{justifyContent:"between",padding:[2,0],border:{side:"bottom",color:"borderSecondary"}},o.createElement(v.TextBig,{strong:!0},"Row info"),c.length>0&&o.createElement(v.Box,{onClick:function(){return a()},cursor:"pointer"},o.createElement(v.TextSmall,{color:"primary"},"Clear selection"))),Array.isArray(c)&&c.length?o.createElement(o.Fragment,null,o.createElement(Xr,{column:!0,gap:2},c.map((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];return o.createElement(Vr.Z,{key:n,size:"small",name:n,testId:"sidebar-rowInfoContent-".concat(n),padding:[1,0,0]},a)}))),o.createElement(Wr,{data:n.json||i})):o.createElement(v.Text,null,"Select a row to see raw data"))},Jr=n(63346);function Yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ea={fn:{Component:mr,paramsKey:{extraKey:"fn"},loadingMessage:"Loading functions..."},feed:{Component:gr,paramsKey:{extraKey:"feed"},loadingMessage:"Loading events..."}},ta={filters:$r($r({iconName:"filterList"},s.Xc),{},{width:"19px",Content:Br,dataTestId:"fnFilters",label:"Filters"}),info:$r($r({iconName:"information"},s.Xc),{},{width:"19px",dataTestId:"info",Content:Gr,label:"Info"})},na=function(e){var t=e.flavour,n=ea[t]||ea.fn,a=n.Component,m=n.paramsKey,p=n.loadingMessage,v=(0,i.zN)(),g=(0,i.fD)(),h=(0,c.Sf)("sidebarTab",{flavour:"val",extraKey:t}),y=(0,c.Sf)("sidebarOpen",{flavour:"bool"}),b=(0,o.useState)(),E=(0,r.Z)(b,2),x=E[0],O=E[1],w=(0,o.useCallback)((function(){y(!0),h("info"),O.apply(void 0,arguments)}),[]),C=(0,u.KO)(m.extraKey),Z=C.loaded,P=C.value,j=C.hasError,k=C.refresh;return g?v.length||"fn"!==t?o.createElement(Jr.ZP,{feature:"Functions-".concat(t)},o.createElement(l.Z,{"data-testid":"".concat(t,"Page"),sidebar:o.createElement(s.ZP,{title:"Filters",flavour:t,selectedRowData:x,setSelectedRowData:O,availableFns:P,tabs:ta,loaded:!0,hasSearch:!1})},o.createElement(a,{testIdPrefix:t,paramsKey:m,onShowInfo:w,availableFnsLoaded:Z,availableFns:P,refreshAvailableFns:k,hasError:j}))):o.createElement(Jr.ZP,{feature:"Functions-".concat(t),mode:"NoNodesView"},o.createElement(d.Z,null)):o.createElement(f.Z,{title:p})}}}]);