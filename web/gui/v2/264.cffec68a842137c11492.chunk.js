!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="fdc7fa8d-a1a6-4773-a77a-67fb2fad3f10",e._sentryDebugIdIdentifier="sentry-dbid-fdc7fa8d-a1a6-4773-a77a-67fb2fad3f10")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"bc401569f0a5aac35c96315fba57182a8ad450f2"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[264],{26264:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ee}});var a=n(29439),r=n(67294),o=n(15557),c=n(33937),l=n(87462),i=(n(21249),n(57640),n(9924),n(60677)),s=n(89250),u=n(46189),d=n(46667),m=n(27622),p=n(77872),g=n(36459),f=(n(19601),n(82351)),h=n(93033),E=n(15418),v=n(74059),b=function(e){var t=Object.assign({},((0,g.Z)(e),e)),n=(0,h.Z)(),a=(0,v.Q6)();return r.createElement(E.Z,{permission:"space:ReadSettings"},(function(e){return r.createElement(f.Z,{content:e?"Space settings":a?"You are viewing a local agent. Connect the agent to a space on cloud to be able to view and change the settings":"Only admins can view space settings"},r.createElement(o.Flex,{opacity:e?null:"weak",padding:[0,1]},r.createElement(o.Button,(0,l.Z)({disabled:!e,flavour:"borderless",icon:"gear",neutral:!0,onClick:n,small:!0,"data-ga":"left-sidebar::click-space-settings::global-view","data-testid":"workspaceBar-manageSpace"},t))))}))},w=n(36065),x=n(15257),k=n(92432),C=n(14428),I=n(97346),y=n(62289),Z=n(3528),S=function(){var e=(0,Z.hd)("email"),t=(0,y.Z)().handleOpenProfileModal;return"loading"===e.state||e.state.hasError?null:r.createElement(o.IconButton,{flavour:"borderless","data-testid":"open-email-notification",cursor:"pointer",width:"20px",height:"20px",onClick:function(){return t("notifications")},icon:e.contents.email?"notification_shortcut_enabled":"notification_shortcut_disabled",tooltip:"Email Notifications","data-ga":"left-sidebar::click-user-notification-settings::global-view",iconColor:"iconColor"})},_=(0,r.memo)(S),F=i.default.div.withConfig({displayName:"spaces__Separator",componentId:"sc-8de8pq-0"})(["height:1px;width:",";background:",";"],(0,o.getSizeBy)(3),(0,o.getColor)("border")),P=(0,i.default)(o.Button).withConfig({displayName:"spaces__DocButton",componentId:"sc-8de8pq-1"})(["&&{> .button-icon{width:20px;height:20px;}}"]),B=(0,i.default)(o.Button).withConfig({displayName:"spaces__ExpandButton",componentId:"sc-8de8pq-2"})(["&&{> .button-icon{width:6px;height:9px;}}"]),T={onClickOut:function(){return(0,k.L)("header-help","click-out-modal","global-view")},onCloseClick:function(){return(0,k.L)("header-help","click-close","global-view")},onOpenIssueClick:function(){return(0,k.L)("header-help","click-\u03bfpen-issue","global-view")},onContributeClick:function(){return(0,k.L)("header-help","click-contribute","global-view")},onOpenBugClick:function(){return(0,k.L)("header-help","click-bug","global-view")},onSupportClick:function(){return(0,k.L)("header-help","click-support","global-view")},onVisitDocumentClick:function(){return(0,k.L)("header-help","click-visit-doc","global-view")},onGoToDemoClick:function(){return(0,k.L)("header-help","click-go-to-demo","global-view")}},L=function(e){var t=e.spacePanelCollapsed,n=e.toggleSpacePanel,c=(0,v.Iw)(),i=(0,v.th)(),g=(0,d.Z)(),h=(0,a.Z)(g,4),E=h[0],k=h[2],y=h[3],Z=(0,s.s0)(),S=(0,r.useCallback)((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).slug;return Z("/spaces/".concat(e))}),[]);return r.createElement(o.Flex,{background:"sideBarMini","data-testid":"workspaceBar",padding:[3,2],column:!0,alignItems:"center",gap:6,height:"100vh",justifyContent:"between"},r.createElement(o.Flex,{column:!0,"data-testid":"workspaceBar-spaces-list",gap:4,alignItems:"center",overflow:"hidden"},r.createElement(m.Z,{"data-testid":"workspaceBar-netdataLogo"}),t&&r.createElement(B,{"data-testid":"workspaceBar-expandButton",onClick:n,icon:"chevron_right_s",neutral:!0,flavour:"borderless",small:!0}),r.createElement(o.Flex,{column:!0,"data-testid":"workspaceBar-spacesList",gap:4,overflow:{vertical:"auto"}},c.map((function(e){return r.createElement(p.Z,{testIdPrefix:"workspaceBar-space",key:e,spaceId:e,active:e===i})}))),r.createElement(I.Z,{permission:"user:CreateSpace"},r.createElement(F,{"data-testid":"workspaceBar-separator"})),r.createElement(f.Z,{content:"Create a new Space",align:"right"},r.createElement(C.Z,{permission:"user:CreateSpace",ifForbidden:"hide",icon:"plus",onClick:k,"data-testid":"workspaceBar-addSpace-button"}))),r.createElement(o.Flex,{column:!0,"data-testid":"workspaceBar-actionsList",gap:4,alignItems:"center"},r.createElement(o.Flex,{column:!0,gap:1,alignItems:"center"},r.createElement(I.Z,{permission:"user:ChangeSpaceRoomNotifications"},r.createElement(_,null)),r.createElement(o.Documentation,(0,l.Z)({app:"cloud",demoUrl:u.Z.demoUrl},T),(function(e){return r.createElement(f.Z,{content:"Read documentation, engage with the community and let us know about any feature requests or bugs",align:"right"},r.createElement(P,{neutral:!0,flavour:"borderless",icon:"question",onClick:e,"data-ga":"header-help::click-help::global-view","data-testid":"documentation-button",title:"Need help?"}))})),r.createElement(b,null)),r.createElement(x.Z,null)),E&&r.createElement(w.Z,{onClose:y,onDone:S}))},N=n(15861),R=n(64687),z=n.n(R),O=(n(9170),n(66992),n(41539),n(88674),n(34668),n(78783),n(33948),n(69826),n(31672),n(2490),n(59461),n(26699),n(32023),n(92222),n(57327),n(88449),n(59849),n(74916),n(77601),n(15306),n(27856)),W=n(26398),D=n(18761),j=n(97945),A=n(7335),U=n(25819),q=n(67622),H=n(61458),M=n(92501),V=n(37689),G=n(64358),Q=(0,i.default)(o.Icon).withConfig({displayName:"styled__TrashIcon",componentId:"sc-1hr9uxl-0"})(["&:hover{fill:",";opacity:0.6;}"],(0,o.getColor)("textFocus")),Y=(0,i.default)(o.TextSmall).withConfig({displayName:"styled__UrlWrapper",componentId:"sc-1hr9uxl-1"})(["overflow-wrap:anywhere;"]),$=(0,i.default)(o.Icon).withConfig({displayName:"styled__StyledIcon",componentId:"sc-1hr9uxl-2"})(["transform:",";"],(function(e){return e.right?"rotate(0)":"rotate(180deg)"})),J=function(){var e=(0,N.Z)(z().mark((function e(t,n){var a,r,o,c,l,i,s;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.spaces,r=void 0===a?[]:a,o=n.id,e.next=3,(0,D.kq)(o);case 3:if(c=e.sent,!(l=c.data).length){e.next=9;break}return e.next=8,Promise.any(r.map((function(e){return W.Z.get((0,G.W)({spaceId:e.id})).then((function(t){var n=t.data;return Promise.any(n.map((function(t){return(0,U.Fz)({roomId:t.id,spaceId:e.id}).then((function(n){var a=n.data.find((function(e){var t=e.id;return l.includes(t)}));if(!a)throw new Error("can't find matching node");return"".concat(window.envSettings.cloudUrl,"/spaces/").concat(e.slug,"/rooms/").concat(t.slug,"/nodes/").concat(a.id)}))})))}))}))).then((function(e){return e})).catch((function(){}));case 8:i=e.sent;case 9:if(!i){e.next=11;break}return e.abrupt("return",i);case 11:if(!(s=t.filter((function(e){return!/netdata\.cloud\//.test(e)}))).length){e.next=16;break}return e.next=15,Promise.any(s.map((function(e){var t=/^https?:\/\//.test(e)?e:"http://".concat(e);return t=t.replace(/\/+$/,""),W.Z.get("".concat(t,"/api/v1/registry?action=hello")).then((function(){return t}))}))).then((function(e){return e})).catch((function(){}));case 15:return e.abrupt("return",e.sent);case 16:return e.abrupt("return");case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(e){/https?:\/\//.test(e)||(e="http://".concat(e)),location.replace(e)},X=function(e){var t=e.id,n=e.selectedId,c=e.setSelectedId,l=(0,j.bV)(t,"name"),i=(0,d.Z)(),s=(0,a.Z)(i,4),u=s[0],m=s[2],p=s[3],g=(0,A.lL)(),f=(0,j.bV)(t,"urls"),h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.openList,o=n.setSelectedId,c=(0,r.useRef)(),l=(0,v.GM)("ids"),i=(0,v.Zu)(l);return(0,r.useCallback)((0,N.Z)(z().mark((function n(){return z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o(e),c.current){n.next=5;break}return n.next=4,J(t,{spaces:i,id:e});case 4:c.current=n.sent;case 5:if(o(),c.current){n.next=8;break}return n.abrupt("return",a());case 8:K(c.current);case 9:case"end":return n.stop()}}),n)}))),[t,i])}(t,f,{openList:m,setSelectedId:c}),E=(0,r.useCallback)((function(){u?p():h()}),[u,h]),b=n===t;return r.createElement(r.Fragment,null,r.createElement(q.Z,{onClick:E,isSidebar:!0,padding:[1,2,1,4],testid:"visitedNodes-".concat(l),disabled:!!n&&!b,selected:b,loading:b,iconColor:"menuItem",textColor:"menuItem",Wrapper:o.TextSmall},l),u&&r.createElement(o.Flex,{column:!0,margin:[1,3],padding:[2],border:{side:"all",color:"separator"},round:2},r.createElement(o.Text,{textAlign:"center"},"We couldn't connect to any of your instances, here is the list:"),f.map((function(e){return r.createElement(q.Z,{key:e,onClick:function(){return K(e)},isSidebar:!0,testid:"visitedNodes-node-".concat(e),actions:r.createElement(o.Flex,{flex:!1,margin:[0,0,0,1]},r.createElement(Q,{name:"trashcan",size:"small",color:"menuItem",onClick:function(n){n.stopPropagation(),g(t,e)},width:"16px",height:"16px"})),padding:[2],Wrapper:Y,iconColor:"menuItem",textColor:"menuItem"},e)}))))},ee=function(){var e=(0,A.z2)(),t=(0,d.Z)(e.length>0),n=(0,a.Z)(t,2),c=n[0],l=n[1];(0,r.useEffect)((function(){c||l()}),[e.length]);var i=(0,r.useState)(""),s=(0,a.Z)(i,2),u=s[0],m=s[1],p=(0,A.H3)(u),g=(0,r.useCallback)((0,O.D)(300,(function(e){return m(e.target.value)})),[]),f=(0,r.useState)(),h=(0,a.Z)(f,2),E=h[0],v=h[1];return e.length?r.createElement(H.Z,{isOpen:c,toggleOpen:l,label:r.createElement(o.Flex,{padding:[1,0],flex:!0,justifyContent:"between",alignItems:"center"},r.createElement(o.Flex,{alignItems:"center",gap:2},r.createElement(o.Icon,{name:"node_hollow",color:"menuItem",width:"14px",height:"14px"}),r.createElement(o.TextSmall,{color:"menuItem"},"Visited Nodes")),r.createElement($,{right:!c,name:"chevron_down",size:"small",color:"menuItem"})),headerTestId:"visitedNodes"},e.length>3&&r.createElement(o.Flex,{padding:[1,2,2,4]},r.createElement(V.Z,{"data-testid":"search-visited-nodes-input",onChange:g,size:"tiny"})),r.createElement(o.Flex,{padding:[0,0,2],column:!0},p.length?p.map((function(e){return r.createElement(X,{key:e,id:e,selectedId:E,setSelectedId:v})})):r.createElement(o.Text,{padding:[3,5]},"No nodes match your search"))):null},te=(0,r.memo)((function(){return r.createElement(M.ZP,{fallback:""},r.createElement(r.Suspense,{fallback:""},r.createElement(ee,null)))})),ne=n(56662),ae=n(55917),re=n(33335),oe=function(e){return function(t){var n=(0,v.th)();return r.createElement(e,(0,l.Z)({},t,{key:n}))}},ce=n(59636),le={isSidebar:!0,padding:[1,2,1,4],textColor:"menuItem",Wrapper:o.TextSmall},ie=oe((function(){var e=(0,re.gI)("room:Create"),t=(0,re.gI)("room:Read"),n=(0,d.Z)(t),c=(0,a.Z)(n,2),l=c[0],i=c[1],s=(0,d.Z)(!1),u=(0,a.Z)(s,4),m=u[0],p=u[2],g=u[3],h=(0,r.useCallback)((function(t){t.stopPropagation(),e&&p()}),[e]);return r.createElement(r.Fragment,null,r.createElement(H.Z,{"data-testid":"workspaceRooms-menuList",disabled:!t,headerTestId:"workspaceRooms-warRooms",isOpen:l,label:r.createElement(o.Flex,{padding:[1,0],margin:[0,0,1,0],flex:!0,justifyContent:"between",alignItems:"center",height:"24px"},r.createElement(o.Flex,{alignItems:"center",gap:2},r.createElement(o.Icon,{name:"space_new",color:"menuItem",width:"14px",height:"14px"}),r.createElement(o.TextSmall,{color:"menuItem"},"Rooms")),r.createElement(o.Flex,{alignItems:"center",gap:2},r.createElement(f.Z,{content:"Create a new room",align:"right"},r.createElement(C.Z,{permission:"room:Create",tiny:!0,icon:"plus",onClick:h,"data-testid":"workspaceRooms-addWarRoom-button"})),r.createElement(ae.x,{right:!l,name:"chevron_down",size:"small",color:"menuItem"}))),toggleOpen:i},r.createElement(o.Flex,{column:!0,"data-testid":"workspaceRooms-warRoomsList",padding:[0,0,1]},r.createElement(ce.Z,le))),m&&r.createElement(ne.U,{onClose:g,isSubmodal:!1}))})),se=n(61152),ue=(0,i.default)(o.Flex).attrs({alignItems:"center",justifyContent:"center",width:10,height:4,round:.5,background:"sideBarMini"}).withConfig({displayName:"styled__AdminPill",componentId:"sc-1ps23b1-0"})(["opacity:0;",":hover &{opacity:1;}"],q.z),de=function(e){var t=e.children,n=e.onToggle;return r.createElement(o.Flex,{justifyContent:"between",alignItems:"center"},r.createElement(o.Flex,{alignItems:"center"},t),r.createElement(o.Button,{onClick:n,icon:"chevron_left",neutral:!0,flavour:"hollow",small:!0}))},me=n(5795),pe=(0,i.default)(H.g).attrs({padding:[2],color:"textLite"}).withConfig({displayName:"spacePanel__ListHeader",componentId:"sc-1275zgk-0"})([""]),ge=function(e){return r.createElement(o.Flex,(0,l.Z)({alignItems:"center",gap:2},e),r.createElement(ue,null,r.createElement(o.TextFemto,{strong:!0,color:"text"},"ADMIN")),r.createElement(o.Flex,{opacity:"medium"},r.createElement(o.Icon,{name:"padlock",size:"small",width:"18px",height:"18px",color:"text"})))},fe=function(e){var t=e.toggleSpacePanel,n=(0,v.OS)(),c=(0,d.Z)(),l=(0,a.Z)(c,4),i=l[0],s=l[2],u=l[3],m=(0,se.Z)("manageInvitations"),p=(0,a.Z)(m,2)[1],g=(0,v.Q6)();return r.createElement(r.Fragment,null,i&&r.createElement(me.Z,{onClose:u}),r.createElement(H.Z,{"data-testid":"spacesPanel",isOpen:!0,label:r.createElement(de,{onToggle:t},n.name),headerTestId:"spacesPanel-activeSpaceHeader",Header:pe},r.createElement(o.Flex,{column:!0,padding:[2,0,1],"data-testid":"spacesPanel-menuList"},g?null:r.createElement(r.Fragment,null,r.createElement(E.Z,{permission:"node:Create"},(function(e){return r.createElement(q.Z,{actions:e?null:r.createElement(ge,{"data-testid":"adminWarning-notAdmin"}),disabled:!e,onClick:s,testid:"spacesPanel-claimNodes",icon:"nodes_hollow",iconWidth:"14px",iconHeight:"14px",padding:[1,2],gap:2,isSidebar:!0,textColor:"menuItem",iconColor:"menuItem",Wrapper:o.TextSmall},"Connect Nodes")})),r.createElement(E.Z,{permission:"space:InviteUser"},(function(e){return r.createElement(q.Z,{actions:e?null:r.createElement(ge,{"data-testid":"adminWarning-cannotInvite"}),disabled:!e,onClick:p,testid:"spacesPanel-inviteUsers",icon:"user",iconWidth:"14px",iconHeight:"14px",padding:[1,2],gap:2,isSidebar:!0,textColor:"menuItem",iconColor:"menuItem",Wrapper:o.TextSmall},"Invite Users")}))))))},he=function(e){var t=e.spacePanelCollapsed,n=e.toggleSpacePanel;return r.createElement(o.Collapsible,{width:56,background:"sideBar",open:!t,direction:"horizontal"},r.createElement(o.Flex,{flex:!0,width:56,column:!0,overflow:{vertical:"hidden"},padding:[2,0]},r.createElement(fe,{toggleSpacePanel:n}),r.createElement(o.Flex,{overflow:{vertical:"auto"},flex:!0,column:!0},r.createElement(ie,null),r.createElement(te,null))))},Ee=(0,r.memo)((function(){var e=(0,c.k)("spacePanelCollapsed"),t=(0,a.Z)(e,2),n=t[0],l=t[1],i=(0,r.useCallback)((function(){return l(!n)}),[n]);return(0,r.useLayoutEffect)((function(){var e=setTimeout((function(){return window.dispatchEvent(new Event("resize"))}),400);return function(){return clearTimeout(e)}}),[n]),r.createElement(o.Flex,null,r.createElement(L,{spacePanelCollapsed:n,toggleSpacePanel:i}),r.createElement(he,{spacePanelCollapsed:n,toggleSpacePanel:i}))}))},11060:function(e,t,n){var a=n(1702),r=Error,o=a("".replace),c=String(r("zxcasd").stack),l=/\n\s*at [^:]*:[^\n]*/,i=l.test(c);e.exports=function(e,t){if(i&&"string"==typeof e&&!r.prepareStackTrace)for(;t--;)e=o(e,l,"");return e}},5392:function(e,t,n){var a=n(68880),r=n(11060),o=n(22914),c=Error.captureStackTrace;e.exports=function(e,t,n,l){o&&(c?c(e,t):a(e,"stack",r(n,l)))}},22914:function(e,t,n){var a=n(47293),r=n(79114);e.exports=!a((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",r(1,7)),7!==e.stack)}))},58340:function(e,t,n){var a=n(70111),r=n(68880);e.exports=function(e,t){a(t)&&"cause"in t&&r(e,"cause",t.cause)}},56277:function(e,t,n){var a=n(41340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:a(e)}},56967:function(e,t,n){"use strict";var a=n(82109),r=n(47976),o=n(79518),c=n(27674),l=n(99920),i=n(70030),s=n(68880),u=n(79114),d=n(58340),m=n(5392),p=n(20408),g=n(56277),f=n(5112)("toStringTag"),h=Error,E=[].push,v=function(e,t){var n,a=r(b,this);c?n=c(h(),a?o(this):b):(n=a?this:i(b),s(n,f,"Error")),void 0!==t&&s(n,"message",g(t)),m(n,v,n.stack,1),arguments.length>2&&d(n,arguments[2]);var l=[];return p(e,E,{that:l}),s(n,"errors",l),n};c?c(v,h):l(v,h,{name:!0});var b=v.prototype=i(h.prototype,{constructor:u(1,v),message:u(1,""),name:u(1,"AggregateError")});a({global:!0,constructor:!0,arity:2},{AggregateError:v})},9170:function(e,t,n){n(56967)},34668:function(e,t,n){"use strict";var a=n(82109),r=n(46916),o=n(19662),c=n(35005),l=n(78523),i=n(12534),s=n(20408),u=n(80612),d="No one promise resolved";a({target:"Promise",stat:!0,forced:u},{any:function(e){var t=this,n=c("AggregateError"),a=l.f(t),u=a.resolve,m=a.reject,p=i((function(){var a=o(t.resolve),c=[],l=0,i=1,p=!1;s(e,(function(e){var o=l++,s=!1;i++,r(a,t,e).then((function(e){s||p||(p=!0,u(e))}),(function(e){s||p||(s=!0,c[o]=e,--i||m(new n(c,d)))}))})),--i||m(new n(c,d))}));return p.error&&m(p.value),a.promise}})}}]);