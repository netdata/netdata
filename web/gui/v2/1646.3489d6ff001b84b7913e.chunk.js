!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2a5f6b50-67c1-4b2a-a976-f22746599825",e._sentryDebugIdIdentifier="sentry-dbid-2a5f6b50-67c1-4b2a-a976-f22746599825")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"88436fbafc09e78c93a02e0e20b45f14591b26fd"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[1646],{80959:function(e,t,n){var r=n(87462),a=n(45987),o=n(67294),l=n(59978),i=["message","title","footer"];t.Z=function(e){var t=e.message,n=e.title,c=e.footer,u=(0,a.Z)(e,i),s=(null===u||void 0===u?void 0:u["data-testid"])||"functionError";return o.createElement(l.Flex,(0,r.Z)({alignItems:"center",column:!0,"data-testid":s,flex:!0,gap:3,justifyContent:"center",padding:[0,20]},u),o.createElement(l.H3,{"data-testid":"".concat(s,"-title")},n),o.createElement(l.TextBig,{color:"textDescription","data-testid":"".concat(s,"-message")},t),c)}},91646:function(e,t,n){n.r(t),n.d(t,{default:function(){return la}});n(47941),n(82526),n(57327),n(41539),n(88449),n(2490),n(59849),n(38880),n(15581),n(34514),n(54747),n(49337),n(33321),n(69070);var r=n(29439),a=n(4942),o=n(67294),l=n(91268),i=n(96929),c=n(4822),u=n(3322),s=n(71181),d=n(36560),f=n(78266),m=n(45987),p=n(87462),v=(n(69826),n(31672),n(59461),n(41817),n(59978)),g=n(97945),h=n(74059),y=n(49254),b=n(89250),E=function(e){var t=(0,c.XT)(e),n=(0,b.TH)().state;return(0,o.useEffect)((function(){null!==n&&void 0!==n&&n.nodeId&&t([n.nodeId])}),[]),null===n||void 0===n?void 0:n.nodeId},x=n(91008),O=n(80959),w=["paramsKey"],C=function(e){var t=e.paramsKey,n=(0,m.Z)(e,w),r=(null===n||void 0===n?void 0:n["data-testid"])||"capableNodesError",a=(0,c.c6)(t),l=(0,g.iy)(null===a||void 0===a?void 0:a[0],"name");return o.createElement(v.Flex,(0,p.Z)({alignItems:"center",flex:!0,gap:8,justifyContent:"center"},n,{"data-testid":r}),o.createElement(v.Icon,{"data-testid":"".concat(r,"-icon"),height:"230px",name:"unreachableNode",width:"230px"}),o.createElement(O.Z,{"data-testid":"".concat(r,"-details"),gap:2,title:l?"".concat(l," is not configured for Functions"):"Your nodes are not configured for Functions",message:o.createElement(o.Fragment,null,"Learn how to configure your nodes"," ",o.createElement(x.Z,{Component:v.TextBig,"data-ga":"functions-capable-nodes-error::click-docs-link::functions-view","data-testid":"".concat(r,"-docsLink"),href:"https://learn.netdata.cloud/docs/nightly/operations/run-time-troubleshooting-with-functions#prerequisites",target:"_blank",rel:"noopener noreferrer"},"to support functions")),width:{max:"fit-content"}}))},P=n(64599),Z=n(70842),j=n(39469),k=(n(21249),n(57640),n(9924),n(92222),n(36657)),I=n(91128),T=n(82351),S=n(46667),D=(n(26699),n(32023),n(62554)),K=n(71893),F=(0,K.default)(v.Flex).attrs({alignItems:"center",border:{side:"bottom",color:"borderSecondary"},padding:[2]}).withConfig({displayName:"styled__MenuItem",componentId:"sc-1bb2nho-0"})(["&:last-child{border:none;}"]),N=(0,K.default)(v.TextInput).withConfig({displayName:"styled__TextInput",componentId:"sc-1bb2nho-1"})(['margin:0 10px;min-width:unset;width:45px;> div{margin:0;}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}input[type="number"]{-moz-appearance:textfield;}']),L=["onClose","targetRef","paramsKey"];function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=o.createElement(v.Flex,{column:!0,width:{max:"500px"},gap:1},o.createElement(v.TextSmall,{color:"bright"},"Full data queries will always provide all the available facets with counters for your search, which depending on the size of the query could result in poor performance."),o.createElement(v.TextSmall,{color:"bright"},"i.e. Querying logs for multiple days with multitudes of entries."),o.createElement(v.TextSmall,{color:"bright"},"With this toggle \u201coff\u201d (default), queries will slice the data and will lower performance hit on your servers.")),R=function(e){var t=e.onClose,n=e.targetRef,a=e.paramsKey,l=(0,m.Z)(e,L),i=(null===l||void 0===l?void 0:l["data-testid"])||"config",s=(0,u.ZQ)(M({key:"acceptedParams"},a)).includes("slice"),d=(0,c.D0)("slice",M({defaultValue:!0,flavour:"bool"},a)),f=(0,r.Z)(d,2),p=f[0],g=f[1],h=(0,S.Z)(!p),y=(0,r.Z)(h,2),b=y[0],E=y[1];(0,D.Z)((function(){!!p===!!b&&g(!b)}),200,[p,b]);var x=(0,u.ZQ)(M({key:"updateEvery"},a)),O=(0,c.D0)("pollingInterval",M(M({},a),{},{flavour:"int",defaultValue:x})),w=(0,r.Z)(O,2),C=w[0],P=w[1],Z=(0,o.useState)(C),j=(0,r.Z)(Z,2),k=j[0],I=j[1];return(0,D.Z)((function(){C!==k&&P(k)}),400,[C,k]),n.current?o.createElement(v.Drop,{align:{top:"bottom",right:"right"},animation:!0,background:"dropdown",close:t,column:!0,"data-testid":i,margin:[.5,0,0],onClickOutside:t,onEsc:t,round:1,target:n.current,width:58},s&&o.createElement(F,{"data-testid":"".concat(i,"-slice-data"),justifyContent:"between"},o.createElement(v.Flex,{gap:1,alignItems:"center"},o.createElement(v.Text,{color:"menuItem","data-testid":"".concat(i,"-slice-data-label")},"Full data queries (slow)"),o.createElement(T.Z,{plain:!0,content:A,isBasic:!0,allowHoverOnTooltip:!0,stretch:"align"},o.createElement(v.Icon,{name:"information",color:"textDescription",width:"14px",height:"14px"}))),o.createElement(v.Toggle,{colored:!0,checked:b,"data-ga":"functions-config::auto-slice-data-switch::functions-view::".concat(b?"enabled":"disabled"),"data-testid":"".concat(i,"-slice-data-switch"),onChange:E})),o.createElement(F,{"data-testid":"".concat(i,"-pollingInterval")},o.createElement(v.Text,{color:"menuItem","data-testid":"".concat(i,"-pollingInterval-label")},"Refresh every"),o.createElement(N,{"data-ga":"functions-config::polling-interval::functions-view","data-testid":"".concat(i,"-pollingInterval-input"),min:1,onChange:function(e){var t=+e.target.value;t>0&&I(t)},size:"tiny",type:"number",value:k}),o.createElement(v.Text,{color:"menuItem","data-testid":"".concat(i,"-pollingInterval-units")},"seconds"))):null},_=n(89405),B=function(e){var t=e.paramsKey,n=(0,u.ZQ)(t).updatedAt,r=(0,_.rA)(),a=r.localeTimeString,l=r.localeDateString;return o.createElement(v.TextMicro,{color:"textLite"},"Last updated: ",l(n,{long:!0})," ",a(n,{secs:!0}))},V=n(2379),H=K.default.div.withConfig({displayName:"reload__IconsContainer",componentId:"sc-gd414j-0"})(["position:relative;"]),q=(0,K.default)(v.Icon).withConfig({displayName:"reload__SmallIcon",componentId:"sc-gd414j-1"})(["position:absolute;top:3px;left:3px;"]),W=(0,K.keyframes)(["from{transform:rotate(0deg);}to{transform:rotate(359deg);}"]),U=(0,K.default)(v.IconButton).withConfig({displayName:"reload__AnimatedIcon",componentId:"sc-gd414j-2"})(["&& svg{animation:",";}animation:rotation 2s infinite linear;"],(function(e){return e.animate?(0,K.css)([""," 3s linear infinite"],W):""})),Q=function(e){var t=e.onRefresh,n=e.onCancel,a=e.dataGa,l=e.testId,i=e.loading,c=(0,V.Cd)(),u=(0,o.useState)(!1),s=(0,r.Z)(u,2),d=s[0],f=s[1],m=(0,o.useState)(!1),p=(0,r.Z)(m,2),g=p[0],h=p[1];return(0,o.useEffect)((function(){if(!i)return f(!1),void h(!1);var e=setTimeout((function(){return f(!0)}),500),t=setTimeout((function(){return h(!0)}),3e3);return function(){clearTimeout(e),clearTimeout(t)}}),[i]),o.createElement(v.Flex,{alignItems:"center",gap:1},o.createElement(H,null,o.createElement(q,{name:c?"playSolid":"pauseSolid",width:"6px",height:"6px",color:c?"primary":"text"}),o.createElement(U,{animate:d,"data-testid":"".concat(l,"-refreshNowBtn"),"data-ga":"".concat(a,"::click-refresh-now::functions-view"),flavour:"hollow",icon:"refresh",onClick:function(){return t({merge:!1})},disabled:c,padding:[1]})),o.createElement(v.Collapsible,{open:g,direction:"horizontal",duration:300},o.createElement(v.IconButton,{"data-testid":"".concat(l,"-cancelBtn"),"data-ga":"".concat(a,"::click-cancel::functions-view"),flavour:"hollow",warning:!0,icon:"x",onClick:function(){return n()},padding:[1]})))},X=["onRefresh","onCancel","paramsKey"],G={fn:{dataGa:"functions-header",hasConfig:!0,Title:function(e){var t=e.name,n=e.fn,r=void 0===n?"Processes":n;return t?"".concat(r," on ").concat(t):r},titleTooltip:o.createElement(v.Flex,{width:{max:"500px"},alignItems:"center",flexWrap:!0},o.createElement(v.Text,{color:"bright"},"Netdata Functions enable detailed low-level monitoring at the edge. Use this tab to execute functions on your node and see the results immediately."," "),o.createElement(x.Z,{Component:v.Text,"data-ga":"functions-header::click-docs-link::functions-view","data-testid":"docsLink",href:"https://learn.netdata.cloud/docs/nightly/concepts/netdata-functions",target:"_blank",rel:"noopener noreferrer"},"Read the Netdata functions documentation to learn more"),o.createElement(v.Text,{color:"bright"},"."))},feed:{dataGa:"feed-header",Title:function(){return"Events"},titleTooltip:o.createElement(v.Flex,{width:{max:"500px"},alignItems:"center",flexWrap:!0},o.createElement(v.Text,{color:"bright"},"Troubleshoot faster with Netdata Events. Access topology and alert events across the war room in one convenient location."," "),o.createElement(x.Z,{Component:v.Text,"data-ga":"feed-header::click-docs-link::feed-view","data-testid":"docsLink",href:"https://learn.netdata.cloud/docs/nightly/concepts/events-feed",target:"_blank",rel:"noopener noreferrer"},"Read the Events feed documentation to learn more"),o.createElement(v.Text,{color:"bright"},"."))}},J=(0,o.memo)((function(e){var t=e.onRefresh,n=e.onCancel,a=e.paramsKey,l=(0,m.Z)(e,X),i=(null===l||void 0===l?void 0:l["data-testid"])||"functionsHeader",s=(0,o.useRef)(),d=G[a.extraKey],f=d.dataGa,p=d.hasConfig,h=d.titleTooltip,y=d.Title,b=(0,S.Z)(!1),E=(0,r.Z)(b,4),x=E[0],O=E[1],w=E[3],C=(0,c.c6)(a),P=(0,g.iy)(null===C||void 0===C?void 0:C[0],"name"),Z=(0,u.ZQ)(a),j=Z.loaded,k=Z.data,I=Z.totalSize,D=Z.loading,K=Z.loadingMore,F=(0,u.CE)(a);return o.createElement(v.Flex,{"data-testid":i,justifyContent:"between"},o.createElement(v.Flex,{column:!0},o.createElement(v.Flex,{alignItems:"center","data-testid":"".concat(i,"-title"),gap:1},o.createElement(v.H3,null,o.createElement(y,{name:P,fn:F})),o.createElement(T.Z,{plain:!0,content:h,isBasic:!0,allowHoverOnTooltip:!0,stretch:"align"},o.createElement(v.Icon,{name:"information",color:"textDescription",width:"16px",height:"16px"}))),o.createElement(v.Flex,{alignItems:"center",gap:2},j&&o.createElement(v.TextSmall,{color:"textLite",strong:!0},"(",I||(null===k||void 0===k?void 0:k.length)||0," results)"),o.createElement(B,{paramsKey:a}))),o.createElement(v.Flex,{gap:1,alignItems:"start"},o.createElement(Q,{testId:i,dataGa:f,onRefresh:t,onCancel:n,loading:D||K}),p&&o.createElement(v.IconButton,{"data-testid":"".concat(i,"-ConfigBtn"),"data-ga":"".concat(f,"::click-config::functions-view"),flavour:"hollow",icon:"chevron_down",ref:s,onClick:O,padding:[1]}),x&&o.createElement(R,{"data-testid":"".concat(i,"-Config"),isOpen:x,onClose:w,targetRef:s,paramsKey:a})))}),(function(e,t){return e.onRefresh===t.onRefresh})),Y=(n(39714),n(74916),n(15306),n(34553),n(41331)),$=n(93433),ee=(n(85827),n(25387),n(72608),n(88386),n(55436)),te=["icon","iconRotate","children","onClick","strong","testId","textAlign","wrap","truncate","rowOptions"],ne=["description","tooltipValue","value","valueOptions","wrap","rowOptions"];function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=(0,K.default)(v.Icon).attrs({color:"text",height:"16px",width:"16px"}).withConfig({displayName:"value__Arrow",componentId:"sc-1apuy8c-0"})(["rotate:",";transition:all 200ms ease;"],(function(e){return e.rotate})),le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=t.decimalPoints,a=void 0===r?0:r,l=t.units,i=t.defaultValue,c=(0,ee.Ol)();return(0,o.useMemo)((function(){switch(n){case"number":return(0,ee.Jw)(e,{decimalPoints:a,units:l,defaultValue:i});case"duration":return(0,ee.kl)(e,{defaultValue:i});case"datetime":return c(e,{defaultValue:i});case"datetime_usec":return c(e,{defaultValue:i,usec:!0});default:return null===e||"undefined"===typeof e?i:e}}),[e,l])},ie=function(e){var t=e.description,n=void 0===t?"":t,r=e.value,a=e.units,l=void 0===a?"":a;return n?o.createElement(v.Flex,{column:!0,gap:1,justifyContent:"center"},o.createElement(v.TextSmall,{color:"bright"},n),o.createElement(v.TextSmall,{strong:!0,color:"bright",textAlign:"center"},r," ",l)):"".concat(r," ").concat(l)},ce=(0,K.default)(v.Flex).withConfig({displayName:"value__ValueContainer",componentId:"sc-1apuy8c-1"})(["",""],(function(e){return e.overflowWrap&&"* {\n      overflow-wrap: anywhere;\n      white-space: pre-wrap;\n      word-break: break-word;\n    }\n  "})),ue={debug:{strong:!0,color:"textLite"},normal:{},notice:{strong:!0},warning:{strong:!0,color:"warningText"},critical:{strong:!0,color:"errorText"}},se=(0,K.default)(v.Text).attrs((function(e){return ae(ae({},e),ue[e.severity]||ue.normal)})).withConfig({displayName:"value__ValueLabel",componentId:"sc-1apuy8c-2"})([""]),de=(0,o.forwardRef)((function(e,t){var n=e.icon,r=e.iconRotate,a=e.children,l=e.onClick,i=e.strong,c=e.testId,u=void 0===c?"cell":c,s=e.textAlign,d=e.wrap,f=e.truncate,v=void 0===f||f,g=e.rowOptions,h=(0,m.Z)(e,te);return o.createElement(ce,(0,p.Z)({cursor:l?"pointer":"inherit",gap:.5,onClick:l,overflow:"hidden",ref:t,width:{max:"100%"},flexWrap:!0,overflowWrap:d},h),n&&o.createElement(oe,{name:n,rotate:r}),o.createElement(se,(0,p.Z)({"data-testid":"".concat(u,"-value"),strong:i,textAlign:s,truncate:!d&&v,whiteSpace:d?"wrap":"nowrap"},g),a))})),fe=function(e){var t=e.description,n=void 0===t?"":t,r=e.tooltipValue,a=e.value,l=e.valueOptions,i=void 0===l?{}:l,c=e.wrap,u=e.rowOptions,s=(0,m.Z)(e,ne),d=le(a,i);return o.createElement(T.Z,(0,p.Z)({content:!c&&o.createElement(ie,{description:n,value:r||a,units:i.units}),"data-testid":"valueComponent",isBasic:!0},s),o.createElement(de,{wrap:c,rowOptions:u},d))},me=["value"],pe=function(e){var t=e.value,n=(0,m.Z)(e,me);return o.createElement(fe,(0,p.Z)({value:t.value},n))},ve=["description","maxValue","strong","type","value","valueOptions","wrap"],ge=function(e){var t=e.description,n=void 0===t?"":t,r=e.maxValue,a=e.strong,l=e.type,i=e.value,c=e.valueOptions,u=void 0===c?{}:c,s=e.wrap,d=(0,m.Z)(e,ve),f=100*i/r,p="bar"===l,g=(null===d||void 0===d?void 0:d["data-testid"])||"progressValue",h=le(i,u);return o.createElement(T.Z,{content:o.createElement(ie,{description:n,value:i,units:u.units}),isBasic:!0,stretch:"align"},o.createElement(v.Flex,{column:!0,"data-testid":g,gap:1,flexWrap:s,flex:!0},!p&&o.createElement(de,{strong:a,testid:g},h),o.createElement(v.ProgressBar,{background:"borderSecondary",border:"none",color:["green","netdata"],containerWidth:"100%","data-testid":"".concat(g,"-bar"),height:2,width:"".concat(f,"%")})))},he=function(e){var t=e.value,n=e.wrap;return t=Array.isArray(t)?t:[t],o.createElement(v.Flex,{alignItems:"center",gap:1,flexWrap:n},t.map((function(e,t){return o.createElement(v.Pill,{border:{side:"all",color:"neutralPillColor"},color:"neutralPillColor","data-testid":"pillValueComponent",key:"".concat(e,"-").concat(t)},e)})))},ye=n(37518),be=n(20686),Ee=["color"],xe=function(e){var t=e.hide,n=e.user;return t||!n?null:o.createElement(o.Fragment,null,o.createElement(v.Text,null,"by"),o.createElement(Oe,null,n))},Oe=function(e){var t=e.color,n=void 0===t?"text":t,r=(0,m.Z)(e,Ee);return o.createElement(v.Text,(0,p.Z)({color:n,strong:!0},r))},we=function(e){var t=e.type,n=e.text,r=void 0===n?t:n,a=e.hollow,l=a?"".concat(t.toLowerCase(),"AlertsTable"):t.toLowerCase();return o.createElement(be.Z,(0,p.Z)({type:l},a&&{border:!1}),r)},Ce=(0,K.default)(v.Flex).attrs({gap:1,flexWrap:!0,alignItems:"center"}).withConfig({displayName:"components__Container",componentId:"sc-b5rk6g-0"})([""]),Pe=n(79655),Ze=["chart","hosts","alert"];function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie={CLEAR:0,WARNING:1,CRITICAL:2,UNINITIALIZED:3,UNDEFINED:4},Te=function(e){var t=e.chart,n=e.nodeId,r=e.nodeName,a=e.spaceSlug,l=e.roomSlug,i=e.alert,c=(0,b.s0)(),u=(0,g.m3)(n),s=(0,o.useCallback)((function(){i?c(u,{state:{alertId:null===i||void 0===i?void 0:i.id}}):c(u)}),[u,i]),d="/spaces/".concat(a,"/rooms/").concat(l,"/alerts/").concat(null===i||void 0===i?void 0:i.id),f=i.current,m=i.name,p=i.previous;if("ERROR"===f.status)return o.createElement(Ce,null,o.createElement(v.Text,null,"For the alert"),o.createElement(x.Z,{Component:Oe,as:Pe.rU,to:d},m),o.createElement(v.Text,null,"for"),o.createElement(x.Z,{Component:Oe,onClick:s},t.name),o.createElement(v.Text,null,"on"),o.createElement(x.Z,{Component:Oe,onClick:s},r),o.createElement(v.Text,null,"we couldn't calculate the current value"),o.createElement(T.Z,{align:"bottom",content:"Please check your alert configuration"},o.createElement(v.Icon,{color:"nodeBadgeColor",size:"small",name:"information"})));if("REMOVED"===f.status)return o.createElement(Ce,null,o.createElement(v.Text,null,"Alert"),o.createElement(x.Z,{Component:Oe,as:Pe.rU,to:d},m),o.createElement(v.Text,null,"for"),o.createElement(x.Z,{Component:Oe,onClick:s},t.name),o.createElement(v.Text,null,"on"),o.createElement(x.Z,{Component:Oe,onClick:s},r),o.createElement(v.Text,null,"is no longer available, state can't be assessed"));var h=Ie[f.status]===Ie.CLEAR;return o.createElement(Ce,null,o.createElement(v.Text,null,"Alert"),o.createElement(x.Z,{Component:Oe,as:Pe.rU,to:d},m),o.createElement(v.Text,null,"for"),o.createElement(x.Z,{Component:Oe,onClick:s},t.name),o.createElement(v.Text,null,"on"),o.createElement(x.Z,{Component:Oe,onClick:s},r),h?o.createElement(v.Text,null,"recovered"):o.createElement(o.Fragment,null,o.createElement(v.Text,{strong:!0},Ie[p.status]===Ie.CRITICAL?"was demoted":Ie[p.status]===Ie.WARNING?"escalated":Ie[f.status]===Ie.UNDEFINED?"transitioned":"was raised"),o.createElement(v.Text,null,"to"),o.createElement(we,{type:f.status}),Ie[f.status]===Ie.UNDEFINED&&o.createElement(v.Text,null,"state")),o.createElement(v.Text,null,"with value"),o.createElement(we,{type:f.status,text:f.value_string,hollow:!0,padding:[0]}))},Se=function(e){var t=e.id,n=e.name,r=(0,h.uk)(),a=(0,ye.tE)(t,"slug"),l="/spaces/".concat(r,"/rooms/").concat(a,"/home");return o.createElement(x.Z,{Component:Oe,as:Pe.rU,to:l},n)},De=function(e){var t=e.rooms;return t.map((function(e,n){return o.createElement(o.Fragment,{key:e.id},n>0&&(n<t.length-1?", ":" and "),o.createElement(Se,e))}))},Ke=function(e){var t=e.rooms;if(!t.length)return null;var n=t.length>1?"rooms":"room";return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"on ",n),o.createElement(De,{rooms:t}))},Fe=function(e){var t=e.contexts;t.map((function(e,n){return o.createElement(o.Fragment,{key:e},n>0&&(n<t.length-1?", ":" and "),o.createElement(Oe,null,e))}))},Ne=function(e){var t=e.contexts;if(!t.length)return null;var n=t.length>1?"contexts":"context";return o.createElement(v.Text,null,"on ",n," ",o.createElement(Fe,{contexts:t}))},Le={month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",long:!1,dateStyle:void 0},ze=function(e){var t=e.start,n=e.end,r=(0,_.rA)().localeDateString;if(!t||!n)return null;var a=r(new Date(t),Le),l=r(new Date(n),Le);return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"(scheduled ",a," - ",l,")"))},Me={"silencing-rule-created":"created","silencing-rule-deleted":"deleted","silencing-rule-changed":"changed"},Ae=function(e){var t=e.rooms,n=void 0===t?[]:t,r=e.contexts,a=void 0===r?[]:r;return n.length||a.length?o.createElement(o.Fragment,null,!!n.length&&o.createElement(Ke,{rooms:n}),!!n.length&&!!a.length&&o.createElement(v.Text,null,"and ",o.createElement(Ne,{contexts:a}))):null},Re=function(e){var t,n=e.action,r=e.notification,a=e.user,l=e.room,i=e.context,c=((null===r||void 0===r||null===(t=r.silencing)||void 0===t?void 0:t.rule)||[])[0],u=null===a||void 0===a?void 0:a.name,s=(null===i||void 0===i?void 0:i.name)||[];return o.createElement(Ce,null,o.createElement(v.Text,null,"Silencing rule"),o.createElement(Oe,null,c.name),o.createElement(Ae,{rooms:l,contexts:s}),o.createElement(v.Text,null,"was ",Me[n]),o.createElement(xe,{user:u}),o.createElement(ze,c))},_e=n(62200),Be=function(e,t){var n,r;return(null===(n=e.target)||void 0===n?void 0:n[t])||(null===(r=e.target)||void 0===r?void 0:r.id)||e[t]||e.id},Ve=function(e){return Array.isArray(e)?e[0].name||e[0].id:e.name||e.id},He=function(e){var t=e.statistics,n=(null===t||void 0===t?void 0:t.nodes)||{},r=n.live,a=n.stale,l=n.removed,i=n.total;return o.createElement(Ce,null,o.createElement(v.Text,null,"Space statistics. Nodes:"),o.createElement(v.Text,{color:_e.WV.live.statusTextColor},r," live"),o.createElement(v.Text,null,","),o.createElement(v.Text,{color:_e.WV.stale.statusTextColor},a," stale"),o.createElement(v.Text,null,","),o.createElement(v.Text,{color:_e.WV.offline.statusTextColor},l," removed"),o.createElement(v.Text,null,","),o.createElement(v.Text,{strong:!0},i," total"))},qe=(n(69810),n(86035),n(6973)),We=function(e){var t=e.stateColor,n=e.state;return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"became"),o.createElement(Oe,{color:t},n))},Ue=function(e){var t=e.stateColor,n=e.state;return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"was"),o.createElement(Oe,{color:t},n))},Qe={"node-created":Ue,"node-state-live":We,"node-state-stale":We,"node-state-offline":We,"node-removed":Ue,"node-deleted":Ue,"node-restored":Ue,default:Ue},Xe=function(e){var t,n=e.action,r=e.hosts,a=(void 0===r?[]:r)[0],l=a.id,i=a.name,c=(0,b.s0)(),u=(0,g.m3)(l),s=(0,o.useCallback)((function(){return c(u)}),[u]),d=Qe[n],f=n.split("-").at(-1),m=null===(t=qe.B[f])||void 0===t?void 0:t.statusTextColor;return o.createElement(Ce,null,o.createElement(v.Text,null,"Node"),o.createElement(x.Z,{Component:Oe,onClick:s},i),o.createElement(d,{stateColor:m,state:f}))},Ge=function(e){var t=e.room,n=(0,ye.Hm)("untouchable");return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"was added to",n?" room":""),o.createElement(Oe,null,n?Ve(t):"this room"))},Je=function(e){var t=e.room,n=(0,ye.Hm)("untouchable");return o.createElement(o.Fragment,null,o.createElement(v.Text,null,"was removed from",n?" room":""),o.createElement(Oe,null,n?Ve(t):"this room"))},Ye={"room-created":function(){return o.createElement(v.Text,null,"was created")},"room-deleted":function(){return o.createElement(v.Text,null,"was deleted")},"room-node-added":Ge,"room-node-removed":Je,"room-user-added":Ge,"room-user-removed":Je},$e=function(e){var t,n=e.action,r=e.hosts,a=void 0===r?[]:r,l=e.Netdata,i=e.user,c=Ye[n],u=null===(t=a[0])||void 0===t?void 0:t.name;return o.createElement(Ce,null,o.createElement(v.Text,null,"Node"),o.createElement(Oe,null,u),o.createElement(c,{room:l.room}),o.createElement(xe,{user:null===i||void 0===i?void 0:i.name}))},et=function(e){var t=e.action,n=e.Netdata,r=e.user,a=Ye[t];return o.createElement(Ce,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Be(r,"name")),o.createElement(a,{room:n.room}),o.createElement(xe,{hide:!r.target,user:r.name}))},tt=function(e){var t=e.action,n=e.Netdata,r=e.user,a=Ye[t];return o.createElement(Ce,null,o.createElement(v.Text,null,"Room"),o.createElement(Oe,null,Ve(n.room)),o.createElement(a,null),o.createElement(xe,{user:r.name}))},nt={"alert-node-transition":function(e){var t=e.chart,n=e.hosts,r=e.alert,a=(0,m.Z)(e,Ze);return n.map((function(e,n){var l=e.id,i=e.name,c=ke(ke({},r),{},{name:r.name[n]},r.current?{current:ke(ke({},r.current),r.current.status?{status:r.current.status[n]||r.current.status[0]}:{})}:{});return o.createElement(Te,(0,p.Z)({key:l,chart:t,nodeId:l,nodeName:i,alert:c},a))}))},"node-created":Xe,"node-state-live":Xe,"node-state-stale":Xe,"node-state-offline":Xe,"node-removed":Xe,"node-deleted":Xe,"node-restored":Xe,"agent-connected":function(e){var t=e.agentId;return o.createElement(Ce,null,o.createElement(v.Text,null,"Agent with claim ID"),o.createElement(Oe,null,t)," ",o.createElement(v.Text,null,"has connected to Netdata"))},"agent-connection-initialized":function(e){var t=e.agentId;e.reason;return o.createElement(Ce,null,o.createElement(v.Text,null,"Agent with claim ID"),o.createElement(Oe,null,t),o.createElement(v.Text,null,"has initialized its connection to Netdata"))},"agent-disconnected":function(e){var t=e.agentId,n=e.reason;return o.createElement(Ce,null,o.createElement(v.Text,null,"Agent with claim ID"),o.createElement(Oe,null,t),o.createElement(v.Text,null,"has disconnected from Netdata with reason: \u201c",n,"\u201d"))},"agent-authenticated":function(e){var t=e.agentId;return o.createElement(Ce,null,o.createElement(v.Text,null,"Agent with claim ID"),o.createElement(Oe,null,t),o.createElement(v.Text,null,"has successfully authenticated"))},"agent-authentication-failed":function(e){var t=e.agentId;return o.createElement(Ce,null,o.createElement(v.Text,null,"Agent with claim ID"),o.createElement(Oe,null,t),o.createElement(v.Text,null,"has failed to authenticate"))},"room-created":tt,"room-deleted":tt,"room-node-added":$e,"room-node-removed":$e,"room-user-added":et,"room-user-removed":et,"space-created":function(e){var t=e.Netdata,n=e.user;return o.createElement(Ce,null,o.createElement(v.Text,null,"Space"),o.createElement(Oe,null,t.space.name||t.space.id),o.createElement(v.Text,null,"was created"),o.createElement(xe,{user:n.name}))},"space-statistics":He,"space-user-added":function(e){var t=e.Netdata,n=e.user,r=((null===t||void 0===t?void 0:t.inviter)||{}).name;return o.createElement(Ce,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Be(n,"name")),o.createElement(v.Text,null,"was added to this space"),r&&o.createElement(o.Fragment,null,o.createElement(v.Text,null,"by invite of"),o.createElement(Oe,null,r)))},"space-user-changed":function(e){var t,n=e.user;if(!(null===(t=n.changes)||void 0===t||!t.roles)&&1===Object.keys(n.changes).length){var r=n.changes.roles.length>1,a=n.changes.roles.join(", ");return o.createElement(Ce,null,o.createElement(v.Text,null,"User ",r?"roles":"role"," for"),o.createElement(Oe,null,Be(n,"name")),o.createElement(v.Text,null,r?"were":"was"," changed to"),o.createElement(Oe,null,a),o.createElement(xe,{hide:!n.target,user:n.name}))}return o.createElement(Ce,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Be(n,"name")),o.createElement(v.Text,null,"was modified"))},"space-user-invited":function(e){var t=e.user;return o.createElement(Ce,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Be(t,"email")),o.createElement(v.Text,null,"was invited to this space"),o.createElement(xe,{user:t.name}))},"space-user-removed":function(e){var t=e.user,n=(t.target||{}).name;return o.createElement(Ce,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Be(t,"name")),o.createElement(v.Text,null,"was removed from this space"),n&&o.createElement(xe,{user:t.name}))},"space-user-uninvited":function(e){var t=e.event,n=e.user;return"space-invite-expired"===t.reason?o.createElement(Ce,null,o.createElement(v.Text,null,"The invite for"),o.createElement(Oe,null,Be(n,"email")),o.createElement(v.Text,null,"to this space has expired")):o.createElement(Ce,null,o.createElement(v.Text,null,"User"),o.createElement(Oe,null,Be(n,"email")),o.createElement(v.Text,null,"was uninvited from this space"),o.createElement(xe,{hide:!n.target,user:n.name}))},"silencing-rule-created":Re,"silencing-rule-deleted":Re,"silencing-rule-changed":Re},rt=function(e){var t=e.data,n=t.source,r=n.action,a=n.roomId,l=n.space,i=(0,h.vu)(l.id,"slug"),c=(0,ye.tE)(a,"slug"),u=nt[r];return u?o.createElement(u,(0,p.Z)({},t.source,{spaceSlug:i,roomSlug:c})):o.createElement(Ce,null,o.createElement(v.Text,null,"Event")," ",o.createElement(v.Text,{strong:!0},r)," ",o.createElement(v.Text,null,"emitted"))},at=["value"],ot=["visualization","type","value","data"],lt={bar:ge,"bar-with-integer":ge,duration:ge,pill:he,number:fe,string:fe,feedTemplate:rt,datetime:function(e){var t=e.value,n=(0,m.Z)(e,at),r=new Date(t),a=(0,_.rA)(),l=a.localeTimeString,i=a.localeDateString,c=isNaN(r.valueOf())?"Missing date & time":"".concat(i(r,{long:!1})," ").concat(l(r,{secs:!0}));return o.createElement(fe,(0,p.Z)({value:c},n))},value:fe},it={bar:ge,pill:he,value:fe,richValue:pe,feedTemplate:rt,rowOptions:"skip"},ct=function(e){var t=e.visualization,n=e.type,r=e.value,a=e.data,l=(0,m.Z)(e,ot),i=it[t]||lt[n]||it.value;return i===it.rowOptions?null:o.createElement(i,(0,p.Z)({value:r,type:n,rowOptions:a.rowOptions,data:a},l))},ut=["displayName","name","sortable","sticky","units","max","dummy","cellSize","valueOptions","summary","type","visualization","wrap"];function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft={sum:"sum",min:"min",max:"max",extent:"extent",mean:"mean",median:"median",unique:"unique",uniqueCount:"uniqueCount",count:"count"},mt=n(71002),pt=(n(64211),n(41874),n(69720),n(54678),n(4480));function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ht={query:function(e,t,n){var a=n.columnVisibility,o=(null===t||void 0===t?void 0:t.toLowerCase())||"";return Object.entries(e).some((function(e){var t=(0,r.Z)(e,2),n=t[0],l=t[1];return!!a[n]&&(null!==l&&"undefined"!==typeof l&&(Array.isArray(l)?l.some((function(e){return String(e).toLowerCase().includes(o)})):("object"===(0,mt.Z)(l)&&Object.keys(l).some((function(e){return String(l[e]).toLowerCase().includes(o)})),String(l).toLowerCase().includes(o))))}))}},yt=function(e){return function(t,n){return!e.some((function(e){var a=(0,r.Z)(e,2),o=a[0],l=a[1];return ht[o]?!ht[o](t,l,n):!function(e){return function(t,n,r){var a;if("range"===(null===(a=r.columns[e])||void 0===a?void 0:a.filter)&&null!==n&&void 0!==n&&n.length)return t[e]>=n[0]&&t[e]<=n[1];if(!Array.isArray(n)||!n.length)return!0;var o=t[e];return"number"===typeof o?(o=parseFloat(o),n.some((function(e){return parseFloat(e)===o}))):n.includes(o)}}(o)(t,l,n)}))}},bt=(0,pt.CG)({key:"fnDataFiltered",get:function(e){var t=e.extraKey,n=e.roomId,r=e.omit,a=void 0===r?[]:r,o=e.keepAll,l=e.fn;return function(e){var r,i=e.get,s=i((0,u.tD)({id:l})),d=s.columnVisibility,f=s.data,m=s.columns;if(s.aggregations||!f)return f||[];var p=i((0,c.dz)({key:n,extraKey:t})),v=Object.keys(p).reduce((function(e,t){return a.includes(t)||e.push([t,p[t]]),e}),[]);if(!v.length)return f;var g=yt(v),h=null===(r=i((0,c.dz)({key:n,extraKey:"".concat(l,"Settings"),flavour:"val"})))||void 0===r?void 0:r.sortColumn;return o?f.map((function(e){return g(e,{columnVisibility:d,columns:m,sortColumn:h})?e:gt(gt({},e),{},{hidden:!0})})):f.filter((function(e){return g(e,{columnVisibility:d,columns:m,sortColumn:h})}))}},cachePolicy_UNSTABLE:{eviction:"most-recent"}}),Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.extraKey,n=void 0===t?"fn":t,r=e.omit,a=void 0===r?[]:r,o=e.keepAll,l=void 0!==o&&o,i=(0,u.CE)({extraKey:n}),c=(0,ye.UL)();return(0,pt.sJ)(bt({extraKey:"".concat(i||n,"Filters"),fn:i,roomId:c,omit:a,keepAll:l}))},xt=n(70459);function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ct,Pt=(0,K.default)(v.Table).withConfig({displayName:"table__StyledTable",componentId:"sc-1n2s6gl-0"})(['*{font-family:"Courier New",Courier,monospace;letter-spacing:0.09px;}']),Zt=(0,o.memo)(Pt,(function(e,t){return(0,Y.ZP)(e,t,{keep:["columnVisibility","data","fnQuery","sortBy","virtualizeOptions"]})})),jt={bulkActionsStyles:{padding:[0,0,2]},searchStyles:{inputContainerStyles:{height:"32px",border:{side:"all",size:"1px",color:"inputBg"},background:"inputBg",round:!0,padding:[1,2],_hover:{border:{side:"all",size:"1px",color:"borderSecondary"}}}}},kt=(0,o.memo)((0,o.forwardRef)((function(e,t){var n=e["data-testid"],a=e.paramsKey,l=e.refetch,i=e.onShowInfo,c=(0,u.ZQ)(a),s=c.columns,d=c.sortedColumns,f=c.sortColumn,p=c.sortDirection,g=c.columnVisibility,h=c.pinnedColumns,y=c.loadingMore,b=c.retentionWarning,E=c.groupByColumns,x=c.pagination,O=c.merged,w=c.latestDirection,C=c.hasDirection,P=c.tail,Z=c.aggregations,j=(0,o.useRef)();j.current=c;var k=(0,o.useState)(""),I=(0,r.Z)(k,2),T=I[0],S=I[1],D=Et(a),K="feed"===a.extraKey,F=function(e,t,n){var r=n.groupBy;return(0,o.useMemo)((function(){return e.reduce((function(e,n){var a=t[n];if(!a)return e;var l=a.displayName,i=a.name,c=a.sortable,u=(a.sticky,a.units),s=a.max,d=a.dummy,f=a.cellSize,p=a.valueOptions,g=a.summary,h=a.type,y=a.visualization,b=a.wrap,E=void 0!==b&&b,x=(0,m.Z)(a,ut);return d?e:[].concat((0,$.Z)(e),[dt(dt(dt({},x),{},{displayName:l,id:l,accessorFn:function(e){return e[n]},cell:function(e){var t=e.getValue,n=e.row,a=e.cell.getIsAggregated(),l=t(),c=a&&(ft[g]===ft.count||ft[g]===ft.uniqueCount||!ft[g]);return o.createElement(ct,{description:i,data:n.original,maxValue:s,padding:n.depth>0?[0,0,0,2.5*n.depth]:[0],strong:a,value:c?"".concat(l,"x"):l,tooltipValue:c?"".concat(l," ").concat(1===l?"item":"items"," associated with ").concat(r," grouping"):l,valueOptions:c?dt(dt({},p),{},{transform:"none"}):p,type:h,visualization:y,wrap:E})},header:o.createElement(v.Flex,{column:!0},o.createElement(v.TextSmall,{strong:!0},l),u&&o.createElement(v.TextMicro,null,"(",u,")")),enableSorting:c,aggregationFn:ft[g]||ft.count},f),{},{meta:dt({},l!==i?{tooltip:i}:{})})])}),[])}),[e,t,r])}(d,s,wt({},K?{}:{groupBy:T})),N=(0,u.fg)(wt({key:"sortColumn",flavour:"val"},a)),L=(0,r.Z)(N,2),z=L[0],M=L[1],A=(0,u.fg)(wt({key:"sortDirection",flavour:"val"},a)),R=(0,r.Z)(A,2),_=R[0],B=R[1],V=(0,u.kU)(wt({key:"query",flavour:"val"},a)),H=(0,r.Z)(V,2),q=H[0],W=H[1],U=(0,u.I_)(wt({key:"columnVisibility"},a)),Q=(0,o.useMemo)((function(){return z||f?[{id:z||f,desc:"descending"===(_||p)}]:[]}),[f,p,z,_]),X=(0,o.useCallback)((function(e){var t=(0,r.Z)(e,1)[0],n=(null===t||void 0===t?void 0:t.id)||n,a=null!==t&&void 0!==t&&t.desc?p||"descending":"ascending";M(n),B(a)}),[z,f,p]),G=(0,o.useMemo)((function(){return{left:h}}),[h]),J=(0,o.useRef)();J.current=y;var Y=(0,xt.Z)().pause,ee=(0,o.useCallback)((function(e){var t=e.data;return i({data:t.json||t,columns:s})}),[]),te=(0,o.useRef)(),ne=(0,o.useRef)(),re=(0,o.useRef)(),ae=(0,o.useRef)(0),oe=(0,o.useRef)(0),le=(0,o.useRef)(O);(0,o.useLayoutEffect)((function(){var e;O&&!P||null===(e=ne.current)||void 0===e||!e.scrollOffset||ne.current.scrollToOffset(0)}),[O,P]),(0,o.useLayoutEffect)((function(){clearTimeout(Ct),y||(Ct=setTimeout((function(){le.current=!1}),200))}),[y]),(0,o.useLayoutEffect)((function(){if(x&&C&&!P){if(oe.current!==D.length&&"forward"===w){var e,t,n=ne.current.scrollOffset,r=0,a=ne.current.getMeasurements().find((function(e,t){return 0!==t&&(r+=e.size)>n}));if(!a)a=null===(t=ne.current.getMeasurements())||void 0===t?void 0:t[1];if(!a)return;re.current=wt(wt({},D[D.length-oe.current+(a.index-1)]),{},{headerSize:(null===(e=ne.current.getMeasurements())||void 0===e||null===(e=e[0])||void 0===e?void 0:e.size)||0}),O&&!P?ae.current=0:re.current=null}!function e(){if(re.current&&ae.current<5){var t,n;ae.current=ae.current+1,oe.current=D.length;var r=null===(t=re.current)||void 0===t||null===(t=t[x.column])||void 0===t||null===(n=t.toString)||void 0===n?void 0:n.call(t),a=ne.current.getMeasurements().find((function(e){return e.key.replace(/-\d+?/,"")===r}));if(!a){var o=D.findIndex((function(e){return e[x.column]==r}));a=ne.current.getMeasurements()[o+1]}return a?(ne.current.scrollToOffset(a.start-re.current.headerSize),void setTimeout(e)):(ae.current=5,void(re.current=null))}ae.current=5,re.current=null}(),oe.current=D.length}}),[D]);var ie=(0,o.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"backward";P||J.current||j.current.hasDirection&&(le.current||("backward"!==e||j.current.hasNextPage||j.current.anchorBefore)&&("forward"!==e||j.current.hasPrevPage||j.current.anchorAfter)&&("forward"===e&&(le.current=!0),l({anchor:"backward"===e?j.current.anchorBefore:j.current.anchorAfter,merge:!0,direction:e,data_only:!0})))}),[P]),ce=(0,o.useCallback)((function(e){var t;return"undefined"!==typeof(null===(t=j.current.data[e])||void 0===t?void 0:t[null===x||void 0===x?void 0:x.column])?"".concat(j.current.data[e][null===x||void 0===x?void 0:x.column],"-").concat(e):e}),[]),ue=(0,o.useCallback)((function(){return j.current.hasNextPage}),[]),se=(0,o.useCallback)((function(){return j.current.hasPrevPage}),[]),de=(0,o.useCallback)((function(e){e.scrollOffset>10&&Y()}),[Y]),fe=(0,o.useMemo)((function(){return{overscan:15,getHasNextPage:ue,getHasPrevPage:se,loading:y,loadMore:ie,warning:b,virtualRef:ne,getItemKey:ce,onVirtualChange:de}}),[D,y]),me=(0,u.$0)();return o.createElement(Zt,{groupByColumns:E,onClickRow:ee,columnPinning:G,columnVisibility:g,data:D,dataColumns:F,dataGa:"functions",enableColumnPinning:!!h.length,enableColumnVisibility:!K,enableCustomSearch:!!Z,enableResizing:!0,enableSorting:!K,globalFilter:K?null:q,onColumnVisibilityChange:U,onSearch:K?null:W,onGroupByChange:K?null:S,onSortingChange:K?null:X,sortBy:Q,testPrefix:n,virtualizeOptions:fe,meta:jt,ref:t,tableRef:te,onHoverCell:(0,o.useCallback)((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).row;e||me(null),me(e)}),[])})})),(function(){return!0})),It=kt,Tt=(n(88674),n(17727),n(18446)),St=n.n(Tt),Dt=n(37176),Kt=n(44536),Ft=n(18997),Nt=n(4808),Lt=n(81732),zt=(n(47042),n(26833),n(2707),n(50361)),Mt=n.n(zt),At=n(38609),Rt=["updateEvery","merge","groupBy","items","direction","dataOnly","showIds","facetsDelta","histogramDelta"];function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vt=90,Ht=110,qt=160,Wt=500,Ut={minSize:Vt,maxSize:Wt},Qt=50,Xt={uniqueKey:{size:Vt,downLimit:Vt-Qt,upLimit:Vt+Qt},bar:{size:Vt,downLimit:Vt-Qt,upLimit:Vt+Qt},value:{size:Ht,downLimit:Ht-Qt,upLimit:Ht+Qt},feedTemplate:{size:Wt,downLimit:Wt-Qt,upLimit:Wt+Qt,minSize:230,maxSize:5e3,fullWidth:!0},pill:{size:Ht,downLimit:Ht-Qt,upLimit:Ht+Qt},timestamp:{size:qt,downLimit:qt-Qt,upLimit:qt+Qt},datetime:{size:qt,downLimit:qt-Qt,upLimit:qt+Qt}},Gt=function(e,t){e((function(e){var n,r,a,o=t.updateEvery,l=t.merge,i=t.groupBy,c=t.items,u=t.direction,s=t.dataOnly,d=t.showIds,f=void 0===d?!1!==e.showIds:d,p=t.facetsDelta,v=t.histogramDelta,g=(0,m.Z)(t,Rt),h=s?Mt()(e.columns):Mt()(l?(0,At.Z)(t.columns,e.columns):t.columns),y=Bt({},e.sortedColumnsObj)||{},b=g.hasHistory||e.hasHistory,E=s?e.pagination:t.pagination,x=Object.keys(h).reduce((function(t,n){var r=h[n],a=r.id,o=r.name,l=r.sticky,i=r.visible,c=r.index;return r.displayName=f?a||n:o,t.columnVisibility[r.displayName]=e.loaded?!!t.columnVisibility[r.displayName]:i,l&&!e.loaded&&t.pinnedColumns.push(r.displayName),r.valueOptions=r.valueOptions||{},r.cellSize=function(e){var t=e.visualization,n=e.type,r=e.fullWidth,a=e.uniqueKey;return r?Xt.feedTemplate:Bt(Bt({},Ut),(a&&"timestamp"!==n?Xt.uniqueKey:Xt[n])||Xt[t]||{minSize:Vt,maxSize:Wt,size:Ht,downLimit:Ht-Qt,upLimit:Ht+Qt})}(r),r.sortable=r.sortable&&!(null!==E&&void 0!==E&&E.enabled),"undefined"!==typeof c&&(y[y[c]!==n?r.displayName:c]=n),t}),{columnVisibility:Bt({},e.columnVisibility||{}),pinnedColumns:(0,$.Z)(e.pinnedColumns||[])}),O=l?Mt()(e.aggregations):t.aggregations||Mt()(e.aggregations);p&&p.forEach((function(e){var t=O.find((function(t){return t.id===e.id}));t?e.options.forEach((function(e){if(!isNaN(e.count)){var n=t.options.find((function(t){return t.id===e.id}));n?n.count=(n.count||0)+((null===e||void 0===e?void 0:e.count)||0):t.options.push(e)}})):O.push(e)}));var w=l?Mt()(e.histogram):t.histogram||Mt()(e.histogram);if(v){var C;if((null===(C=e.histogram)||void 0===C?void 0:C.id)!==(null===v||void 0===v?void 0:v.id))return;var P=w.chart.result.labels;if((0,Y.ZP)(P,v.chart.result.labels))w.chart.result.data=[].concat((0,$.Z)(w.chart.result.data),(0,$.Z)(v.chart.result.data));else{var Z=function(e,t){var n=t.reduce((function(t,n,r){var a=e.findIndex((function(e){return n===e}));return-1===a||(t[a]=r),t}),{});return function(t){return e.reduce((function(e,r,a){return"undefined"===typeof n[a]?e.push([0,0,0]):e.push(t[n[a]]),e}),[])}}(P,v.chart.result.labels);v.chart.result.data.forEach((function(e){return w.chart.result.data.push(Z(e))}))}}var j={};Object.keys(t.columns).forEach((function(e){j[t.columns[e].index]=e}));var k=t.data.map((function(e){return e.reduce((function(e,t,n){var r=j[n];return r?(e[r]=t,e):e}),{})})),I=l?"forward"===u?k.concat(e.data||[]):(e.data||[]).concat(k):k;g.tail&&I.slice(0,500);var T=null!==E&&void 0!==E&&E.enabled&&E.column&&Array.isArray(I)&&null!==(n=I[I.length-1])&&void 0!==n&&n[E.column]&&null!==(r=I[0])&&void 0!==r&&r[E.column]?{anchorBefore:I[I.length-1][E.column],anchorAfter:I[0][E.column],anchorUnits:E.units}:{},S=t.defaultSortColumn||e.defaultSortColumn,D=(t.acceptedParams||e.acceptedParams).includes("direction"),K=Bt(Bt(Bt(Bt(Bt(Bt(Bt({},e||Lt.Zn.table),g),{},{groupByColumns:i||e.groupByColumns,data:I,columns:l?(0,At.Z)(e.columns,h):h,updatedAt:(new Date).getTime(),updateEvery:o||e.updateEvery,sortedColumns:Object.values(y),sortColumn:null===(a=h[S])||void 0===a?void 0:a.displayName,sortDirection:S?h[S].sort:"descending"},x),T),{},{totalSize:g.totalSize||(null===c||void 0===c?void 0:c.matched)||(!s||"forward"===u||k.length||t.partial)&&e.totalSize||0},!!b&&{hasNextPage:!(s&&"forward"!==u&&!k.length&&!t.partial)&&(!c||0!==c.after)}),!!b&&D&&{hasPrevPage:!(s&&"forward"===u&&!k.length&&!t.partial)&&(!(!g.tail&&c)||0!==c.before)}),{},{offset:l?null:(null===c||void 0===c?void 0:c.before)||null,loading:!1,loaded:!0,showIds:f,merged:l,latestDirection:u,hasHistory:b,hasDirection:D,aggregations:O,histogram:w,sortedColumnsObj:y});return y=null,w=null,O=null,T=null,x=null,h=null,j=null,k=null,I=null,K}))},Jt=["data","type","updateEvery"];function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var en=["checkPeriod"];function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rn={table:Gt,log:Gt,default:function(e,t){var n=t.data,r=t.type,a=t.updateEvery,o=(0,m.Z)(t,Jt);e($t($t($t({},Lt.Zn.default),o),{},{data:n,updateEvery:a,type:r,loading:!1,loaded:!0}))}},an={default:{fetch:Nt.Ru,isEnabled:function(e){var t=e.nodeIds,n=e.fn,r=e.after;return!(null===t||void 0===t||!t.length)&&!!n&&!!r}},feed:{fetch:Nt.bj,isEnabled:function(e){var t=e.roomId,n=e.fn;return!!t&&!!n}}},on=function(e){var t=(0,c.by)(),n=t.after,r=t.before,a=t.highlight;return(0,o.useMemo)((function(){return n>0?[function(){return{after:n,before:r}},n,r,e||a.before]:[function(){var e=Date.now();return{after:e+1e3*n,before:e}},n,r,e||a.before]}),[n,r,null===a||void 0===a?void 0:a.before,e])},ln=n(5429);function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sn={default:{fetch:Nt.HZ,isEnabled:function(e){var t=e.nodeIds,n=e.fn;return!(null===t||void 0===t||!t.length)&&!!n}},feed:{fetch:function(){return Promise.resolve({data:{type:"table"}})},isEnabled:function(){return!0}}},dn=function(e,t,n){var a=(0,h.th)(),o=(0,g.Xw)(e),l=(0,j.zp)(),i=(0,r.Z)(l,1)[0].loading,c=sn[t]||sn.default,s=c.fetch,d=c.isEnabled,f=(0,u.mO)(n),m=(0,r.Z)(f,2),p=m[0].infoLoaded,v=m[1],y=on(),b=(0,r.Z)(y,1)[0],E=(0,u.KO)(n.extraKey).loaded;(0,ln.Z)((function(){return{enabled:!p&&E&&!i&&d({nodeIds:e,fn:t}),fetch:function(){return s({spaceId:a,cloudNodeIds:o,nodeIds:e,fn:t,after:b().after,before:b().before})},onFail:function(e){var t,n;null===(t=e)||void 0===t||null===(t=t.response)||void 0===t||!t.status||400!==e.response.status&&304!==e.response.status?(null!==(n=e)&&void 0!==n&&null!==(n=n.response)&&void 0!==n&&n.data&&(e=e.response.data),v({error:e})):v((function(e){return un(un({},e),{},{infoLoaded:!0})}))},onSuccess:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v((function(t){return un(un(un({},Lt.Zn[e.type]||Lt.Zn.default),t),{},{hasHistory:e.hasHistory||!1,acceptedParams:e.acceptedParams||[],requiredParams:e.requiredParams||[],type:e.type,help:e.help,infoLoaded:!0})}))}}}),[p,E,t,i,!(null!==e&&void 0!==e&&e.length),null===e||void 0===e?void 0:e[0]])},fn=n(92501),mn=n(26495),pn=n(36337),vn=n(19221),gn=n(23148),hn=(0,pt.cn)({key:"chartjs",default:{navigation:"pan"}});function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var En=(0,pt.CG)({key:"feedChartState",get:function(e){var t=e.key;return function(e){var n=(0,e.get)(hn);return t?n[t]:n}},set:function(e){var t=e.key;return function(e,n){(0,e.set)(hn,(function(e){return t?bn(bn({},e),{},(0,a.Z)({},t,n)):bn(bn({},e),n)}))}}}),xn=function(e){return(0,pt.sJ)(En({key:e}))},On=function(e){return(0,pt.Zl)(En({key:e}))},wn=n(85672),Cn=(n(41203),(0,K.default)(v.Button).attrs((function(e){return{flavour:"borderless",iconColor:e.active?"textDescription":"border",iconSize:"small",padding:[.5],small:!0}})).withConfig({displayName:"styled__Button",componentId:"sc-8s0lqd-0"})(["&&{background-color:",";height:20px;width:20px;&:hover{background-color:",";.button-icon__color{fill:",";}}}"],(function(e){var t=e.theme;return e.active?(0,v.getColor)("borderSecondary")({theme:t}):"initial"}),(function(e){var t=e.theme;return(0,v.getColor)("borderSecondary")({theme:t})}),(function(e){var t=e.theme;return(0,v.getColor)("textDescription")({theme:t})}))),Pn=(0,K.default)(v.Flex).attrs({padding:[.5],gap:1,round:!0,border:{side:"all",color:"borderSecondary"}}).withConfig({displayName:"styled__Container",componentId:"sc-8s0lqd-1"})(["position:absolute;top:18px;right:8px;background:",";&:hover{background:",";}"],(0,v.getRgbColor)("elementBackground",.5),(0,v.getColor)("elementBackground")),Zn=["testIdPrefix"],jn=(0,o.forwardRef)((function(e,t){var n,a=e.testIdPrefix,l=(0,m.Z)(e,Zn),i=(0,c.I0)(),u=(0,r.Z)(i,2),s=u[0],d=s.after,f=s.before,v=u[1],g=[xn(n="navigation"),On(n)],h=(0,r.Z)(g,2),y=h[0],b=h[1],E=(0,o.useCallback)((function(e){var t=d,n=f;if(d<0){var r=Date.now();t=r+1e3*d,n=r}var a=e*Math.round((n-t)/4);v({after:t+a,before:n-a})}),[d,f]),x=d>0&&Math.abs(f-d)<2e3||-1===d;return o.createElement(Pn,(0,p.Z)({"data-testid":"chartToolbox","data-track":"chart-toolbox::hover-chart::".concat(a),"data-toolbox":"true",ref:t},l),o.createElement(Cn,{active:"pan"===y,"data-testid":"chartToolbox-pan","data-track":"chart-toolbox::pan-click::".concat(a),icon:"panTool",onClick:function(){return b("pan")},title:"Pan"}),o.createElement(Cn,{active:"highlight"===y,"data-testid":"chartToolbox-highlight","data-track":"chart-toolbox::highlight-click::".concat(a),icon:"highlightArea",onClick:function(){return b("highlight")},title:"Highlight"}),o.createElement(Cn,{active:"zoom"===y,"data-testid":"chartToolbox-zoom","data-track":"chart-toolbox::zoom-click::".concat(a),disabled:x,icon:"dragHorizontal",onClick:function(){b("zoom")},title:"Select and zoom"}),o.createElement(Cn,{"data-testid":"chartToolbox-zoomIn","data-track":"chart-toolbox::zoom-in-click::".concat(a),disabled:x,icon:"zoomIn",onClick:function(){E(1)},title:"Zoom in"}),o.createElement(Cn,{"data-testid":"chartToolbox-zoomOut","data-track":"chart-toolbox::zoom-out-click::".concat(a),icon:"zoomOut",onClick:function(){E(-1)},title:"Zoom out"}),o.createElement(Cn,{"data-testid":"chartToolbox-zoomReset","data-track":"chart-toolbox::zoom-reset-click::".concat(a),disabled:-900===d&&0===f,icon:"zoomReset",onClick:function(){v({after:-900,before:0})},title:"Zoom reset"}))}));function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tn={after:null,before:null};gn.kL.register(pn.Z,gn.vn,gn.ZL,gn.uw,gn.De,gn.f$,gn.FB,gn.u,vn.ZP);var Sn=function(e){var t,n=e.paramsKey,a=e.testIdPrefix,l=(0,o.useRef)(),i=(0,o.useContext)(K.ThemeContext),s=(0,c.I0)(),d=(0,r.Z)(s,2),f=d[0],m=d[1],p=(0,o.useState)([]),g=(0,r.Z)(p,2),h=g[0],y=g[1],b=(0,o.useState)(Tn),E=(0,r.Z)(b,2),x=E[0],O=E[1],w=(0,o.useState)(!1),C=(0,r.Z)(w,2),P=C[0],Z=C[1],j=(0,o.useState)(!1),k=(0,r.Z)(j,2),I=k[0],T=k[1],D=(0,o.useState)([]),F=(0,r.Z)(D,2),N=F[0],L=F[1],z=(0,o.useState)(null),M=(0,r.Z)(z,2),A=M[0],R=M[1],B=(0,o.useState)("second"),V=(0,r.Z)(B,2),H=V[0],q=V[1],W=(0,S.Z)(!1),U=(0,r.Z)(W,4),Q=U[0],X=U[2],G=U[3],J=(0,u.ZQ)(n).aggregations,Y=xn().navigation,te=(0,_.rA)(),ne=te.localeTimeString,re=te.localeDateString,ae=on(),oe=(0,r.Z)(ae,1)[0],le=oe.before-oe.after,ie=(0,o.useMemo)((function(){var e=Date.now();return{min:oe.after-le,max:0===f.before?oe.before:e<oe.before+le?e:oe.before+le}}),[oe.after,oe.before,f.before]),ce=[{backgroundColor:(0,v.getColor)("primary")({theme:i}),borderWidth:0,data:h,label:"Histogram",maxBarThickness:50,minBarLength:0}];(0,o.useEffect)((function(){var e;if(null!==J&&void 0!==J&&null!==(e=J.event_histogram)&&void 0!==e&&null!==(e=e.hits)&&void 0!==e&&e.buckets){var t=J.event_histogram.hits.buckets.reduce((function(e,t){var n=t.key,r=t.doc_count;return{data:[].concat((0,$.Z)(e.data),[r]),labels:[].concat((0,$.Z)(e.labels),[n])}}),{data:[],labels:[]}),n=(0,ee.BZ)(f.after,f.before)||{};y(t.data),L(t.labels),R(null),q(n.unit)}}),[null===J||void 0===J||null===(t=J.event_histogram)||void 0===t||null===(t=t.hits)||void 0===t?void 0:t.buckets]);var ue=(0,o.useMemo)((function(){return{animation:!1,interaction:{axis:"x"},maintainAspectRatio:!1,plugins:{annotation:{annotations:In({},x.after&&x.before?{annotation:{type:"box",backgroundColor:"rgba(128,128,128,0.3)",borderDash:[1,5,1,1],borderWidth:1,xMax:x.before,xMin:x.after,xScaleID:"x"}}:{})},legend:{align:"start",display:!1,position:"bottom"},zoom:{limits:{x:ie},pan:{enabled:"pan"===Y&&!P,mode:"x",onPanStart:function(e){e.chart.canvas.style.cursor="grabbing"},onPanComplete:function(e){var t=e.chart;t.canvas.style.cursor="default";var n=t.scales.x,r=n.min,a=n.max;R({min:Math.round(r),max:Math.round(a)}),m({after:Math.round(r),before:Math.round(a)}),t.update()},threshold:1},zoom:{drag:{enabled:"zoom"===Y||P},mode:"x",onZoomStart:function(e){e.chart.canvas.style.cursor="col-resize"},onZoomComplete:function(e){var t=e.chart;if("zoom"===Y||P){t.canvas.style.cursor="default";var n=t.scales.x,r=n.min,a=n.max;m({after:Math.round(r),before:Math.round(a)}),Z(!1)}}}}},responsive:!0,scales:{x:In({type:"time",grid:{drawBorder:!0,drawOnChartArea:!1,drawTicks:!0,offset:!1},parsing:!1,ticks:In({color:(0,v.getColor)("textLite")({theme:i}),font:{size:11},autoSkip:!0,maxTicksLimit:20},"minute"===H&&le>=1e3*wn.Kl?{callback:function(e){var t=re(e,{month:"2-digit",day:"2-digit",year:"numeric",long:!1,dateStyle:void 0}).split("/").reverse().slice(1).join("-"),n=ne(e,{secs:!1});return"".concat(t," ").concat(n)}}:{}),time:{displayFormats:{week:"yyyy-MM-dd",day:"MM-dd",hour:"MM-dd HH:mm",minute:"HH:mm",second:"HH:mm:ss"},tooltipFormat:"yyyy-MM-dd HH:mm:ss",unit:H||"second"}},A?{min:A.min,max:A.max}:{}),y:{beginAtZero:!0,ticks:{precision:0,color:(0,v.getColor)("textLite")({theme:i}),font:{size:11}}}}}}),[x,le,P,Y,A,R,H,ie]);if((0,o.useEffect)((function(){var e=function(e){"Shift"===e.key&&(e.preventDefault(),Z(!0))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),!h.length)return null;return o.createElement(v.Flex,{position:"relative",height:{min:50},onMouseEnter:X,onMouseLeave:G},Q&&o.createElement(jn,{testIdPrefix:a}),o.createElement(mn.$Q,{data:{datasets:ce,labels:N},onMouseDown:function(e){if(e.preventDefault(),"highlight"===Y){T(!0);var t=e.nativeEvent.offsetX||e.nativeEvent.layerX,n=l.current;n.canvas.style.cursor="crosshair",O({after:Math.round(n.scales.x.getValueForPixel(t)),before:null})}},onMouseMove:function(e){if(e.preventDefault(),"highlight"===Y&&I){var t=e.nativeEvent.offsetX||e.nativeEvent.layerX,n=l.current;O((function(e){return In(In({},e),{},{before:Math.round(n.scales.x.getValueForPixel(t))})}))}},onMouseUp:function(e){e.preventDefault(),T(!1);var t=e.nativeEvent.offsetX||e.nativeEvent.layerX,n=l.current;n.canvas.style.cursor="default",x.after===Math.round(n.scales.x.getValueForPixel(t))?O(Tn):O(x)},options:ue,ref:l}))},Dn={none:!0,facet:!0},Kn=function(e,t){var n=(0,u.ZQ)({extraKey:e}),r=n.loaded,a=n.loading,l=n.columns,i=n.sortedColumns,c=(0,o.useRef)([]);return(0,o.useMemo)((function(){return!r||a||(c.current=i.reduce((function(e,n){return!l[n].filter||Dn[l[n].filter]?e:[].concat((0,$.Z)(e),[t(n,l)])}),[])),c.current}),[r,a])},Fn=["sorter"];function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zn=function(e){return{label:e,value:e}},Mn=(0,o.memo)((function(e){var t=e.paramsKey,n=e.initData,l=e.initFilter,i=(0,u.ZQ)(t),c=i.charts,s=i.loaded,d=Et(t),f=(0,o.useContext)(K.ThemeContext),p=Object.keys(c).map(zn),g=Kn(t.extraKey,zn),h=(0,o.useState)(n),y=(0,r.Z)(h,2),b=y[0],E=y[1],x=(0,o.useState)(l),O=(0,r.Z)(x,2),w=O[0],C=O[1],P=(0,u.CE)(t);(0,o.useEffect)((function(){E(n)}),[n]),(0,o.useEffect)((function(){C(l)}),[l]);var Z=(0,o.useMemo)((function(){if(!c[b])return{datasets:[],labels:[]};var e=c[b].columns,t=null===d||void 0===d?void 0:d.reduce((function(t,n){var r=n[w];return t[r]?Ln(Ln({},t),{},(0,a.Z)({},r,e.reduce((function(e,t){var r;return Ln(Ln({},e),{},(r={},(0,a.Z)(r,t,e[t]+n[t]),(0,a.Z)(r,"sorter",e.sorter+n[t]),r))}),t[r]))):Ln(Ln({},t),{},(0,a.Z)({},r,e.reduce((function(e,t,o){var l;return Ln(Ln(Ln({},e),0===o?{label:r,sorter:n[t]}:{}),{},(l={},(0,a.Z)(l,t,n[t]),(0,a.Z)(l,"sorter",e.sorter?e.sorter+n[t]:n[t]),l))}),{})))}),{}),n=Object.values(t).sort((function(e,t){return t.sorter-e.sorter})).slice(0,15).map((function(e){e.sorter;return Ln({},(0,m.Z)(e,Fn))}));return{datasets:c[b].columns.map((function(e,t){return{backgroundColor:wn.vK[t],borderWidth:0,data:n.map((function(t){return t[e]})),label:e,maxBarThickness:50,minBarLength:0}})),labels:n.map((function(e){return e.label}))}}),[P,c,b,w,d]),j={animation:!1,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{boxWidth:4,boxHeight:20,title:{color:(0,v.getColor)("textLite")({theme:f})}}}},responsive:!0,scales:{x:{stacked:!0,grid:{color:(0,v.getColor)("borderSecondary")({theme:f})}},y:{stacked:!0,grid:{color:(0,v.getColor)("borderSecondary")({theme:f})}}}};return o.createElement(v.Flex,{column:!0,"data-testid":"functionsCharts",gap:3,width:"50%",background:"mainChartBg",border:{side:"all",color:"mainChartBorder"},padding:[4],round:.5},o.createElement(v.Flex,{alignItems:"center","data-testid":"functionsChart".concat(b,"-selects"),gap:2},o.createElement(v.Select,{"data-ga":"functions-chart-".concat(b,"::select-data::functions-view"),"data-testid":"functionsChart".concat(b,"-dataSelect"),isLoading:!s,onChange:function(e){var t=e.value;return E(t)},options:p,styles:{size:"tiny",minWidth:120},value:{label:b,value:b}}),o.createElement(v.Text,{"data-testid":"functionsChart".concat(b,"-perLabel"),color:"textLite"},"per"),o.createElement(v.Select,{"data-ga":"functions-chart-".concat(w,"::select-filter::functions-view"),"data-testid":"functionsChart".concat(w,"-filterSelect"),isLoading:!s,onChange:function(e){var t=e.value;return C(t)},options:g,styles:{size:"tiny",minWidth:120},value:{label:w,value:w}})),o.createElement(v.Flex,{position:"relative",height:{min:60},width:{min:"100%"}},o.createElement(mn.$Q,{data:Z,options:j})))})),An=Mn,Rn=n(16978),_n=n(24298),Bn=n(96415),Vn=n(70873),Hn=n(43460),qn=n(9058),Wn=n(54576),Un=n(61003),Qn=n(3701),Xn=function(e){var t=e.fn,n=e.histograms,a=e.selectedId,l=e.disabled,i=(0,Wn.useChart)(),u=(0,ye.UL)(),s=(0,o.useMemo)((function(){return n.map((function(e){var t=e.id,n=e.name;return{value:t,label:n,"data-track":i.track("select-histogram-".concat(n))}}))}),[n]),d=(0,c.I0)("histogram",{defaultValue:[a],key:u,extraKey:"".concat(t,"Filters"),flavour:"val"}),f=(0,r.Z)(d,2),m=f[0],p=f[1],v=m[0];return o.createElement(Un.Z,{value:v,items:s,dropProps:{align:{top:"bottom",right:"right"},"data-toolbox":!0},onChange:function(e){return p([e])},"data-track":i.track("selectHistogram"),dropdownProps:{width:"150px"}},o.createElement(Qn.Button,{disabled:l},"Source"))},Gn=(0,o.memo)(Xn),Jn=function(e){return function(t){return"histogram::".concat(e.getAttribute("id"),"::").concat(t)}},Yn={width:"108px",height:"77px"},$n=function(e){var t=e.nodeId,n=e.fn,a=e.paramsKey,l=(0,u.ZQ)(a),i=l.availableHistograms,c=l.histogram,s=l.help,d=l.pagination,m=l.data,p=(0,u.hx)(),g=(0,qn.e)(),h=(0,o.useRef)();h.current=function(){return Promise.resolve(null===c||void 0===c?void 0:c.chart)};var y=(0,o.useMemo)((function(){var e="".concat(t,"-").concat(n),r=g.makeChart({attributes:{id:e,enabledHeightResize:!1,info:s},getChart:function(){return h.current()},makeTrack:Jn});return g.getRoot().appendChild(r),[r,x]}),[t,n]),b=(0,r.Z)(y,2),E=b[0],x=b[1];(0,o.useEffect)((function(){return E.trigger("fetch")}),[c]);var O=(0,u.MT)(),w=(0,r.Z)(O,2),C=w[0],P=w[1];return(0,o.useEffect)((function(){if(E)return(0,_n.unregister)(E.on("highlightClick",(function(e){return P(e+1e3*c.chart.view.update_every)})),E.on("highlightEnd",(function(){return P(null)})))}),[E,c]),(0,o.useEffect)((function(){var e;return!!i&&E.updateAttributes({toolboxElements:[function(e){var t=e.disabled;return o.createElement(Gn,{histograms:i,fn:n,selectedId:c.id,disabled:t})},Hn.default,Bn.default,Vn.default],title:null===c||void 0===c||null===(e=c.chart)||void 0===e||null===(e=e.view)||void 0===e?void 0:e.title})}),[i]),(0,o.useEffect)((function(){if(p&&E&&d){var e=m[p],t=Math.floor((null===e||void 0===e?void 0:e[null===d||void 0===d?void 0:d.column])/1e6);t&&!isNaN(t)&&E.updateAttribute("hoverX",[1e3*Math.floor(t-t%c.chart.view.update_every),null])}}),[m,c,p]),(0,o.useEffect)((function(){C&&E&&d&&E.updateAttribute("clickX",[C,null])}),[C]),(0,o.useEffect)((function(){return function(){return E&&E.destroy()}}),[E]),o.createElement(v.Flex,{flex:!1,width:"100%",height:75},E?o.createElement(Rn.Z,{"data-chartid":x,chart:E,overflow:"hidden",hasFilters:!1}):o.createElement(f.Z,{iconProps:Yn,title:"Loading chart..."}))},er=["margin","defaultCharts","hasHistogram"],tr=["paramsKey","testIdPrefix","availableFns","availableFnsLoaded","hasError"],nr={extraKey:"fn"},rr={fn:{Chart:(0,o.memo)((function(e){var t=e.margin,n=e.defaultCharts,a=e.hasHistogram,l=void 0!==a&&a,i=(0,m.Z)(e,er);return o.createElement(v.Flex,{gap:4,margin:t},n.map((function(e,t){var n=(0,r.Z)(e,2),a=n[0],l=n[1];return o.createElement(An,(0,p.Z)({key:t,initData:a,initFilter:l},i))})),l&&o.createElement($n,i))})),loadingMessage:"Loading function..."},feed:{Chart:Sn,loadingMessage:"Loading events..."}},ar={table:It},or=(0,o.memo)((function(e){var t=e.paramsKey,n=void 0===t?nr:t,a=e.testIdPrefix,l=void 0===a?"functions":a,i=e.availableFns,s=e.availableFnsLoaded,d=e.hasError,y=(0,m.Z)(e,tr),b=rr[n.extraKey]||rr.fn,E=b.Chart,x=b.loadingMessage,w=(0,u.Hv)(n),C=(0,r.Z)(w,2),P=C[0],Z=C[1],T=(0,c.c6)(n),S=(0,u.ZQ)(n),D=S.infoLoaded,K=S.loaded,F=S.data,N=S.error,L=S.type,z=S.retentionWarning,M=S.defaultCharts,A=S.histogram,R=S.missingRequired,_=S.requiredParams,B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(0,r.Z)(e,1)[0],n=(0,g.iy)(t,"name");return 1===e.length&&n?"on ".concat(n):"on your selected node"}(T);(0,o.useEffect)((function(){var e;null!==P&&void 0!==P&&P.length||null===i||void 0===i||null===(e=i[0])||void 0===e||!e.name||d||Z([i[0].name])}),[s,P]);var H=(0,k.useHovered)({},[K]),q=(0,r.Z)(H,2),W=q[0],U=q[1],Q=(0,I.Z)();(0,o.useEffect)((function(){Q(U)}),[U]),dn(T,P[0],n);var X=function(e,t,n){var a=(0,h.th)(),l=(0,ye.vf)(),i=(0,V.o8)(),s=(0,c.tk)("pollingInterval",nn({flavour:"int"},n)),d=(0,c.tk)("slice",nn({defaultValue:!0,flavour:"bool"},n)),f=(0,u.mO)(n),p=(0,r.Z)(f,2),v=p[0],y=p[1],b=(0,u.MT)(),E=(0,r.Z)(b,2),x=E[0],O=E[1],w=(0,o.useRef)();w.current=v;var C=function(e){var t=e.skip,n=e.data,r=void 0===n?{}:n;!t&&r.data?((rn[r.type]||rn.default)(y,r),O((function(e){return null!==e?null:e}))):y((function(e){return nn(nn({},e),{},{tail:r.tail||!1,loading:!1})}))},P=an[t]||an.default,Z=P.fetch,k=P.isEnabled,I=on(x),T=(0,r.Z)(I,4),S=T[0],D=T[1],K=T[2],F=T[3],N=(0,Dt.Z)(F),L=(0,o.useRef)();L.current=S;var z=(0,o.useRef)();z.current=v.lastModified;var M=(0,o.useRef)();M.current=v.anchorAfter;var A=(0,ye.UL)(),R=(0,c.by)(null,{key:A,extraKey:"".concat(t||n.extraKey,"Filters")}),_=(0,Kt.Z)(R),B=(0,g.Xw)(e),H=(0,j.zp)(),q=(0,r.Z)(H,1)[0].loading;(0,o.useEffect)((function(){"feed"!==t&&(z.current=null,M.current=null,y(nn(nn({},Lt.Zn[v.type]||Lt.Zn.default),{},{type:v.type})))}),[null===e||void 0===e?void 0:e[0],t]),(0,o.useEffect)((function(){_&&!St()(_,R)&&v.loaded&&(z.current=null,M.current=null,y((function(e){return nn(nn({},e),{},{lastModified:null,anchorAfter:null,anchorBefore:null,offset:0})})))}),[!!v.aggregations&&R]),(0,o.useEffect)((function(){v.loaded&&(z.current=null,M.current=null,y((function(e){return nn(nn({},e),{},{lastModified:null,anchorAfter:null,anchorBefore:null,offset:0})})))}),[D,d]);var W=(0,o.useRef)(),U=(0,o.useRef)();U.current=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.checkPeriod,o=(0,m.Z)(n,en),i=L.current();return y((function(e){return nn(nn({},e),{},{tail:!!o.tail,loading:!0,requestedPeriod:i})})),r&&w.current.tail&&w.current.requestedPeriod.after<i.after&&!M.current&&w.current.requestedPeriod.before-w.current.requestedPeriod.after===i.before-i.after?Promise.resolve({skip:!0}):(W.current=Z(nn(nn(nn({roomId:A,spaceId:a,nodeIds:e,cloudNodeIds:B,fn:t,roomSlug:l,filters:R,slice:d},i),o),{},{acceptedParams:v.acceptedParams,last:200})),W.current)};var Q=function(e){var t,n,r=e||{},a=r.merge,o=r.direction,l=r.dataOnly,i=r.tail;null===(t=e)||void 0===t||null===(t=t.response)||void 0===t||!t.status||400!==e.response.status&&304!==e.response.status?(null!==(n=e)&&void 0!==n&&null!==(n=n.response)&&void 0!==n&&n.data&&(e=e.response.data),y((function(t){return nn(nn({},t),{},{error:e,loaded:!0,loading:!1})})),O((function(e){return null!==e?null:e}))):y((function(t){return nn(nn({},t),{},{loaded:!0,loading:!1},!!e&&{merge:a,direction:o,dataOnly:l,tail:i})}))},X=(0,Ft.Z)((function(){return{enabled:!v.missingRequired&&v.infoLoaded&&!q&&k({nodeIds:e,fn:t,roomId:A,after:D}),fetch:function(){return U.current(!i&&D<0?nn({if_modified_since:z.current},z.current&&{direction:"forward",merge:!0,tail:!0,delta:!0,data_only:!0,anchor:M.current}):!i&&function(e,t){var n=e.after;return t<e.before&&t>n}(L.current(),F)?{anchor:1e3*F,data_only:!!z.current}:{direction:"backward",data_only:!!z.current,checkPeriod:!0})},onFail:Q,onPollingFail:Q,onReceive:C,onBlurMode:function(){return w.current.loading&&y((function(e){return nn(nn({},e),{},{loading:!1})}))},polling:!i&&D<0,pollingOptions:{pollingInterval:1e3*(s||v.updateEvery),shouldPause:!0},force:!0,skip:!!N&&!F}}),[i,v.infoLoaded,v.missingRequired,A,null===e||void 0===e?void 0:e.length,null===e||void 0===e?void 0:e[0],t,s,!!v.aggregations&&!!_&&R,D,K,q,F,d]);return[(0,o.useCallback)((function(e){if(!w.current.loadingMore){y((function(e){return nn(nn({},e),{},{loadingMore:!0})}));var t=U.current(e);return t.then(C).catch(Q).finally((function(){return y((function(e){return nn(nn({},e),{},{loadingMore:!1})}))})),t}}),[y]),(0,o.useCallback)((function(){var e,t,n,r,a;null===X||void 0===X||null===(e=X.clearRef)||void 0===e||null===(e=e.current)||void 0===e||null===(e=e.promise)||void 0===e||null===(t=e.cancel)||void 0===t||t.call(e),clearTimeout(null===X||void 0===X||null===(n=X.clearRef)||void 0===n||null===(n=n.current)||void 0===n?void 0:n.timeoutId),null===(r=W.current)||void 0===r||null===(a=r.cancel)||void 0===a||a.call(r),y((function(e){return nn(nn({},e),{},{loaded:!0,loading:!1,loadingMore:!1})}))}),[y])]}(T,P[0],n),G=(0,r.Z)(X,2),Y=G[0],$=G[1];if(!s)return o.createElement(f.Z,{title:x,"data-testid":"".concat(l,"Loading")});if(d)return o.createElement(fn.NY,{title:"Functions couldn't be loaded",message:"We couldn't find any available functions."});if(N&&"canceled"!==N){if("ErrNodeResourceNotFound"===(null===N||void 0===N?void 0:N.errorMsgKey))return o.createElement(O.Z,{message:"Please review your selection and try again.",title:"".concat("feed"===n.extraKey?"Events are":'Function "'.concat(P,'" is')," not available ").concat(B,".")});if(null===F||void 0===F||!F.length)return o.createElement(fn.NY,{title:"".concat("feed"===n.extraKey?"Events":'Function "'.concat(P,'"')," couldn't be loaded"),message:"ErrForbidden"===(null===N||void 0===N?void 0:N.errorMsgKey)?"Forbidden":(null===N||void 0===N?void 0:N.errorMessage)||""})}if(D&&R)return o.createElement(O.Z,{title:"Required filters are needed",message:'Function "'.concat(P,'" needs: ').concat(_.map((function(e){return e.name})).join(", "),"."),footer:"Check them on the right sidebar!"});var ee=ar[L]||ar.table;return o.createElement(v.Box,{overflow:{horizontal:"hidden",vertical:"auto"},column:!0,padding:[4,4,0],gap:2},o.createElement(J,{nodeIds:T,onRefresh:Y,onCancel:$,paramsKey:n}),K?o.createElement(o.Fragment,null,o.createElement(E,{paramsKey:n,testIdPrefix:l,defaultCharts:M,hasHistogram:!!A,refetch:Y,fn:P,nodeIds:T}),o.createElement(ee,(0,p.Z)({key:P,"data-testid":"".concat(l,"Component"),paramsKey:n,refetch:Y,ref:W,selectedFn:P},y)),!(null!==F&&void 0!==F&&F.length)&&o.createElement(v.Flex,{column:!0,justifyContent:"center",alignItems:"center",alignSelf:"center",margin:["feed"===n.extraKey?3:30,0,0],gap:3},o.createElement(v.H3,null,"No results to display"),o.createElement(v.Text,{color:"textDescription",textAlign:"center"},"Double-check your search or filters and dates and try again with different conditions"),z&&o.createElement(v.Text,{color:"text",textAlign:"center"},z))):o.createElement(f.Z,{title:x,"data-testid":"".concat(l,"Loading")}))})),lr=or,ir=n(24533),cr=["paramsKey","hasError","refreshAvailableFns","availableFnsLoaded","availableFns"];function ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dr=function(e){var t=(0,j.Hu)();return o.createElement(v.Button,(0,p.Z)({label:"Get a fresh agent token",onClick:t},e))},fr="Functions expose sensitive information about your systems and applications. To protect your privacy, Netdata exposes this information only to logged-in users and claimed agents. When viewing Functions directly on a  Netdata Agent UI, this information is sent directly from the Netdata Agent to your web browser, without exposing it to any third parties.",mr={notLoggedIn:{title:"Sign in to Netdata to use Functions",description:fr,footer:o.createElement(P.Z,null)},notClaimed:{title:"Connect this agent to Netdata to use Functions",description:fr,footer:o.createElement(Z.Z,null)},noAccess:{title:"This agent belongs to a Netdata Space you are not member of",description:fr,footer:o.createElement(v.TextBig,{color:"textDescription"},"Ask for an invitation from the administrators of the Netdata Space of the agent to use functions.")},bearerError:{title:"You are not authorized to use Functions",description:fr,footer:o.createElement(dr,null)}},pr={extraKey:"fn"},vr=function(e){var t=e.paramsKey,n=void 0===t?pr:t,a=e.hasError,l=e.refreshAvailableFns,i=e.availableFnsLoaded,s=e.availableFns,d=(0,m.Z)(e,cr),f=(0,c.H7)(n),v=(0,c.wT)(n),b=(0,r.Z)(v,2),x=b[0],w=b[1],P=(0,g.M2)(f),Z=E(n),k=(0,u.CE)(n),I=(0,u.I_)(n);(0,o.useEffect)((function(){return I}),[k,P]),(0,o.useEffect)((function(){var e;if(null!==f&&void 0!==f&&f.length&&!Z&&(null===x||void 0===x||!x.length)&&k){var t=null===(e=s.find((function(e){return e.name===k})))||void 0===e?void 0:e.nodes;t&&w([Object.keys(t)[0]])}}),[Z,w,x,k]);var T=(0,y.ej)(),S=(0,r.Z)(T,1)[0],D=(0,j.zp)(),K=(0,r.Z)(D,1)[0],F=K.bearerProtection,N=K.error,L=K.token,z=(0,h.Q6)(),M=(0,ir.Lz)(),A=(0,r.Z)(M,1)[0],R=A.canBeClaimed,_=A.cloudStatus;if((0,o.useEffect)((function(){a&&l()}),[_,L]),!P.length)return o.createElement(C,{paramsKey:n});if(z&&(a||N&&F)){var B=function(e){var t=e.userStatus,n=e.userNodeStatus,r=e.accessError,a=e.canBeClaimed;return e.cloudStatus,mr[t]?mr[t]:r?mr.notLoggedIn:a?mr.notClaimed:mr[n]?mr[n]:mr.bearerError}(sr(sr({},S),{},{bearerError:N,canBeClaimed:R,cloudStatus:_})),V=B.title,H=B.description,q=B.footer;return o.createElement(O.Z,{title:V,message:H,footer:q})}return o.createElement(lr,(0,p.Z)({testIdPrefix:"fn",paramsKey:n,availableFnsLoaded:i,availableFns:s},d))},gr=["paramsKey"],hr={extraKey:"feed"},yr=function(e){var t=e.paramsKey,n=void 0===t?hr:t,r=(0,m.Z)(e,gr);E(n);var a=(0,u.I_)(n);return(0,o.useEffect)((function(){return a}),[]),o.createElement(lr,(0,p.Z)({testIdPrefix:"feed",paramsKey:n},r))},br=n(97193),Er=n(8144);function xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wr=(0,o.memo)((function(e){var t=e.roomId,n=e.flavour,r=e.availableFns,l=function(e){var t="fn"===e;return(0,o.useMemo)((function(){return{Live:{head:{label:"Live nodes",textColor:"textLite",iconName:"connectivityStatusLive",hasFn:t},node:{textColor:"text",showFn:t,requireFn:t}},Stale:{head:{label:"Stale nodes",textColor:"textLite",iconName:"connectivityStatusStale"},node:{textColor:"text",disabled:t}},Offline:{head:{label:"Offline nodes",textColor:"textLite",iconName:"connectivityStatusOffline",disabled:t},node:{textColor:"textLite",disabled:t}}}}),[e])}(n),i=function(e){var t=(0,u.ZQ)({extraKey:e}).aggregations;return(0,o.useMemo)((function(){return null!==t&&void 0!==t&&t.node_ids?t.node_ids.buckets.reduce((function(e,t){return Or(Or({},e),{},(0,a.Z)({},t.key,t.hits.doc_count))}),{}):null}),[t])}(n),c="fn"===n,s=(0,u.CE)({extraKey:n}),d=(0,o.useMemo)((function(){var e;return Array.isArray(r)&&(null===(e=r.find((function(e){return e.name===s})))||void 0===e?void 0:e.nodes)||null}),[s,r]),f=(0,o.useCallback)((function(e){return!!d&&!d[e]}),[d]),m=(0,o.useCallback)((function(){return d?Object.keys(d):[]}),[d]);return o.createElement(Er.Z,{title:"Nodes",testIdPrefix:"nodes",baseKey:t,extraKey:n,param:"selectedNodeIds",multi:"feed"===n},o.createElement(br.Z,(0,p.Z)({key:n,baseKey:t,extraKey:n,statusProps:l,background:"mainBackground",itemProps:{padding:[1,1,1,.5],maxLength:30},searchMargin:[0,0,2],height:{max:"300px"},multi:"feed"===n,nodeCounts:i},c&&{useFilteredIds:m},{checkIsDisabled:f})))})),Cr=n(46742),Pr=function(e){return e.name},Zr=(0,o.memo)((function(e){var t=e.param,n=e.baseKey,r=e.extraKey,a=e.testIdPrefix,l=e.title,i=e.items,c=void 0===i?[]:i,u=e.multi,s=void 0!==u&&u;return c.length?o.createElement(Er.Z,{title:l,testIdPrefix:a,baseKey:n,extraKey:r,param:t,multi:s},o.createElement(Cr.ZP,{param:t,baseKey:n,extraKey:r,testIdPrefix:a,collection:c,multi:s,getValue:Pr,getLabel:Pr})):null})),jr=n(6557),kr=function(e){return e.id},Ir={string:function(e,t){return e.localeCompare(t,void 0,{sensitivity:"accent"})},integer:function(e,t){return e-t}},Tr={table:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.param,a=t.columns;return Object.entries(e.reduce((function(e,t){var r,o;return e[t[n]]={count:((null===(r=e[t[n]])||void 0===r?void 0:r.count)||0)+(t.hidden?0:1),type:null===(o=a[n])||void 0===o?void 0:o.type},e}),{})).map((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];return{id:n,type:a.type,count:a.count}})).sort((function(e,t){return(Ir[e.type]||Ir.integer)(e.id,t.id)}))},default:n.n(jr)()},Sr=function(e){var t=e.param,n=e.baseKey,r=e.extraKey,a=e.filtersKey,l=e.testIdPrefix,i=e.title,s=function(e){var t=e.extraKey,n=e.filtersKey,r=e.param,a=Et({extraKey:t,omit:[r],keepAll:!0}),l=(0,c.tk)(r,{extraKey:n,flavour:"arr"}),i=(0,u.ZQ)({key:"type",extraKey:t}),s=Tr[i]||Tr.default,d=(0,u.ZQ)({key:"columns",extraKey:t});return(0,o.useMemo)((function(){return s(a,{param:r,columns:d})}),[r,a,l])}({param:t,extraKey:r,filtersKey:a});return s&&s.length?o.createElement(Er.Z,{title:i,testIdPrefix:l,baseKey:n,extraKey:a,param:t,defaultIsOpen:!1},o.createElement(Cr.ZP,{param:t,baseKey:n,extraKey:a,testIdPrefix:l,collection:s,capitalized:!1,getValue:kr,getLabel:kr})):null},Dr=n(27856),Kr=function(e,t){return{key:e,type:t[e].filter}},Fr={multiselect:Sr,range:function(e){var t=e.param,n=e.baseKey,a=e.extraKey,l=e.filtersKey,i=e.testIdPrefix,s=e.title,d=(0,u.ZQ)({extraKey:a}).columns,f=(0,c.D0)(t,{extraKey:l,flavour:"arr",defaultValue:[]}),m=(0,r.Z)(f,2),p=m[0],g=m[1],h=(0,o.useCallback)((0,Dr.P)(10,(function(e){var t=e.min,n=e.max;return g([t,n])})),[]);if(!d[t])return null;var y=1*(d[t].min||0),b=1*(d[t].max||0);return o.createElement(Er.Z,{title:s,testIdPrefix:i,baseKey:n,extraKey:l,param:t,defaultIsOpen:!1,showCounter:!1},o.createElement(v.Box,{padding:[2,0],width:"100%"},o.createElement(v.MultiRangeInput,{min:y,max:b,onChange:h,initMin:p[0]?1*p[0]:y,initMax:p[1]?1*p[1]:b,step:(b-y)/20})))}},Nr=function(e){var t=e.roomId,n=e.extraKey,r=(0,u.CE)({extraKey:n}),a=function(e){return Kn(e,Kr)}(n);return a.map((function(e){var a=Fr[e.type]||Fr.multiselect;return o.createElement(a,{key:e.key,title:e.key,testIdPrefix:"function",baseKey:t,extraKey:n,filtersKey:"".concat(r||n,"Filters"),param:e.key})}))},Lr=function(e){return e.name||e.id},zr=function(e){return e.id},Mr=(0,o.memo)((function(e){var t=e.title,n=e.options,a=e.param,l=e.baseKey,i=e.filtersKey,c=e.testIdPrefix,u=e.multi,s=void 0===u||u,d=e.defaultIsOpen,f=void 0!==d&&d,m=e.required,p=void 0!==m&&m,g=(0,S.Z)(!1),h=(0,r.Z)(g,2),y=h[0],b=h[1],E=(0,o.useMemo)((function(){return null!==n&&void 0!==n&&n.length?n.filter((function(e){return"number"!==typeof e.count||e.count>0})):null}),[n]);return null!==n&&void 0!==n&&n.length?o.createElement(Er.Z,{title:t,testIdPrefix:c,baseKey:l,extraKey:i,param:a,defaultIsOpen:f,required:p,multi:s,configElements:function(e){return e.isOpen&&(null===E||void 0===E?void 0:E.length)!==(null===n||void 0===n?void 0:n.length)&&o.createElement(v.Button,{padding:[0],flavour:"borderless",onClick:function(e){e.stopPropagation(),b()},"data-testid":"".concat(c,"-filter-resetAll"),label:y?"Show zeros":"Hide zeros",tiny:!0,neutral:!0})}},o.createElement(Cr.ZP,{param:a,baseKey:l,extraKey:i,testIdPrefix:c,collection:y?E:n,capitalized:!1,getValue:zr,getLabel:Lr,multi:s})):null})),Ar={nodes:!0},Rr=function(e){var t=e.roomId,n=e.extraKey,r=(0,u.CE)({extraKey:n}),a=(0,u.Cf)(n);return a.length?a.map((function(e){return Ar[e.id]?null:o.createElement(Mr,{key:e.id,title:e.name,options:e.options,param:e.id,testIdPrefix:"function",baseKey:t,filtersKey:"".concat(r||n,"Filters")})})):null};n(68216),n(79433);function _r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vr={select:!0},Hr=function(e){var t=e.roomId,n=e.extraKey;return e.requiredParams.map((function(e){return o.createElement(Mr,{key:e.id,title:e.name,options:e.options,param:e.id,testIdPrefix:"function",baseKey:t,filtersKey:"".concat(n,"Filters"),multi:!Vr[e.type],defaultIsOpen:!0,required:!0})}))},qr=(0,o.memo)((function(e){var t=e.extraKey,n=(0,u.CE)({extraKey:t}),l=(0,u.mO)({extraKey:t}),i=(0,r.Z)(l,2),s=i[0],d=s.requiredParams,f=s.infoLoaded,m=i[1],p=(0,ye.UL)(),v=(0,c.I0)(null,{key:p,extraKey:"".concat(n,"Filters")}),g=(0,r.Z)(v,2),h=g[0],y=g[1];return(0,o.useEffect)((function(){f&&d.length&&d.forEach((function(e){var t,n;return(null===(t=e.options)||void 0===t?void 0:t.length)>0&&!(null!==(n=h[e.id])&&void 0!==n&&n.length)&&y((0,a.Z)({},e.id,[e.options[0].id]))}))}),[f]),(0,o.useEffect)((function(){f&&(d.length?h&&m((function(e){return Br(Br({},e),{},{missingRequired:!!d.length&&!d.every((function(e){var t,n;return!(null===(t=e.options)||void 0===t||!t.length)&&(Array.isArray(h[e.id])?!(null===(n=h[e.id])||void 0===n||!n.length):!!h[e.id])}))})})):m((function(e){return Br(Br({},e),{},{missingRequired:!1})})))}),[f,d,h]),o.createElement(Hr,{roomId:p,extraKey:n,requiredParams:d})})),Wr=(0,o.memo)((function(e){var t=e.flavour,n=e.availableFns,r=(0,ye.UL)(),a=(0,u.ZQ)({extraKey:t}),l=a.loaded,i=a.aggregations,c=a.error;return o.createElement(v.Flex,{column:!0,overflow:{vertical:"auto"},padding:[0,3,30]},"fn"===t&&o.createElement(Zr,{title:"Function",testIdPrefix:"function",baseKey:r,extraKey:t,param:"selectedFn",items:n}),o.createElement(wr,{roomId:r,flavour:t,availableFns:n}),o.createElement(qr,{extraKey:t}),l&&!i&&!c&&o.createElement(Nr,{roomId:r,extraKey:t}),l&&i&&!c&&o.createElement(Rr,{roomId:r,extraKey:t}))})),Ur=(n(38862),n(21872)),Qr=n(46038),Xr=n(52428),Gr=["selectedRowData","setSelectedRowData"],Jr=function(e){var t=e.data;return o.createElement(Qr.Z,{name:"Files"},o.createElement(v.Flex,{gap:1,padding:[0,1],alignItems:"center"},o.createElement(v.Box,{sx:{fontWeight:"500",letterSpacing:"1px"},as:v.Text,color:"textLite"},"{;}"),o.createElement(v.TextSmall,null,"Copy data as"),o.createElement(v.Flex,{cursor:"pointer",gap:1,onClick:(0,Xr.J)(JSON.stringify(t),{text:"JSON copied to clipboard"})},o.createElement(v.TextSmall,{color:"primary"},"json"),o.createElement(v.Icon,{color:"primary",size:"small",name:"copy"}))))},Yr=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data,a=void 0===n?{}:n,o=t.columns,l=void 0===o?{}:o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;return Object.entries(a).sort((function(e,t){var n,a,o=(0,r.Z)(e,1)[0],i=(0,r.Z)(t,1)[0];return((null===(n=l[o])||void 0===n?void 0:n.displayName)||o).localeCompare((null===(a=l[i])||void 0===a?void 0:a.displayName)||i,void 0,{sensitivity:"accent",ignorePunctuation:!0})})).reduce((function(t,n){var a,o,i,s=(0,r.Z)(n,2),d=s[0],f=s[1],m=c?"".concat(c,".").concat((null===(o=l[d])||void 0===o?void 0:o.displayName)||d):(null===(a=l[d])||void 0===a?void 0:a.displayName)||d;if(null!==(i=l[d])&&void 0!==i&&i.dummy)return t;if(!l[d])return t;var p=Array.isArray(f);if(p&&"object"===(0,mt.Z)(f[0])&&null!==f[0]||p&&f.length>1)t.push([m,JSON.stringify(f)]),u[m]=f;else if(f&&"object"===(0,mt.Z)(f))e({data:f},t,m,u);else{if(null===f)return t;t.push([m,p?f.length>1?"[".concat(f.join(", "),"]"):f[0]:f]),u[m]=p?f.length>1?"[".concat(f.join(", "),"]"):f[0]:f}return t}),i)},$r=(0,K.default)(v.Flex).withConfig({displayName:"sidebarInfo__Container",componentId:"sc-18vn5bm-0"})(['*{font-family:"Courier New",Courier,monospace;letter-spacing:0.09px;line-height:13px;font-size:12px;overflow-wrap:anywhere;white-space:pre-wrap;word-break:break-word;}']),ea=function(e){var t=e.selectedRowData,n=void 0===t?{}:t,a=e.setSelectedRowData,l=(0,m.Z)(e,Gr),i={},c=(0,o.useMemo)((function(){return Yr(n,[],null,i).sort((function(e,t){var n=(0,r.Z)(e,1)[0],a=(0,r.Z)(t,1)[0];return n.localeCompare(a)}))}),[n]);return o.createElement(v.Flex,(0,p.Z)({column:!0,gap:2,overflow:{vertical:"auto"},padding:[0,0,30]},l),o.createElement(v.Flex,{justifyContent:"between",padding:[2,0],border:{side:"bottom",color:"borderSecondary"}},o.createElement(v.TextBig,{strong:!0},"Row info"),c.length>0&&o.createElement(v.Box,{onClick:function(){return a()},cursor:"pointer"},o.createElement(v.TextSmall,{color:"primary"},"Clear selection"))),Array.isArray(c)&&c.length?o.createElement(o.Fragment,null,o.createElement($r,{column:!0,gap:2},c.map((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];return o.createElement(Ur.Z,{key:n,size:"small",name:n,testId:"sidebar-rowInfoContent-".concat(n),padding:[1,0,0]},a)}))),o.createElement(Jr,{data:n.json||i})):o.createElement(v.Text,null,"Select a row to see raw data"))},ta=n(63346);function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var aa={fn:{Component:vr,paramsKey:{extraKey:"fn"},loadingMessage:"Loading functions..."},feed:{Component:yr,paramsKey:{extraKey:"feed"},loadingMessage:"Loading events..."}},oa={filters:ra(ra({iconName:"filterList"},s.Xc),{},{width:"19px",Content:Wr,dataTestId:"fnFilters",label:"Filters"}),info:ra(ra({iconName:"information"},s.Xc),{},{width:"19px",dataTestId:"info",Content:ea,label:"Info"})},la=function(e){var t=e.flavour,n=aa[t]||aa.fn,a=n.Component,m=n.paramsKey,p=n.loadingMessage,v=(0,i.zN)(),g=(0,i.fD)(),h=(0,c.Sf)("sidebarTab",{flavour:"val",extraKey:t}),y=(0,c.Sf)("sidebarOpen",{flavour:"bool"}),b=(0,o.useState)(),E=(0,r.Z)(b,2),x=E[0],O=E[1],w=(0,o.useCallback)((function(){y(!0),h("info"),O.apply(void 0,arguments)}),[]),C=(0,u.KO)(m.extraKey),P=C.loaded,Z=C.value,j=C.hasError,k=C.refresh;return g?v.length||"fn"!==t?o.createElement(ta.ZP,{feature:"Functions-".concat(t)},o.createElement(l.Z,{"data-testid":"".concat(t,"Page"),margin:[0,0,8],sidebar:o.createElement(s.ZP,{title:"Filters",flavour:t,selectedRowData:x,setSelectedRowData:O,availableFns:Z,tabs:oa,loaded:!0,hasSearch:!1})},o.createElement(a,{testIdPrefix:t,paramsKey:m,onShowInfo:w,availableFnsLoaded:P,availableFns:Z,refreshAvailableFns:k,hasError:j}))):o.createElement(ta.ZP,{feature:"Functions-".concat(t),mode:"NoNodesView"},o.createElement(d.Z,null)):o.createElement(f.Z,{title:p})}}}]);