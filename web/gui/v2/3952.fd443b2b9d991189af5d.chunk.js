!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c22639c7-9a0a-4056-9cf4-1bc68cbf244c",e._sentryDebugIdIdentifier="sentry-dbid-c22639c7-9a0a-4056-9cf4-1bc68cbf244c")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"67fcafa0e89723987481f6de299b5bd1fcd6618a"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[3952],{51091:function(e,t,n){"use strict";var a=n(87462),r=n(45987),l=(n(57327),n(41539),n(88449),n(2490),n(59849),n(21249),n(57640),n(9924),n(92222),n(71893)),o=n(10928),i=n.n(o),c=n(67294),s=n(99113),u=["items","isBig","showBackButton","testid"],d=(0,l.default)(s.Box).withConfig({displayName:"breadcrumbs__StyledItemContainer",componentId:"sc-3u39st-0"})([""]),m=(0,l.css)(["&:hover{color:",";}"],(function(e){var t=e.withHover,n=e.theme;return t&&(0,s.getColor)("success")({theme:n})})),p=(0,l.default)(s.Text).withConfig({displayName:"breadcrumbs__StyledText",componentId:"sc-3u39st-1"})(["",""],m),g=(0,l.default)(s.TextSmall).withConfig({displayName:"breadcrumbs__StyledTextSmall",componentId:"sc-3u39st-2"})(["",""],m);t.Z=function(e){var t=e.items,n=e.isBig,l=e.showBackButton,o=void 0===l||l,m=e.testid,f=void 0===m?"":m,b=(0,r.Z)(e,u),h=(0,c.useMemo)((function(){return null!==t&&void 0!==t&&t.length&&o?i()(t.filter((function(e){return!!e.onClick}))).onClick:null}),[t,o]);if(null===t||void 0===t||!t.length)return null;var E=n?p:g;return c.createElement(s.Flex,(0,a.Z)({gap:4},b),o&&c.createElement(s.Button,{onClick:h,icon:"chevron_left",label:"Back",neutral:!0,flavour:"hollow",small:!0,padding:[0,2,0,1],textTransform:"uppercase","data-testid":"".concat(f,"-breadcrumbs-backButton")}),c.createElement(s.Flex,{gap:2,alignItems:"center"},t.map((function(e,t){var n=e.isDisabled,r=e.name,l=e.onClick;return c.createElement(d,(0,a.Z)({key:t,alignItems:"center"},l&&{cursor:"pointer",onClick:l},{"data-testid":"".concat(f,"-breadcrumbs-level-").concat(t)}),c.createElement(E,{color:n&&"textLite","data-testid":"".concat(f,"-breadcrumbs-level-").concat(t),withHover:!!l},0!==t&&" / ",r))}))))}},80959:function(e,t,n){"use strict";var a=n(87462),r=n(45987),l=n(67294),o=n(99113),i=["message","title","footer"];t.Z=function(e){var t=e.message,n=e.title,c=e.footer,s=(0,r.Z)(e,i),u=(null===s||void 0===s?void 0:s["data-testid"])||"functionError";return l.createElement(o.Flex,(0,a.Z)({alignItems:"center",column:!0,"data-testid":u,flex:!0,gap:3,justifyContent:"center",padding:[0,20]},s),l.createElement(o.H3,{"data-testid":"".concat(u,"-title")},n),l.createElement(o.TextBig,{color:"textDescription","data-testid":"".concat(u,"-message")},t),c)}},27308:function(e,t,n){"use strict";var a=n(87462),r=n(45987),l=n(67294),o=n(79655),i=n(99113),c=n(91008),s=n(33335),u=n(99826),d=["containerProps"];t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.containerProps,n=void 0===t?{}:t,m=(0,r.Z)(e,d),p=(0,s.gI)("billing:ReadAll"),g=(0,u.Z)().url;return g?l.createElement(i.Flex,(0,a.Z)({background:"sideBarMini",border:{side:"all",color:"border"},padding:[1,2],round:!0},n),l.createElement(c.Z,(0,a.Z)({align:"bottom",as:o.rU,boxProps:{as:i.Flex},color:"text",Component:i.TextMicro,content:p?"Upgrade your plan in order to use this feature":"You have no permissions to manage billing",disabled:!p,hoverColor:"textFocus",showToolTip:!0,strong:!0,to:g},m),"Upgrade now!")):null}},36412:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var a=n(45987),r=n(67294),l=n(87462),o=(n(82526),n(41817),n(99113)),i=n(82351),c=["description","isRequired","title"],s=function(e){var t=e.description,n=e.isRequired,l=e.title,s=(0,a.Z)(e,c),u=s["data-testid"]?"".concat(s["data-testid"],"-label"):"fieldLabel";return r.createElement(o.Flex,{"data-testid":"".concat(u,"-container"),gap:1},r.createElement(o.TextSmall,{color:"textLite","data-testid":u},l,n&&" *"),t&&r.createElement(i.Z,{align:"top",content:t,"data-testid":"".concat(u,"-info"),plain:!0},r.createElement(o.Icon,{color:"textLite",name:"information",size:"small"})))},u=["data-testid","description","isRequired","onChange","title"],d=function(e){var t=e["data-testid"],n=void 0===t?"input":t,i=e.description,c=e.isRequired,d=e.onChange,m=e.title,p=(0,a.Z)(e,u);return r.createElement(o.Flex,{column:!0,"data-testid":n,flex:"grow",gap:1},r.createElement(s,{"data-testid":n,description:i,isRequired:c,title:m}),r.createElement(o.TextInput,(0,l.Z)({"data-testid":"".concat(n,"-field"),size:"tiny",onChange:function(e){var t=e.target;return d(t.value)}},p)))},m=(n(21249),n(57640),n(9924),n(26833),n(92222),["data-testid","description","getDataGa","fields","id","isRequired","onChange","secrets","setSecrets","title"]),p=["getValue","id","onChange"],g=function(e){var t,n=e["data-testid"],i=void 0===n?"select":n,c=e.description,u=e.getDataGa,d=e.fields,g=e.id,f=e.isRequired,b=e.onChange,h=e.secrets,E=e.setSecrets,v=e.title,y=(0,a.Z)(e,m);return r.createElement(o.Flex,{column:!0,"data-testid":i,flex:"grow",gap:1},r.createElement(s,{"data-testid":i,description:c,isRequired:f,title:v}),r.createElement(o.Select,(0,l.Z)({"data-testid":"".concat(i,"-field"),menuPortalTarget:document.body,onChange:function(e){return b(e)},styles:{size:"tiny"},menuPlacement:"auto"},y)),Object.values((null===d||void 0===d?void 0:d[null===(t=y.value)||void 0===t?void 0:t.value])||{}).map((function(e){var t=e.getValue,n=e.id,o=e.onChange,c=(0,a.Z)(e,p);return r.createElement(Z,(0,l.Z)({"data-ga":u("".concat(g,"-").concat(n,"-").concat(c.component)),"data-testid":"".concat(i,"-").concat(n),key:n,id:n,onChange:o({id:g,setSecrets:E,subsetId:n}),value:t({id:g,secrets:h,subsetId:n})},c))})))},f=n(4942),b=n(29439),h=(n(85827),n(41539),n(25387),n(2490),n(72608),n(47941),n(69720),n(57327),n(88449),n(59849),n(38880),n(15581),n(34514),n(54747),n(49337),n(33321),n(69070),n(57557)),E=n.n(h),v=n(73955),y=n.n(v),x=n(31790),w=n(25185);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=["component"],S={default:function(){return null},pairs:function(e){var t=e.componentPairs,n=e["data-testid"],a=void 0===n?"pairs":n,l=e.description,i=e.getDataGa,c=e.id,u=e.isRequired,d=e.placeholder,m=e.setSecrets,p=e.title,g=(0,r.useState)({}),h=(0,b.Z)(g,2),v=h[0],C=h[1];(0,r.useEffect)((function(){var e=Object.values(v).reduce((function(e,t){var n=t.key,a=t.value;return n?O(O({},e),{},(0,f.Z)({},n,a||"")):e}),{});m((function(t){return Object.keys(e).length?O(O({},t),{},(0,f.Z)({},c,e)):E()(t,c)}))}),[v]);return r.createElement(o.Flex,{column:!0,"data-testid":a,gap:1},r.createElement(o.Flex,{alignItems:"center",justifyContent:"between"},r.createElement(s,{"data-testid":a,description:l,isRequired:u,title:p}),t.map((function(e){var n=(0,x.XM)(e);return r.createElement(w.nO,{"data-ga":i("".concat(c,"-").concat(n,"-add")),"data-testid":"".concat(a,"-").concat(n,"Add"),key:n,label:1===t.length?"Add":"Add ".concat(n),onClick:function(){return function(e){return C((function(t){return O(O({},t),{},(0,f.Z)({},y()("pair_"),{key:"",components:e,value:""}))}))}(e)}})}))),Object.entries(v).map((function(e){var t=(0,b.Z)(e,2),n=t[0],l=t[1],s=l.key,u=l.components,m=l.value,p=(0,b.Z)(u,2),g=p[0],h=p[1],v=(0,x.XM)(u);return r.createElement(o.Flex,{alignItems:"end",key:"".concat(v,"-").concat(n),gap:2},r.createElement(T,{component:g,"data-ga":i("".concat(c,"-").concat(v,"-key")),"data-testid":"".concat(a,"-").concat(v,"Key"),onChange:function(e){return C((function(t){return O(O({},t),{},(0,f.Z)({},n,O(O({},t[n]),{},{key:e})))}))},value:s,placeholder:d,title:"Key"}),r.createElement(T,{component:h,"data-ga":i("".concat(c,"-").concat(v,"-value")),"data-testid":"".concat(a,"-").concat(v,"Value"),onChange:function(e){return C((function(t){return O(O({},t),{},(0,f.Z)({},n,O(O({},t[n]),{},{value:e})))}))},value:m,placeholder:d,title:"Value"}),r.createElement(o.Button,{flavour:"borderless",icon:"trashcan",margin:[0,0,1,0],neutral:!0,onClick:function(){C((function(e){return E()(e,n)}))}}))})))},input:d,select:g},Z=function(e){var t=e.component,n=(0,a.Z)(e,P),l=S[t]||S.default;return r.createElement(l,n)},T=Z},25185:function(e,t,n){"use strict";n.d(t,{A3:function(){return p},Ce:function(){return c},QD:function(){return g},aN:function(){return f},bb:function(){return d},fb:function(){return b},hz:function(){return m},nO:function(){return u},zT:function(){return s}});n(47941),n(82526),n(57327),n(41539),n(88449),n(2490),n(59849),n(38880),n(15581),n(34514),n(54747),n(49337),n(33321),n(69070);var a=n(4942),r=n(71893),l=n(99113);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=(0,r.default)(l.Flex).attrs({alignItems:"center",color:"text",gap:1,hoverColor:"text"}).withConfig({displayName:"styled__AnchorComponent",componentId:"sc-wc4x41-0"})(["&,&:hover{text-decoration:none;}"]),s=(0,r.default)(l.Icon).attrs({height:"130px",width:"130px"}).withConfig({displayName:"styled__BlurredIcon",componentId:"sc-wc4x41-1"})(["filter:blur(70px);position:absolute;left:0;top:0;opacity:0.5;"]),u=(0,r.default)(l.Button).attrs({height:"22px",icon:"plus",padding:[.5,2,.5,1],small:!0,width:"auto"}).withConfig({displayName:"styled__IntegrationAction",componentId:"sc-wc4x41-2"})(["&& > span{font-weight:bold;margin-left:4px;}"]),d=(0,r.default)(l.TextSmall).withConfig({displayName:"styled__LearnMoreTest",componentId:"sc-wc4x41-3"})(["position:relative;"]),m=(0,r.default)(l.ModalContent).attrs({height:{base:150,max:150,min:45},overflow:{vertical:"auto"},width:{base:121,max:140,min:70}}).withConfig({displayName:"styled__ModalContent",componentId:"sc-wc4x41-4"})(["box-shadow:0 18px 28px rgb(9 30 66 / 15%),0 0 1px rgb(9 30 66 / 31%);"]),p=(0,r.default)(l.ModalCloseButton).attrs({color:"text",height:"16px",width:"16px"}).withConfig({displayName:"styled__ModalClose",componentId:"sc-wc4x41-5"})(["&:hover{fill:",";}"],(0,l.getColor)("selected")),g=(0,r.default)(l.Flex).attrs((function(e){return i(i({},e.hasBorder?{border:{side:"bottom",color:"disabled"}}:{}),{},{column:!0,padding:[3,4]})})).withConfig({displayName:"styled__ModalSection",componentId:"sc-wc4x41-6"})([""]),f=(0,r.default)(l.Icon).attrs({name:"warning_triangle",height:"18px",width:"18px",color:["yellow","amber"]}).withConfig({displayName:"styled__WarningIcon",componentId:"sc-wc4x41-7"})(["position:absolute;top:0;right:0;z-index:1;"]),b=(0,r.default)(l.Icon).attrs({height:"12px",width:"12px",color:"white"}).withConfig({displayName:"styled__SystemIcon",componentId:"sc-wc4x41-8"})(["position:relative;top:2px;"])},62195:function(e,t,n){"use strict";var a=n(29439),r=(n(41539),n(88674),n(17727),n(67294)),l=n(50308),o=n.n(l),i=n(99113),c=n(36285),s=n(93017),u=n(39979),d=n(54005),m=n(63346),p=n(46667),g=n(23154),f=(0,u.Z)(i.Button);t.Z=function(e){var t=e.onConfirm,n=e.onDecline,l=void 0===n?o():n,u=e.onCancellingEnd,b=void 0===u?o():u,h=(0,c.Zn)(),E=(0,s.Z)(),v=(0,a.Z)(E,2),y=v[0],x=v[1],w=(0,g.Z)().id,C=(0,d.Z)(),O=C.sendLog,P=C.isReady,S=(0,p.Z)(),Z=(0,a.Z)(S,4),T=Z[0],k=Z[2],I=Z[3],j=(0,r.useCallback)((function(){k(),h({productId:w}).then((function(){y({header:"Successfully canceled subscription",text:"You are now on Community plan"}),O({feature:"TrialOptOut",isSuccess:!0})})).catch((function(){x({header:"Failed to cancel the subscription",text:"Remained on Business plan"}),O({feature:"TrialOptOut",isFailure:!0,error:"Failed to cancel the subscription"})})).finally((function(){b(),I()}))}),[w,P]),F=(0,r.useCallback)((function(){t?t():j()}),[t,j]);return r.createElement(i.Modal,{backdropProps:{backdropBlur:!0}},r.createElement(m.ZP,{feature:"TrialOptOut"},r.createElement(i.ModalContent,{width:{base:140}},r.createElement(i.ModalHeader,null,r.createElement(i.Flex,{gap:2,alignItems:"center"},r.createElement(i.H4,null,"Go to Community plan"))),r.createElement(i.ModalBody,null,T?r.createElement(i.Flex,{height:"100px"},r.createElement(i.TextBig,null,"Changing billing plan...")):r.createElement(i.Flex,{gap:2,column:!0},r.createElement(i.H3,null,"Are You Sure?"),r.createElement(i.TextBig,null,"It looks like you have chosen to opt-out of your free 30-day business trial. Are you sure you do not want to experience all the features Netdata has to offer?"),r.createElement(i.TextBig,null,"By opting out, you will switch to the community plan immediately."))),r.createElement(i.ModalFooter,null,r.createElement(i.Flex,{justifyContent:"end",gap:4,padding:[1,2]},r.createElement(f,{feature:"TrialOptOut",label:"Yes, I am sure!",flavour:"hollow",small:!0,onClick:F,disabled:!w||T,textTransform:""}),r.createElement(f,{feature:"TrialOptOut",label:"No, I want the trial!",small:!0,onClick:l,disabled:T,textTransform:""}))))))}},96009:function(e,t,n){"use strict";n.d(t,{Bk:function(){return o},NY:function(){return r},_j:function(){return l},fe:function(){return i},v8:function(){return a}});var a={default:"successBackground",warning:"warningBackground",critical:"errorBackground"},r={default:{background:"successSemi",border:"success"},warning:{background:"warningSemi",border:"warning"},critical:{background:"errorSemi",border:"error"}},l=[30,15,3,2,1],o="dismissedTrialWelcome",i="dismissedTrialWarningDate"},66987:function(e,t,n){"use strict";var a=n(87462),r=n(67294),l=n(99113),o=n(50308),i=n.n(o),c=n(60511),s=n(55370),u={banner:{color:"main"},sidebar:{lineHeight:"1.6",color:"main"},freePlanUpgrade:{lineHeight:"1.6",color:"main"},billing:{color:"textLite"}};t.Z=function(e){var t=e.flavour,n=e.couponRemainingDays,o=e.onUpdateClick,d=void 0===o?i():o,m=(0,c.Z)(),p=m.daysRemaining,g=m.canUpgrade,f=m.trialEndsAt,b=(0,r.useMemo)((function(){return{isCoupon:n>0,isBanner:"banner"==t,isSidebar:"sidebar"==t,isBilling:"billing"==t,isFreePlanUpgrade:"freePlanUpgrade"==t}}),[t,n]);return r.createElement(l.Flex,{justifyContent:b.isBilling?"start":"center",alignItems:"center",width:"100%",gap:2},b.isCoupon?r.createElement(l.Flex,{column:!0},r.createElement(l.Text,(0,a.Z)({},u[t],{fontSize:"10px",strong:!0}),"POST BLACK FRIDAY OFFER"),r.createElement(s.nF,(0,a.Z)({},u[t],{fontSize:"38px",lineHeight:.8,strong:!0}),"50% off")):b.isFreePlanUpgrade?r.createElement(l.Text,u[t],"Upgrade your plan for unlimited access and Business features."):r.createElement(l.Text,u[t],"You have ",r.createElement(l.Text,(0,a.Z)({strong:!0},u[t]),"".concat(p," days"))," ","left to explore all the features of Netdata Business."," ",b.isBilling&&r.createElement(r.Fragment,null,"Trial ends at"," ",r.createElement(l.Text,(0,a.Z)({strong:!0},u[t]),f),"."," "),b.isBanner&&g?r.createElement(l.Box,{"data-testid":"upgrade-to-business-banner",onClick:d,as:l.Text,cursor:"pointer",textDecoration:"underline",color:"main"},"Consider upgrading for unlimited access."):r.createElement(r.Fragment,null,"Consider upgrading for unlimited access.")))}},55370:function(e,t,n){"use strict";n.d(t,{AK:function(){return i},Ti:function(){return o},nF:function(){return c}});var a=n(71893),r=n(99113),l=n(96009),o=(0,a.default)(r.Flex).attrs({position:"relative"}).withConfig({displayName:"styled__TrialWarningSidebar",componentId:"sc-66x250-0"})(["background-color:",";border-width:1px;border-style:dashed;border-color:",";border-radius:2px;"],(function(e){var t,n=e.type;return(0,r.getColor)(null===(t=l.NY[n])||void 0===t?void 0:t.background)}),(function(e){var t,n=e.type;return(0,r.getColor)(null===(t=l.NY[n])||void 0===t?void 0:t.border)})),i=(0,a.default)(r.Button).withConfig({displayName:"styled__TrialUpgradeButton",componentId:"sc-66x250-1"})(["flex:auto;"]),c=(0,a.default)(r.Text).attrs({strong:!0,lineHeight:.8}).withConfig({displayName:"styled__PromoText",componentId:"sc-66x250-2"})(["background-color:",";background-image:linear-gradient( 43deg,"," 0%,"," 46%,"," 100% );-webkit-background-clip:text;-webkit-text-fill-color:transparent;"],(0,r.getColor)("primary"),(0,r.getColor)(["blue","aquamarine"]),(0,r.getColor)(["purple","mauve"]),(0,r.getColor)("primary"))},29292:function(e,t,n){"use strict";var a=n(45987),r=n(67294),l=n(50308),o=n.n(l),i=n(99113),c=n(54005),s=["flavour","onOptOutClick"],u={default:"Or you can opt to downgrade immediately",billing:"Or you can opt to downgrade immediately"};t.Z=function(e){var t=e.flavour,n=void 0===t?"default":t,l=e.onOptOutClick,d=void 0===l?o():l,m=(0,a.Z)(e,s),p=(0,c.Z)(),g=p.sendLog,f=p.isReady,b=(0,r.useCallback)((function(){d(),g({feature:"TrialOptOut",isStart:!0})}),[f]);return r.createElement(i.Text,m,"After the trial, you'll automatically switch to the free Community plan."," ",r.createElement(i.Box,{"data-testid":"upgrade-to-business-banner",onClick:b,as:i.Text,cursor:"pointer",textDecoration:"underline",color:"primary"},u[n]),".")}},60511:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var a=n(29439),r=n(67294),l=n(33335),o=n(33937),i=n(13477),c=(n(41539),n(64211),n(2490),n(41874),n(33926)),s=n(12274),u=n(36285),d=n(80699),m=n(96009),p=n(38314),g=n(14808),f=function(e){var t=new Date(e||void 0).toLocaleDateString();return"Invalid Date"!==t?t:null},b=function(){var e,t=(0,u.RP)(),n=t.loaded,b=t.value,h=t.refresh,E=(0,d.Z)().isFailure,v=b||{},y=v.slug,x=v.trialEndsAt,w=(0,r.useMemo)((function(){return function(e){if(!e)return null;var t=new Date(e)-new Date;return Math.ceil(t/864e5)}(x)}),[x]),C=n&&!!x,O=(0,l.gI)("billing:Manage"),P=(0,o.pI)("trialModalDismissed"),S=(0,a.Z)(P,1)[0],Z=g.Z3&&O&&(C||E)&&!localStorage.getItem(m.Bk)&&!S,T=(0,r.useState)(localStorage.getItem(m.fe)),k=(0,a.Z)(T,2),I=k[0],j=k[1],F=(0,r.useMemo)((function(){return g.Z3&&C}),[C]),D=(0,r.useState)(),A=(0,a.Z)(D,2),M=A[0],N=A[1],B=(e=w)>15?"default":e>5?"warning":"critical",R=!(0,i.Iy)("isAnonymous")&&O;return(0,r.useEffect)((function(){var e=function(e,t,n,a){if(t<0)return!1;var r=new Date(e||void 0);if(!(0,s.default)(r))return!1;var l=new Date(a||void 0);if(!(0,s.default)(l))return!0;var o=(0,c.Z)({start:l,end:r}).days;return n.some((function(e){return e>=t&&e<o}))}(x,w,m._j,I);N(g.Z3&&e)}),[x,w,I]),{trialWelcomeVisible:Z,sidebarWarningVisible:F,bannerVisible:M,dismissBanner:function(){var e=(new Date).toISOString();j(e),localStorage.setItem(m.fe,e)},daysRemaining:w,trialEndsAt:f(x),type:B,canUpgrade:R,onTrial:C,refreshPlan:h,planIsFreeOrEarlyBird:(0,p.BT)(y)}}},23154:function(e,t,n){"use strict";n(2707),n(47941);var a=n(36285),r=n(38314);t.Z=function(){var e,t=(0,a.Gl)().value;if(null===t||void 0===t||!t.free)return{};var n=Object.keys(t.free).sort(r.G2)[0];return{id:t.free[n]?null===(e=t.free[n][0])||void 0===e?void 0:e.id:null,version:n}}},73952:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return oo}});n(92222);var a=n(67294),r=n(89250),l=n(4942),o=n(29439),i=n(87462),c=n(45987),s=(n(66992),n(41539),n(88674),n(78783),n(33948),n(82772),n(47042),n(47941),n(82526),n(57327),n(88449),n(2490),n(59849),n(38880),n(15581),n(34514),n(54747),n(49337),n(33321),n(69070),n(2145)),u=n(12599),d=n(71893),m=n(99113),p=n(73256),g=n(16645),f=n(7693),b=n(56662),h=(n(21249),n(57640),n(9924),n(33335)),E=n(95383),v=n(74059),y=n(46667),x=n(20031),w=[{id:"name",accessor:"name",header:"Name",cell:function(e){var t=e.getValue,n=e.row.original.isMember,r=t(),l=(0,h.gI)("room:ReadAll");return a.createElement(m.Flex,{alignItems:"center"},l&&n&&a.createElement(x.Z,{margin:[0,1,0,0]}),a.createElement(m.Text,{margin:l&&!n&&[0,0,0,4]},r))}},{id:"nodeCount",accessor:"nodeCount",header:"Nodes",cell:function(e){var t=e.getValue;return"".concat(t()||0)}},{id:"memberCount",accessor:"memberCount",header:function(){return"Users"},cell:function(e){var t=e.getValue;return"".concat(t()||0)}}],C=n(15861),O=n(64687),P=n.n(O),S=(n(26699),n(32023),n(4480)),Z=n(33427),T=n(25819),k=n(37518),I=n(91850),j=n(4474),F=function(){var e=(0,C.Z)(P().mark((function e(t,n){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(n.map((function(e){return(0,T.GX)(t,e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=n(7724);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e){var t=e.spaceId,n=e.spaceName,l=e.startIsCreating,i=function(e){return(0,S._8)((function(t){var n=t.snapshot,a=t.set,r=t.reset;return function(){var t=(0,C.Z)(P().mark((function t(l){var i,c,s,u,d,m,p,g,f,b=arguments;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=(i=b.length>1&&void 0!==b[1]?b[1]:{}).onSuccess,s=i.onFail,t.next=3,n.getPromise((0,E.Ad)({id:e,key:"ids"}));case 3:return u=t.sent,d=l.map((function(e){return e.id})),m=u.filter((function(e){return!d.includes(e)})),a((0,E.Ad)({id:e,key:"ids"}),m),t.next=9,Promise.all(m.map((function(e){return n.getPromise((0,k.n2)({id:e}))})));case 9:return p=t.sent,t.prev=10,t.next=13,F(e,d);case 13:a(I.IV,(0,j.rZ)(p)),l.forEach((function(t){var n=t.id,a=t.slug;r((0,k.n2)({id:n})),r((0,I.xh)([e,a]))})),c&&c(),l.length>1?(0,Z.$T)("Rooms were successfully deleted from Space!"):(g=(0,o.Z)(l,1),f=g[0],(0,Z.$T)("Room ".concat(f.name," was successfully deleted!"))),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(10),a((0,E.Ad)({id:e,key:"ids"}),u),s&&s(t.t0);case 23:case"end":return t.stop()}}),t,null,[[10,19]])})));return function(e){return t.apply(this,arguments)}}()}),[e])}(t),c=(0,h.gI)("space:Delete"),s=(0,h.gI)("room:Create"),u=function(e,t){if(e){var n=Array.isArray(e)?e.map((function(e){return{id:e.id,name:e.name}})):[{id:e.id,name:e.name}];i(n,{onSuccess:t.resetRowSelection})}},d=function(e,t){var n=t.length;return n?1===n?(0,D.CE)(t[0].name):(0,D.CE)(n):""},m=function(e,t){var r=t.length;if(!r)return"";var l=M(M({},1===r?{name:t[0].name}:{roomsLength:r}),{},{spaceName:n});return a.createElement(D.M5,l)},p=(0,r.TH)().pathname,g=(0,r.s0)(),f=(0,a.useCallback)((function(e){return g("".concat(p,"/").concat(e))}),[p,g]),b=(0,a.useMemo)((function(){return{goto:{handleAction:function(e){var t=e.slug;return f(t)},icon:"chevron_right",tooltipText:"Room settings"},delete:{confirmLabel:"Yes, delete",confirmationMessage:function(e){return a.createElement(D.M5,{name:e.name,spaceName:n})},confirmationTitle:function(e){return(0,D.R4)(e.name)},dataGa:function(e){var t=e.slug;return"manage-rooms::click-delete::".concat(t)},declineLabel:"Cancel",handleAction:u,isDisabled:function(e){return e.untouchable||!c},tooltipText:"Delete room"}}}),[c,f]);return{bulkActions:(0,a.useMemo)((function(){return{addEntry:{dataGa:"manage-rooms::click::add-room",handleAction:l,isDisabled:!s,tooltipText:"Create room"},delete:{confirmationMessage:m,confirmationTitle:d,confirmLabel:"Yes, delete",dataGa:"manage-rooms::delete-bulk",declineLabel:"Cancel",handleAction:u,isDisabled:!c,tooltipText:"Delete rooms"}}}),[s,c,m,d]),rowActions:b,onClickRow:f}};function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=function(){var e=(0,E.J7)(),t=(0,h.gI)("room:Delete"),n=e.map((function(e){return R(R({},e),{},{disabled:e.untouchable||!t})})),r=(0,a.useState)(""),l=(0,o.Z)(r,2),i=l[0],c=l[1],s=(0,v.OS)("name"),u=(0,v.OS)("id"),d=(0,y.Z)(),m=(0,o.Z)(d,4),p=m[0],g=m[2],f=m[3],b=(0,a.useState)([]),x=(0,o.Z)(b,2)[1],C=N({startIsCreating:g,spaceId:u,spaceName:s}),O=C.bulkActions;return{roomList:n,globalFilter:i,spaceName:s,spaceId:u,isCreating:p,rowActions:C.rowActions,bulkActions:O,columns:w,startIsCreating:g,stopIsCreating:f,setGlobalFilter:c,onRowSelected:x,dataGa:"manage-rooms"}},_=n(63346),U=function(e){var t=L(),n=t.roomList,r=t.spaceName,l=t.isCreating,o=t.columns,c=t.setGlobalFilter,s=t.stopIsCreating,u=t.onRowSelected,d=t.rowActions,p=t.bulkActions,g=t.dataGa;return a.createElement(_.ZP,{tab:"Rooms"},a.createElement(m.Flex,(0,i.Z)({column:!0,height:"100%",overflow:"hidden",gap:3},e),a.createElement(m.H3,null,"Rooms of ",r),a.createElement(m.Table,{onSearch:c,onRowSelected:u,enableSorting:!0,dataColumns:o,enableSelection:!0,data:n,bulkActions:p,rowActions:d,dataGa:g,testPrefixCallback:function(e){return e.name}})),l&&a.createElement(b.U,{onClose:s}))},V=(n(74916),n(64765),n(41817),n(97323)),H=n(41379),W=n(39904),z=n(2509),Y=n(17563),G=n(96929),q=n(97945);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(){var e=(0,G.zN)();return{nodes:(0,q.Ne)(e).map((function(e){return Q(Q({},e),{},{disabled:e.hasAccessibleData})}))||[],nodeIds:e}},$=n(86403),J=["roomUntouchable"],ee=(0,a.memo)((function(e){var t=e.roomUntouchable,n=(0,c.Z)(e,J),r=X({roomUntouchable:t}),l=r.nodes,o=r.nodeIds;return a.createElement(_.ZP,{tab:"Room::Nodes"},a.createElement(m.Flex,(0,i.Z)({column:!0,height:"100%",overflow:"hidden",gap:3},n),a.createElement(m.H3,null,"Nodes in this room (",o.length,") "),a.createElement($.Z,{showClaimNodeOnEmptySpace:!0,enableSelection:!0,customNodes:l,roomUntouchable:t})))})),te=n(92903),ne=n(1229),ae=n(6557),re=n.n(ae),le=n(91966),oe=n.n(le),ie=n(94666),ce=n(34912),se=n(31203),ue=[{id:"user",accessorKey:"user",header:"Name",cell:function(e){var t=e.cell.row.original,n=t.avatarURL,r=t.name;return a.createElement(m.Flex,{alignItems:"center",gap:2},a.createElement(se.Z,{src:n,title:r}),a.createElement(m.TextSmall,null,r))}},{id:"email",accessorKey:"email",header:"Email",cell:function(e){var t=e.getValue;return a.createElement(m.TextSmall,null,t())}}],de=[{id:"user",desc:!1}],me=function(e){var t=e.setSelected,n=(0,ie.H4)(),r=(0,ne.e1)(),l=(0,a.useMemo)((function(){return oe()(n,r)}),[n,r]),o=(0,a.useCallback)((function(e){t(e.map((function(e){return e.id})))}),[]),i=(0,ce.Vr)(l);return a.createElement(m.Flex,{alignItems:"start",padding:[1],overflow:{horizontal:"hidden",vertical:"auto"}},a.createElement(m.Table,{dataColumns:ue,data:i,autoResetSelectedRows:!0,sortableBy:de,onSearch:re(),onRowSelected:o,enableSelection:!0,enableSorting:!0}))},pe=n(39979),ge=(0,pe.Z)(m.Button),fe=function(e){var t=e.onAdd,n=e.onClose,r=e.selected,l=e.error,o=e.name;return a.createElement(m.Flex,{alignItems:"center",justifyContent:"between"},l?a.createElement(m.Text,{color:"error"},"Select at least 1 user to add to ",o):a.createElement("div",null),a.createElement(m.Flex,{gap:2},a.createElement(m.Button,{neutral:!0,flavour:"hollow",onClick:n,label:"Cancel"}),a.createElement(ge,{disabled:!r.length,label:"Add ".concat(r.length," members"),onClick:t})))},be=n(87181),he=n(86414),Ee=n(36925),ve=n(96585),ye=n(74855),xe=n(52631),we=n(93017),Ce=n(8048),Oe=n(91008),Pe=n(46475),Se=function(e){var t=e.email;return(0,Ee.vV)(t)},Ze={header:"Invitations",text:"Invitations successfully sent!"},Te=function(e){var t=(0,v.OS)(),n=t.id,r=t.slug,l=(0,k.UL)(),c=(0,k.tE)(l,"name"),s=(0,a.useState)([]),u=(0,o.Z)(s,2),d=u[0],p=u[1],g=(0,ve.E)(n),f=(0,o.Z)(g,4),b=f[2],E=f[3],y=(0,we.Z)(),x=(0,o.Z)(y,2)[1],w=(0,a.useState)(),C=(0,o.Z)(w,2),O=C[0],P=C[1],S=(0,a.useState)(),Z=(0,o.Z)(S,2),T=Z[0],I=Z[1],j=function(e){var t=e||Ze,n=t.header,a=t.text,r=(0,ye.sc)({header:n,text:a,success:!0});xe.Z.success(r,{context:"manageInvitations"}),p([]),P(Math.random())},F=(0,a.useCallback)((function(){var e=d.filter(Se).map((function(e){return{email:e.email,name:e.name,role:T,roomIDs:[l]}})),t="".concat(window.location.origin,"/spaces/").concat(r,"/join-space");b(e,t,{onSuccess:j,onError:x})}),[d,l,T]),D=(0,h.QB)();return a.createElement(m.Flex,(0,i.Z)({column:!0},e),a.createElement(m.H4,null,"Send invitations to ",c," room"),a.createElement(be.ne,null,"TIP: You can send more invitations at once, separate each with a comma."),a.createElement(he.m,{key:O,invitations:d,setInvitations:p}),a.createElement(m.H5,{margin:[4,0,0]},"Role"),a.createElement(be.ne,null,"Choose a role for invited user."," ",a.createElement(Oe.Z,{href:Pe.R,target:"_blank",rel:"noopener noreferrer",Component:m.TextSmall},"Learn more")),a.createElement(Ce.Z,{availableRoles:D,dataGA:"invite-to-room",dataTestId:"invite-selectRole",onChange:function(e){I(e.target.value)},value:T}),a.createElement(m.Box,{alignSelf:"end",margin:[4,0,0]},a.createElement(m.Button,{label:"Send",onClick:F,disabled:0===d.length||!T,flavour:"hollow",isLoading:E})))},ke=function(e){var t=e.onClose,n=e.room,r=(0,a.useState)([]),l=(0,o.Z)(r,2),i=l[0],c=l[1],s=(0,a.useState)(!1),u=(0,o.Z)(s,2),d=u[0],p=u[1],b=(0,ne.r3)(n.spaceId,n.id),h=(0,a.useCallback)((function(){if(!i.length)return p(!0);p(!1),b(i),t()}),[i,b]);return a.createElement(g.u6,{onClose:t},a.createElement(f.x,{onClose:t,isSubmodal:!0,title:a.createElement(a.Fragment,null,"Manage room",a.createElement(m.TextBig,{color:"textLite"},"\xa0/ Add Users"))}),a.createElement(te.B,null,"Add users to room\xa0",n.name),a.createElement(g.TZ,null,a.createElement(Te,{margin:[0,0,4]}),a.createElement(m.Flex,{column:!0,flex:!0,overflow:"hidden",padding:[0,0,2,0]},a.createElement(me,{setSelected:c})),a.createElement(fe,{onClose:t,onAdd:h,selected:i,error:d,name:n.name})))},Ie=n(46322),je=n(13477),Fe=function(e){return"Remove ".concat(e)},De=function(e){var t,n=e.name,a=e.usersLength;return a?1===a&&n?Fe(n):"Remove ".concat(t=a," ").concat(1===t?"user":"users"):""},Ae=function(e){var t=e.name,n=e.roomName;return a.createElement(a.Fragment,null,"You are about to remove ",a.createElement("strong",null,t)," from room ",a.createElement("strong",null,n),".",a.createElement("br",null),"Are you sure you want to continue?")},Me=function(e){var t=e.roomName,n=e.usersLength,r="".concat(n,1===n?" user":" users");return a.createElement(a.Fragment,null,"You are about to remove ",a.createElement("strong",null,r)," from room ",a.createElement("strong",null,t),".",a.createElement("br",null),"Are you sure you want to continue?")},Ne=function(e){var t=e.name,n=e.roomName,r=e.usersLength;return r?1===r&&t?a.createElement(Ae,{name:t,roomName:n}):a.createElement(Me,{roomName:n,usersLength:r}):""},Be=n(54005),Re=function(e){var t=e.spaceId,n=e.roomId,r=e.startIsInviting,l=(0,ne.GA)(t,n),o=(0,k.Hm)("name"),i=(0,Be.Z)(),c=i.sendButtonClickedLog,s=i.isReady,u=function(e){if(e){var t=Array.isArray(e)?e.map((function(e){return e.user.id})):[null===e||void 0===e?void 0:e.user.id];l(t)}},d=(0,a.useCallback)((function(){r(),s&&c({label:"Invite users"},!0)}),[s,c]);return{rowActions:(0,a.useMemo)((function(){return{remove:{confirmLabel:"Yes, remove",confirmationMessage:function(e){return a.createElement(Ae,{name:e.name,roomName:o})},confirmationTitle:function(e){return Fe(e.name)},declineLabel:"Cancel",disabledTooltipText:"Remove is disabled",handleAction:u,isDisabled:function(e){return e.disabled},tooltipText:"Remove user from room"}}}),[Fe,u,Ae,o]),bulkActions:(0,a.useMemo)((function(){return{addEntry:{handleAction:d,tooltipText:"Invite users"},remove:{confirmLabel:"Yes, remove",confirmationMessage:function(e,t){return a.createElement(Ne,{name:t[0].name,roomName:o,usersLength:t.length})},confirmationTitle:function(e,t){return De({name:t[0].name,usersLength:t.length})},declineLabel:"Cancel",disabledTooltipText:"Remove is disabled",handleAction:u,tooltipText:"Remove users from room"}}}),[u,Ne,o,r,De])}},Le=function(e){var t=e.untouchable,n=(0,a.useMemo)((function(){return[{id:"email",accessor:"email",header:"Email",cell:function(e){var t=e.getValue;return"".concat(t())}},{id:"name",accessor:"name",header:"Name",cell:function(e){var t=e.getValue;return"".concat(t())}},{id:"user",accessor:"user",header:"Users",cell:function(e){var t=(0,e.getValue)(),n=t.name,r=t.avatarURL,l=t.email;return a.createElement(m.Flex,{alignItems:"center",gap:2},a.createElement(se.Z,{src:r,title:"".concat(n," - ").concat(l||"email not set")}),a.createElement(m.TextSmall,null,n))}}]}),[]),r=(0,ne.lA)(),l=(0,je.Iy)("id"),i=(0,h.gI)("space:RemoveUser"),c=(0,a.useState)([]),s=(0,o.Z)(c,2),u=s[0],d=s[1],p=(0,a.useState)(""),g=(0,o.Z)(p,2),f=g[0],b=g[1],E=(0,y.Z)(),x=(0,o.Z)(E,4),w=x[0],C=x[2],O=x[3],P=(0,v.OS)("id"),S=(0,k.UL)(),Z=Re({selectedRows:u,spaceId:P,roomId:S,startIsInviting:C}),T=Z.rowActions,I=Z.bulkActions;return{columns:n,data:(0,a.useMemo)((function(){return(0,Ie.k)({data:r,currentUserId:l,canRemoveUser:i,untouchable:t})}),[r]),columnVisibility:{email:!1,name:!1},members:r,rowActions:T,bulkActions:I,isInviting:w,globalFilter:f,stopIsInviting:O,onRowSelected:d,setGlobalFilter:b,canRemoveUser:i}},_e=["room"],Ue=function(e){var t=e.room,n=(0,c.Z)(e,_e),r=t.untouchable,l=Le({untouchable:r}),o=l.columns,s=l.data,u=l.columnVisibility,d=l.members,p=l.rowActions,g=l.bulkActions,f=l.isInviting,b=l.stopIsInviting,h=l.onRowSelected,E=l.setGlobalFilter;l.canRemoveUser;return a.createElement(_.ZP,{tab:"Room::User"},a.createElement(m.Flex,(0,i.Z)({column:!0,height:"100%",overflow:"hidden",gap:3},n),a.createElement(m.H3,null,"Users in this room (",d.length,")"),a.createElement(m.Table,{enableSelection:!0,enableSorting:!0,columnVisibility:u,data:s,dataColumns:o,rowActions:p,bulkActions:g,onRowSelected:h,onSearch:E,testPrefixCallback:function(e){return e.name}}),f&&a.createElement(ke,{onClose:b,room:t})))},Ve={room:0,nodes:1,users:2},He=(0,d.default)(m.Box).attrs({height:"100%",padding:[4,0],flex:"1",overflow:"hidden"}).withConfig({displayName:"manageRoomModal__TabContent",componentId:"sc-lrxs0y-0"})([""]),We=function(){var e=(0,r.s0)(),t=(0,v.th)(),n=(0,r.UO)(),l=n.roomSlug,i=n.spaceSlug,c=n.settingsTab,s=(0,k.HM)(t,l);(0,H.Z)({spaceId:t,id:s,polling:!1}),(0,W.Z)(t,s);var d=(0,h.gI)("room:ReadUsers"),p=(0,k.tE)(s),g=(0,a.useState)(p.name),f=(0,o.Z)(g,2),b=f[0],E=f[1],y=(0,r.TH)().search,x=Y.parse(y).tab,w=Ve[void 0===x?"room":x],C=(0,a.useState)(w),O=(0,o.Z)(C,2),P=O[0],S=O[1],Z=(0,m.useInputValue)({maxChars:255,value:p.description}),T=(0,o.Z)(Z,3),I=T[0],j=T[1],F=T[2],D=(0,a.useCallback)((function(){e((0,u.Gn)(z.Sr,{spaceSlug:i,settingsTab:c}))}),[i,c]),A=(0,k.s)(p.id,{shouldPersist:!0,onSuccess:D}),M=(0,a.useCallback)((function(){return A({name:b,description:I})}),[b,I,A]);return a.createElement(m.Flex,{column:!0,justifyContent:"between",overflow:"hidden","data-testid":"manageRoom",flex:"1",height:"100%"},a.createElement(m.Tabs,{"data-testid":"manageRoom-tabs",selected:P,onChange:S,TabContent:He,height:"100%",position:"relative",overflow:"hidden",width:"100%"},a.createElement(m.Tab,{"data-testid":"manageRoom-roomTab",label:a.createElement(m.H5,null,"Room")},a.createElement(V.Q,{roomName:b,setRoomName:E,roomDescription:I,setRoomDescription:j,charsDescIndicator:F,"data-testid":"manageRoom-roomTabContent",id:p.id,navigateToParent:D,onSaveClick:M})),a.createElement(m.Tab,{"data-testid":"manageRoom-nodesTab",label:a.createElement(m.H5,null,"Nodes")},a.createElement(ee,{roomUntouchable:p.untouchable,"data-testid":"manageRoom-nodesTabContent"})),d&&a.createElement(m.Tab,{"data-testid":"manageRoom-usersTab",label:a.createElement(m.H5,null,"Users")},a.createElement(Ue,{"data-testid":"manageRoom-usersTabContent",room:p}))),P===Ve.room&&a.createElement(m.Flex,{justifyContent:"end"}))},ze=n(3975),Ye=function(e){var t=e.children;return(0,ze.QF)(),t},Ge=function(e){var t=e.children;return(0,k.Hm)().loaded?t:null},qe=function(){return a.createElement(r.Z5,null,a.createElement(r.AW,{path:"/",element:a.createElement(U,null)}),a.createElement(r.AW,{path:":roomSlug",element:a.createElement(Ye,null,a.createElement(Ge,null,a.createElement(We,null)))}))},Ke=n(18663),Qe=n(64637),Xe=n(82351),$e=[{id:"email",accessor:"email",header:"Email",cell:function(e){var t=e.getValue;return"".concat(t())}},{id:"name",accessor:"name",header:"Name",cell:function(e){var t=e.getValue;return"".concat(t())}},{id:"user",accessor:"user",width:300,header:"Users",cell:function(e){var t=(0,e.getValue)(),n=t.name,r=t.avatarURL,l=t.email;return a.createElement(m.Flex,{alignItems:"center",gap:2},a.createElement(se.Z,{src:r,title:"".concat(n," - ").concat(l||"email not set")}),a.createElement(m.TextSmall,null,n))}},{id:"type",accessor:"type",width:100,header:"Role",cell:function(e){var t=e.getValue,n=e.row.original.user.deactivated;return a.createElement(m.Flex,{alignItems:"center",gap:1},a.createElement(m.TextSmall,{strong:!0},(0,Qe.fm)(t())),n&&a.createElement(Xe.Z,{content:"This user's role doesn't have permission to access any information on the Space. Please review user's role or space's plan."},a.createElement(m.Icon,{name:"warning_triangle",height:"18px",width:"18px",color:["yellow","amber"]})))}}],Je=(n(85827),n(25387),n(72608),n(274)),et=n(71172),tt=n(19368),nt=n(29983),at=function(){var e=(0,C.Z)(P().mark((function e(t){var n,a,r,l,o;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cacheKeyPrefix,a=t.memberIds,r=t.spaceId,l=function(e){return e.results.filter((function(e){return!a.includes(e.id)}))},o="".concat(n).concat((0,nt.m)(r)),e.next=5,(0,et.c)({key:o,handleResults:l});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt=["role"],lt=["id"];function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ct=function(){var e=(0,C.Z)(P().mark((function e(t,n,a){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(n.map(function(){var e=(0,C.Z)(P().mark((function e(n){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Je.lh)(t,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),st="change-user-role",ut="changeUserRole",dt=function(e){var t=e.handleAction,n=e.ids,r=e.onClose,l=(0,ie.kf)(n),i=1===l.length?l[0]:null,c=(0,h.QB)(),s=(0,a.useState)(i),u=(0,o.Z)(s,2),d=u[0],p=u[1];return a.createElement(m.ConfirmationDialog,{confirmLabel:"Save","data-ga":st,"data-testid":ut,handleConfirm:function(){t(d),r()},handleDecline:r,isConfirmDisabled:!d,isConfirmPositive:!0,message:a.createElement(m.Flex,{gap:2,column:!0},a.createElement(m.TextSmall,null,"Learn more about Netdata role-based access model on"," ",a.createElement(Oe.Z,{href:Pe.R,target:"_blank",rel:"noopener noreferrer",Component:m.TextSmall},"our documentation")),a.createElement(Ce.Z,{availableRoles:c,dataGA:st,dataTestId:ut,onChange:function(e){p(e.target.value)},value:d})),title:"Change roles"})},mt=n(65840),pt=["data"],gt=["data"],ft=function(e){var t=e.spaceId,n=e.startIsInviting,r=function(e){var t=(0,tt.P)();return(0,S._8)((function(n){var a=n.snapshot,r=n.set;return function(){var n=(0,C.Z)(P().mark((function n(l){var o,i,c,s,u,d=arguments;return P().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=(o=d.length>1&&void 0!==d[1]?d[1]:{}).onSuccess,c=o.onError,n.next=3,a.getPromise((0,ie.WA)({id:e,key:"ids"}));case 3:return s=n.sent,u=s.filter((function(e){return!e.includes(l)})),r((0,ie.WA)({id:e,key:"ids"}),u),n.prev=6,n.next=9,(0,Je.Sz)(e,l);case 9:at({cacheKeyPrefix:t,spaceId:e,memberIds:l}),i&&i(),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(6),r((0,ie.WA)({id:e,key:"ids"}),s),c&&c();case 17:case"end":return n.stop()}}),n,null,[[6,13]])})));return function(e){return n.apply(this,arguments)}}()}),[e])}(t),l=function(e){return(0,S._8)((function(t){var n=t.snapshot,a=t.set;return function(){var t=(0,C.Z)(P().mark((function t(r,l){var o,i,s,u,d,m,p,g=arguments;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=(o=g.length>2&&void 0!==g[2]?g[2]:{}).onSuccess,s=o.onError,t.next=3,n.getPromise((0,ce.W3)(r));case 3:return u=t.sent,t.next=6,Promise.all(r.map(function(){var t=(0,C.Z)(P().mark((function t(a){var r;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getPromise((0,ie.ZN)({id:a,spaceId:e}));case 2:return r=t.sent,t.abrupt("return",{mId:a,role:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:return d=t.sent,m=l.role,p=(0,c.Z)(l,rt),r.forEach((function(e){a((0,ce.mX)({id:e}),(function(e){return it(it({},e),p)}))})),m&&r.forEach((function(t){a((0,ie.ZN)({id:t,spaceId:e}),m)})),t.prev=10,t.next=13,ct(e,r,l);case 13:i&&i(),t.next=21;break;case 16:t.prev=16,t.t0=t.catch(10),u.forEach((function(e){var t=e.id,n=(0,c.Z)(e,lt);return a((0,ce.mX)({id:t}),it({id:t},n))})),m&&d.forEach((function(t){var n=t.mId,r=t.role;return a((0,ie.ZN)({id:n,spaceId:e}),r)})),s&&s();case 21:case"end":return t.stop()}}),t,null,[[10,16]])})));return function(e,n){return t.apply(this,arguments)}}()}),[e])}(t),o=(0,h.gI)("space:InviteUser"),s=(0,mt.HK)(),u=(0,a.useCallback)((function(e){var t=e.role,n=e.members;l(n,{role:t},{onSuccess:s})}),[]),d=function(e){return function(t){if(e){var n=Array.isArray(e)?e.map((function(e){return e.user.id})):[null===e||void 0===e?void 0:e.user.id];u({role:t,members:n})}}},m=function(e,t){if(e){var n=Array.isArray(e)?e.map((function(e){return e.user.id})):[null===e||void 0===e?void 0:e.user.id];r(n,{onSuccess:t.resetRowSelection})}},p=(0,a.useCallback)((function(){return"Delete User"}),[]),g=(0,a.useCallback)((function(e){return a.createElement(a.Fragment,null,"You are about to delete ",a.createElement("strong",null,e.name),".",a.createElement("br",null),"Are you sure you want to continue?")}),[]),f=(0,a.useCallback)((function(e,t){var n=t.length;return n?1===n?"Delete User":"Delete Users":""}),[]),b=(0,a.useCallback)((function(e,t){var n=t.length;return n?a.createElement(a.Fragment,null,"You are about to delete"," ",a.createElement("strong",null,1===n?t[0].name:"".concat(t.length," users")),".",a.createElement("br",null),"Are you sure you want to continue?"):""}),[]);return{rowActions:(0,a.useMemo)((function(){return{userSettings:{CustomUIAction:function(e){var t=e.data,n=(0,c.Z)(e,pt);return a.createElement(dt,(0,i.Z)({ids:[t.user.id]},n))},handleAction:d,tooltipText:"Change Role",isDisabled:function(e){return e.disabled},disabledTooltipText:"Changing roles is disabled"},delete:{handleAction:m,confirmationTitle:p,confirmationMessage:g,isDisabled:function(e){return e.disabled},disabledTooltipText:"Delete is disabled"}}}),[]),bulkActions:(0,a.useMemo)((function(){return{addEntry:{handleAction:n,tooltipText:"Invite user",isDisabled:function(){return!o},disabledTooltipText:"Invitations are disabled"},userSettings:{CustomUIAction:function(e){var t=e.data,n=(0,c.Z)(e,gt);return a.createElement(dt,(0,i.Z)({ids:t.map((function(e){return e.user.id}))},n))},handleAction:d,tooltipText:"Change Roles",disabledTooltipText:"Changing roles is disabled"},delete:{handleAction:m,confirmationTitle:f,confirmationMessage:b,disabledTooltipText:"Delete is disabled"}}}),[o,f,b])}},bt=function(){var e=(0,v.th)(),t=(0,v.vu)(e,"name"),n=(0,ie.Qk)(),r=(0,je.Iy)("id"),l=(0,y.Z)(),i=(0,o.Z)(l,4),c=i[0],s=i[2],u=i[3],d=(0,a.useState)(""),m=(0,o.Z)(d,2),p=m[0],g=m[1],f=(0,a.useState)([]),b=(0,o.Z)(f,2),E=b[0],x=b[1],w=ft({selectedRows:E,spaceId:e,startIsInviting:s}),C=w.rowActions,O=w.bulkActions,P=(0,h.gI)("space:RemoveUser"),S=(0,h.gI)("user:ChangeRoles"),Z=(0,h.M2)(),T=P||S,k=(0,a.useMemo)((function(){return function(e){var t=e.fromRolePermissions,n=e.userList,a=e.canModifyUser,r=e.currentUserId;return n.reduce((function(e,n){var l=r===(null===n||void 0===n?void 0:n.id),o=t.includes(n.role);return e.push({name:n.name,email:n.email,user:{avatarURL:n.avatarURL,deactivated:n.deactivated,name:n.name,email:n.email,id:n.id},type:n.role,disabled:!o||!a||l}),e}),[])}({userList:n,currentUserId:r,canModifyUser:T,fromRolePermissions:Z})}),[n]);return{columns:$e,spaceName:t,members:n,currentUserId:r,data:k,isInviting:c,globalFilter:p,rowActions:C,bulkActions:O,columnVisibility:{email:!1,name:!1},onRowSelected:x,setGlobalFilter:g,startIsInviting:s,stopIsInviting:u,canModifyUser:T}},ht=function(e){var t=bt(),n=t.columns,r=t.spaceName,l=t.data,o=t.isInviting,c=t.rowActions,s=t.bulkActions,u=t.columnVisibility,d=t.stopIsInviting,p=t.setGlobalFilter,g=t.onRowSelected;return a.createElement(_.ZP,{tab:"Users"},a.createElement(m.Flex,(0,i.Z)({column:!0,height:"100%",overflow:"hidden"},e),a.createElement(m.H3,null,"Members of ",r),a.createElement(m.TextSmall,{margin:[1,0,3]},"Learn more about Netdata role-based access model on"," ",a.createElement(Oe.Z,{href:Pe.R,target:"_blank",rel:"noopener noreferrer",Component:m.TextSmall},"our documentation")),a.createElement(m.Table,{onSearch:p,data:l,dataColumns:n,enableSorting:!0,enableSelection:!0,onRowSelected:g,bulkActions:s,rowActions:c,columnVisibility:u,testPrefixCallback:function(e){return e.name}})),o&&a.createElement(Ke.l,{onClose:d,isSubmodal:!0}))},Et=n(33582),vt=n(43656),yt=(0,a.memo)((function(e){var t=(0,v.th)(),n=(0,v.OS)("name"),r=(0,vt.Z)().nodes;(0,Et.Z)(t);var l="Connect Nodes to ".concat(n);return a.createElement(_.ZP,{tab:"Nodes"},a.createElement(m.Flex,(0,i.Z)({column:!0,"data-testid":"manageClaimedNodes",height:"100%",overflow:"hidden",gap:3},e),a.createElement(m.H3,{"data-testid":"manageClaimedNodes-header"},l),a.createElement($.Z,{showClaimNodeOnEmptySpace:!0,showClaimModalWithRoomSelection:!0,enableSelection:!0,customNodes:r,isSpace:!0})))})),xt=yt,wt=(n(91058),n(77184)),Ct=n(45736),Ot=n(3689),Pt=function(e){var t=e.name,n=e.spaceName;return a.createElement(a.Fragment,null,"You are about to delete ",a.createElement("strong",null,t)," channel from ",a.createElement("strong",null,n)," space.",a.createElement("br",null),"This cannot be undone. Are you sure you want to continue?")},St=n(31790),Zt=(n(64211),n(41874),n(26833),n(25185)),Tt=["integration","testId"],kt=["testId","tooltipContent"],It=["data-testid","enabled","id","integration","isAvailable","name","spaceId","tooltipContent"];function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dt=function(e){var t=e.integration,n=void 0===t?{}:t,r=e.testId,l=(0,c.Z)(e,Tt),o=l.checked?"disable":"enable";return a.createElement(m.Toggle,(0,i.Z)({colored:!0,"data-testid":"".concat(r,"-toggle"),"data-ga":"manage-channels::toggle-".concat(n.slug,"-").concat(o,"::notifications-tab")},l))},At=function(e){var t=e.testId,n=e.tooltipContent,r=void 0===n?"plan":n,l=(0,c.Z)(e,kt);return l.disabled?a.createElement(Xe.Z,{align:"top",content:Ot.rc[r],"data-testid":"".concat(t,"-warning"),plain:!0},a.createElement(m.Flex,{padding:[2,2,0,0],position:"relative"},a.createElement(Zt.aN,{"data-testid":"".concat(t,"-warningIcon")}),a.createElement(Dt,(0,i.Z)({testId:t},l)))):a.createElement(Dt,(0,i.Z)({testId:t},l))},Mt=function(e){var t=e["data-testid"],n=void 0===t?"cellName":t,r=e.enabled,l=e.id,o=e.integration,s=e.isAvailable,u=e.name,d=e.spaceId,p=e.tooltipContent,g=(0,c.Z)(e,It),f=(0,Ct.pV)(d,"channels"),b=(0,Ct.rz)(d,"channels");return a.createElement(m.Flex,(0,i.Z)({alignItems:"center","data-testid":n,gap:4},g),a.createElement(At,{checked:r,disabled:!s,integration:o,onChange:function(e){var t=e.target.checked;b(f.map((function(e){return e.id===l?Ft(Ft({},e),{},{enabled:t}):e}))),(0,wt.eZ)(d,l,t)},testId:n,tooltipContent:p}),a.createElement(m.Text,{"data-testid":"".concat(n,"-label")},u))},Nt=["data-testid","integration","kindLabel"],Bt=function(e){var t,n=e["data-testid"],r=void 0===n?"cellService":n,l=e.integration,o=void 0===l?{}:l,s=e.kindLabel,u=(0,c.Z)(e,Nt),d=Ot.aU[o.slug]||{};return a.createElement(m.Flex,(0,i.Z)({alignItems:"center","data-testid":r,gap:2,justifyContent:"between",width:"100%"},u),a.createElement(m.Flex,{alignItems:"center","data-testid":"".concat(r,"-integration"),gap:2},a.createElement(m.Icon,(0,i.Z)({"data-testid":"".concat(r,"-icon")},d)),a.createElement(m.Text,{"data-testid":"".concat(r,"-label")},o.title)),a.createElement(Xe.Z,{content:s,"data-testid":"".concat(r,"-kind"),plain:!0},a.createElement(m.Icon,{color:"textLite",height:"16px",name:null===(t=Ot.XK[o.kind])||void 0===t?void 0:t.icon,width:"16px"})))},Rt=function(e){var t=e.canManageChannels,n=e.roomOptions,r=e.spaceId;return[{accessor:"name",cell:function(e){var n=e.getValue,l=e.row;return a.createElement(Mt,{enabled:l.original.enabled,id:l.original.id,integration:l.original.integration,isAvailable:t&&l.original.available,name:n(),spaceId:r,tooltipContent:t?"plan":"role"})},header:"Name",id:"name"},{accessor:"integration",cell:function(e){var t=e.getValue,n=e.row;return a.createElement(Bt,{integration:t(),kindLabel:n.original.kindLabel})},enableColumnFilter:!0,filterFn:function(e,t,n){var a=e.original.integration;return n.length<1||n.some((function(e){var t=e.value;return""===t||t===(null===a||void 0===a?void 0:a.slug)}))},header:"Service",id:"integration",meta:{filter:{component:"select",isMulti:!0,options:Object.keys(Ot.aU).map((function(e){return{label:e,value:e}})),tiny:!0,"data-ga":"manage-integrations::select-service::notification-integrations-tab"},tooltip:a.createElement(m.Flex,{column:!0,width:{max:"200px"},gap:2},a.createElement(m.TextMicro,{color:"white"},"Services are distinguished in two categories."),a.createElement(m.TextMicro,{color:"white"},a.createElement(Zt.fb,{name:Ot.XK.PERSONAL.icon})," ",a.createElement(m.TextMicro,{color:"white",strong:!0},"Personal:")," ",Ot.XK.PERSONAL.tooltip),a.createElement(m.TextMicro,{color:"white"},a.createElement(Zt.fb,{name:Ot.XK.SYSTEM.icon})," ",a.createElement(m.TextMicro,{color:"white",strong:!0},"System:")," ",Ot.XK.SYSTEM.tooltip))}},{accessor:"notificationLabel",cell:function(e){var t=e.getValue;return a.createElement(m.Text,{"data-testid":"channelNotificationsCell"},t())},enableColumnFilter:!0,filterFn:function(e,t,n){var a=e.original.notificationLabel;return n.length<1||n.some((function(e){var t=e.label;return""===t||t===a}))},header:"Notifications",id:"notificationLabel",meta:{filter:{component:"select",isMulti:!0,options:Object.values(Ot.uK),tiny:!0,"data-ga":"manage-integrations::select-notification::notification-integrations-tab"}}},{accessor:"rooms",cell:function(e){var t,r=e.getValue,l=e.row,o={"data-testid":"channelRoomsCell"};if(l.original.internal)return a.createElement(m.Text,o,Ot.mN.label);if(!(l.original.rooms||null!==(t=l.original.rooms)&&void 0!==t&&t.length))return a.createElement(m.Text,o,Ot.k_.label);var i=(0,St.ae)({roomIds:r(),roomOptions:n});return a.createElement(m.Text,{"data-testid":"channelRoomsCell"},i)},enableColumnFilter:!0,filterFn:function(e,t,n){return n.length<1||n.some((function(t){var n=t.label,a=t.value;if(e.original.internal)return n===Ot.mN.label;var r=e.original.rooms||[];return r.length?r.includes(a):n===Ot.k_.label}))},header:"Rooms",id:"rooms",meta:{filter:{component:"select",isMulti:!0,options:n,tiny:!0,"data-ga":"manage-integrations::select-room::notification-integrations-tab"}}}]},Lt=n(45939),_t=n(5429),Ut=n(93742);function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wt=function(e,t){var n=(0,Ct.Cz)(t),a=(0,Ut.Z)({all:!0});(0,_t.Z)((function(){return{enabled:!!t,fetch:function(){return(0,wt.$3)(e,t)},onFail:function(e){return n(Ht(Ht({},Lt.C),{},{error:e.message}))},onSettle:function(){return n({loading:!1,loaded:!0})},onSuccess:function(e){return n(Ht(Ht(Ht({},Lt.C),e.rooms?{roomSelections:a.filter((function(t){var n=t.value;return e.rooms.includes(n)}))}:{}),e))}}}),[e,t])},zt=n(26913);function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qt=function(){var e=(0,r.s0)(),t=(0,h.gI)("channel:Manage"),n=(0,v.th)(),l=(0,v.OS)("name"),i=(0,v.uk)(),c=(0,we.Z)(),s=(0,o.Z)(c,2),d=s[0],m=s[1],p=(0,a.useState)(""),g=(0,o.Z)(p,2),f=g[0],b=g[1];(0,zt.Z)(n);var E=(0,Ct.pV)(n,"channels"),y=(0,Ct.pV)(n,"currentChannelId"),x=(0,Ct.rz)(n,"channels"),w=(0,Ct.rz)(n,"currentChannelId"),O=(0,Ut.Z)({all:!0,internal:!0}),S=(0,Ct.su)(y),Z=S.alerts,T=S.name,k=S.rooms,I=S.secrets;Wt(n,y);var j=(0,a.useCallback)((function(e){w(e)}),[]),F=(0,a.useCallback)(function(){var e=(0,C.Z)(P().mark((function e(t){var a;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,e.prev=1,e.next=4,(0,wt.JV)(n,a);case 4:x(E.filter((function(e){return e.id!==a}))),d({header:"Configuration deleted successfully!"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),m(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),[E,n]),D=(0,a.useCallback)((function(){e((0,u.Gn)(z.xN,{spaceSlug:i,settingsTab:z.bK,settingsSubTab:z.Q$}))}),[i]),A=(0,a.useMemo)((function(){return{addEntry:Gt({dataGa:"manage-channels::click-add-channel::notifications-tab",flavour:"hollow",handleAction:D,iconColor:"success",label:t?"Add Configuration":"View configurations",small:!0,strong:!0,width:"auto"},t?{}:{icon:""})}}),[t,D]),M=(0,a.useMemo)((function(){return{edit:{dataGa:function(e){var t=e.integration;return"manage-rooms::click-edit::".concat((void 0===t?{}:t).slug)},disabledTooltipText:"Edit is disabled",handleAction:function(e){var t=e.id;j(t)},isDisabled:function(e){var n=e.available,a=e.internal;return!t||!n||a},TooltipComponent:Xe.Z,tooltipText:"Edit setting"},delete:{confirmLabel:"Yes, delete",confirmationMessage:function(e){var t=e.integration,n=void 0===t?{}:t;return a.createElement(Pt,{name:n.name,spaceName:l})},confirmationTitle:function(e){var t=e.integration,n=void 0===t?{}:t;return(0,St.D4)(n.name)},dataGa:function(e){var t=e.integration;return"manage-rooms::click-delete::".concat((void 0===t?{}:t).slug)},declineLabel:"Cancel",handleAction:F,isDisabled:function(e){var n=e.integration;return!t||(void 0===n?{}:n).internal},TooltipComponent:Xe.Z,tooltipText:"Delete setting"}}}),[t,F,D]);return{bulkActions:A,channelData:E,currentChannelId:y,columns:Rt({canManageChannels:t,roomOptions:O,spaceId:n}),dataGa:"manage-channels",onFilter:function(e,t,n){var a=e.original,r=n.toLowerCase();if(a.name.toLowerCase().includes(r))return!0;if(a.integration.slug.toLowerCase().includes(r))return!0;if(a.notificationLabel.toLowerCase().includes(r))return!0;if(a.internal)return Ot.mN.label.toLowerCase().includes(r);var l=a.rooms||[];return l.length?(0,St.ae)({roomIds:l,roomOptions:O}).toLowerCase().includes(r):Ot.k_.label.toLowerCase().includes(r)},onModalClose:function(){x(E.map((function(e){return e.id===y?Gt(Gt({},e),{},{alerts:Z,name:T,rooms:k,secrets:I}):e}))),w("")},rowActions:M,search:f,setSearch:b}},Kt=(n(68216),n(79433),n(36412)),Qt=["id","integrationId","onClose"],Xt=["id","getValue","onChange"];function $t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var en="modal",tn=function(e){var t=e.id,n=void 0===t?"new":t,l=e.integrationId,s=e.onClose,d=(0,c.Z)(e,Qt),p=(0,Ct.su)(n),g=p.alarms,f=p.title,b=p.description,h=p.docsLink,y=p.fields,x=p.integration,w=p.loaded,O=p.name,S=p.required,Z=p.rooms,T=p.roomSelections,k=p.secrets,I=(0,mt.HK)(),j=function(e){return"manage-".concat(x,"-channel::").concat(e,"::notification-").concat(l?"integrations":"channels","-tab")},F=(0,r.s0)(),D=(0,we.Z)(),A=(0,o.Z)(D,2),M=A[0],N=A[1],B=(0,Ut.Z)({all:!0}),R=(0,E.J7)(),L=(0,v.th)(),_=(0,v.uk)(),U=(0,Ct.Cz)(n,"alarms"),V=(0,Ct.Cz)(n,"name"),H=(0,Ct.Cz)(n,"roomSelections"),W=(0,Ct.Cz)(n,"secrets"),Y=(0,Ct.Cz)(n,"rooms"),G=(0,a.useState)({}),q=(0,o.Z)(G,2),K=q[0],Q=q[1];if(!w)return null;var X=Object.keys(K),$=S.every((function(e){return(0,St.xW)(e,k[e],y[e])})),J=!X.length||X.every((function(e){var t=k[e].selection;return K[e].every((function(n){return(0,St.xW)(n,k[e][n],y[e].fields[t][n])}))})),ee=g&&$&&J,te=(0,u.Gn)(z.Sr,{spaceSlug:_,settingsTab:z.bK}),ne=function(){var e=(0,C.Z)(P().mark((function e(){var t;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=Jt(Jt(Jt({alarms:g,integrationID:l},O?{name:O}:{}),null!==Z&&void 0!==Z&&Z.length?{Rooms:Z}:{}),{},{secrets:k}),"new"!==n){e.next=7;break}return e.next=5,(0,wt.Y0)(L,t);case 5:e.next=9;break;case 7:return e.next=9,(0,wt.IU)(L,n,t);case 9:M({header:"new"===n?"Configuration created successfully!":"Configuration updated successfully!"}),I(),s(),F(te),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),N(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return a.createElement(m.Modal,{onEsc:s},a.createElement(Zt.hz,{"data-testid":d["data-testid"]||en},a.createElement(m.ModalHeader,{border:{side:"bottom",color:"disabled"},column:!0,"data-testid":"".concat(en,"-header"),gap:.5,padding:[6,4,3]},a.createElement(m.Flex,{alignItems:"center","data-testid":"".concat(en,"-headerMain")},a.createElement(m.Flex,{"data-testid":"".concat(en,"-titleContainer"),gap:1},a.createElement(m.Icon,(0,i.Z)({"data-testid":"".concat(en,"-titleIcon")},Ot.aU[x]||{})),a.createElement(m.H3,{"data-testid":"".concat(en,"-title")},f)),s&&a.createElement(Zt.A3,{"data-ga":j("close-modal"),"data-testid":"".concat(en,"-close"),onClose:s})),a.createElement(m.TextSmall,{as:m.Box,"data-testid":"".concat(en,"-description")},b,"\xa0",a.createElement(Oe.Z,{Component:m.TextSmall,"data-ga":j("click-docs"),"data-testid":"".concat(en,"-docsLink"),href:h,target:"_blank",whiteSpace:"nowrap"},"Learn how to configure it."))),a.createElement(m.ModalBody,{"data-testid":"".concat(en,"-body"),overflow:{vertical:"auto"},padding:[0]},a.createElement(Zt.QD,{gap:2,"data-testid":"".concat(en,"-standardFields"),hasBorder:!0},a.createElement(m.Text,{"data-testid":"".concat(en,"-standardFields-header")},"Notification settings"),a.createElement(m.Flex,{column:!0,"data-testid":"".concat(en,"-standardFields-body"),gap:3},a.createElement(Kt.Z,{component:"input","data-ga":j("configuration-name-input"),"data-testid":"".concat(en,"-configurationName"),onChange:V,placeholder:"i.e All alerts from All nodes",title:"Configuration name",value:O}),a.createElement(Kt.Z,{component:"select","data-ga":j("rooms-select"),"data-testid":"".concat(en,"-rooms"),isMulti:!0,onChange:function(e){var t;if(1!==R.length){if(0===e.length)return Y([]),void H([]);if(e.length===R.length||null===(t=e[e.length-1])||void 0===t||!t.value)return Y([]),void H([Ot.k_]);var n=e.map((function(e){return e.value})).filter(Boolean),a=e.length>1?e.filter((function(e){return e.value})):e;Y(n),H(a)}},options:B,placeholder:"Select rooms",title:"Rooms",value:T}),a.createElement(Kt.Z,{component:"select","data-ga":j("notification-select"),"data-testid":"".concat(en,"-notifications"),isRequired:!0,onChange:function(e){var t=e.value;U(t)},options:Object.values(Ot.Nq),placeholder:"Select notifications",title:"Notifications",value:Ot.Nq[g]}))),a.createElement(Zt.QD,{gap:2,"data-testid":"".concat(en,"-dynamicFields"),hasBorder:!0},a.createElement(m.Text,{"data-testid":"".concat(en,"-dynamicFields-header")},"Integration configuration"),a.createElement(m.Flex,{column:!0,"data-testid":"".concat(en,"-dynamicFields-body"),gap:3},Object.values(y).map((function(e){var t=e.id,n=e.getValue,r=e.onChange,l=(0,c.Z)(e,Xt);return a.createElement(Kt.Z,(0,i.Z)({"data-ga":j("".concat(t,"-").concat(l.component)),"data-testid":"".concat(en,"-").concat(t),getDataGa:j,key:t,id:t,onChange:null===r||void 0===r?void 0:r({id:t,setRequiredSubsets:Q,setSecrets:W}),secrets:k,setSecrets:W,value:null===n||void 0===n?void 0:n({id:t,secrets:k})},l))}))))),a.createElement(Zt.QD,{alignItems:"end","data-testid":"".concat(en,"-footer"),justifyContent:"center"},a.createElement(m.Button,{"data-ga":j("new"===n?"create-click":"edit-click"),"data-testid":"".concat(en,"-confirmButton"),disabled:!ee,label:"OK",onClick:ne,textTransform:"uppercase"}))))},nn=["data-testid"],an=function(e){var t=e["data-testid"],n=void 0===t?"channelList":t,r=(0,c.Z)(e,nn),l=qt(),o=l.bulkActions,s=l.channelData,u=l.currentChannelId,d=l.columns,p=l.dataGa,g=l.onFilter,f=l.onModalClose,b=l.rowActions,h=l.search,E=l.setSearch;return a.createElement(_.ZP,{tab:"Notifications::Channels"},a.createElement(m.Flex,(0,i.Z)({column:!0,"data-testid":n,gap:4,height:"100%",width:"100%",margin:[3,0]},r),a.createElement(m.Table,{bulkActions:o,data:s,dataColumns:d,dataGa:p,globalFilter:h,globalFilterFn:g,onSearch:E,rowActions:b,testPrefix:"channelList",testPrefixCallback:function(e){return e.name}}),!!u&&a.createElement(tn,{"data-testid":"editChannelModal",id:u,onClose:f})))},rn=n(58591);function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cn=(0,s.Z)((function(){return n.e(597).then(n.bind(n,95384))}),"SilencingRules"),sn={side:"top",type:"solid",size:"1px",color:"border"},un=function(){var e=(0,rn.m$)().notificationsActiveTab,t=void 0===e?0:e,n=(0,a.useCallback)((function(e){var t=(0,rn.m$)();(0,rn.xs)(on(on({},t),{},{notificationsActiveTab:e}))}),[]);return a.createElement(a.Fragment,null,a.createElement(m.Flex,{padding:[0,0,0,4]},a.createElement(m.H3,null,"Alerts & Notifications")),a.createElement(m.Tabs,{selected:parseInt(t,10),onChange:n,height:"calc(100% - 44px)",margin:[4,0,0,0]},a.createElement(m.Tab,{"data-testid":"spaceSettings-notifications-methods-tab","data-ga":"manage-space::click-tab::notifications-methods-tab",label:a.createElement(m.Text,null,"Notification Methods")},a.createElement(m.Flex,{padding:[2,4],border:sn,flex:"grow"},a.createElement(an,null))),a.createElement(m.Tab,{"data-testid":"spaceSettings-notifications-silencing-rules-tab","data-ga":"manage-space::click-tab::notifications-silencing-rules-tab",label:a.createElement(m.Text,null,"Notification Silencing Rules")},a.createElement(m.Flex,{border:sn,flex:"grow"},a.createElement(a.Suspense,null,a.createElement(cn,null))))))},dn=n(79655),mn=n(78266),pn=n(80959),gn=n(27308),fn=["available","data-testid","description","docsLink","fields","id","internal","kind","kindLabel","slug","required","title"];function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var En=function(e){var t=e.available,n=e["data-testid"],r=void 0===n?"card":n,l=e.description,s=e.docsLink,u=e.fields,d=e.id,p=e.internal,g=e.kind,f=e.kindLabel,b=e.slug,E=e.required,v=e.title,x=(0,c.Z)(e,fn),w=Ot.aU[b]||{},C=(0,Ct.h3)("new"),O=(0,Ct.Cz)("new"),P=(0,h.gI)("channel:Manage"),S=(0,y.Z)(!1),Z=(0,o.Z)(S,4),T=Z[0],k=Z[2],I=Z[3],j=(0,a.useCallback)((function(){O(hn(hn({},Lt.C),{},{title:v,description:l,docsLink:s,fields:u,integration:b,loading:!1,loaded:!0,required:E,secrets:(0,St.A_)(u,E)})),k()}),[l,s,u,b,E]);return a.createElement(a.Fragment,null,a.createElement(m.Flex,(0,i.Z)({background:"elementBackground",column:!0,"data-testid":r,justifyContent:"between",flex:!1,height:37,padding:[3,2,2,3],margin:[0,0,4,0],position:"relative",overflow:"hidden",round:.5,width:75},x),a.createElement(Zt.zT,(0,i.Z)({"data-testid":"".concat(r,"-blurredIcon")},w)),a.createElement(m.Flex,{column:!0,"data-testid":"".concat(r,"-details"),gap:3,margin:[0,0,3,0]},a.createElement(m.Flex,{"data-testid":"".concat(r,"-header"),justifyContent:"between"},a.createElement(m.Flex,{alignItems:"center","data-testid":"".concat(r,"-titleContainer"),gap:1},a.createElement(m.Icon,(0,i.Z)({"data-testid":"".concat(r,"-icon")},w)),a.createElement(m.Text,{"data-testid":"".concat(r,"-title")},v)),!p&&t&&a.createElement(Xe.Z,{align:"bottom",content:P?"":Ot.Ue,plain:!0},a.createElement(m.Box,null,a.createElement(Zt.nO,{"data-ga":"manage-integration-".concat(b,"::click-add::notification-integrations-tab"),"data-testid":"".concat(r,"-button"),disabled:!P,label:"Add",onClick:j}))),!p&&!t&&a.createElement(gn.Z,{"data-ga":"manage-integration-".concat(b,"::click-plan-badge::notification-integrations-tab")})),a.createElement(m.TextSmall,{color:"textDescription","data-testid":"".concat(r,"-description")},l," ",s&&a.createElement(Oe.Z,{Component:Zt.bb,"data-ga":"manage-integration-".concat(b,"::click-docs::notification-integrations-tab"),"data-testid":"".concat(r,"-docsLink"),href:s,target:"_blank",whiteSpace:"nowrap"},"Learn more."))),a.createElement(Xe.Z,{align:"top",content:Ot.XK[g].tooltip,"data-testid":"".concat(r,"-kindContainer"),plain:!0},a.createElement(m.Flex,{alignItems:"end",alignSelf:"end","data-testid":"".concat(r,"-kindContainer"),gap:1},a.createElement(m.Icon,{color:"textLite","data-testid":"".concat(r,"-kindIcon"),height:"16px",name:Ot.XK[g].icon,width:"16px"}),a.createElement(m.TextSmall,{color:"textLite","data-testid":"".concat(r,"-kind")},f)))),T&&a.createElement(tn,{"data-testid":"createChannelModal",integrationId:d,onClose:function(){I(),C()}}))},vn=["data-testid","integrations","title"],yn=function(e){var t=e["data-testid"],n=void 0===t?"group":t,r=e.integrations,l=e.title,o=(0,c.Z)(e,vn);return r.length?a.createElement(m.Flex,(0,i.Z)({column:!0,"data-testid":n,gap:2,position:"relative"},o),a.createElement(m.TextBig,{color:"textDescription","data-testid":"".concat(n,"-title")},l),a.createElement(m.Flex,{flexWrap:!0,"data-testid":"".concat(n,"-integrations"),gap:4},r.map((function(e){return a.createElement(En,(0,i.Z)({"data-testid":"".concat(e.slug,"Card"),key:e.slug},e))})))):null},xn=n(69414);function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var On=function(e){var t=(0,Ct.R1)(e);(0,_t.Z)((function(){return{enabled:!!e,fetch:function(){return(0,wt.h3)(e)},onFail:function(e){return t(Cn(Cn({},xn.E),{},{error:e.message}))},onSettle:function(){return t({loading:!1,loaded:!0})},onSuccess:function(e){t(Cn(Cn({},xn.E),e))}}}),[e])},Pn=["data-testid"],Sn=function(e){var t=e["data-testid"],n=void 0===t?"integrations":t,r=(0,c.Z)(e,Pn),l=(0,v.th)(),s=(0,v.uk)();On(l);var d=(0,Ct.ry)(l),p=d.available,g=d.error,f=d.loaded,b=d.unavailable,h=(0,a.useState)([]),E=(0,o.Z)(h,2),y=E[0],x=E[1],w=(0,a.useState)([]),C=(0,o.Z)(w,2),O=C[0],P=C[1],S=(0,a.useState)(""),Z=(0,o.Z)(S,2),T=Z[0],k=Z[1];if(!f)return a.createElement(mn.Z,{"data-testid":"".concat(n,"-loader"),title:"Loading services..."});if(g)return a.createElement(pn.Z,{"data-testid":"".concat(n,"-error"),message:g,title:"Services of ".concat(s," are currently unavailable")});var I=(0,u.Gn)(z.Sr,{spaceSlug:s,settingsTab:z.bK});return a.createElement(_.ZP,{tab:"Notifications::Integrations"},a.createElement(m.Flex,(0,i.Z)({column:!0,"data-testid":n},r,{padding:[0,3,3],gap:3,overflow:"hidden"}),a.createElement(m.Flex,{border:{side:"bottom",color:"placeholder"},"data-testid":"".concat(n,"-header"),width:"100%"},a.createElement(Oe.Z,{as:dn.rU,Component:Zt.Ce,"data-ga":"manage-integrations::click-back::notification-integrations-tab","data-testid":"".concat(n,"-backLink"),to:I},a.createElement(m.Icon,{"data-testid":"".concat(n,"-backIcon"),name:"arrow_left"}),a.createElement(m.H3,{"data-testid":"".concat(n,"-title")},z.fV[z.Q$]))),a.createElement(m.Flex,{column:!0,"data-testid":"".concat(n,"-content"),gap:2,height:"100%",overflow:"hidden"},a.createElement(m.Box,{as:m.SearchInput,"data-ga":"manage-integrations::search::notification-integrations-tab","data-testid":"".concat(n,"-search"),iconLeft:a.createElement(m.Icon,{name:"magnify",color:"textLite"}),onChange:function(e){k(e),x((0,St.uf)(p,e)),P((0,St.uf)(b,e))},placeholder:"Search service",size:"small",width:{max:49.5}}),a.createElement(m.Flex,{column:!0,"data-testid":"".concat(n,"-groups"),overflow:"auto",height:"100%"},a.createElement(yn,{"data-testid":"integrationGroupAvailable",integrations:T?y:p,title:"Available"}),a.createElement(yn,{"data-testid":"integrationGroupUnavailable",integrations:T?O:b,title:"Unavailable"})))))},Zn=function(){return a.createElement(r.Z5,null,a.createElement(r.AW,{path:"/",element:a.createElement(un,null)}),a.createElement(r.AW,{path:"/".concat(z.Q$),element:a.createElement(Sn,null)}))},Tn=n(46585),kn=n(78710),In=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[(0,m.useInputValue)({maxChars:20,value:e.name||""})||{},(0,m.useInputValue)({maxChars:30,value:e.slug||""})||{},(0,m.useInputValue)({maxChars:50,value:e.description||""})||{}]},jn=n(14809),Fn=n(54131),Dn=n(15418),An=n(30266),Mn=n(54624);function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rn={loading:!1,isAvailable:!1,isValid:!0,error:null},Ln=function(e){var t=(0,v.OS)(),n=(0,a.useState)(Rn),r=(0,o.Z)(n,2),l=r[0],i=r[1];return(0,a.useEffect)((function(){if(t.slug==e)i(Rn);else{var n=(0,Fn._A)(e);i(Bn(Bn({},Rn),{},{isValid:!1,error:n}))}}),[t.slug,e]),(0,Mn.Z)((function(){(0,Fn._A)(e)||t.slug==e||(i((function(e){return Bn(Bn({},e),{},{loading:!0})})),(0,An.wT)(e).then((function(e){var t=e.data;i((function(e){return Bn(Bn({},e),{},{loading:!1,error:t.isAvailable?e.error:"slugNotAvailable"})}))})).catch((function(e){i((function(t){var n;return Bn(Bn({},t),{},{loading:!1,error:(null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.errorMessage)||"Error while validating slug"})}))})))}),500,[e]),l},_n=["nameInput","slugInput","descriptionInput","onStartSlugValidation","onStopSlugValidation","onSlugValidationError"],Un=function(e){var t=e.nameInput,n=e.slugInput,r=e.descriptionInput,l=e.onStartSlugValidation,s=e.onStopSlugValidation,u=e.onSlugValidationError,d=(0,c.Z)(e,_n),p=(0,o.Z)(t,4),g=p[0],f=p[1],b=p[2],h=p[3],E=(0,o.Z)(n,4),v=E[0],y=E[1],x=E[2],w=E[3],C=(0,o.Z)(r,4),O=C[0],P=C[1],S=C[2],Z=C[3],T=Ln(v),k=T.loading,I=T.error;(0,a.useEffect)((function(){(k?l:s)()}),[k]),(0,a.useEffect)((function(){u(I)}),[I]);var j=(0,a.useMemo)((function(){return(0,Fn.x3)(g)}),[g]),F=(0,a.useMemo)((function(){return(0,Fn.uB)(O)}),[O]);return a.createElement(m.Flex,(0,i.Z)({column:!0,gap:4},d),a.createElement(Dn.Z,{Component:m.TextInput,permission:"space:UpdateMeta",label:"Name",value:g,onChange:f,error:Fn.Qj[j],isDirty:h,instantFeedback:"all",fieldIndicator:b,"data-testid":"textInputs-spaceName",containerStyles:{width:{base:150}}}),a.createElement(Dn.Z,{Component:m.TextInput,permission:"space:UpdateMeta",label:"Slug",value:v,onChange:y,error:Fn.Qj[I]||I,isDirty:w,instantFeedback:"all",fieldIndicator:x,"data-testid":"textInputs-spaceSlug",containerStyles:{width:{base:150}}}),a.createElement(Dn.Z,{Component:m.TextInput,permission:"space:UpdateMeta",label:"Description",value:O,onChange:P,error:Fn.Qj[F],isDirty:Z,instantFeedback:"all",fieldIndicator:S,"data-testid":"textInputs-spaceDescription",containerStyles:{width:{base:150}}}))},Vn=n(57387),Hn=["id"],Wn=function(e){var t=e.id,n=(0,c.Z)(e,Hn);return a.createElement(m.Flex,(0,i.Z)({column:!0,gap:1},n),a.createElement(m.Text,{strong:!0},"Space Id"),a.createElement(Vn.ZP,{confirmationText:"Space ID copied to your clipboard."},t))},zn=n(72671),Yn=function(){return a.createElement(m.Text,{lineHeight:1.5},"With the change of the Space Slug, previous ",a.createElement(m.Text,{strong:!0},"links will be broken"),". In case you have some bookmarks or previous references using the previous Space Slug you should update them where possible. Please confirm you want to proceed with the change.")},Gn=function(e){var t=e.handleConfirm,n=e.handleDecline;return a.createElement(m.ConfirmationDialog,{confirmLabel:"Continue","data-testid":"changeSpaceSlugDialog",handleConfirm:t,handleDecline:n,message:a.createElement(Yn,null),title:"Space slug change"})},qn=n(20428),Kn=["nameInput","slugInput","descriptionInput","onClose","isValidatingSlug","slugError"];function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Xn=(0,pe.Z)(m.Button),$n=function(e){var t=e.nameInput,n=e.slugInput,r=e.descriptionInput,s=e.onClose,u=e.isValidatingSlug,d=e.slugError,m=(0,c.Z)(e,Kn),p=(0,v.OS)(),g=(0,qn.Z)(p.id),f=(0,a.useState)(!1),b=(0,o.Z)(f,2),h=b[0],E=b[1],x=(0,o.Z)(t,1)[0],w=(0,o.Z)(n,1)[0],C=(0,o.Z)(r,1)[0],O=(0,a.useMemo)((function(){return p.slug!==w}),[p.slug,w]),P=(0,y.Z)(),S=(0,o.Z)(P,4),Z=S[0],T=S[2],k=S[3],I=function(){s(O?w:null),E(!1)},j=function(){return E(!1)},F=(0,a.useCallback)((function(e){!e&&O?T():(E(!0),g(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:x,description:C},O?{slug:w}:{}),{onSuccess:I,onFail:j}))}),[x,w,C,p.slug]),D=(0,a.useCallback)((function(){return F(!0)}),[F]),A=(0,a.useMemo)((function(){var e=(0,Fn.x3)(x),t=(0,Fn.uB)(C);return!!(h||u||e||d||t)||p.name===x&&p.slug===w&&(p.description===C||!p.description&&!C)}),[p,x,w,C,h,u]);return a.createElement(a.Fragment,null,a.createElement(Xn,(0,i.Z)({label:"SAVE",onClick:F,isLoading:h||u,disabled:A,"data-testid":"saveSpace-button",feature:"SpaceSettings"},m)),Z?a.createElement(Gn,{handleConfirm:D,handleDecline:k}):null)},Jn=["onClose"],ea=(0,a.memo)((function(e){var t=e.onClose,n=(0,c.Z)(e,Jn),r=(0,v.OS)(),l=(0,v.GM)("ids"),s=(0,y.Z)(),u=(0,o.Z)(s,4),d=u[0],p=u[2],g=u[3],f=(0,y.Z)(),b=(0,o.Z)(f,4),h=b[0],E=b[2],x=b[3],w=(0,a.useState)(),C=(0,o.Z)(w,2),O=C[0],P=C[1],S=In({name:r.name,slug:r.slug,description:r.description}),Z=(0,o.Z)(S,3),T=Z[0],k=Z[1],I=Z[2];if(!r.id)return null;var j=1===l.filter((function(e){return!(0,kn.Ly)(e)})).length;return a.createElement(_.ZP,{tab:"Info"},a.createElement(m.Flex,(0,i.Z)({column:!0,"data-testid":"manageSpace",flex:"grow",justifyContent:"between",padding:[0,0,6,0],width:{max:150}},n),a.createElement(m.Flex,{column:!0,"data-testid":"manageSpace-settings"},a.createElement(m.H3,{margin:[0,0,4,0]},"Info"),a.createElement(m.Flex,{column:!0,gap:4},a.createElement(Un,{"data-testid":"manageSpace-nameInputs",nameInput:T,slugInput:k,descriptionInput:I,onStartSlugValidation:E,onStopSlugValidation:x,onSlugValidationError:P}),a.createElement(Wn,{"data-testid":"manageSpace-spaceIdInput",id:r.id,width:{base:150}}),a.createElement(m.TextInput,{label:"Your role in space",value:(0,Qe.fm)(r.roleInSpace),disabled:!0,containerStyles:{width:{base:150}}}),a.createElement(m.TextInput,{label:"Plan",value:(0,Qe.db)(r.planName),disabled:!0,containerStyles:{width:{base:150}}}))),a.createElement(m.Flex,{"data-testid":"manageSpace-actions",justifyContent:"between",alignItems:"center"},a.createElement(m.Flex,{"data-testid":"manageSpace-deleteLeaveActions",gap:4},a.createElement(Xe.Z,{align:"top",content:j&&Tn.T$.leave,isBasic:!0,stretch:"align"},a.createElement(m.Flex,{alignItems:"center"},a.createElement(m.Button,{"data-ga":"manage-space-tab::click-leave-space::manage-space-modal","data-testid":"manageSpace-leave",disabled:j,icon:"switch_off",flavour:"borderless",label:"Leave space",neutral:!0,padding:[0],width:"fit-content",onClick:p}))),a.createElement(zn.Z,{"data-testid":"manageSpace-delete",id:r.id,isLastSpace:j,name:r.name,onClose:t})),a.createElement($n,{"data-testid":"manageSpace-save",nameInput:T,slugInput:k,descriptionInput:I,onClose:t,isValidatingSlug:h,slugError:O}))),d&&a.createElement(jn.Z,{id:r.id,name:r.name,onClose:g}))}),(function(){return!0})),ta=n(51091);function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ra=function(){var e=(0,r.s0)(),t=(0,v.th)(),n=(0,r.bS)(z.xN),l=(0,r.bS)(z.Sr),o=(n||l||{}).params,i=o.spaceSlug,c=void 0===i?"":i,s=o.settingsTab,d=void 0===s?"":s,m=o.settingsSubTab,p=void 0===m?"":m,g=(0,v.OS)("name"),f=(0,k.HM)(t,p),b=(0,k.tE)(f,"name"),h=z.fV[d],E=(0,a.useCallback)((function(){e((0,u.Gn)(z.Sr,{spaceSlug:c,settingsTab:d}))}),[c,d]),y=(0,a.useMemo)((function(){var e=[{name:"Manage Space",isDisabled:!0},{name:g,isDisabled:!0},aa({name:h},!!p&&{onClick:E})];return p&&e.push({name:h===z.fV[z.eq]?b:z.fV[p]||p}),e}),[E,b,g,h,p]);return a.createElement(ta.Z,{isBig:!0,items:y,showBackButton:!1,testid:"manageSpace"})},la=n(22648),oa=n(36285),ia=(n(17727),n(58504)),ca=function(e){return a.createElement(m.Box,(0,i.Z)({as:"hr",height:"100%",sx:{borderWidth:"0px 0px 0px 1px",borderColor:"borderSecondary",borderStyle:"solid"}},e))},sa=function(){return a.createElement(ca,{height:"1px",width:"100%",sx:{borderWidth:"1px 0px 0px 0px",borderColor:"borderSecondary",borderStyle:"solid"}})},ua=n(38314),da=function(e){var t=e.currentPlan,n=e.billingEmail,r=e.paymentMethod,l=e.businessName,i=e.vatNo,c=e.billingAddress,s=(0,oa.SH)(),u=(0,o.Z)(s,2),d=u[0],p=u[1],g=!!t.billingEmail&&!p,f=n||"",b=f?"":"Email is required",h=null!==r&&void 0!==r&&r.id?"**** ".concat(null===r||void 0===r?void 0:r.id):"",E=h?"":"Payment method is required",v=c?"":"Billing address is required";return a.createElement(m.Flex,{column:!0,gap:3},a.createElement(m.Flex,{gap:4},a.createElement(m.TextInput,{value:f,label:"Billing email",placeholder:"Not specified",instantFeedback:"all",isDirty:!!b,error:b,disabled:!0}),a.createElement(m.TextInput,{value:h,label:"Default payment method",placeholder:"Not specified",instantFeedback:"all",isDirty:!!E,error:E,disabled:!0})),i&&a.createElement(m.Flex,{gap:4},a.createElement(m.TextInput,{value:l||"",label:"Business name",placeholder:"Not specified",disabled:!0}),a.createElement(m.TextInput,{value:i,label:"VAT number",placeholder:"Not specified",disabled:!0})),a.createElement(m.Flex,null,a.createElement(m.TextInput,{value:(0,ua.GA)(c)||"",label:"Billing address",placeholder:"Not specified",isDirty:!!v,error:v,disabled:!0})),a.createElement(Oe.Z,{Component:m.Flex,cursor:g?"pointer":"default",disabled:!g,onClick:d,alignItems:"center",gap:1,"data-ga":"billing-options::click::billing"},a.createElement("span",null,"Change billing information and payment method"),a.createElement(m.Icon,{name:"nav_arrow_goto",width:"12px",height:"12px"})))},ma=function(e){var t=e.onReset;return a.createElement(m.Box,{as:m.Icon,name:"close_circle",onClick:t,cursor:"pointer",width:3,height:3,color:"border",position:"absolute",left:"2px"})},pa=function(e){var t=e.promotionCode,n=e.onReset;return a.createElement(m.Flex,{width:"100%"},a.createElement(m.Pill,{padding:[0],flavour:"neutral",hollow:!0},a.createElement(m.Flex,{position:"relative",gap:2,alignItems:"center",padding:[1,2,1,5]},a.createElement(ma,{onReset:n}),a.createElement(m.Text,null,t))))},ga=function(e){var t=e.promotionCode,n=e.onApply,r=e.error,l=(0,a.useState)(t||""),i=(0,o.Z)(l,2),c=i[0],s=i[1],u=function(){s(""),n("")};return a.createElement(m.Flex,{column:!0,gap:1},a.createElement(m.Text,{strong:!0},"Promotion code"),t&&!r?a.createElement(pa,{promotionCode:t,onReset:u}):a.createElement(m.Flex,{column:!0,gap:1},a.createElement(m.Flex,{gap:2,alignItems:"baseline"},a.createElement(m.TextInput,{value:c,onChange:function(e){return s(e.target.value)},placeholder:"Promotion code"}),!r&&a.createElement(m.Button,{label:"Apply",onClick:function(){return n(c)},padding:[3,4],disabled:!c}),!!c&&a.createElement(m.Button,{label:"Clear",flavour:"hollow",onClick:u,padding:[3,4],disabled:!c})),r&&a.createElement(m.Text,{color:"error"},r)))},fa=function(e){var t=e.needsCommitment,n=e.commitment,r=e.handleCommitmentChange;return t&&a.createElement(m.Flex,{column:!0,gap:2},a.createElement(m.Flex,{gap:4,alignItems:"baseline"},a.createElement(m.Text,{strong:!0,style:{whiteSpace:"nowrap"}},"Committed Nodes"),a.createElement(m.TextInput,{onChange:r,value:n,placeholder:"i.e. 14",type:"number",min:1})),a.createElement(m.TextSmall,null,"Nodes that you'll have a discount of 25% on the original cost per node of the plan. This amount will be part of your annual prepayment."))},ba=n(50308),ha=n.n(ba),Ea=n(99826),va=["currentPlan"],ya={earlyBird:function(){return a.createElement(m.Text,null,"You are moving from ",a.createElement(m.Text,{strong:!0},"Early Bird")," plan to another plan, you won't be able to come back to this. The ",a.createElement(m.Text,{strong:!0},"Community")," free plan will be there if you wish to cancel but this doesn't allow you to invite or change users using the Member role.")},communityV1:function(e){var t=e.onCtaClick,n=void 0===t?ha():t,r=(0,Ea.Z)().url;return a.createElement(m.Text,null,"You are moving from ",a.createElement(m.Text,{strong:!0},"Community (2023.02)")," plan to another plan, you won't be able to come back to this. The new ",a.createElement(m.Text,{strong:!0},"Community (2023.11)")," free plan will be there if you wish to cancel but this will have new limitation: max of 5 nodes active and max of 1 custom dashboard. See full details on the"," ",a.createElement(Oe.Z,{as:dn.rU,onClick:n,to:r,disabled:!r},a.createElement(m.Text,{color:"primary"},"View plans page")),".")},pro:function(){return a.createElement(m.Text,null,"You are moving from ",a.createElement(m.Text,{strong:!0},"Pro")," plan to another plan by yourself, if you proceed we won't be able to migrate you to the Business plan with your current pricing conditions as communicated.")}},xa=function(e){var t=e.currentPlan,n=(0,c.Z)(e,va),r=ya[function(e){return"earlyBird"==e.slug?"earlyBird":"free"==e.slug&&"2023.02"==e.version?"communityV1":"pro"==e.slug?"pro":null}(t)]||null;return r&&a.createElement(a.Fragment,null,a.createElement(ca,{height:"1px",width:"100%",sx:{borderWidth:"1px 0px 0px 0px",borderColor:"borderSecondary",borderStyle:"solid"}}),a.createElement(m.Flex,{gap:3},a.createElement(m.Icon,{size:"large",color:"warning",name:"warning_triangle"}),a.createElement(r,n)))},wa=function(e){return"earlyBird"===(null===e||void 0===e?void 0:e.slug)?"earlyBird":e&&e.slug&&"free"!==e.slug?"".concat(e.slug,"-").concat(e.interval):"free"},Ca=(n(54678),d.default.div.withConfig({displayName:"withTableWrapper__TableWrapper",componentId:"sc-drcfxi-0"})(["margin-top:30px;"])),Oa=function(e){return function(t){return a.createElement(Ca,null,a.createElement(e,t))}},Pa=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ta={size:50,minSize:50,maxSize:100},ka=function(e){return function(){return a.createElement(m.Flex,{width:"100%",justifyContent:"end"},e)}},Ia=function(e){var t=e.getValue;return a.createElement(m.Flex,{width:"100%",justifyContent:"end"},t())},ja=[Za(Za({id:"name",accessor:"name",header:""},Ta),{},{fullWidth:!0}),Za({id:"price",accessor:"price",header:ka("Price"),cell:Ia},Ta),Za({id:"qty",accessor:"qty",header:ka("Qty"),cell:Ia},Ta),Za({id:"month",accessor:"month",header:ka("Month"),cell:Ia},Ta),Za({id:"total",accessor:"total",header:ka("Total"),cell:Ia},Ta)],Fa=function(e){return a.createElement(m.Flex,(0,i.Z)({gap:3},e),a.createElement(m.Icon,{size:"large",color:"warning",name:"warning_triangle"}),a.createElement(m.Text,null,"No immediate charges are applicable to this plan subscription. On-demand usage charges will be applied based on your node period count."))},Da=Oa(m.Table),Aa=function(e){var t=e.needsCommitment,n=e.price,r=e.spaceTotal,l=e.commitment,o=e.currentCommitment,i=e.onlyCommitment,c=e.balance,s=e.nodesTotal,u=e.zeroSubscriptionTotal,d=e.checkoutIsDisabled,p=e.discount,g=void 0===p?0:p,f=parseFloat(s+r),b=parseFloat(f*g),h=parseFloat(f-b),E=(0,ua.WT)(l,n.pricing.primary.amountPerNode,i?0:n.pricing.primary.amountFlat,c.amount,o,b);return a.createElement(a.Fragment,null,u?d?null:a.createElement(Fa,null):a.createElement(a.Fragment,null,t&&a.createElement(a.Fragment,null,a.createElement(m.Flex,{justifyContent:"between"},a.createElement(m.Text,null,"Subscription Total"),a.createElement(m.Text,null,Pa.format(f))),!!g&&a.createElement(m.Flex,{justifyContent:"between"},a.createElement(m.Text,{color:"primary"},"Promo discount (",100*g,"%)"),a.createElement(m.Text,{color:"primary"},"- ",Pa.format(b)))),a.createElement(m.Flex,{justifyContent:"between"},a.createElement(m.Text,null,"Total"),a.createElement(m.Text,null,Pa.format(h))),!!c.amount&&a.createElement(m.Flex,{justifyContent:"between"},a.createElement(m.Text,null,"Credit amount"),a.createElement(m.Text,null,"- ",Pa.format(E))),a.createElement(sa,null),a.createElement(m.Flex,null,a.createElement(m.TextMicro,null,"Additional taxes may be applicable"))),a.createElement(m.Flex,{justifyContent:"between"},a.createElement(m.H0,{strong:!0},"Total payable"),a.createElement(m.H0,{strong:!0,"data-testid":"totalPayableAmountCheckout"},Pa.format((0,ua.NU)(o,l,n.pricing.primary.amountPerNode,i?0:n.pricing.primary.amountFlat,E,b)))))},Ma=function(e){var t=e.price,n=e.needsCommitment,r=e.currentCommitment,l=e.onlyCommitment,o=e.balance,i=e.spaceTotal,c=e.amountPerNodePerMonth,s=e.amountPerSpacePerMonth,u=e.commitment,d=e.nodesTotal,m=e.months,p=e.checkoutIsDisabled,g=e.discount,f=void 0===g?0:g,b=(0,a.useMemo)((function(){return 0==parseFloat(d+i)}),[d,i]),h=(0,a.useMemo)((function(){var e=!isNaN(i)&&i>0?{id:"space",name:"Space",price:Pa.format(s),qty:1,month:m,total:Pa.format(i)}:null;return n?[isNaN(d)?null:{id:"nodes",name:"Nodes",price:Pa.format(c),qty:u||0,month:m,total:Pa.format(d)},e].filter(Boolean):[e]}),[n,s,i,d,m]);return a.createElement(a.Fragment,null,!b&&a.createElement(a.Fragment,null,a.createElement(Da,{dataColumns:ja,data:h}),a.createElement(sa,null)),a.createElement(Aa,{needsCommitment:n,price:t,spaceTotal:i,commitment:u,currentCommitment:r,onlyCommitment:l,balance:o,nodesTotal:d,zeroSubscriptionTotal:b,checkoutIsDisabled:p,discount:f}))},Na=n(93433);n(23157);function Ba(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ba(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ba(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var La,_a=Oa(m.Table),Ua=function(e){var t=e.lineItems;return a.createElement(a.Fragment,null,t.map((function(e){var t,n,r=(n=e).description?n.description.startsWith("Discount")?{color:"primary"}:n.description.startsWith("VAT")?{color:"textLite"}:{}:{},l=e.isInfo?m.TextSmall:m.Text;return a.createElement(m.Flex,{key:e.description,justifyContent:"between"},a.createElement(l,r,e.description),a.createElement(l,r,Pa.format(null===(t=e.total)||void 0===t?void 0:t.amount)))})))},Va=(La=function(e){var t=e.lineItems;return a.createElement(m.Flex,{justifyContent:"between",margin:[4,0,0,0]},a.createElement(m.H0,{strong:!0},"Total payable"),a.createElement(m.H0,{strong:!0,"data-testid":"totalPayableAmountPreview"},Pa.format(t.totalPayable.total.amount)))},function(e){var t;return e.lineItems.totalPayable?null!==(t=e.lineItems.info)&&void 0!==t&&t.length?a.createElement(m.Flex,{column:!0,gap:1},a.createElement(La,e),a.createElement(Ua,{lineItems:e.lineItems.info})):a.createElement(La,e):null}),Ha=function(e){var t=e.previewData,n=e.lineItems,r=e.agree,l=e.toggleAgree,o=e.zeroPreviewSubscriptionTotal,i=!(null===t||void 0===t||!t.paymentMethod)&&!(null===t||void 0===t||!t.billingAddress);return a.createElement(a.Fragment,null,a.createElement(sa,null),o&&a.createElement(Fa,{padding:[0,0,2,0]}),a.createElement(m.Flex,{gap:3},a.createElement(m.Checkbox,{checked:r,onChange:l,disabled:!i}),a.createElement(m.Text,null,"I agree to Netdata Inc's"," ",a.createElement(Oe.Z,{href:"https://www.netdata.cloud/service-terms/",rel:"noopener noreferrer",target:"_blank"},"Terms of Service")," ","and"," ",a.createElement(Oe.Z,{href:"https://netdata.cloud/privacy",rel:"noopener noreferer",target:"_blank"},"Privacy Policy"))),a.createElement(Va,{lineItems:n}))},Wa=function(e){var t=e.lineItems;return a.createElement(a.Fragment,null,a.createElement(_a,{dataColumns:ja,data:t.table}),a.createElement(sa,null),a.createElement(Ua,{lineItems:t.footer}))},za=n(62195),Ya=n(60511),Ga=function(e){var t=e.title,n=e.onConfirm,r=e.onClose,l=(0,Be.Z)(),o=l.sendButtonClickedLog,i=l.isReady,c=(0,Ya.Z)().onTrial,s=(0,a.useCallback)((function(){n(),r(),o({description:"confirm-billing-plan-change"},!0)}),[o,i]),u=(0,a.useCallback)((function(){r(),o({description:"close-billing-plan-change-confirmation-dialog"},!0)}),[o,i]),d="Community"==t,p=d?"Cancellation":"Downgrading";return c?a.createElement(za.Z,{onDecline:u}):a.createElement(m.ConfirmationDialog,{confirmLabel:"Yes","data-ga":"downgrade-dialog","data-testid":"downgradeDialog",handleConfirm:s,handleDecline:u,message:a.createElement(m.Flex,{column:!0,gap:2},a.createElement(m.Text,null,"Are you sure you want to ",a.createElement(m.Text,{strong:!0},"move to the ",t," plan")," and cancel your current plan?"),d&&a.createElement(m.Text,null,"Upon cancellation,"," ",a.createElement(m.Text,{strong:!0},"a credit of the value related to the unused period will be credited to your Netdata account.")," ","The credit will be available for you to use on future plan subscriptions with us."),a.createElement(m.Text,null,"For the next 24 hours, you will be able to use all your current notification method configurations."," ",a.createElement(m.Text,{strong:!0},"After 24 hours, any of the notification method configurations that aren't available on your space's plan will be automatically disabled.")),a.createElement(m.Text,null,p," might affect your Space users. Please check what roles are available on the"," ",a.createElement(Oe.Z,{href:"https://learn.netdata.cloud/docs/nightly/concepts/netdata-plans#areas-impacted-by-plans",rel:"noopener noreferrer",strong:!0,target:"_blank"},t," plan"),"."," ",a.createElement(m.Text,{strong:!0},"Users with unavailable roles on the ",t," plan will immediately have restricted access to the Space.")),a.createElement(m.Text,null,"Do you wish to proceed?")),title:"Go to ".concat(t," plan?")})},qa=n(49489),Ka=["currentPlan","billingEmail","paymentMethod"],Qa=function(e){var t=e.currentPlan,n=void 0===t?{}:t,r=e.billingEmail,l=e.paymentMethod,s=(0,c.Z)(e,Ka),u=(0,oa.SH)(),d=(0,o.Z)(u,2),p=d[0],g=d[1],f=!!n.billingEmail&&!g;return r&&l?null:a.createElement(m.Flex,(0,i.Z)({gap:3,alignItems:"center"},s),a.createElement(m.Icon,{size:"large",color:"warning",name:"warning_triangle"}),a.createElement(m.Flex,{column:!0,gap:1},a.createElement(m.Text,null,"You can't proceed to checkout without having provided a"," ",a.createElement(m.Text,{strong:!0},"payment method")," and a ",a.createElement(m.Text,{strong:!0},"billing address"),"."),a.createElement(Oe.Z,{cursor:f?"pointer":"default",disabled:!f,onClick:p,gap:1,"data-ga":"billing-options::click::billing"},"Please go to the billing portal and fill a payment method")))},Xa=n(28234),$a=["title","isDowngrade","showProrations","checkoutOrUpdate"];function Ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tr=function(e){return e?"::commited-".concat(e):""},nr=(0,d.default)(m.Flex).withConfig({displayName:"checkoutTotals__CheckoutButtonWrapper",componentId:"sc-1q0h6ca-0"})(["background:",";padding:16px 0;position:sticky;bottom:0;z-index:20;"],(0,m.getColor)("mainBackground")),ar=(0,pe.Z)(m.Button),rr=function(e){return function(t){var n=t.title,r=t.isDowngrade,l=t.showProrations,s=t.checkoutOrUpdate,u=(0,c.Z)(t,$a),d=(0,y.Z)(),m=(0,o.Z)(d,4),p=m[0],g=m[2],f=m[3];return l&&r?a.createElement(a.Fragment,null,p&&a.createElement(Ga,{title:n,onConfirm:s,onClose:f}),a.createElement(e,(0,i.Z)({onClick:g},u))):a.createElement(e,(0,i.Z)({onClick:s},u))}}((0,d.default)(ar).withConfig({displayName:"checkoutTotals__CheckoutButton",componentId:"sc-1q0h6ca-1"})(["flex:auto;"])),lr=function(e){var t,n=e.title,r=e.slug,l=e.onClose,i=e.currentPlan,c=e.price,s=e.balance,u=e.commitment,d=e.currentCommitment,p=void 0===d?0:d,g=e.email,f=e.needsCommitment,b=e.onlyCommitment,h=e.previewData,E=e.loadingPreview,v=e.showProrations,x=e.promotionCode,w=e.discount,C=void 0===w?0:w,O=function(e,t){var n,a;return((null===(n=qa.Vc[t])||void 0===n?void 0:n.level)||0)<((null===(a=qa.Vc[e])||void 0===a?void 0:a.level)||0)}(i.slug,r),P=(0,y.Z)(!1),S=(0,o.Z)(P,2),Z=S[0],T=S[1],k=v&&!Z||!v&&!g||f&&(p===u||!u||u<1),I=(0,y.Z)(),j=(0,o.Z)(I,2),F=j[0],D=j[1],A=(0,oa.eY)(),M=(0,oa.Zn)(),N=v||i.billingEmail,B=N?M:A,R=(0,Be.Z)(),L=R.sendLog,_=R.isReady,U=(0,we.Z)(),V=(0,o.Z)(U,2),H=V[0],W=V[1],z=(0,a.useCallback)((function(){D(),B(er(er({productId:c.id,email:(null===h||void 0===h?void 0:h.billingEmail)||g},f&&{commitment:u}),x&&{promotionCode:x})).then((function(){l(),L({isSuccess:!0,details:B==N?"update-billing-plan":"checkout-billing-plan"},!0),H({header:"Success",text:"You have successfully updated your plan"})})).catch((function(e){var t;L({isFailure:!0,details:B==N?"update-billing-plan":"checkout-billing-plan"},!0);var n=(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)||e;W({header:"Error",text:(0,Xa.r)(null===n||void 0===n?void 0:n.errorMsgKey)||(null===n||void 0===n?void 0:n.errorMessage)||"Something went wrong"})})).finally(D)}),[L,_]),Y=(null===c||void 0===c?void 0:c.pricing)||{},G=Y.primary,q=Y.secondary,K="year"===c.interval?12:1,Q=(0,ua.c1)(G,q),X=f?Q*K*(u||0):0,$=(0,ua.J3)(G),J=$*K,ee=(t=null===h||void 0===h?void 0:h.invoiceLineItems,(0,a.useMemo)((function(){if(null===t||void 0===t||!t.length)return null;var e=!1;return t.reduce((function(t,n){var a;return"Total payable"==n.description?(t.totalPayable=n,e=!0,t):(n.unitPrice?t.table=[].concat((0,Na.Z)(t.table),[{id:n.description,name:n.description,price:Pa.format(n.unitPrice.amount),qty:n.quantity,month:n.month,total:null===(a=n.total)||void 0===a?void 0:a.amount}]):e?t.info=[].concat((0,Na.Z)(t.info),[Ra(Ra({},n),{},{isInfo:!0})]):t.footer=[].concat((0,Na.Z)(t.footer),[n]),t)}),{table:[],footer:[],info:[]})}),[t])),te=((null===ee||void 0===ee?void 0:ee.footer)||[]).some((function(e){var t=e.description,n=e.total;return"Subscription Total"==t&&0==(null===n||void 0===n?void 0:n.amount)}));return a.createElement(m.Flex,{column:!0,gap:3},v?E||!ee||te?null:a.createElement(Wa,{lineItems:ee}):a.createElement(Ma,{price:c,needsCommitment:f,currentCommitment:p,onlyCommitment:b,balance:s,spaceTotal:J,amountPerNodePerMonth:Q,amountPerSpacePerMonth:$,commitment:u,nodesTotal:X,months:K,checkoutIsDisabled:k,discount:C}),a.createElement(nr,{column:!0,gap:2},v&&!E&&ee&&a.createElement(Ha,{previewData:h,lineItems:ee,agree:Z,toggleAgree:T,zeroPreviewSubscriptionTotal:te}),v&&!E&&a.createElement(Qa,{currentPlan:i,billingEmail:null===h||void 0===h?void 0:h.billingEmail,paymentMethod:null===h||void 0===h?void 0:h.paymentMethod,padding:[0,0,4,0]}),a.createElement(rr,{title:n,isDowngrade:O,label:v?"Checkout":"Proceed to checkout",disabled:!!k||F,checkoutOrUpdate:z,isLoading:F,"data-ga":"proceedTocheckoutButton::click-".concat(wa(c)).concat(tr(u),"::billing"),"data-testid":"billingCheckoutTotals-proceedToCheckoutButton",showProrations:v})))},or=function(e){var t=e.prices,n=e.currentPlan,r=(0,a.useState)(0),l=(0,o.Z)(r,2),i=l[0],c=l[1],s=t[i],u=null===s||void 0===s?void 0:s.commitment,d=(0,a.useState)(n.committedNodes||1),m=(0,o.Z)(d,2),p=m[0],g=m[1];return{recurringIndex:i,setRecurringIndex:c,price:s,needsCommitment:u,commitment:p,handleCommitmentChange:function(e){return g(e.target.value?parseInt(e.target.value,10):"")}}},ir=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).title,t=void 0===e?"Checkout":e;return function(e){return function(n){return a.createElement(g.u6,{onClose:n.onClose},a.createElement(f.x,{onClose:n.onClose,title:t}),a.createElement(m.Flex,{column:!0,padding:[4,4,0,4],justifyContent:"between",height:"calc(100vh - 60px)",overflow:"auto"},a.createElement(e,n)))}}};function cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var sr=3e5,ur=ir({title:"Update plan"})((function(e){var t=e.title,n=e.onClose,c=e.prices,s=e.currentPlan,u=void 0===s?{}:s,d=e.children,p=or({prices:c,currentPlan:u}),g=p.recurringIndex,f=p.setRecurringIndex,b=p.price,E=p.needsCommitment,v=p.commitment,y=p.handleCommitmentChange,x=(0,r.TH)().state,w=(0,a.useState)((null===x||void 0===x?void 0:x.coupon)||""),C=(0,o.Z)(w,2),O=C[0],P=C[1],S=(0,a.useState)(0),Z=(0,o.Z)(S,2),T=Z[0],k=Z[1],I=(0,a.useState)(sr),j=(0,o.Z)(I,2),F=j[0],D=j[1],A=(0,h.gI)("billing:Manage"),M=(0,oa.fG)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({productId:b.id,promotionCode:O},E&&v&&{commitment:v}),T),N=M.loading,B=M.value,R=M.promoCodeError;return(0,ia.Z)((function(){N||k((function(e){return e+1}))}),F),(0,a.useEffect)((function(){D(N?null:sr)}),[N]),a.createElement(_.ZP,{feature:"Billing::UpdateModal"},A?a.createElement(a.Fragment,null,a.createElement(m.Flex,{column:!0,gap:4},a.Children.map(d,(function(e){return(0,a.cloneElement)(e,{recurringIndex:g,setRecurringIndex:f})})),a.createElement(fa,{needsCommitment:E,commitment:v,handleCommitmentChange:y}),a.createElement(sa,null),N?a.createElement(mn.Z,{title:"Loading billing info...",height:"auto"}):B?a.createElement(a.Fragment,null,a.createElement(da,(0,i.Z)({currentPlan:u},B)),a.createElement(sa,null),a.createElement(ga,{promotionCode:O,onApply:P,error:R})):a.createElement("div",null,"No data available"),a.createElement(xa,{currentPlan:u,onCtaClick:n})),a.createElement(lr,{title:t,slug:b.slug,currentPlan:u,onClose:n,price:b,balance:u.balance,commitment:v,needsCommitment:E,previewData:B,loadingPreview:N,showProrations:!0,promotionCode:O})):a.createElement(m.Flex,null,a.createElement(m.TextBigger,null,"You don't have permissions to change the plan.")))}));function dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var mr=ir()((function(e){var t=e.onClose,n=e.prices,i=e.currentPlan,c=void 0===i?{}:i,s=e.children,u=or({prices:n,currentPlan:c}),d=u.recurringIndex,p=u.setRecurringIndex,g=u.price,f=u.needsCommitment,b=u.commitment,E=u.handleCommitmentChange,v=(0,je.Iy)("email"),y=(0,a.useState)(c.billingEmail||v||""),x=(0,o.Z)(y,2),w=x[0],C=x[1],O=(0,h.gI)("billing:Manage"),P=(0,r.TH)().state,S=(0,a.useState)((null===P||void 0===P?void 0:P.coupon)||""),Z=(0,o.Z)(S,2),T=Z[0],k=Z[1],I=(0,oa.sk)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({productId:g.id,promotionCode:T},f&&b&&{commitment:b})),j=I.discount,F=I.promoCodeError;return a.createElement(_.ZP,{feature:"Billing::CheckoutModal"},O?a.createElement(a.Fragment,null,a.createElement(m.Flex,{column:!0,gap:4},a.Children.map(s,(function(e){return(0,a.cloneElement)(e,{recurringIndex:d,setRecurringIndex:p})})),a.createElement(fa,{needsCommitment:f,commitment:b,handleCommitmentChange:E}),a.createElement(sa,null),a.createElement(m.TextInput,{onChange:function(e){return C(e.target.value)},value:w,label:"Billing email",placeholder:"jsmith@example.com"}),a.createElement(sa,null),a.createElement(ga,{promotionCode:T,onApply:k,error:F}),a.createElement(xa,{currentPlan:c,onCtaClick:t})),a.createElement(lr,{currentPlan:c,onClose:t,price:g,balance:c.balance,commitment:b,email:w,needsCommitment:f,discount:j,promotionCode:T})):a.createElement(m.Flex,null,a.createElement(m.TextBigger,null,"You don't have permissions to change the plan.")))})),pr=n(89405),gr=n(37503),fr=n(82902),br=["inModal","recurringIndex","setRecurringIndex"],hr=function(e){var t=e.recurringIndex,n=e.slug,r=e.primary,l=e.secondary;return a.createElement(m.Flex,{column:!0,gap:2},null!==r&&void 0!==r&&r.amountPerNode||null!==l&&void 0!==l&&l.amountPerNode?a.createElement(a.Fragment,null,a.createElement(Xe.Z,{align:"top",content:r.amountPerNode?"Price per active node per month for committed usage of nodes for a year":"Price per node per month",isBasic:!0,plain:!0,stretch:"align"},a.createElement(m.H0,null,Pa.format((0,ua.c1)(r,l)),a.createElement(m.TextSmall,{color:"textLite"},"/",a.createElement(Oe.Z,{Component:m.TextSmall,href:"https://www.netdata.cloud/pricing/#do-i-have-to-pay-for-nodes-that-are-no-longer-online",rel:"noopener noreferrer",target:"_blank"},"Node"),"/month",0==t&&a.createElement(a.Fragment,null," (billed yearly)"))))):"free"==n?a.createElement(m.H0,null,"Free, Forever"):null,(null===r||void 0===r?void 0:r.monthlyDiscountPercentagePerNode)&&a.createElement(m.Flex,null,a.createElement(m.Text,null,a.createElement(m.Text,{strong:!0},100*r.monthlyDiscountPercentagePerNode,"% discount")," is applied for annual billing.")))},Er=d.default.div.withConfig({displayName:"pricingDetails__OneLine",componentId:"sc-hbslp4-0"})(["white-space:nowrap white-space:nowrap;"]),vr=function(e){var t=e.nodesLastPeriod,n=e.committedNodes,r=t-n,l=r>0;return 0==r?a.createElement(m.TextSmall,null,"You are using all your committed nodes."):l?a.createElement(m.TextSmall,null,"You are using"," ",a.createElement(m.TextSmall,{strong:!0,color:"error"},r," ",(0,fr.V6)(r).toLowerCase()," more")," ","than your committed nodes."):a.createElement(m.TextSmall,null,"You are using"," ",a.createElement(m.TextSmall,{strong:!0,color:"success"},t," out of ",n)," ","committed ",(0,fr.V6)(n).toLowerCase(),".")},yr=function(e){var t=e.interval,n=e.currentPeriodTo,r=e.committedNodes,l=e.nodesLastPeriod,o=e.showPromotion,i=e.cancelling,c=e.onCancelPlan,s=(0,pr.rA)().localeDateString;return a.createElement(m.Flex,{column:!0,gap:1},!!n&&a.createElement(m.TextSmall,null,a.createElement(m.TextSmall,{strong:!0,"data-testid":"billingPricingDetails-interval"},"Billing ".concat(qa.go[t]))," ","(renews ",s(new Date(n),{long:!1}),")"),o&&"month"===t&&a.createElement(Oe.Z,{onClick:c,disabled:i},a.createElement(Er,null,"Save 25% by changing your billing frequency to yearly")),"year"===t&&a.createElement(a.Fragment,null,a.createElement(m.TextSmall,null,"Committed Nodes:"," ",a.createElement(m.Text,{strong:!0,"data-testid":"billingPricingDetails-committedNodesNumber"},r)),"number"===typeof l&&a.createElement(vr,{nodesLastPeriod:l,committedNodes:r})))},xr=function(e){var t=e.features,n=e.showViewDetails;return a.createElement(m.Flex,{column:!0,gap:1},t.map((function(e){return a.createElement(m.Flex,{gap:2,key:e},a.createElement(m.Box,{width:5},a.createElement(m.Icon,{name:"check",width:"20px",height:"20px",color:"primary"})),a.createElement(m.TextSmall,null,e))})),n&&a.createElement(m.Flex,{gap:2},a.createElement(m.Box,{width:5}),a.createElement(Oe.Z,{Component:m.Flex,as:dn.rU,cursor:"pointer",alignItems:"center",gap:1,color:"text",hoverColor:"textFocus",to:"all-plans"},a.createElement(m.Text,{strong:!0},"View full details"),a.createElement(m.Icon,{name:"chevron_right",width:"16px",height:"16px"}))))},wr=function(e){return function(t){var n=t.inModal,r=t.recurringIndex,l=t.setRecurringIndex,o=(0,c.Z)(t,br);return n?a.createElement(m.Flex,{width:"100%",justifyContent:"between",alignItems:"center"},a.createElement(e,o),a.createElement(m.Flex,{gap:3,padding:[0,10]},qa.FC.map((function(e,t){return a.createElement(m.RadioButton,{key:e,checked:r===t,onChange:function(){return l(t)},"data-testid":"billingPaidPlans-".concat(e,"-radioButton")},a.createElement(m.Text,{color:"textDescription"},(0,Qe.fm)(qa.go[e])))})))):a.createElement(e,o)}}((function(e){var t=e.children;return a.createElement(m.H3,{"data-testid":"billingPricingDetails-activePlanName"},t)})),Cr=function(e){var t,n=e.slug,r=e.version,l=e.prices,o=e.recurringIndex,c=void 0===o?0:o,s=e.setRecurringIndex,u=e.currentPlan,d=void 0===u?{}:u,p=e.isActive,g=e.showAllDetails,f=e.showTeaserDetails,b=e.cancelling,h=e.onCancelPlan,E=e.title,v=e.features,y=e.nodesLastPeriod,x=e.inModal,w=(0,Ya.Z)().onTrial,C=p?d.pricing:(null===(t=l[c])||void 0===t?void 0:t.pricing)||{},O=(0,ua.BT)(n);return a.createElement(m.Flex,{column:!0,gap:2},a.createElement(m.Flex,{column:!0},a.createElement(m.Flex,{alignItems:"center",gap:2},a.createElement(wr,{inModal:x,recurringIndex:c,setRecurringIndex:s},E),p&&a.createElement(a.Fragment,null,a.createElement(m.Pill,{flavour:"success","data-testid":"active-plan",icon:"checkmark_s"},w?"Trial":"Active"),w&&!g&&a.createElement(gr.Z,null,a.createElement(m.TextBig,{color:"primary"},"Upgrade Now!")))),r&&a.createElement(m.TextBig,null,"(",r,")")),(g||!p||"free"===n)&&a.createElement(hr,(0,i.Z)({recurringIndex:c,slug:n},C)),f&&!(null===v||void 0===v||!v[r])&&a.createElement(xr,{features:v[r],showViewDetails:!O}),p&&!(0,ua.BT)(n)&&!w&&a.createElement(yr,(0,i.Z)({},d,{showPromotion:!0,cancelling:b,onCancelPlan:h,nodesLastPeriod:y})))},Or=n(16294),Pr=n(80697),Sr=n(66987),Zr=n(29292),Tr=n(23154),kr=["slug","version","prices","isSmall","isActive","currentPlan","showAllPlans","showTeaserDetails","allPlansView","nodesLastPeriod"];function Ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fr=(0,d.default)(m.Flex).withConfig({displayName:"plan__StyledWrapper",componentId:"sc-1rlwyf1-0"})(["width:","};min-width:280px;place-self:",";"],(function(e){return e.showAllPlans?"25vw":"auto"}),(function(e){return e.showAllPlans?"center":"auto"})),Dr=function(e){var t=e.slug,n=e.version,r=e.prices,l=void 0===r?[]:r,s=e.isSmall,u=e.isActive,d=e.currentPlan,p=e.showAllPlans,g=e.showTeaserDetails,f=e.allPlansView,b=void 0!==f&&f,E=e.nodesLastPeriod,v=(0,c.Z)(e,kr),x=qa.Vc[t]||qa.Vc.free,w=x.title,C=x.features,O=(0,h.gI)("billing:Manage"),P=(0,Be.Z)(),S=P.sendLog,Z=P.sendButtonClickedLog,T=P.isReady,k=(0,Ya.Z)().onTrial,I=(0,oa.x1)(),j=I.cancelling,F=I.startCancelling,D=I.stopCancelling,A=(0,a.useCallback)((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).label;Z({label:e},!0)}),[Z,T]),M=(0,ua.$s)({currentPlan:d,slug:t,version:n,onTrial:k}),N=j||u&&(0,ua.BT)(t)||"earlyBird"==d.slug&&"free"==t||"free"==d.slug&&"2023.02"==d.version&&"free"==t&&"2023.11"==n,B=(0,a.useState)({}),R=(0,o.Z)(B,2),L=R[0],_=R[1],U=(0,y.Z)(),V=(0,o.Z)(U,4),H=V[0],W=V[2],z=V[3],Y=(0,we.Z)(),G=(0,o.Z)(Y,2),q=G[0],K=G[1],Q=(0,oa.Zn)(),X="cancel"===L.type&&!(0,ua.BT)(d.slug)&&!H,$="cancel"===L.type&&"free"==t&&"2023.11"==n,J=(0,Tr.Z)().id,ee=(0,mt.HK)(),te=(0,a.useCallback)((function(){W(),F(),Q({productId:J}).then((function(){q({header:"Successfully canceled subscription",text:"You are now on Community plan"}),S({isSuccess:!0,description:"cancel-subscription"})})).catch((function(){K({header:"Failed to cancel the subscription",text:"Remained on ".concat(w," plan")}),S({isFailure:!0,description:"cancel-subscription",error:"Failed to cancel the subscription"})})).finally((function(){D(),ee()}))}),[S,T]),ne=(0,a.useCallback)((function(e){if(!j&&!N){if((0,ua.BT)(t))return _({type:"cancel"}),void S(e,!0);if((0,ua.BT)(d.slug))return se("checkout"),void S(e,!0);se("update"),S(e,!0)}}),[S,T]),ae=!!d.billingEmail,re=ae?ur:mr,le=(0,rn.m$)(),oe=le.billingModalType,ie=le.billingModalSlug,ce=["checkout","update"].includes(oe)&&t==ie,se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=(0,rn.m$)();(0,rn.xs)(jr(jr({},n),{},{billingModalType:e,billingModalSlug:""==e?e:t}))},ue=(0,y.Z)(),de=(0,o.Z)(ue,4),me=de[0],pe=de[2],ge=de[3];return a.createElement(Fr,(0,i.Z)({column:!0,height:s?"auto":p?50:75,flex:s,padding:s?[6,10]:[0,10],gap:2,justifyContent:"between",showAllPlans:p},v),a.createElement(Cr,{slug:t,prices:l,isActive:u,currentPlan:d,cancelling:j,showAllDetails:p,showTeaserDetails:g,title:w,version:n,features:C,nodesLastPeriod:E,onCancelPlan:function(){return ne({action:Or.Nw.buttonClicked,label:w})}}),!b&&a.createElement(Dn.Z,{Component:m.Button,permission:"billing:Manage","data-ga":"upgrade-button::click-".concat(wa({slug:t}),"::current-").concat(wa(d),"::billing"),"data-testid":"billingPlan-".concat(t,"-").concat(u?"currentPlan":"upgradeButton"),label:M,flavour:(0,ua.rQ)(null===d||void 0===d?void 0:d.slug,t),disabled:N,width:"100%",onClick:function(){return ne({action:Or.Nw.buttonClicked,label:M,dataGa:"upgrade-button::click-".concat(wa({slug:t}),"::current-").concat(wa(d),"::billing")})},isLoading:j&&u,loadingLabel:"Cancelling"}),!p&&a.createElement(a.Fragment,null,k&&a.createElement(Sr.Z,{flavour:"billing"}),(k||!(0,ua.BT)(d.slug))&&a.createElement(m.Flex,{column:!0,gap:4},a.createElement(m.Flex,{gap:6,alignItems:"baseline"},k&&a.createElement(Pr.Z,null),!(0,ua.BT)(d.slug)&&a.createElement(Oe.Z,{Component:m.Flex,as:dn.rU,cursor:"pointer",alignItems:"center",gap:1,color:"text",hoverColor:"textFocus",to:"all-plans",padding:[4,0,0],disabled:j,onClick:function(){return A({label:O?"Change plan":"View plans"})},"data-testid":"billingPlan-viewMorePlansLink","data-ga":"change-plan::click::billing"},a.createElement("span",null,O?"Change plan":"View plans"),a.createElement(m.Icon,{name:"chevron_right",width:"16px",height:"16px"}))),k&&a.createElement(a.Fragment,null,a.createElement(Zr.Z,{flavour:"billing",color:"textLite",onOptOutClick:pe}),me&&a.createElement(za.Z,{onDecline:ge,onCancellingEnd:function(){}})))),(X||$)&&a.createElement(Ga,{title:w,onConfirm:te,onClose:function(){z(),_({})}}),ce&&a.createElement(re,{title:w,onClose:function(){z(),se()},prices:l,currentPlan:d,showProrations:ae},a.createElement(Cr,{slug:t,prices:l,currentPlan:d,title:w,inModal:!0})))},Ar=(n(69720),["slug","isSmall","currentPlan","showAllPlans","allPlansView","showTeaserDetails"]),Mr=(0,d.default)(m.Flex).withConfig({displayName:"enterprise__StyledWrapper",componentId:"sc-1an0ywv-0"})(["width:","};min-width:280px;place-self:",";"],(function(e){return e.showAllPlans?"25vw":"auto"}),(function(e){return e.showAllPlans?"center":"auto"})),Nr=function(e){var t=e.slug,n=e.isSmall,r=e.currentPlan,l=e.showAllPlans,o=e.allPlansView,s=void 0!==o&&o,u=e.showTeaserDetails,d=(0,c.Z)(e,Ar),p=(0,Be.Z)().sendButtonClickedLog,g=(0,oa.x1)().cancelling,f=qa.Vc.enterprise.features,b=(0,a.useCallback)((function(){window.open("https://www.netdata.cloud/contact-us/?subject=on-prem","_blank","noopener,noreferrer"),p({feature:"OnPremContact"})}),[p]);return a.createElement(Mr,(0,i.Z)({column:!0,height:n?"auto":l?50:75,flex:n,padding:n?[6,10]:[0,10],gap:2,justifyContent:"between",showAllPlans:l},d),a.createElement(m.Flex,{column:!0,gap:2},a.createElement(m.Flex,{column:!0},a.createElement(m.Flex,{alignItems:"center",gap:2},a.createElement(m.H3,{"data-testid":"billingPricingDetails-activePlanName"},"Enterprise On-Premise"))),a.createElement(m.H0,null,Pa.format(3),a.createElement(m.TextSmall,{color:"textLite"},"/",a.createElement(Oe.Z,{Component:m.TextSmall,href:"https://www.netdata.cloud/pricing/#do-i-have-to-pay-for-nodes-that-are-no-longer-online",rel:"noopener noreferrer",target:"_blank"},"Node"),"/month (billed yearly)")),u&&a.createElement(xr,{features:f[2023.11]||[]})),!s&&a.createElement(Dn.Z,{Component:m.Button,permission:"billing:Manage","data-ga":"upgrade-button::click-".concat(wa({slug:t}),"::current-").concat(wa(r),"::billing"),"data-testid":"billingPlan-".concat(t,"-upgradeButton"),label:"Contact us",flavour:"hollow",disabled:g,width:"100%",onClick:b}))},Br=function(e){var t=e.plans,n=e.isSmall,r=e.currentPlan,l=e.showAllPlans,i=e.showTeaserDetails,c=e.isPro;return a.createElement(a.Fragment,null,c&&(Object.entries(t.pro)||[]).map((function(e){var t=(0,o.Z)(e,2),c=t[0],s=t[1];return a.createElement(Dr,{key:c,slug:"pro",version:c,prices:s,isActive:"pro"===r.slug&&r.version==c,isSmall:n,currentPlan:r,showAllPlans:l,showTeaserDetails:i})})),(Object.entries(t.business)||[]).map((function(e){var t=(0,o.Z)(e,2),c=t[0],s=t[1];return a.createElement(Dr,{key:c,slug:"business",version:c,prices:s,isActive:"business"===r.slug&&r.version==c,isSmall:n,currentPlan:r,showAllPlans:l,showTeaserDetails:i})})),a.createElement(Nr,{slug:"enterprise",isSmall:n,currentPlan:r,showAllPlans:l,showTeaserDetails:i}))},Rr=(n(43290),d.default.div.withConfig({displayName:"styled__Container",componentId:"sc-1oa2kv1-0"})(["display:grid;",""],(function(e){var t=e.numberOfPlans,n=[e.showAllPlans?"200px":"1fr"].concat((0,Na.Z)(Array(t).fill("1.5fr")));return"grid-template-columns: ".concat(n.join(" "),";")}))),Lr=d.default.div.withConfig({displayName:"styled__Header",componentId:"sc-1oa2kv1-1"})(["display:contents;> *{background:",";border-bottom:1px solid ",";}"],(0,m.getColor)("panelBg"),(0,m.getColor)("placeholder")),_r=(0,d.default)(m.Collapsible).withConfig({displayName:"styled__Content",componentId:"sc-1oa2kv1-2"})(["display:contents;"]),Ur=function(){var e=(0,oa.Gl)(),t=e.loaded,n=e.value,a=(0,oa.RP)(),r=a.loaded,l=a.value,o=(0,ua.Gj)({currentPlan:l,plans:n});return t&&r?o:0},Vr=function(e){var t,n,r,l,o=e.isSmall,i=e.plans,c=e.currentPlan,s=e.showAllPlans,u=void 0!==s&&s,d=e.showTeaserDetails,m=void 0!==d&&d,p=e.children,g="earlyBird"===c.slug,f="pro"===c.slug,b=Ur(),h=(0,Tr.Z)().version,E=null===(t=(null===(n=i.free)||void 0===n?void 0:n[null===c||void 0===c?void 0:c.version])||(null===(r=i.free)||void 0===r?void 0:r[h]))||void 0===t?void 0:t[0],v=i.earlyBird?null===(l=Object.values(i.earlyBird)[0])||void 0===l?void 0:l[0]:{};return a.createElement(Rr,{numberOfPlans:b,showAllPlans:u},p,g?a.createElement(Dr,{slug:"earlyBird",version:null===v||void 0===v?void 0:v.version,prices:null===v||void 0===v?void 0:v.prices,isSmall:o,isActive:"earlyBird"===c.slug,currentPlan:c,showAllPlans:u}):a.createElement(Dr,{slug:"free",version:null===E||void 0===E?void 0:E.version,prices:null===E||void 0===E?void 0:E.prices,isSmall:o,isActive:"free"===c.slug&&c.version==(null===E||void 0===E?void 0:E.version),currentPlan:c,showAllPlans:u,showTeaserDetails:m}),a.createElement(Br,{plans:i,isSmall:o,currentPlan:c,showAllPlans:u,showTeaserDetails:m,isPro:f}))},Hr=["children"],Wr=function(e){var t=e.children,n=(0,c.Z)(e,Hr);return a.createElement(m.Flex,(0,i.Z)({alignItems:"center",gap:2},n),t)},zr=function(){return a.createElement(m.Flex,{column:!0,gap:2,width:65},a.createElement(m.TextMicro,{color:"bright"},a.createElement(m.TextMicro,{color:"bright",strong:!0},"Available credit")," ","for you to use on any plan subscriptions with us."),a.createElement(m.TextMicro,{color:"bright"},"It is ok to change your mind, we will give you full flexibility! You can change the plan level, billing frequency or committed nodes, we won't hold you to any choice. When applicable, we'll credit you back on any unused amount."))},Yr=function(e){var t=e.currentPlan,n=(0,oa.SH)(),r=(0,o.Z)(n,2),l=r[0],i=r[1],c=!!t.billingEmail&&!i,s=(0,h.gI)("billing:ReadAll");return a.createElement(m.Flex,{column:!0,gap:2},a.createElement(m.H3,null,"Plan & Billing"),s&&a.createElement(a.Fragment,null,a.createElement(Wr,null,a.createElement(m.Flex,{gap:1,alignItems:"center"},a.createElement(m.Text,null,"Credit:"),a.createElement(m.Text,{"data-testid":"billingHeader-credits",strong:!0},Pa.format(t.balance.amount||0)),a.createElement(Xe.Z,{content:zr,align:"bottom",isBasic:!0},a.createElement(m.Icon,{name:"information",width:"16px",height:"16px",color:"textLite"}))),a.createElement(ca,null),a.createElement(m.Text,null,"Billing email:"," ",a.createElement(m.Text,{strong:!0,"data-testid":"billingHeader-email"},t.billingEmail||"-")),a.createElement(ca,null),a.createElement(Oe.Z,{Component:m.Flex,cursor:c?"pointer":"default",disabled:!c,onClick:l,alignItems:"center",gap:1,"data-ga":"billing-options::click::billing","data-testid":"billingHeader-goToPortal"},a.createElement("span",null,"Billing options and Invoices"),a.createElement(m.Icon,{name:"nav_arrow_goto",width:"12px",height:"12px"}))),a.createElement(ca,{height:1,width:"100%",sx:{borderWidth:"1px 0px 0px 0px",borderColor:"borderSecondary",borderStyle:"solid"}})))};n(34553),n(2707),n(69810),n(86035);var Gr=n(69119),qr=n(71002),Kr=n(7069),Qr=n(54559),Xr=n(13882),$r=n(83946);var Jr=n(28789),el=n(23148),tl=n(36337),nl=n(26495),al=n(43896),rl=n(92501),ll=n(4822),ol=n(69019);function il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function cl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?il(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):il(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sl={nodes:1,p90:2,committed_nodes:3},ul={"Daily count":"The weighted 90th percentile of the live node count during the day, taking time as the weight. If you have 30 live nodes throughout the day, except for a two hour peak of 44 live nodes, the daily value is 31.","Committed nodes":"The number of nodes committed to in the yearly plan. In case the period count is higher than the number of committed nodes, the difference is billed as overage.","Period count":"The 90th percentile of the daily counts for this period up to the date. The last value for the period is used as the number of nodes for the bill for that period."};el.kL.register(el.f$,el.uw,el.ZL,el.od,el.jn,el.De,el.u,el.ST,el.vn,tl.Z),el.u.positioners.follow=function(e,t){return null===e||void 0===e||!e.length||t.y>360?(this._resolveAnimations().update(this,{opacity:0}),!1):(0===this.opacity&&this._resolveAnimations().update(this,{opacity:1}),{x:t.x,y:t.y})};var dl=function(e){return{nodes:{label:"Daily count",type:"bar",color:(0,m.getColor)("text")({theme:e}),backgroundColor:(0,m.getColor)("primary")({theme:e}),borderColor:(0,m.getColor)("primary")({theme:e}),borderWidth:2,pointStyle:"rectangle",usePointStyle:!0},p90:{label:"Period count",type:"line",color:(0,m.getColor)("text")({theme:e}),borderColor:(0,m.getColor)(["purple","lilac"])({theme:e}),borderWidth:2,fill:!1,stepped:!0},committed_nodes:{label:"Committed nodes",type:"line",color:(0,m.getColor)("text")({theme:e}),borderColor:(0,m.getColor)(["blue","aquamarine"])({theme:e}),borderWidth:2,fill:!1,borderDash:[1,2],borderDashOffset:1,pointStyle:!1}}},ml={border:{side:"all",color:"inputBorder",padding:[3]},round:!0},pl=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),a=e.getDate(),r=new Date(0);return r.setFullYear(t,n,a-1),r.setHours(23,59,59,999),r}(),gl=(0,Gr.default)(function(e,t){if((0,Xr.Z)(2,arguments),!t||"object"!==(0,qr.Z)(t))return new Date(NaN);var n=t.years?(0,$r.Z)(t.years):0,a=t.months?(0,$r.Z)(t.months):0,r=t.weeks?(0,$r.Z)(t.weeks):0,l=t.days?(0,$r.Z)(t.days):0,o=t.hours?(0,$r.Z)(t.hours):0,i=t.minutes?(0,$r.Z)(t.minutes):0,c=t.seconds?(0,$r.Z)(t.seconds):0,s=(0,Qr.default)(e,a+12*n),u=(0,Kr.default)(s,l+7*r),d=1e3*(c+60*(i+60*o));return new Date(u.getTime()-d)}(pl,{months:1})),fl=function(e){var t=e.onNodesLastPeriodFetch,n=(0,ll.by)("offset"),r=(0,v.th)(),i=(0,a.useState)((function(){return{start:gl,end:pl}})),c=(0,o.Z)(i,2),s=c[0],u=c[1],p=(0,_t.Z)((function(){return{enabled:!!r&&!!s.start&&!!s.end,fetch:function(){return(0,ol.fA)(r,{after:Math.floor((0,Jr.default)((0,pr.tb)(s.start,n))/1e3),before:Math.floor((0,Jr.default)((0,pr.tb)(s.end,n))/1e3)})},initialValue:{labels:[],data:[]},onSuccess:function(e){var n=e.data,a=e.labels;if(n.length){var r=n.at(-1),l=r[a.indexOf("nodes")],o=r[a.indexOf("timestamp")];t((function(e){return e.timestamp>o?e:{timestamp:o,value:l}}))}}}}),[r,s,t]),g=(0,o.Z)(p,3),f=g[0],b=g[1],h=g[2],E=(0,a.useContext)(d.ThemeContext),y=(0,a.useMemo)((function(){var e=f.data.map((function(e){return(0,o.Z)(e,1)[0]})),t=f.labels.reduce((function(t,n,a){return a?[cl(cl({},dl(E)[n]),{},{data:e.map((function(e,t){return f.data[t][a]})),order:sl[n]})].concat((0,Na.Z)(t)):t}),[]);return{labels:e,datasets:t}}),[f]),x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.data,r=t.annotations,i=void 0===r?[]:r,c=(0,pr.rA)().localeDateString,s=(0,a.useRef)(!1),u=(0,a.useRef)(),d=(0,a.useMemo)((function(){return{interaction:{axis:"x"},plugins:{legend:{position:"bottom",align:"start",onClick:function(e,t,n){var a=n.legendItems.findIndex((function(e){return e.text===t.text}));n.chart.isDatasetVisible(a)?n.chart.hide(a):n.chart.show(a)},labels:{generateLabels:function(e){return e.data.datasets.map((function(t,n){return{fontColor:t.color,text:t.label,fillStyle:t.backgroundColor,strokeStyle:t.borderColor,pointStyle:"Daily count"===t.label?"rect":"line",hidden:!e.isDatasetVisible(n),order:t.order}})).sort((function(e,t){return e.order-t.order}))},usePointStyle:!0},onHover:function(e,t){!s.current&&u.current&&(s.current=!0,u.current.innerHTML=ul[t.text],u.current.style.left=e.x+"px",u.current.style.top=e.y+"px",u.current.style.visibility="visible",u.current.style.transform="translateY(-100%)")},onLeave:function(){u.current&&(s.current=!1,u.current.innerHTML="",u.current.style.visibility="hidden")}},tooltip:{enabled:!0,mode:"nearest",intersect:!1,yAlign:"bottom",usePointStyle:!0,position:"follow",backgroundColor:(0,m.getColor)("tooltip")({theme:e}),color:(0,m.getColor)("bright")({theme:e}),callbacks:{title:function(e){var t=(0,o.Z)(e,1)[0];return t?c(1e3*t.label,{month:"2-digit",day:"2-digit",year:"numeric",long:!1,dateStyle:void 0}):""},labelPointStyle:function(e){return{pointStyle:"Total Nodes"===e.dataset.label?"rect":"line"}},label:function(e){return"  ".concat(e.formattedValue," ").concat(e.dataset.label||"")}}},annotation:{annotations:i.reduce((function(t,a,r){return cl(cl({},t),{},(0,l.Z)({},"annotation".concat(r),{type:"line",value:n.findIndex((function(e){return e[0]===a.timestamp})),borderColor:(0,m.getRgbColor)("attention",.3)({theme:e}),borderDashOffset:0,borderWidth:10,drawTime:"afterDatasetsDraw",label:{drawTime:"afterDatasetsDraw",display:!1,backgroundColor:(0,m.getRgbColor)("attention",.8)({theme:e}),borderWidth:0,color:"white",content:a.name,textAlign:"center"},scaleID:"x",enter:function(e,t){var n=e.chart,a=n.options.plugins.annotation.annotations["annotation".concat(r)];a.label.display=!0,a.label.position=t.y/e.chart.chartArea.height>.5?"start":"end",n.update()},leave:function(e){var t=e.chart;t.options.plugins.annotation.annotations["annotation".concat(r)].label.display=!1,t.update()}}))}),{})}},responsive:!0,maintainAspectRatio:!1,scales:{x:{ticks:{callback:function(e){return c(1e3*this.getLabelForValue(e),{month:"2-digit",day:"2-digit",year:"numeric",long:!1,dateStyle:void 0})},color:(0,m.getColor)("textLite")({theme:e})}},y:{beginAtZero:!0,ticks:{color:(0,m.getColor)("textLite")({theme:e})}}}}}),[e,n]);return[d,u]}(E,f),w=(0,o.Z)(x,2),C=w[0],O=w[1];return a.createElement(m.Flex,{column:!0,gap:4},a.createElement(m.Flex,{alignItems:"center",justifyContent:"between"},a.createElement(m.H3,null,"Usage"),a.createElement(al.Z,{values:s,utc:n,onChange:u,tagging:"billing-usage",isPlaying:!1,onlyDates:!0,accessorProps:ml,padding:[4,0],width:"auto",maxDate:pl})),a.createElement(m.Flex,{position:"relative",height:90},b?a.createElement(mn.Z,{title:"Loading billing data..."}):h?a.createElement(rl.NY,{title:"Chart couldn't be loaded"}):a.createElement(nl.kL,{type:"bar",data:y,options:C}),a.createElement(m.Flex,{ref:O,background:"main",color:"generic",position:"absolute",round:!0,padding:[3],width:{max:75},sx:{visibility:"hidden"},onMouseOver:function(){return O.current.style.visibility="hidden"}})))},bl=function(e){var t=e.isSmall,n=e.currentPlan,r=e.loaded,l=e.currentLoaded,i=e.plans,c=(0,a.useState)({timestamp:null,value:null}),s=(0,o.Z)(c,2),u=s[0],d=s[1],m=i[n.slug]?i[n.slug][n.version]:[];return a.createElement(a.Fragment,null,a.createElement(Yr,{currentPlan:n}),r&&l?a.createElement(a.Fragment,null,(0,ua.BT)(n.slug)?a.createElement(Vr,{isSmall:t,plans:i,currentPlan:n,showTeaserDetails:!0}):a.createElement(Dr,{slug:n.slug,version:n.version,prices:m,width:t?"auto":120,padding:[0],height:"auto",isSmall:t,isActive:!0,currentPlan:n,allPlansView:!0,nodesLastPeriod:u.value}),a.createElement(ca,{height:1,width:"100%",sx:{borderWidth:"1px 0px 0px 0px",borderColor:"borderSecondary",borderStyle:"solid"}}),a.createElement(fl,{onNodesLastPeriodFetch:d})):a.createElement(mn.Z,{title:r?"Loading billing info...":"Loading Netdata plans..."}))},hl=n(92432),El={year:"Yearly",month:"Monthly"},vl=function(e){var t,n=e.currentPlan,r=(0,v.uk)(),l=(0,oa.SH)(),i=(0,o.Z)(l,2),c=i[0],s=i[1],u=(0,oa.x1)(),d=u.cancelling,p=u.startCancelling,g=u.stopCancelling,f=!!n.billingEmail&&!s,b=(0,y.Z)(),E=(0,o.Z)(b,2),x=E[0],w=E[1],C=(0,we.Z)(),O=(0,o.Z)(C,2),P=O[0],S=O[1],Z=(0,oa.Zn)(),T=(qa.Vc[n.slug]||qa.Vc.free).title,k=(0,Tr.Z)().id,I=(0,h.gI)("billing:Manage"),j=(0,h.gI)("billing:ReadAll"),F=(qa.Vc[null===n||void 0===n?void 0:n.slug]||qa.Vc.free).title,D=El[null===n||void 0===n?void 0:n.interval];return a.createElement(m.Flex,{column:!0,gap:2},a.createElement(m.Flex,{gap:2,alignItems:"center"},a.createElement(Oe.Z,{as:dn.rU,to:"/spaces/".concat(r,"/settings/billing"),disabled:d,color:"text",hoverColor:"textLite",showToolTip:!0,content:"Back to Plan & Billing",align:"bottom",isBasic:!0},a.createElement(m.Icon,{name:"arrow_left",width:"20px",height:"20px",margin:[1.5,0,0]})),a.createElement(m.H3,null,"All Plans")),a.createElement(Wr,null,a.createElement(m.Flex,{gap:1,alignItems:"center"},a.createElement(m.Text,null,"Active plan:"),a.createElement(m.Text,{strong:!0},F)),a.createElement(ca,null),D&&a.createElement(a.Fragment,null,a.createElement(m.Flex,{gap:1,alignItems:"center"},a.createElement(m.Text,null,"Billing frequency:"),a.createElement(m.Text,{strong:!0},D)),a.createElement(ca,null)),"Yearly"===D&&a.createElement(m.Flex,{gap:1,alignItems:"center"},a.createElement(m.Text,null,"Committed Nodes:"),a.createElement(m.Text,{strong:!0},(null===n||void 0===n?void 0:n.committedNodes)||0)),a.createElement(ca,null),j&&a.createElement(a.Fragment,null,a.createElement(m.Flex,{gap:1,alignItems:"center"},a.createElement(m.Text,null,"Credit:"),a.createElement(m.Text,{strong:!0},Pa.format((null===n||void 0===n||null===(t=n.balance)||void 0===t?void 0:t.amount)||0)),a.createElement(Xe.Z,{content:zr,align:"bottom",isBasic:!0},a.createElement(m.Icon,{name:"information",width:"16px",height:"16px",color:"textLite"}))),a.createElement(ca,null),a.createElement(m.Flex,{gap:1,alignItems:"center"},a.createElement(m.Text,null,"Billing email:"),a.createElement(m.Text,{strong:!0},(null===n||void 0===n?void 0:n.billingEmail)||"-")),a.createElement(ca,null)),a.createElement(Oe.Z,{Component:m.Flex,cursor:f?"pointer":"default",disabled:!f,onClick:c,alignItems:"center",gap:1},a.createElement("span",null,"Billing options and Invoices"),a.createElement(m.Icon,{name:"nav_arrow_goto",width:"12px",height:"12px"})),!(0,ua.BT)(null===n||void 0===n?void 0:n.slug)&&a.createElement(a.Fragment,null,a.createElement(ca,null),a.createElement(Oe.Z,{Component:m.Flex,cursor:"pointer",onClick:w,alignItems:"center",gap:1,disabled:d||!I,"data-ga":"cancel-plan::click::billing"},a.createElement(m.Text,{textDecoration:"underline"},d?"Canceling plan...":"Cancel plan")))),a.createElement(ca,{height:1,width:"100%",sx:{borderWidth:"1px 0px 0px 0px",borderColor:"borderSecondary",borderStyle:"solid"}}),x&&a.createElement(Ga,{title:"Community",onConfirm:function(){p(),Z({productId:k}).then((function(){return(0,hl.L)("billing","cancel-plan","global-view",{slug:null===n||void 0===n?void 0:n.slug,interval:null===n||void 0===n?void 0:n.interval,success:!0}),P({header:"Successfully canceled subscription",text:"You are now on Community plan"})})).catch((function(){return(0,hl.L)("billing","cancel-plan","global-view",{slug:null===n||void 0===n?void 0:n.slug,interval:null===n||void 0===n?void 0:n.interval,success:!1}),S({header:"Failed to cancel the subscription",text:"Remained on ".concat(T," plan")})})).finally((function(){g()}))},onClose:w}))},yl=["center","end"],xl=["children"],wl=function(){return a.createElement(m.Icon,{name:"check",color:"primary"})},Cl=function(){return a.createElement(m.Icon,{name:"checkmark_partial_s",color:"textLite"})},Ol=function(){return a.createElement(m.Icon,{name:"chevron_down_thin",color:"text"})},Pl=function(){return a.createElement(m.Icon,{name:"chevron_up_thin",color:"text"})},Sl=function(e){var t=e.center,n=e.end,r=(0,c.Z)(e,yl);return a.createElement(m.Flex,{alignItems:"center",justifyContent:t?"center":n?"end":"start",padding:[2]},a.createElement(m.Text,r))},Zl=function(e){var t=e.children,n=(0,c.Z)(e,xl);return a.createElement(Sl,(0,i.Z)({center:!0},n),t?a.createElement(m.Flex,{alignItems:"center",gap:2},t,a.createElement(wl,null)):a.createElement(wl,null))},Tl=function(e){return a.createElement(Sl,(0,i.Z)({center:!0},e),"UNLIMITED")},kl=function(e){return a.createElement(Sl,(0,i.Z)({center:!0},e),a.createElement(Cl,null))},Il=function(e){return a.createElement(Sl,(0,i.Z)({center:!0},e),"SOON")},jl=(n(91038),function(e){return function(t){var n=t.index,r=t.title,l=void 0===r?"":r,o=t.showAllPlans,i=t.onToggle,c=t.collapsed,s=Ur();return a.createElement(Rr,{numberOfPlans:s,showAllPlans:o},a.createElement(Lr,{onClick:function(){return i(n)}},a.createElement(Sl,{strong:!0},l),Array.from(Array(s-1).keys()).map((function(e){return a.createElement(Sl,{key:e})})),a.createElement(Sl,{end:!0},c[n]?a.createElement(Pl,null):a.createElement(Ol,null))),a.createElement(_r,{open:!c[n]},a.createElement(e,t)))}}),Fl=(0,a.memo)(jl((function(e){var t=e.isPro;return a.createElement(a.Fragment,null,a.createElement(Sl,null,"Scalability"),a.createElement(Sl,{center:!0},"Vertical and Horizontal"),t&&a.createElement(Sl,{center:!0},"Vertical and Horizontal"),a.createElement(Sl,{center:!0},"Vertical and Horizontal"),a.createElement(Sl,{center:!0},"Vertical and Horizontal"),a.createElement(Sl,null,"High Availability"),a.createElement(Zl,null),t&&a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,"Data Retention"),a.createElement(Tl,null),t&&a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Sl,null,"Data Privacy"),a.createElement(Sl,{center:!0},"Data stored On-Prem and visualized on Netdata Cloud"),t&&a.createElement(Sl,{center:!0},"Data stored On-Prem and visualized on Netdata Cloud"),a.createElement(Sl,{center:!0},"Data stored On-Prem and visualized on Netdata Cloud"),a.createElement(Sl,{center:!0},"Data stored and visualized On-Prem"),a.createElement(Sl,null,"Configuration"),a.createElement(Sl,{center:!0},"Manual, IaC or in App(UI)"),t&&a.createElement(Sl,{center:!0},"Manual, IaC or in App(UI)"),a.createElement(Sl,{center:!0},"Manual, IaC or in App(UI)"),a.createElement(Sl,{center:!0},"Manual, IaC or in App(UI)"))}))),Dl=(0,a.memo)(jl((function(e){var t=e.isPro,n=e.freePlanLimitattions;return a.createElement(a.Fragment,null,a.createElement(Sl,null,"Customizable charts"),a.createElement(Zl,null),t&&a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,"Infrastructure wide Dashboards"),a.createElement(Zl,null),t&&a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,"Centralized Alerts Management"),a.createElement(Zl,null),t&&a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,"Infrastrucure Organization (Rooms)"),a.createElement(Zl,null),t&&a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,"Custom Dashboards"),a.createElement(Zl,null,null!==n&&void 0!==n&&n.maxDashboards?a.createElement(m.Text,null,"(Limited to ",n.maxDashboards," per Room)"):null),t&&a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,"Access dashboards from anywhere in the world"),a.createElement(Zl,null),t&&a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,"Role Based Access Control (RBAC)"),a.createElement(Zl,null),t&&a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,"Auditing"),a.createElement(Zl,null),t&&a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,"Invite Team Members"),a.createElement(Zl,null),t&&a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,"Functions"),a.createElement(Zl,null),t&&a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,"Netdata Assistant"),a.createElement(Zl,null),t&&a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,"Mobile App"),a.createElement(kl,null),t&&a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(kl,null),a.createElement(Sl,null,"Centralized Management of Integrations"),a.createElement(Il,null),t&&a.createElement(Il,null),a.createElement(Il,null),a.createElement(Il,null))}))),Al=(0,a.memo)(jl((function(e){var t=e.isPro,n=e.freePlanLimitattions;return a.createElement(a.Fragment,null,a.createElement(Sl,null,"Active Connected Nodes"),null!==n&&void 0!==n&&n.maxNodes?a.createElement(Sl,{center:!0},"Max of ",n.maxNodes):a.createElement(Tl,null),t&&a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Sl,null,"Active Custom Dashboards"),null!==n&&void 0!==n&&n.maxDashboards?a.createElement(Sl,{center:!0},"Max of ",n.maxDashboards," per Room"):a.createElement(Tl,null),t&&a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Sl,null,"Infrastructure metrics"),a.createElement(Tl,null),t&&a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Sl,null,"APM metrics"),a.createElement(Tl,null),t&&a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Sl,null,"Custom metrics"),a.createElement(Tl,null),t&&a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Sl,null,"Synthetic checks"),a.createElement(Tl,null),t&&a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Sl,null,"Monitor system journal logs"),a.createElement(Tl,null),t&&a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Tl,null),a.createElement(Sl,null,"Auditing Events"),a.createElement(Sl,{center:!0},"4 hours"),t&&a.createElement(Sl,{center:!0},"7 days"),a.createElement(Sl,{center:!0},"90 days"),a.createElement(Sl,{center:!0},"As required"),a.createElement(Sl,null,"Topology Events"),a.createElement(Sl,{center:!0},"4 hours"),t&&a.createElement(Sl,{center:!0},"7 days"),a.createElement(Sl,{center:!0},"14 days"),a.createElement(Sl,{center:!0},"As required"),a.createElement(Sl,null,"Alert Events"),a.createElement(Sl,{center:!0},"4 hours"),t&&a.createElement(Sl,{center:!0},"7 days"),a.createElement(Sl,{center:!0},"60 days"),a.createElement(Sl,{center:!0},"As required"),a.createElement(Sl,null,"Alert Notification Integrations"),a.createElement(Sl,{center:!0},"Email, Discord"),t&&a.createElement(Sl,{center:!0},"Email, Discord, Webhook"),a.createElement(Sl,{center:!0},"Email, Discord, Webhook, Mattermost, Opsgenie, PagerDuty, RocketChat, Slack"),a.createElement(Sl,{center:!0},a.createElement(m.Text,null,"Same as Business plan"),a.createElement("br",null),a.createElement(m.TextSmall,null,"(Custom requests can be handled)")),a.createElement(Sl,null,"User Administration"),a.createElement(Sl,{center:!0},"Basic"),t&&a.createElement(Sl,{center:!0},"Intermediate"),a.createElement(Sl,{center:!0},"Advanced"),a.createElement(Sl,{center:!0},"Advanced"))}))),Ml=(0,a.memo)(jl((function(e){var t=e.isEarlyBird,n=e.isPro;return a.createElement(a.Fragment,null,a.createElement(Sl,null,a.createElement(m.Text,{id:"administrators"},"Administrators"),a.createElement("br",null),a.createElement(m.TextSmall,{color:"textDescription",id:"same-as-managers-but-unable-to-manage-users-or-rooms"},"Users with this role can control Spaces, War Rooms, Nodes, Users and Billing. They can also access any Room in the Space.")),a.createElement(Zl,null),n&&a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,a.createElement(m.Text,{id:"troubleshooters"},"Troubleshooters"),a.createElement("br",null),a.createElement(m.TextSmall,{color:"textDescription"},"Users with this role can use Netdata to troubleshoot, not manage entities. They can access any Room in the Space.")),a.createElement(kl,null),n&&a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,a.createElement(m.Text,{id:"managers"},"Managers"),a.createElement("br",null),a.createElement(m.TextSmall,{color:"textDescription"},"Users with this role can manage Rooms and Users. They can access any Room in the Space.")),a.createElement(kl,null),n&&a.createElement(kl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,a.createElement(m.Text,{id:"observers"},"Observers"),a.createElement("br",null),a.createElement(m.TextSmall,{color:"textDescription"},"Users with this role can only view data in specific Rooms.")),a.createElement(kl,null),n&&a.createElement(kl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,a.createElement(m.Text,{id:"billing"},"Billing"),a.createElement("br",null),a.createElement(m.TextSmall,{color:"textDescription"},"Users with this role can handle billing options and invoices.")),a.createElement(kl,null),n&&a.createElement(kl,null),a.createElement(Zl,null),a.createElement(Zl,null),a.createElement(Sl,null,a.createElement(m.Text,{id:"billing"},"Member"),a.createElement("br",null),a.createElement(m.TextSmall,{color:"textDescription"},"This role allows users to manage rooms and invite fellow Member teammates. These users cannot see all rooms in the Space but can see all Nodes since they are always on the All Nodes.")),t?a.createElement(Zl,null):a.createElement(kl,null),n&&a.createElement(kl,null),a.createElement(kl,null),a.createElement(kl,null))}))),Nl=(0,a.memo)(jl((function(e){var t=e.isPro;return a.createElement(a.Fragment,null,a.createElement(Sl,null,"Service Availability"),a.createElement(Sl,{center:!0},"Best Effort (99.5% in last 12 months)"),t&&a.createElement(Sl,{center:!0},"Best Effort (99.5% in last 12 months)"),a.createElement(Sl,{center:!0},"99.9% annually (excl. scheduled maintenance)"),a.createElement(Sl,{center:!0},"Same as Business plan"),a.createElement(Sl,null,"Technical Support"),a.createElement(Sl,{center:!0},"Public Forums, Tickets & Chat"),t&&a.createElement(Sl,{center:!0},"Public Forums, Tickets & Chat"),a.createElement(Sl,{center:!0},"Public Forums, Tickets & Chat"),a.createElement(Sl,{center:!0},"Custom Design to Meet Requirements"),a.createElement(Sl,null,"Initial Deployment Consulting Services"),a.createElement(Sl,{center:!0},"Public Forums, Tickets & Chat"),t&&a.createElement(Sl,{center:!0},"Public Forums, Tickets & Chat"),a.createElement(Sl,{center:!0},"Public Forums, Tickets & Chat"),a.createElement(Sl,{center:!0},"Remote or On Site Consultation and Training During Deployment"))}))),Bl=function(e){var t,n=e.plans,r=e.currentPlan,l="free"==(null===r||void 0===r?void 0:r.slug)&&"2023.02"==(null===r||void 0===r?void 0:r.version),c="earlyBird"===(null===r||void 0===r?void 0:r.slug),s="pro"===(null===r||void 0===r?void 0:r.slug),u=null===(t=Object.values((null===n||void 0===n?void 0:n.free)||{}))||void 0===t||null===(t=t[0])||void 0===t||null===(t=t[0])||void 0===t?void 0:t.planLimitations,d=(0,a.useState)((function(){return[!1,!0,!0,!0,!0]})),m=(0,o.Z)(d,2),p=m[0],g=m[1],f={isOldCommunity:l,isEarlyBird:c,isPro:s,freePlanLimitattions:u,showAllPlans:!0,onToggle:function(e){return g((function(t){return t[e]=!t[e],(0,Na.Z)(t)}))},collapsed:p};return a.createElement(a.Fragment,null,a.createElement(Fl,(0,i.Z)({title:"General",index:0},f)),a.createElement(Dl,(0,i.Z)({title:"Features",index:1},f)),a.createElement(Al,(0,i.Z)({title:"Usage Allowances",index:2},f)),a.createElement(Ml,(0,i.Z)({title:"User Roles",index:3},f)),a.createElement(Nl,(0,i.Z)({title:"Support",index:4},f)))},Rl=function(e){var t=e.plans,n=e.loaded,r=e.currentLoaded,l=e.currentPlan;return a.createElement(m.Flex,{column:!0,height:"100%",gap:3},a.createElement(vl,{currentPlan:l}),n&&r?a.createElement(m.Flex,{column:!0,gap:5,height:"100%",padding:[0,0,20,0]},a.createElement(Vr,{plans:t,currentPlan:l,showAllPlans:!0},a.createElement(m.Flex,{column:!0,height:50,justifyContent:"center"},a.createElement(m.Text,{strong:!0},"Pricing"))),a.createElement(m.Flex,{column:!0,gap:5,height:"100%",overflow:{vertical:"auto"}},a.createElement(Bl,{plans:t,currentPlan:l}))):a.createElement(mn.Z,{title:n?"Loading billing info...":"Loading Netdata plans..."}))},Ll={Community:0,Pro:1,Business:2},_l={month:"Monthly",year:"Yearly"},Ul=function(){var e=(0,dn.lr)(),t=(0,o.Z)(e,2),n=t[0],r=t[1],l=(0,we.Z)(),i=(0,o.Z)(l,2),c=i[0],s=i[1];(0,a.useEffect)((function(){var e=n.get("from"),t=n.get("from_committed_nodes"),a=n.get("interval"),l=n.get("result"),o=n.get("to"),i=n.get("to_committed_nodes"),u=n.get("from_trial");if(l){var d="success"==l,m={from:e,fromNodes:t,interval:a,to:o,toNodes:i,fromTrial:u,success:d};(d?c:s)(function(e){var t=e.from,n=e.to,a=e.fromNodes,r=e.toNodes,l=e.interval,o=e.fromTrial,i=e.success,c=void 0===i||i;if(o)return{header:c?"Successful upgrade":"Failed to upgrade",text:c?"You have successfully upgraded your plan":"Something went wrong"};var s=_l[l]||l;if(t===n&&a===r)return{header:c?"Successful billing cycle change":"Failed to update billing cycle",text:c?"Subscription billing cycle changed to ".concat(s):"Subscription is still on ".concat(s," billing cycle")};if(t===n)return{header:c?"Successful change of commitment":"Failed to change the commitment",text:c?"Commitment ".concat(a<r?"increased":"decreased"," from ").concat(a," to ").concat(r," nodes"):"Commitment remained the same, ".concat(a," nodes")};var u=Ll[t]>Ll[n];return{header:c?"Successfully ".concat(u?"downgraded":"upgraded"," plan"):"Failed to ".concat(u?"downgrade":"upgrade"," plan"),text:c?"Subsrciprion ".concat(u?"downgraded":"upgraded"," from ").concat(t," to ").concat(n," plan (").concat(s,")"):"Remained on ".concat(t," plan")}}(m)),(0,hl.L)("billing","callback","global-view",m),n&&(n.delete("from"),n.delete("from_committed_nodes"),n.delete("interval"),n.delete("result"),n.delete("to"),n.delete("to_committed_nodes"),n.delete("from_trial"),r(n))}}),[n,c,s])},Vl=function(){Ul();var e=(0,oa.Gl)(),t=e.loaded,n=e.value,l=(0,oa.RP)(),o=l.loaded,i=l.value,c=(0,la.m)();return a.createElement(_.ZP,{feature:"Billing"},a.createElement(m.Flex,{column:!0,height:"calc(100% - 30px)",gap:3},a.createElement(r.Z5,null,a.createElement(r.AW,{path:"/all-plans",element:a.createElement(Rl,{isSmall:c,currentPlan:i,loaded:t,currentLoaded:o,plans:n})}),a.createElement(r.AW,{path:"/",element:a.createElement(bl,{isSmall:c,currentPlan:i,loaded:t,currentLoaded:o,plans:n})}))))},Hl=n(41898),Wl=["containerProps"],zl=["settingsTab"];function Yl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Gl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yl(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ql=(0,s.Z)((function(){return Promise.all([n.e(6502),n.e(6129)]).then(n.bind(n,66129))})),Kl=(0,d.default)(p.G).withConfig({displayName:"manage-workspace__ColumnHeader",componentId:"sc-j9n54n-0"})(["width:180px;padding:16px;"]),Ql=function(e){return function(t){return a.createElement(g.TZ,{flex:"1",overflow:"hidden"},a.createElement(e,t))}},Xl=function(e){return function(t){var n=t.containerProps,r=void 0===n?{}:n,l=(0,c.Z)(t,Wl);return a.createElement(g.TZ,(0,i.Z)({flex:"1",overflow:"hidden",height:"100%",padding:[4,0,0]},r),a.createElement(e,l))}},$l=Ql(ea),Jl=Ql(qe),eo=Ql(xt),to=Ql(ht),no=Xl(Zn),ao=Ql(Vl),ro=Xl(function(e){return function(t){return a.createElement(a.Suspense,{fallback:"Loading settings tab..."},a.createElement(e,t))}}(ql)),lo=(0,a.memo)((function(){var e=(0,r.s0)(),t=(0,r.TH)(),n=t.state,l=void 0===n?{}:n,i=t.pathname,s=(0,r.UO)(),d=s.settingsTab,p=(0,c.Z)(s,zl),b=(0,a.useState)((null===l||void 0===l?void 0:l.previousUrlPath)||null),E=(0,o.Z)(b,1)[0],y=(0,v.OS)("name"),x=function(e){var t=z.dH.indexOf(e);return-1!==t?t:z.z2}(d),w=(0,a.useCallback)((function(t){var n=function(e,t){var n=e.split("/"),a=n.indexOf("settings")+1-n.length;return"".concat(n.slice(0,a).join("/"),"/").concat(z.dH[t]||z.z2)}(i,t);e(n)}),[d]);(0,a.useEffect)((function(){z.fV[d]||e((0,u.Gn)(i,Gl(Gl({},p),{},{settingsTab:z.z2})))}),[]);var C=(0,h.gI)("billing:ReadBasic"),O=(0,h.gI)("room:ReadAll"),P=(0,h.gI)("user:ReadAll"),S=(0,h.gI)("channel:ReadAll"),Z=(0,k.jW)();(0,a.useEffect)((function(){C||d===z.fM&&e((0,u.Gn)(i,Gl(Gl({},p),{},{settingsTab:z.z2})))}),[C,d]);var T=(0,v.uk)(),I=(0,a.useCallback)((function(t){var n=t?"/spaces/".concat(t):E||"/spaces/".concat(T);e(n)}),[E,T]);return y?a.createElement(Dn.Z,{permission:"space:ReadSettings"},(function(e){return a.createElement(_.ZP,{feature:"SpaceSettings"},a.createElement(g.u6,{full:!0,"data-testid":"manageWorkspaceModal",closeOnClickOutside:!1,onClose:I,width:"100%"},a.createElement(f.x,{"data-testid":"manageWorkspaceModal-header",onClose:I,title:a.createElement(ra,null)}),a.createElement(m.Tabs,{row:!0,column:!1,"data-testid":"manageWorkspaceModal-tabs",selected:x,onChange:w,TabsHeader:Kl,tabsProps:{column:!0},height:"100%",noDefaultBorder:!0,position:"relative",overflow:"hidden",width:"100%"},a.createElement(m.Tab,{basis:0,"data-testid":"manageWorkspaceModal-spaceTab",label:z.fV[z.m3],"data-ga":"manage-space::click-tab::space-tab",isMenuItem:!0},a.createElement($l,{"data-testid":"manageWorkspaceModal-spaceTabContent",onClose:I,small:!0})),a.createElement(m.Tab,{basis:0,"data-testid":"manageWorkspaceModal-warRoomsTab","data-ga":"manage-space::click-tab::rooms-tab",label:"Rooms",isMenuItem:!0},a.createElement(Jl,{"data-testid":"manageWorkspaceModal-warRoomsTabContent"})),(O||Z)&&a.createElement(m.Tab,{basis:0,label:"Nodes","data-testid":"manageWorkspaceModal-nodesTab","data-ga":"manage-space::click-tab::nodes-tab",isMenuItem:!0},a.createElement(eo,{"data-testid":"manageWorkspaceModal-nodesTabContent"})),P&&a.createElement(m.Tab,{basis:0,"data-testid":"manageWorkspaceModal-usersTab","data-ga":"manage-space::click-tab::users-tab",label:"Users",isMenuItem:!0},a.createElement(to,{"data-testid":"manageWorkspaceModal-usersTabContent"})),S&&a.createElement(m.Tab,{basis:0,label:"Alerts & Notifications","data-testid":"manageWorkspaceModal-notificationsTab","data-ga":"manage-space::click-tab::notifications-tab",isMenuItem:!0},a.createElement(no,null)),C&&!window.envSettings.onprem&&a.createElement(m.Tab,{basis:0,"data-testid":"manageWorkspaceModal-billingTab","data-ga":"manage-space::click-tab::billing-tab",label:"Plan & Billing",isMenuItem:!0},a.createElement(ao,{"data-testid":"manageWorkspaceModal-billingTabContent"})),a.createElement(m.Tab,{basis:0,"data-testid":"manageWorkspaceModal-integrationsTab","data-ga":"manage-space::click-tab::integrations-tab",label:"Integrations",isMenuItem:!0},a.createElement(ro,{flavour:Hl.RV.settingsPage,containerProps:{padding:[0]},"data-testid":"manageWorkspaceModal-integrationsTabContent"})))))})):null})),oo=function(){var e=(0,r.TH)(),t=e.pathname,n=e.state;return a.createElement(r.Z5,null,a.createElement(r.AW,{path:"/",element:a.createElement(r.Fg,{state:n,to:{pathname:"".concat(t,"/").concat(z.z2)}})}),a.createElement(r.AW,{path:":settingsTab/*",element:a.createElement(lo,null)}))}},14809:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var a=n(87462),r=n(67294),l=n(99113),o=n(89250),i=n(13477),c=n(94666),s=n(15861),u=n(29439),d=n(64687),m=n.n(d),p=(n(57327),n(41539),n(88449),n(2490),n(59849),n(4480)),g=n(93017),f=n(274),b=n(46585),h=n(74059),E=n(57079),v=n(58502),y=n(95383),x=n(53606),w="leave-space-dialog",C="leaveSpaceDialog",O=function(e){var t=e.id,n=e.name,d=e.onClose,O=(0,o.s0)(),P=(0,i.Iy)("id"),S=(0,c.H4)(),Z=(0,c.nP)(),T=(0,c.Wy)(),k=function(e){var t=(0,g.Z)(),n=(0,u.Z)(t,2)[1];return(0,p._8)((function(t){var a=t.snapshot,r=t.set,l=t.reset;return function(){var t=(0,s.Z)(m().mark((function t(o){var i,s,d,p,g,x,w,C,O;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=o.currentUserId,s=o.onSuccess,d=o.onError,t.next=3,a.getPromise((0,h.st)("ids"));case 3:if(p=t.sent,g=p.filter((function(t){return e!==t})),x=(0,u.Z)(g,1),w=x[0]){t.next=9;break}return n({header:"Spaces",text:b.T$.leave}),t.abrupt("return");case 9:if(t.t0=w,!t.t0){t.next=14;break}return t.next=13,a.getPromise((0,v.ZP)(w));case 13:t.t0=t.sent;case 14:return C=t.t0,O=C.slug,r((0,h.st)("ids"),g),r(E.Z,(function(t){return t.filter((function(t){return t!==e}))})),t.prev=18,t.next=21,(0,f.Sz)(e,[i]);case 21:s&&s(O),(0,c.zm)(l,e),(0,y.r1)(l,e),l((0,v.ZP)(e)),t.next=31;break;case 27:t.prev=27,t.t1=t.catch(18),r((0,h.st)("ids"),p),d&&d();case 31:case"end":return t.stop()}}),t,null,[[18,27]])})));return function(e){return t.apply(this,arguments)}}()}),[e])}(t),I=(0,x.Z)(t),j=(0,r.useCallback)((function(e){return O("/spaces/".concat(e))}),[]),F=1===S.length,D=1===Z.length&&T,A=F?{confirmLabel:"Yes, leave","data-ga":"".concat(w,"-last-member"),"data-testid":"".concat(C,"LastMember"),handleConfirm:function(){return I({onSuccess:j})},message:r.createElement(r.Fragment,null,"If you leave, space ",r.createElement("strong",null,n)," will be deleted immediately.",r.createElement("br",null),"Are you sure you want to continue?"),title:"Leave and delete ".concat(n," space")}:D?{confirmLabel:"Give rights","data-ga":"".concat(w,"-last-admin"),"data-testid":"".concat(C,"LastAdmin"),handleConfirm:function(){return O("users")},isConfirmPositive:!0,message:r.createElement(r.Fragment,null,"You are the last admin of ",r.createElement("strong",null,n)," space. Please give admin rights to another member so you can leave this space."),title:"Leave ".concat(n," space")}:{confirmLabel:"Yes, leave","data-ga":w,"data-testid":C,handleConfirm:function(){return k({currentUserId:P,onSuccess:j})},message:r.createElement(r.Fragment,null,"You are about to leave ",r.createElement("strong",null,n)," space.",r.createElement("br",null),"Are you sure you want to continue?"),title:"Leave ".concat(n," space")};return r.createElement(l.ConfirmationDialog,(0,a.Z)({handleDecline:d},A))}},43656:function(e,t,n){"use strict";var a=n(29439),r=n(37518),l=n(96929),o=n(41379),i=n(74059),c=n(97945),s=n(46667);t.Z=function(){var e=(0,r.Jb)().id,t=void 0===e?"":e,n=(0,l.X7)(t,"ids"),u=(0,l.X7)(t,"loaded"),d=(0,c.Ne)(n),m=(0,i.th)(),p=(0,s.Z)(),g=(0,a.Z)(p,4),f=g[0],b=g[3];return(0,o.Z)({id:t,spaceId:m,polling:!0}),{areDefaultRoomNodesLoaded:u,nodes:d,isClaimNodeModalOpen:f,closeClaimNodeModal:b}}},21285:function(e,t,n){"use strict";var a=n(47908),r=n(51400),l=n(26244);e.exports=function(e){for(var t=a(this),n=l(t),o=arguments.length,i=r(o>1?arguments[1]:void 0,n),c=o>2?arguments[2]:void 0,s=void 0===c?n:r(c,n);s>i;)t[i++]=e;return t}},43290:function(e,t,n){"use strict";var a=n(82109),r=n(21285),l=n(51223);a({target:"Array",proto:!0},{fill:r}),l("fill")},73955:function(e,t,n){var a=n(79833),r=0;e.exports=function(e){var t=++r;return a(e)+t}}}]);