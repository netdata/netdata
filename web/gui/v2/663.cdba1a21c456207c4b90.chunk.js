!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f557964a-eb23-415b-9342-b97d597b6621",e._sentryDebugIdIdentifier="sentry-dbid-f557964a-eb23-415b-9342-b97d597b6621")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"a795d4d0ab7b284edba22b583ea6769a9f9ec64d"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[663],{36925:function(e,t,n){n.d(t,{vV:function(){return l}});const a=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,l=e=>!!e&&a.test(e)},86414:function(e,t,n){n.d(t,{m:function(){return c}});n(33948),n(57640),n(9924),n(88449),n(2490),n(59849),n(15306);var a=n(67294),l=n(22195),o=n(36925);const i=(0,n(60677).default)(l.Select).withConfig({displayName:"styled__StyledSelect",componentId:"sc-bkkrx-0"})(["width:100%;"]);n(88921),n(96248),n(13599),n(11477),n(64362),n(15389),n(90401),n(45164),n(91238),n(54837),n(87485),n(56767),n(76651),n(61437),n(35285),n(39865),n(10072),n(23042),n(99137),n(71957),n(96306),n(103),n(74592),n(58276),n(35082),n(12813),n(18222),n(38563),n(50336),n(7512);const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name";return e.length?"string"===typeof e[0]?[...new Set(e)]:[...new Map(e.map((e=>[e[t],e]))).values()]:[]},r=[],c=e=>{let{invitations:t,setInvitations:n}=e;const[c,d]=(0,a.useState)(r),[u,m]=(0,a.useState)(""),[p,f]=(0,a.useState)(""),g=()=>f(""),v=(0,a.useCallback)((e=>{m(e.toLowerCase())}),[m]),h=a.useCallback((e=>{let{emails:t=r,invitations:a=r,isEmailValid:l}=e;if(l){const e=s(t),l=s(a);return d(e),n(l),m(""),void g()}f("Invalid Email")}),[n]),b=(0,a.useCallback)((e=>(0,o.vV)(e)&&!c.includes(e)),[c]),y=(0,a.useCallback)((e=>{h({isEmailValid:!0,emails:e.map((e=>e.value)),invitations:e.map((e=>({email:e.value,name:e.value.split("@")[0]})))})}),[d]),E=(0,a.useCallback)((e=>{const n=e.clipboardData.getData("Text").toLowerCase().replace(/ /g,",").replace(/,,/g,",").split(",").filter((e=>b(e)))||r;h({emails:[...c,...n],invitations:[...t,...n.map((e=>({email:e,name:e.split("@")[0]})))],isEmailValid:n.length>0}),e.preventDefault()}),[c,t,b,h]),w=(0,a.useCallback)((e=>{if(u)switch(g(),e.key){case"Enter":case"Tab":case",":case" ":h({emails:[...c,u],invitations:[...t,{email:u,name:u.split("@")[0]}],isEmailValid:b(u)}),e.preventDefault()}}),[c,u,t,b,h]);return a.createElement(l.Flex,{justifyContent:"space-between",column:!0,onPaste:E},a.createElement(i,{components:{DropdownIndicator:null},inputValue:u,isClearable:!0,isMulti:!0,menuIsOpen:!1,onBlur:()=>{u&&h({emails:[...c,u],invitations:[...t,{email:u,name:u.split("@")[0]}],isEmailValid:b(u)})},onChange:y,onInputChange:v,onKeyDown:w,onClear:()=>{d(r),n(r)},placeholder:"Enter an email and hit enter",value:c.map((e=>{return{label:t=e,value:t};var t}))}),p&&a.createElement(l.Text,{color:"error"},p))}},18663:function(e,t,n){n.d(t,{l:function(){return _}});var a=n(87462),l=(n(33948),n(57640),n(9924),n(88449),n(2490),n(59849),n(67294)),o=n(22195),i=n(92432),s=n(74855),r=n(52631),c=n(90025),d=n(91008),u=n(86414),m=n(74059),p=n(95383),f=n(35838),g=n(53338),v=n(16645),h=n(7693),b=n(92903),y=n(87181);var E=e=>{let{id:t,handleDelete:n}=e;const a=(0,f.D)(t,"email");return l.createElement(o.Flex,{justifyContent:"between",alignItems:"center"},l.createElement(o.Flex,{gap:4},l.createElement(o.Icon,{color:"text",name:"check"}),l.createElement(o.Text,null,a)),l.createElement(o.Button,{flavour:"borderless",icon:"trashcan",onClick:()=>n({email:a})}))},w=n(93017),x=n(36925),C=n(33335),k=n(8048),I=n(46475);const S=e=>{let{email:t}=e;return(0,x.vV)(t)},T={header:"Invitations",text:"Invitations successfully sent!"},_=e=>{let{onClose:t,isSubmodal:n=!1}=e;const{id:x,name:_,slug:R}=(0,m.OS)(),B=(0,p.yE)(),[D,Z]=(0,l.useState)(B),[U,j]=(0,l.useState)([]),[N,V]=(0,l.useState)([]),[F,A]=(0,l.useState)(),[L,M,O,q]=(0,f.E)(x),[,P]=(0,w.Z)(),Q=e=>{const{header:n,text:a}=e||T,l=(0,s.sc)({header:n,text:a,success:!0}),o=N.filter(S).map((e=>{let{email:t}=e;return t})).join(",");(0,i.L)("invite","invite-sent","".concat(F,"::").concat(o,"::").concat(D.join(",")),"","","invite-sent"),r.Z.success(l,{context:"manageInvitations"}),t()},Y=(0,C.QB)(),G=e=>t=>{let{email:n}=t;e&&M(e),V(N.filter((e=>e.email!==n))),j(U.filter((e=>e.email!==n)))},J=(0,l.useCallback)((()=>{Z([])}),[Z]),z="member"===F;return l.createElement(v.u6,{right:!0,closeOnEsc:!0,closeOnOverlayClick:!0,onClose:t},l.createElement(h.x,{onClose:t,isSubmodal:n,title:"Invite Users"}),l.createElement(b.B,null,"Invite users to\xa0",_),l.createElement(v.TZ,null,l.createElement(y.qQ,null,"Send invitations to your team"),l.createElement(y.ne,null,"TIP: You can send more invitations at once, separate each with a comma."),l.createElement(u.m,{invitations:N,setInvitations:V}),l.createElement("br",null),l.createElement(y.qQ,null,"Rooms"),l.createElement(o.Flex,{alignItems:"center",justifyContent:"between",margin:[1,0,2]},l.createElement(o.TextSmall,null,"Choose one or more rooms you'd like to invite users to."),!!D.length&&l.createElement(o.Button,{onClick:J,padding:[0],flavour:"borderless","data-ga":"rooms-clear",label:"Clear",small:!0},"Clear")),l.createElement(o.Box,{"data-testid":"invite-selectRoom"},l.createElement(c.Z,(0,a.Z)({selectedValue:D,onChange:Z},z?{formatOptions:e=>{let{name:t}=e;return{isDisabled:t===g.TY}},filterValues:e=>{let{label:t}=e;return t===g.TY}}:{}))),l.createElement("br",null),l.createElement(y.qQ,null,"Role"),l.createElement(y.ne,null,"Choose a role for invited user."," ",l.createElement(d.Z,{href:I.R,target:"_blank",rel:"noopener noreferrer",Component:o.TextSmall},"Learn more")),l.createElement(o.Box,{"data-testid":"invite-selectRole"},l.createElement(k.Z,{availableRoles:Y,dataGA:"invite-to-space",dataTestId:"invite-selectRole",onChange:e=>{A(e.target.value)},value:F})),l.createElement(y.p7,null,l.createElement(o.Button,{label:"Send",onClick:async()=>{const e=N.filter(S).map((e=>({email:e.email,name:e.name,role:F,roomIDs:D}))),t="".concat(window.location.origin,"/spaces/").concat(R,"/join-space");O(e,t,{onSuccess:Q,onError:P})},disabled:0===N.length||!F,flavour:"hollow",isLoading:q})),l.createElement(o.H5,{margin:[2,0,0]},"Invitations awaiting response"),l.createElement(o.Flex,{column:!0},L.length>0?L.map((e=>l.createElement(E,{key:e,handleDelete:G(e),id:e}))):l.createElement(y.xB,null,l.createElement("br",null),l.createElement(y.qQ,null,"You haven't invited any users yet.")))))}},87181:function(e,t,n){n.d(t,{ne:function(){return r},p7:function(){return i},qQ:function(){return o},xB:function(){return s}});var a=n(60677),l=n(22195);const o=(0,a.default)(l.H5).withConfig({displayName:"styled__StyledH5",componentId:"sc-1kusjmi-0"})(["display:flex;align-items:center;"]),i=a.default.div.withConfig({displayName:"styled__FormRow",componentId:"sc-1kusjmi-1"})(["width:100%;display:flex;flex-flow:row no-wrap;justify-content:flex-end;margin-top:",";"],(0,l.getSizeBy)(2)),s=a.default.div.withConfig({displayName:"styled__StyledUserInvitationEmptyListItem",componentId:"sc-1kusjmi-2"})(["display:flex;flex-flow:column nowrap;align-items:center;"]),r=(0,a.default)(l.TextSmall).withConfig({displayName:"styled__StyledSecondaryText",componentId:"sc-1kusjmi-3"})(["margin:2px 0 8px;"])},46475:function(e,t,n){n.d(t,{R:function(){return a}});const a="https://learn.netdata.cloud/docs/nightly/concepts/role-based-access-model"},99826:function(e,t,n){var a=n(67294),l=n(46715),o=n(74059);t.Z=e=>{const{loaded:t,value:n,hasError:i}=(0,l.RP)(),s=(0,o.uk)(),r=t&&n?n.billingEmail?"update":"checkout":"",c=(0,a.useCallback)((e=>t&&n?"/spaces/".concat(s,"/settings/billing/all-plans#billingModalType=").concat(r,"&billingModalSlug=").concat(e):null),[e,s,r]),d=e?c(e):null;return{loaded:t,getUrl:c,url:d,hasError:i}}},8048:function(e,t,n){n(57640),n(9924);var a=n(67294),l=n(22195),o=n(60677),i=n(64637),s=n(87917),r=n(74059),c=n(91008),d=n(79655),u=n(33335),m=n(99826);const p={admin:"Users with this role can control Spaces, Rooms, Nodes, Users and Billing. They can also access any Room in the Space.",member:"Users with this role can create Rooms and invite other Members. They can only see the Rooms they belong to and all Nodes in the All Nodes room",manager:"Users with this role can manage Rooms and Users. They can access any Room in the Space.",troubleshooter:"Users with this role can use Netdata to troubleshoot, not manage entities. They can access any Room in the Space.",observer:"Users with this role can only view data in specific Rooms.",billing:"Users with this role can handle billing options and invoices."},f=(0,o.default)(l.Flex).withConfig({displayName:"rolePicker__PlanBadge",componentId:"sc-ypuqww-0"})(["pointer-events:auto;"]);t.Z=e=>{let{availableRoles:t,dataGA:n,dataTestId:o,onChange:g,value:v}=e;const h=(0,r.OS)("plan"),b=(0,a.useMemo)((()=>(0,s.xJ)(h).map((e=>({isChecked:e===v,isEnabled:t.includes(e),role:e}))).sort(((e,t)=>Number(t.isEnabled)-Number(e.isEnabled)))),[t,s.xJ,h,v]),y=(0,u.gI)("billing:ReadAll"),{getUrl:E}=(0,m.Z)();return a.createElement(l.Flex,{column:!0,gap:2,"data-testid":"".concat(o,"-roleOptions")},b.map((e=>{let{isChecked:t,isEnabled:s,role:r}=e;const u=s?void 0:"medium",m="troubleshooter"===r?"pro":"business";return a.createElement(l.RadioButton,{key:r,checked:t,"data-ga":"".concat(n,"::select-role-").concat(r,"::global-view"),"data-testid":"".concat(o,"-").concat(r,"Option"),disabled:!s,onChange:g,value:r,alignItems:"start"},a.createElement(l.Flex,{column:!0},a.createElement(l.Flex,{gap:2,alignItems:"center"},a.createElement(l.Text,{opacity:u},(0,i.fm)(r)),!s&&a.createElement(f,{background:"sideBarMini",border:{side:"all",color:"tabsBorder"},cursor:"initial",padding:[1],round:!0},a.createElement(c.Z,{align:"bottom",as:d.rU,boxProps:{as:l.Flex},color:"text",Component:l.TextMicro,content:"Available on ".concat((0,i.fm)(m)," plan"),"data-ga":"".concat(n,"::click-plan-badge-").concat(m,"::global-view"),disabled:!y,hoverColor:"textFocus",showToolTip:!0,strong:!0,to:E(m)},(0,i.fm)(m)))),a.createElement(l.TextSmall,{color:"textLite",opacity:u},p[r])))})))}},35838:function(e,t,n){n.d(t,{D:function(){return h},E:function(){return v}});n(33948),n(88921),n(96248),n(13599),n(11477),n(64362),n(15389),n(90401),n(45164),n(91238),n(54837),n(87485),n(56767),n(76651),n(61437),n(35285),n(39865),n(57640),n(9924),n(15581),n(2490),n(34514),n(88449),n(59849);var a=n(67294),l=n(4480);var o=(0,l.xu)({key:"invitation",default:{id:"",email:""}});const i=(0,l.xu)({key:"invitationIds",default:[]});var s=n(26398);const r=e=>e.map((e=>{let{id:t,email:n}=e;return{id:t,email:n}})),c={member:1,admin:2,manager:3,troubleshooter:4,observer:5,billing:6},d=e=>e.map((e=>{let{role:t,...n}=e;if(void 0===c[t])throw new Error("role not found");return{role:c[t],...n}}));n(25387),n(72608);var u=n(62200);const m=e=>{let{data:t,invitations:n}=e;return t.reduce(((e,t,a)=>{var l,o;(o=t.errorMsgKey)&&o===u.Sq&&(null!==(l=n[a])&&void 0!==l&&l.email&&e.push(n[a].email));return e}),[])},p=e=>e.length>1,f=(0,l.CG)({key:"spaceInvitationValue",get:e=>{let{id:t,key:n}=e;return e=>{let{get:a}=e;const l=a(o(t));return n?l[n]:l}}}),g=(0,l.CG)({key:"spaceInvitationsIdsValue",get:e=>t=>{let{get:n}=t;return n(i(e))},set:e=>(t,n)=>{let{set:a}=t,{invitations:l,merge:s}=n;a(i(e),(e=>[...new Set([...e,...l.map((e=>{let{id:t}=e;return t}))])])),l.forEach((e=>{a(o(e.id),(t=>({...s&&t,...e})))}))}}),v=e=>{const t=(0,l.sJ)(g(e)),[n,c]=(0,a.useState)(!1),u=(0,l._8)((t=>{let{snapshot:n,set:a}=t;return async()=>{if(!(await n.getLoadable(g(e))).length){const{data:t}=await(e=>s.Z.get("/api/v2/spaces/".concat(e,"/invitations"),{transform:r}))(e);a(g(e),{invitations:t,merge:!0})}}}),[e]),f=(0,a.useCallback)((async(t,n,a)=>{let{onSuccess:l,onError:o}=a;try{c(!0);const{data:a}=await((e,t,n)=>s.Z.post("/api/v1/spaces/".concat(e,"/invitations"),{redirectURI:n,requests:d(t)}))(e,t,n),i=m({data:a,invitations:t});if(i.length&&!p(t))return void(o&&o({message:"User has already joined that space!"}));if(i.length&&p(t)){if(i.length===t.length)return void(o&&o({message:"All of the selected users are already meembers of this space"}));if(l)return void l({header:"Invitations partially send",text:"Some of the selected users are already members of this space"})}l&&l()}catch(i){o&&o(i)}finally{c(!1)}}),[e]),v=(0,l._8)((t=>{let{snapshot:n,set:a,reset:l}=t;return async t=>{const r=await n.getPromise(g(e)),c=r.filter((e=>e===t));a(i(e),(e=>{const t=new Set(e);return c.forEach((e=>t.delete(e))),[...t]}));try{await((e,t)=>s.Z.delete("/api/v1/spaces/".concat(e,"/invitations"),{params:{invitation_ids:t.join(",")}}))(e,[t]),c.forEach((e=>{l(o(e))}))}catch(d){a(g(e),{invitations:r,merge:!1})}}}),[e]);return(0,a.useEffect)((()=>{u()}),[e]),[t,v,f,n]},h=(e,t)=>(0,l.sJ)(f({id:e,key:t}))}}]);