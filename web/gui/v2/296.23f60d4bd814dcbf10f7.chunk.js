!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="28aabef3-6b40-48da-8bfd-3c4e89d35eba",e._sentryDebugIdIdentifier="sentry-dbid-28aabef3-6b40-48da-8bfd-3c4e89d35eba")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"a795d4d0ab7b284edba22b583ea6769a9f9ec64d"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[296],{88296:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ke}});a(33948);var n=a(67294),o=a(22195),r=a(33937),l=a(87462),c=(a(57640),a(9924),a(60677)),s=a(46189),i=a(46667),d=a(27622),m=a(89250),u=a(82351),p=a(74059);const g=[],h=(0,c.default)(o.Flex).attrs((e=>{let{active:t}=e;return{width:7,height:7,background:t?"selected":"elementBackground",justifyContent:"center",alignItems:"center",round:.5}})).withConfig({displayName:"spaceLabel__SpaceBox",componentId:"sc-1e67mnq-0"})(["cursor:pointer;"]);var f=e=>{let{active:t,spaceId:a,testIdPrefix:r,local:c=!1,...s}=e;const i=(0,m.s0)(),d=(0,p.vu)(a),[f,E]=(e=>{if(!e)return g;const t=e.split(" "),[a,n]=t;return[a[0],n?n[0]:""]})(d.name),v=(0,n.useCallback)((()=>i(c?"/overview":"/spaces/".concat(d.slug))),[d.slug,c]);return n.createElement(u.Z,{content:d.name,align:"right",isBasic:!0},n.createElement(h,(0,l.Z)({active:t,"data-testid":"".concat(r||"spaceLabel-space","-").concat(d.slug),onClick:v},s),c?n.createElement(o.Icon,{name:"node",color:t?"main":"textLite"}):n.createElement(n.Fragment,null,n.createElement(o.TextSmall,{strong:!0,color:t?"main":"textLite"},f),n.createElement(o.TextSmall,{strong:!0,color:t?"textLite":"textDescription"},E))))},E=a(93033),v=a(15418);var b=e=>{let{...t}=e;const a=(0,E.Z)(),r=(0,p.Q6)();return n.createElement(v.Z,{permission:"space:ReadSettings"},(e=>n.createElement(u.Z,{content:e?"Space settings":r?"You are viewing a local agent. Connect the agent to a space on cloud to be able to view and change the settings":"Only admins can view space settings"},n.createElement(o.Flex,{opacity:e?null:"weak",padding:[0,1]},n.createElement(o.Button,(0,l.Z)({disabled:!e,flavour:"borderless",icon:"gear",neutral:!0,onClick:a,small:!0,"data-ga":"left-sidebar::click-space-settings::global-view","data-testid":"workspaceBar-manageSpace"},t))))))},w=a(83732),C=a(62200),x=a(16645),I=a(7693),k=a(92903),y=a(46585),S=a(30688);const Z=new RegExp(/(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff]|[!@#$%^&*()_+=\-])/),F=(0,S.A)([e=>{const t=e.length>=y.Pf;return(0,S.f)(t,"Please enter a name for the Space that is at least 5 characters.")},e=>{const t=e.length<=y.Qy;return(0,S.f)(t,"A Space's name can't exceed 20 characters.")},e=>Z.test(e)?{isValid:!1,message:"There's an unexpected character in the Space's name. Use only alphanumberic characters (A-Z, a-z, 0-9) and spaces."}:{isValid:!0}]),T=e=>{let{value:t,isValid:a,setIsValid:r,charsIndicator:l,isDirty:c,handleChange:s,validationMessage:i,setValidationMessage:d,onKeyDown:m}=e;const[u,p]=(0,o.useTouchedState)({});return(0,n.useEffect)((()=>{const e=F(t),n=e.isValid,o=e.messages&&e.messages.length?e.messages[0]:void 0;!a&&n?r(!0):a&&!n&&r(!1),o&&d(o)}),[a,t,u,r,d]),n.createElement(o.TextInput,{label:"Space name",name:"createWorkspace",placeholder:"Enter your Space's name",fieldMessage:"Give your Space a name that's between 5-20 characters. This cannot change.",fieldIndicator:l,value:t,touched:u,onBlur:p,onChange:s,success:a,error:!a&&i,instantFeedback:"positiveFirst",isDirty:c,onKeyDown:m})};var R=e=>{let{onClose:t}=e;const a=(0,m.s0)(),[r,l]=(0,n.useState)(!1),[c,s]=(0,n.useState)(!1),[i,d,u,p]=(0,o.useInputValue)({maxChars:y.Qy}),[g,h]=(0,n.useState)(""),f=(0,n.useCallback)((e=>{let{slug:n}=e;s(!1),t(),a("/spaces/".concat(n))}),[t]),E=(0,w.Z)({onSuccess:f,onError:()=>s(!1)}),v=(0,n.useCallback)((()=>{r&&(s(!0),E({name:i}))}),[i,r]);return n.createElement(x.u6,{right:!0,closeOnEsc:!0,closeOnOverlayClick:!0,onClose:t},n.createElement(I.x,{onClose:t,title:"Create Space"},n.createElement(o.Button,{disabled:!r,isLoading:c,loadingLabel:"Creating",label:"Save",onClick:v})),n.createElement(k.B,null,"Create a new Space"),n.createElement(x.TZ,null,n.createElement(T,{isDirty:p,isValid:r,setIsValid:l,value:i,handleChange:d,charsIndicator:u,validationMessage:g,setValidationMessage:h,onKeyDown:e=>{e.keyCode===C.DV&&r&&v()}})))},_=a(15257),D=a(92432),B=a(14428),P=a(97346),L=a(62289),N=a(3528);const O=()=>{const e=(0,N.hd)("email"),{handleOpenProfileModal:t}=(0,L.Z)();return"loading"===e.state||e.state.hasError?null:n.createElement(o.IconButton,{flavour:"borderless","data-testid":"open-email-notification",cursor:"pointer",width:"20px",height:"20px",onClick:()=>t("notifications"),icon:e.contents.email?"notification_shortcut_enabled":"notification_shortcut_disabled",tooltip:"Email Notifications","data-ga":"left-sidebar::click-user-notification-settings::global-view",iconColor:"iconColor"})};var W=(0,n.memo)(O);const V=c.default.div.withConfig({displayName:"spaces__Separator",componentId:"sc-8de8pq-0"})(["height:1px;width:",";background:",";"],(0,o.getSizeBy)(3),(0,o.getColor)("border")),A=(0,c.default)(o.Button).withConfig({displayName:"spaces__DocButton",componentId:"sc-8de8pq-1"})(["&&{> .button-icon{width:20px;height:20px;}}"]),M=(0,c.default)(o.Button).withConfig({displayName:"spaces__ExpandButton",componentId:"sc-8de8pq-2"})(["&&{> .button-icon{width:6px;height:9px;}}"]),j={onClickOut:()=>(0,D.L)("header-help","click-out-modal","global-view"),onCloseClick:()=>(0,D.L)("header-help","click-close","global-view"),onOpenIssueClick:()=>(0,D.L)("header-help","click-\u03bfpen-issue","global-view"),onContributeClick:()=>(0,D.L)("header-help","click-contribute","global-view"),onOpenBugClick:()=>(0,D.L)("header-help","click-bug","global-view"),onSupportClick:()=>(0,D.L)("header-help","click-support","global-view"),onVisitDocumentClick:()=>(0,D.L)("header-help","click-visit-doc","global-view"),onGoToDemoClick:()=>(0,D.L)("header-help","click-go-to-demo","global-view")};var z=e=>{let{spacePanelCollapsed:t,toggleSpacePanel:a}=e;const r=(0,p.Iw)(),c=(0,p.th)(),[m,,g,h]=(0,i.Z)();return n.createElement(o.Flex,{background:"sideBarMini","data-testid":"workspaceBar",padding:[3,2],column:!0,alignItems:"center",gap:6,height:"100vh",justifyContent:"between"},n.createElement(o.Flex,{column:!0,"data-testid":"workspaceBar-spaces-list",gap:4,alignItems:"center",overflow:"hidden"},n.createElement(d.Z,{"data-testid":"workspaceBar-netdataLogo"}),t&&n.createElement(M,{"data-testid":"workspaceBar-expandButton",onClick:a,icon:"chevron_right_s",neutral:!0,flavour:"borderless",small:!0}),n.createElement(o.Flex,{column:!0,"data-testid":"workspaceBar-spacesList",gap:4,overflow:{vertical:"auto"}},r.map((e=>n.createElement(f,{testIdPrefix:"workspaceBar-space",key:e,spaceId:e,active:e===c})))),n.createElement(P.Z,{permission:"user:CreateSpace"},n.createElement(V,{"data-testid":"workspaceBar-separator"})),n.createElement(u.Z,{content:"Create a new Space",align:"right"},n.createElement(B.Z,{permission:"user:CreateSpace",ifForbidden:"hide",icon:"plus",onClick:g,"data-testid":"workspaceBar-addSpace-button"}))),n.createElement(o.Flex,{column:!0,"data-testid":"workspaceBar-actionsList",gap:4,alignItems:"center"},n.createElement(o.Flex,{column:!0,gap:1,alignItems:"center"},n.createElement(P.Z,{permission:"user:ChangeSpaceRoomNotifications"},n.createElement(W,null)),n.createElement(o.Documentation,(0,l.Z)({app:"cloud",demoUrl:s.default.demoUrl},j),(e=>n.createElement(u.Z,{content:"Read documentation, engage with the community and let us know about features and bugs for the Agent or the Cloud",align:"right"},n.createElement(A,{neutral:!0,flavour:"borderless",icon:"question",onClick:e,"data-ga":"header-help::click-help::global-view","data-testid":"documentation-button",title:"Need help?"})))),n.createElement(b,null)),n.createElement(_.Z,null)),m&&n.createElement(R,{onClose:h}))},U=(a(9170),a(34668),a(31672),a(2490),a(59461),a(88449),a(59849),a(15306),a(27856)),q=a(26398),G=a(18761),H=a(97945),Q=a(7335),Y=a(25819),$=a(67622),K=a(61458),J=a(92501),X=a(37689),ee=a(64358);const te=(0,c.default)(o.Icon).withConfig({displayName:"styled__TrashIcon",componentId:"sc-1hr9uxl-0"})(["&:hover{fill:",";opacity:0.6;}"],(0,o.getColor)("textFocus")),ae=(0,c.default)(o.TextSmall).withConfig({displayName:"styled__UrlWrapper",componentId:"sc-1hr9uxl-1"})(["overflow-wrap:anywhere;"]),ne=(0,c.default)(o.Icon).withConfig({displayName:"styled__StyledIcon",componentId:"sc-1hr9uxl-2"})(["transform:",";"],(e=>{let{right:t}=e;return t?"rotate(0)":"rotate(180deg)"})),oe=e=>{/https?:\/\//.test(e)||(e="http://".concat(e)),/netdata\.cloud\//.test(e)?location.assign(e):window.open(e,"_blank")},re=function(e,t){let{openList:a,setSelectedId:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(0,n.useRef)(),l=(0,p.GM)("ids"),c=(0,p.Zu)(l);return(0,n.useCallback)((async()=>{if(o(e),r.current||(r.current=await(async(e,t)=>{let{spaces:a=[],id:n}=t;const{data:o}=await(0,G.kq)(n);let r;if(o.length&&(r=await Promise.any(a.map((e=>q.Z.get((0,ee.W)({spaceId:e.id})).then((t=>{let{data:a}=t;return Promise.any(a.map((t=>(0,Y.Fz)({roomId:t.id,spaceId:e.id}).then((a=>{let{data:n}=a;const r=n.find((e=>{let{id:t}=e;return o.includes(t)}));if(!r)throw new Error("can't find matching node");const{protocol:l,host:c}=window.location;return"".concat(l,"//").concat(c,"/spaces/").concat(e.slug,"/rooms/").concat(t.slug,"/nodes/").concat(r.id)})))))}))))).then((e=>e)).catch((()=>{}))),r)return r;const l=e.filter((e=>!/netdata\.cloud\//.test(e)));return l.length?await Promise.any(l.map((e=>{let t=/^https?:\/\//.test(e)?e:"http://".concat(e);return t=t.replace(/\/+$/,""),q.Z.get("".concat(t,"/api/v1/info")).then((()=>t))}))).then((e=>e)).catch((()=>{})):void 0})(t,{spaces:c,id:e})),o(),!r.current)return a();oe(r.current)}),[t,c])},le=e=>{let{id:t,selectedId:a,setSelectedId:r}=e;const l=(0,H.bV)(t,"name"),[c,,s,d]=(0,i.Z)(),m=(0,Q.lL)(),u=(0,H.bV)(t,"urls"),p=re(t,u,{openList:s,setSelectedId:r}),g=(0,n.useCallback)((()=>{c?d():p()}),[c,p]),h=a===t;return n.createElement(n.Fragment,null,n.createElement($.Z,{onClick:g,isSidebar:!0,padding:[1,2,1,4],testid:"visitedNodes-".concat(l),disabled:!!a&&!h,selected:h,loading:h,iconColor:"menuItem",textColor:"menuItem",Wrapper:o.TextSmall},l),c&&n.createElement(o.Flex,{column:!0,margin:[1,3],padding:[2],border:{side:"all",color:"separator"},round:2},n.createElement(o.Text,{textAlign:"center"},"We couldn't connect to any of your instances, here is the list:"),u.map((e=>n.createElement($.Z,{key:e,onClick:()=>oe(e),isSidebar:!0,testid:"visitedNodes-node-".concat(e),actions:n.createElement(o.Flex,{flex:!1,margin:[0,0,0,1]},n.createElement(te,{name:"trashcan",size:"small",color:"menuItem",onClick:a=>{a.stopPropagation(),m(t,e)},width:"16px",height:"16px"})),padding:[2],Wrapper:ae,iconColor:"menuItem",textColor:"menuItem"},e)))))},ce=()=>{const e=(0,Q.z2)(),[t,a]=(0,i.Z)(e.length>0);(0,n.useEffect)((()=>{t||a()}),[e.length]);const[r,l]=(0,n.useState)(""),c=(0,Q.H3)(r),s=(0,n.useCallback)((0,U.D)(300,(e=>l(e.target.value))),[]),[d,m]=(0,n.useState)();return e.length?n.createElement(K.Z,{isOpen:t,toggleOpen:a,label:n.createElement(o.Flex,{padding:[1,0],flex:!0,justifyContent:"between",alignItems:"center"},n.createElement(o.Flex,{alignItems:"center",gap:2},n.createElement(o.Icon,{name:"node_hollow",color:"menuItem",width:"14px",height:"14px"}),n.createElement(o.TextSmall,{color:"menuItem"},"Visited Nodes")),n.createElement(ne,{right:!t,name:"chevron_down",size:"small",color:"menuItem"})),headerTestId:"visitedNodes"},e.length>3&&n.createElement(o.Flex,{padding:[1,2,2,4]},n.createElement(X.Z,{"data-testid":"search-visited-nodes-input",onChange:s,size:"tiny"})),n.createElement(o.Flex,{padding:[0,0,2],column:!0},c.length?c.map((e=>n.createElement(le,{key:e,id:e,selectedId:d,setSelectedId:m}))):n.createElement(o.Text,{padding:[3,5]},"No nodes match your search"))):null};var se=(0,n.memo)((()=>n.createElement(J.ZP,{fallback:""},n.createElement(n.Suspense,{fallback:""},n.createElement(ce,null))))),ie=a(56662),de=a(55917),me=a(33335);var ue=e=>t=>{const a=(0,p.th)();return n.createElement(e,(0,l.Z)({},t,{key:a}))},pe=a(37931);const ge={isSidebar:!0,padding:[1,2,1,4],textColor:"menuItem",Wrapper:o.TextSmall};var he=ue((()=>{const e=(0,me.gI)("room:Create"),t=(0,me.gI)("room:Read"),[a,r]=(0,i.Z)(t),[l,,c,s]=(0,i.Z)(!1),d=(0,n.useCallback)((t=>{t.stopPropagation(),e&&c()}),[e]);return n.createElement(n.Fragment,null,n.createElement(K.Z,{"data-testid":"workspaceRooms-menuList",disabled:!t,headerTestId:"workspaceRooms-warRooms",isOpen:a,label:n.createElement(o.Flex,{padding:[1,0],margin:[0,0,1,0],flex:!0,justifyContent:"between",alignItems:"center",height:"24px"},n.createElement(o.Flex,{alignItems:"center",gap:2},n.createElement(o.Icon,{name:"space_new",color:"menuItem",width:"14px",height:"14px"}),n.createElement(o.TextSmall,{color:"menuItem"},"Rooms")),n.createElement(o.Flex,{alignItems:"center",gap:2},n.createElement(u.Z,{content:"Create a new room",align:"right"},n.createElement(B.Z,{permission:"room:Create",tiny:!0,icon:"plus",onClick:d,"data-testid":"workspaceRooms-addWarRoom-button"})),n.createElement(de.x,{right:!a,name:"chevron_down",size:"small",color:"menuItem"}))),toggleOpen:r},n.createElement(o.Flex,{column:!0,"data-testid":"workspaceRooms-warRoomsList",padding:[0,0,1]},n.createElement(pe.Z,ge))),l&&n.createElement(ie.U,{onClose:s,isSubmodal:!1}))})),fe=a(61152);const Ee=(0,c.default)(o.Flex).attrs({alignItems:"center",justifyContent:"center",width:10,height:4,round:.5,background:"sideBarMini"}).withConfig({displayName:"styled__AdminPill",componentId:"sc-1ps23b1-0"})(["opacity:0;",":hover &{opacity:1;}"],$.z);var ve=e=>{let{children:t,onToggle:a}=e;return n.createElement(o.Flex,{justifyContent:"between",alignItems:"center"},n.createElement(o.Flex,{alignItems:"center"},t),n.createElement(o.Button,{onClick:a,icon:"chevron_left",neutral:!0,flavour:"hollow",small:!0}))},be=a(5795);const we=(0,c.default)(K.g).attrs({padding:[2],color:"textLite"}).withConfig({displayName:"spacePanel__ListHeader",componentId:"sc-1275zgk-0"})([""]),Ce=e=>n.createElement(o.Flex,(0,l.Z)({alignItems:"center",gap:2},e),n.createElement(Ee,null,n.createElement(o.TextFemto,{strong:!0,color:"text"},"ADMIN")),n.createElement(o.Flex,{opacity:"medium"},n.createElement(o.Icon,{name:"padlock",size:"small",width:"18px",height:"18px",color:"text"})));var xe=e=>{let{toggleSpacePanel:t}=e;const a=(0,p.OS)(),[r,,l,c]=(0,i.Z)(),[,s]=(0,fe.Z)("manageInvitations"),d=(0,p.Q6)();return n.createElement(n.Fragment,null,r&&n.createElement(be.Z,{onClose:c}),n.createElement(K.Z,{"data-testid":"spacesPanel",isOpen:!0,label:n.createElement(ve,{onToggle:t},a.name),headerTestId:"spacesPanel-activeSpaceHeader",Header:we},n.createElement(o.Flex,{column:!0,padding:[2,0,1],"data-testid":"spacesPanel-menuList"},d?null:n.createElement(n.Fragment,null,n.createElement(v.Z,{permission:"node:Create"},(e=>n.createElement($.Z,{actions:e?null:n.createElement(Ce,{"data-testid":"adminWarning-notAdmin"}),disabled:!e,onClick:l,testid:"spacesPanel-claimNodes",icon:"nodes_hollow",iconWidth:"14px",iconHeight:"14px",padding:[1,2],gap:2,isSidebar:!0,textColor:"menuItem",iconColor:"menuItem",Wrapper:o.TextSmall},"Connect Nodes"))),n.createElement(v.Z,{permission:"space:InviteUser"},(e=>n.createElement($.Z,{actions:e?null:n.createElement(Ce,{"data-testid":"adminWarning-cannotInvite"}),disabled:!e,onClick:s,testid:"spacesPanel-inviteUsers",icon:"user",iconWidth:"14px",iconHeight:"14px",padding:[1,2],gap:2,isSidebar:!0,textColor:"menuItem",iconColor:"menuItem",Wrapper:o.TextSmall},"Invite Users")))))))};var Ie=e=>{let{spacePanelCollapsed:t,toggleSpacePanel:a}=e;return n.createElement(o.Collapsible,{width:56,background:"sideBar",open:!t,direction:"horizontal"},n.createElement(o.Flex,{flex:!0,width:56,column:!0,overflow:{vertical:"hidden"},padding:[2,0]},n.createElement(xe,{toggleSpacePanel:a}),n.createElement(o.Flex,{overflow:{vertical:"auto"},flex:!0,column:!0},n.createElement(he,null),n.createElement(se,null))))};var ke=(0,n.memo)((()=>{const[e,t]=(0,r.k)("spacePanelCollapsed"),a=(0,n.useCallback)((()=>t(!e)),[e]);return(0,n.useLayoutEffect)((()=>{const e=setTimeout((()=>window.dispatchEvent(new Event("resize"))),400);return()=>clearTimeout(e)}),[e]),n.createElement(o.Flex,null,n.createElement(z,{spacePanelCollapsed:e,toggleSpacePanel:a}),n.createElement(Ie,{spacePanelCollapsed:e,toggleSpacePanel:a}))}))},56662:function(e,t,a){"use strict";a.d(t,{U:function(){return u}});a(33948);var n=a(67294),o=a(89250),r=a(12599),l=a(22195),c=a(97323),s=a(74059),i=a(37518),d=a(16645),m=a(7693);const u=e=>{let{onClose:t,isSubmodal:a=!0}=e;const u=(0,s.th)(),[p,g]=(0,n.useState)(""),[h,f,E]=(0,l.useInputValue)({maxChars:255,value:""}),v=(e=>{const t=(0,o.s0)(),a=(0,s.uk)();return(0,n.useMemo)((()=>n=>{let{slug:o}=n;const l=(0,r.Gn)("/spaces/:spaceSlug/rooms/:roomSlug",{spaceSlug:a,roomSlug:o});e(),t(l)}),[a])})(t),b=(0,i.Dq)(u,{onSuccess:v}),w=(0,n.useCallback)((()=>{b({name:p,description:h})}),[p,h]);return n.createElement(d.u6,{right:!0,closeOnEsc:!0,closeOnOverlayClick:!0,onClose:t},n.createElement(m.x,{onClose:t,isSubmodal:a,title:"Create a new room"},n.createElement(l.Button,{label:"Add",onClick:w,disabled:!p})),n.createElement(d.TZ,null,n.createElement(c.Q,{roomName:p,setRoomName:g,roomDescription:h,charsDescIndicator:E,setRoomDescription:f,isCreateForm:!0})))}},7724:function(e,t,a){"use strict";a.d(t,{CE:function(){return i},M5:function(){return m},R4:function(){return d}});a(33948);var n=a(67294),o=a(22195),r=a(74059),l=a(46667),c=a(37518),s=a(33335);const i=e=>{const t=1===e;return"Delete ".concat(e," ").concat(t?"room":"rooms")},d=e=>"Delete ".concat(e," room"),m=e=>{let{name:t,roomsLength:a,spaceName:o}=e;const r=t||"".concat(a,1===a?" room":" rooms");return n.createElement(n.Fragment,null,"You are about to delete ",n.createElement("strong",null,r)," from ",n.createElement("strong",null,o)," space.",n.createElement("br",null),"This cannot be undone. Are you sure you want to continue?")};t.ZP=e=>{let{id:t,name:a,navigateToParent:i}=e;const u=(0,r.OS)("name"),p=(0,c.tE)(t,"untouchable"),g=(0,s.gI)("room:Delete")&&!p,h=(0,c.IX)(t,{onSuccess:i}),[f,,E,v]=(0,l.Z)();return g?n.createElement(n.Fragment,null,n.createElement(o.Button,{"data-testid":"manageWarRoom-delete",flavour:"hollow",onClick:E,label:"Delete room",danger:!0}),f&&n.createElement(o.ConfirmationDialog,{confirmLabel:"Yes, delete","data-ga":"delete-war-room-dialog","data-testid":"deleteWarRoomDialog",handleConfirm:h,handleDecline:v,message:n.createElement(m,{name:a,spaceName:u}),title:d(a)})):null}},97323:function(e,t,a){"use strict";a.d(t,{Q:function(){return w}});var n=a(87462),o=(a(33948),a(67294)),r=a(22195),l=a(62200),c=a(95383),s=a(37518),i=a(33335),d=a(1229),m=a(46667);const u="leave-war-room-dialog",p="leaveWarRoomDialog";var g=e=>{let{id:t,name:a,navigateToParent:l}=e;const c=(0,d.IT)(t,"ids"),i=(0,s.iC)(t,{onSuccess:l}),g=(0,s.tE)(t,"untouchable"),[h,,f,E]=(0,m.Z)(),v=1===c.length&&!g?{"data-ga":"".concat(u,"-last-member"),"data-testid":"".concat(p,"LastMember"),message:o.createElement(o.Fragment,null,"If you leave, ",o.createElement("strong",null,a)," room will be deleted immediately.",o.createElement("br",null),"Are you sure you want to continue?"),title:"Leave and delete ".concat(a," room")}:{"data-ga":u,"data-testid":p,message:o.createElement(o.Fragment,null,"You are about to leave ",o.createElement("strong",null,a)," room.",o.createElement("br",null),"Are you sure you want to continue?"),title:"Leave ".concat(a," room")};return o.createElement(o.Fragment,null,o.createElement(r.Button,{"data-ga":"manage-war-room-tab::click-leave-war-room::manage-war-room-modal","data-testid":"manageWarRoom-leave",icon:"switch_off",flavour:"borderless",label:"Leave room",neutral:!0,padding:[0],width:"fit-content",onClick:f}),h&&o.createElement(r.ConfirmationDialog,(0,n.Z)({confirmLabel:"Yes, leave",handleConfirm:i,handleDecline:E},v)))},h=a(7724),f=a(30688);const E=(0,f.A)([e=>{const t=e.length>=1;return(0,f.f)(t,"Give your room a name that's at least one character.")},e=>{const t=e.length<=20;return(0,f.f)(t,"A room's name can't exceed 20 characters.")}]);var v=e=>{let{charsIndicator:t,isDisabled:a,isValid:l,handleChange:c,setIsValid:s,setValidationMessage:i,validationMessage:d,value:m,...u}=e;const[p,g]=(0,r.useTouchedState)({});return(0,o.useEffect)((()=>{const e=E(m),t=e.isValid,a=e.messages&&e.messages.length?e.messages[0]:void 0;!l&&t?s(!0):l&&!t&&s(!1),a&&i(a)}),[l,s,m,p,i]),o.createElement(r.TextInput,(0,n.Z)({"data-testid":"warRoomOptions-warRoomNameInput",label:"Room name",name:"createRoom",placeholder:"Enter your room's name",fieldMessage:"Tip: Use rooms to group your Nodes by their service, purpose, or location.",fieldIndicator:t,value:m,touched:p,onBlur:g,onChange:c,success:l,error:!l&&d,instantFeedback:"all",disabled:a,autoFocus:!0},u))};const b=new RegExp(/^[\w\s\d]*?$/),w=e=>{let{id:t,navigateToParent:a,isCreateForm:d,roomName:m,setRoomName:u,roomDescription:p,setRoomDescription:f,charsDescIndicator:E,onSaveClick:w,...C}=e;const x=(0,s.tE)(t),I=(0,c.J7)(),[k,y]=(0,o.useState)(!1),[S,Z]=(0,o.useState)(""),[F,T]=(0,o.useState)(""),[R]=(0,r.useInputValue)({maxChars:l.v$}),_=(0,o.useCallback)((e=>u(e.target.value)),[u]),D=!!t,B=((0,i.gI)("room:LeaveAllNodes")||!x.untouchable)&&I.length>1&&x.isMember,[P,L]=(0,r.useTouchedState)({defaultState:!0}),N=!x.name||m===x.name&&p===x.description;return(0,o.useEffect)((()=>{T(b.test(p)&&P?"":"The description can only contain digits, letters, and spaces.")}),[P,p]),o.createElement(r.Flex,(0,n.Z)({column:!0,"data-testid":"manageWarRoom",flex:"grow",justifyContent:"between",height:"100%"},C),o.createElement(r.Flex,{column:!0,"data-testid":"manageWarRoom-settings",gap:2},o.createElement(r.Box,{"data-testid":"manageWarRoom-createRoomInputBox"},o.createElement(v,{"data-testid":"manageWarRoom-createRoomInput",value:m,handleChange:_,charsIndicator:R,validationMessage:S,setValidationMessage:Z,isValid:k,setIsValid:y,isDisabled:D&&x.untouchable})),o.createElement(r.Box,{"data-testid":"manageWarRoom-descriptionInputBox"},o.createElement(r.TextInput,{"data-testid":"manageWarRoom-descriptionInput",label:"Description",name:"roomDescription",placeholder:"A room description...",instantFeedback:"positiveFirst",touched:P,onBlur:L,fieldIndicator:E,error:""!==F&&F,success:""===F,value:p,onChange:f}))),o.createElement(r.Flex,{"data-testid":"manageWarRoom-actions"},o.createElement(r.Flex,{"data-testid":"manageWarRoom-deleteLeaveActions",gap:4},D&&B&&o.createElement(g,{id:t,name:x.name,navigateToParent:a}),D&&o.createElement(h.ZP,{id:t,name:m,navigateToParent:a})),!d&&o.createElement(r.Button,{"data-ga":"manage-war-room-tab::click-save::manage-war-room-modal","data-testid":"manageRoom-saveButton",label:"Save",onClick:w,disabled:N,margin:[0,0,0,"auto"]})))}},61152:function(e,t,a){"use strict";var n=a(65351);t.Z=(e,t)=>{const{isModalOpen:a,handleOpenModal:o,handleCloseModal:r,params:l}=(0,n.Z)(e,t);return[a,a?r:o,o,r,l]}},17072:function(e,t,a){var n=a(5112)("iterator"),o=!1;try{var r=0,l={next:function(){return{done:!!r++}},return:function(){o=!0}};l[n]=function(){return this},Array.from(l,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!o)return!1;var a=!1;try{var r={};r[n]=function(){return{next:function(){return{done:a=!0}}}},e(r)}catch(c){}return a}},7871:function(e,t,a){var n=a(83823),o=a(35268);e.exports=!n&&!o&&"object"==typeof window&&"object"==typeof document},83823:function(e){e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},35268:function(e,t,a){var n=a(84326);e.exports="undefined"!=typeof process&&"process"==n(process)},11060:function(e,t,a){var n=a(1702),o=Error,r=n("".replace),l=String(o("zxcasd").stack),c=/\n\s*at [^:]*:[^\n]*/,s=c.test(l);e.exports=function(e,t){if(s&&"string"==typeof e&&!o.prepareStackTrace)for(;t--;)e=r(e,c,"");return e}},5392:function(e,t,a){var n=a(68880),o=a(11060),r=a(22914),l=Error.captureStackTrace;e.exports=function(e,t,a,c){r&&(l?l(e,t):n(e,"stack",o(a,c)))}},22914:function(e,t,a){var n=a(47293),o=a(79114);e.exports=!n((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",o(1,7)),7!==e.stack)}))},58340:function(e,t,a){var n=a(70111),o=a(68880);e.exports=function(e,t){n(t)&&"cause"in t&&o(e,"cause",t.cause)}},56277:function(e,t,a){var n=a(41340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},63702:function(e,t,a){var n=a(17854),o=a(2492),r=a(60614),l=a(54705),c=a(42788),s=a(5112),i=a(7871),d=a(83823),m=a(31913),u=a(7392),p=o&&o.prototype,g=s("species"),h=!1,f=r(n.PromiseRejectionEvent),E=l("Promise",(function(){var e=c(o),t=e!==String(o);if(!t&&66===u)return!0;if(m&&(!p.catch||!p.finally))return!0;if(!u||u<51||!/native code/.test(e)){var a=new o((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};if((a.constructor={})[g]=n,!(h=a.then((function(){}))instanceof n))return!0}return!t&&(i||d)&&!f}));e.exports={CONSTRUCTOR:E,REJECTION_EVENT:f,SUBCLASSING:h}},80612:function(e,t,a){var n=a(2492),o=a(17072),r=a(63702).CONSTRUCTOR;e.exports=r||!o((function(e){n.all(e).then(void 0,(function(){}))}))},56967:function(e,t,a){"use strict";var n=a(82109),o=a(47976),r=a(79518),l=a(27674),c=a(99920),s=a(70030),i=a(68880),d=a(79114),m=a(58340),u=a(5392),p=a(20408),g=a(56277),h=a(5112)("toStringTag"),f=Error,E=[].push,v=function(e,t){var a,n=o(b,this);l?a=l(f(),n?r(this):b):(a=n?this:s(b),i(a,h,"Error")),void 0!==t&&i(a,"message",g(t)),u(a,v,a.stack,1),arguments.length>2&&m(a,arguments[2]);var c=[];return p(e,E,{that:c}),i(a,"errors",c),a};l?l(v,f):c(v,f,{name:!0});var b=v.prototype=s(f.prototype,{constructor:d(1,v),message:d(1,""),name:d(1,"AggregateError")});n({global:!0,constructor:!0,arity:2},{AggregateError:v})},9170:function(e,t,a){a(56967)},34668:function(e,t,a){"use strict";var n=a(82109),o=a(46916),r=a(19662),l=a(35005),c=a(78523),s=a(12534),i=a(20408),d=a(80612),m="No one promise resolved";n({target:"Promise",stat:!0,forced:d},{any:function(e){var t=this,a=l("AggregateError"),n=c.f(t),d=n.resolve,u=n.reject,p=s((function(){var n=r(t.resolve),l=[],c=0,s=1,p=!1;i(e,(function(e){var r=c++,i=!1;s++,o(n,t,e).then((function(e){i||p||(p=!0,d(e))}),(function(e){i||p||(i=!0,l[r]=e,--s||u(new a(l,m)))}))})),--s||u(new a(l,m))}));return p.error&&u(p.value),n.promise}})}}]);