!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="48ef9ccf-e36d-4337-9681-d1b5871112be",e._sentryDebugIdIdentifier="sentry-dbid-48ef9ccf-e36d-4337-9681-d1b5871112be")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"833aaee1cc06f5081274f22d18347a1cce30fb04"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[5312],{60593:function(e,t,n){n.d(t,{Gx:function(){return g},Iu:function(){return l},KW:function(){return u},Vt:function(){return j},YC:function(){return A},Z2:function(){return w},_L:function(){return r},bo:function(){return _},hl:function(){return N},hq:function(){return v},nb:function(){return f},pt:function(){return O},rT:function(){return Z},w6:function(){return y},yA:function(){return h},yi:function(){return b}});var i=n(93433),o=(n(26833),n(47941),n(92222),{threshold:{label:"Threshold",value:"threshold"},variance:{label:"Variance",value:"variance"},anomalies:{label:"Anomalies",value:"anomalies"}}),r=Object.values(o),a=o.threshold.value,l={thresholds:{above:{label:"above",value:"above",symbol:">"},below:{label:"below",value:"below",symbol:"<"}}},u=Object.values(l.thresholds),c=l.thresholds.above,s={seconds:{label:"seconds",value:"seconds",symbol:"s"},minutes:{label:"minutes",value:"minutes",symbol:"m"},hours:{label:"hours",value:"hours",symbol:"h"},days:{label:"days",value:"days",symbol:"d"}},v=Object.values(s),d={"5_min":{label:"5 mins",value:"5_min",after:"-5m"},"10_min":{label:"10 mins",value:"10_min",after:"-10m"},"15_min":{label:"15 mins",value:"15_min",after:"-15m"},"30_min":{label:"30 mins",value:"30_min",after:"-30m"},"1_hour":{label:"1 hour",value:"1_hour",after:"-1h"},"2_hours":{label:"2 hours",value:"2_hours",after:"-2h"},"6_hours":{label:"6 hours",value:"6_hours",after:"-6h"},"12_hours":{label:"12 hours",value:"12_hours",after:"-12h"},"1_day":{label:"1 day",value:"1_day",after:"-1d"},"2_days":{label:"2 days",value:"2_days",after:"-2d"},"7_days":{label:"7 days",value:"7_days",after:"-7d"}},f=Object.values(d),p=d["5_min"],m={linux:{label:"Linux",value:"linux"},freeBSD:{label:"FreeBSD",value:"freeBSD"},windows:{label:"Windows",value:"windows"}},g={label:"".concat(Object.keys(m).length," OS"),value:""},b=[g].concat((0,i.Z)(Object.values(m))),h={avg:{label:"AVG()",value:"average"},sum:{label:"SUM()",value:"sum"},min:{label:"MIN()",value:"min"},max:{label:"MAX()",value:"max"},stddev:{label:"STDDEV()",value:"stddev"},cv:{label:"CV()",value:"cv"}},y=Object.values(h),O=h.stddev,w=h.avg,D={sum:{label:"SUM",value:"of"},each:{label:"EACH",value:"foreach"}},j=Object.values(D),C=D.sum,A={unaligned:{label:"unaligned",value:"unaligned"},percentage:{label:"percentage",value:"percentage"},absolute:{label:"absolute",value:"absolute"},min2max:{label:"min2max",value:"min2max"}},_=Object.values(A),N={label:"&this",value:"$this"},Z={alertId:null,detection:{method:a},metrics:{on:"",hosts:{items:[],expression:""},os:[],charts:{items:[],expression:""},chartLabels:{items:[],expression:""},lookup:{aggregation:w,denoter:C,dimensions:[],timePeriod:p,options:[]},calc:{active:!1,value:""},units:""},alertingConditions:{denoter:c,critical:{isFormula:!1,denoter:c,value:85,recovery:null},warning:{isFormula:!1,denoter:c,value:75,recovery:null},interval:{value:60,unit:s.seconds},delayNotification:{active:!1,up:{value:0,unit:s.seconds},down:{value:0,unit:s.seconds},multiplier:1,max:{value:0,unit:s.hours}},agentOptions:{active:!1,off:!0,warningAlertsDuration:{value:15,unit:s.minutes},criticalAlertsDuration:{value:5,unit:s.minutes},sendTo:{value:"",clearNotifications:!0},execScript:{active:!1,path:""}}},description:{summary:"",templateName:"",templateDescription:""}}},5312:function(e,t,n){n.d(t,{rJ:function(){return p},Lb:function(){return f},Jx:function(){return g},zk:function(){return w},PK:function(){return D},qS:function(){return h},Bf:function(){return O},yL:function(){return b}});var i=n(29439),o=n(4942),r=(n(57327),n(41539),n(88449),n(2490),n(59849),n(82526),n(41817),n(47941),n(38880),n(15581),n(34514),n(54747),n(49337),n(33321),n(69070),n(67294)),a=n(4480),l=n(60593),u=(0,a.cn)({key:"alertConfiguration",default:l.rT}),c=(0,a.cn)({key:"alertConfigurationChart",default:null}),s=n(88387);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){return(0,a.sJ)(c)},p=function(){return(0,a.FV)(c)},m=(0,a.nZ)({key:"alertConfigurationSelector",get:function(e){return(0,e.get)(u)},set:function(e,t){(0,e.set)(u,(function(e){return d(d({},e),t)}))}}),g=function(){return(0,a.FV)(m)},b=function(){return(0,a.rb)(u)},h=function(){var e=g(),t=(0,i.Z)(e,2),n=t[0],o=t[1],r=n.detection.method,a=n.metrics;return{detectionMethod:r,setDetectionMethod:function(e){return o({detection:{method:e},metrics:d(d({},a),{},{lookup:d(d({},a.lookup),{},{aggregation:"variance"==e?l.pt:l.Z2})})})}}},y=function(e){var t=e.scope,n=e.setConfiguration,i=e.metrics,r=e.isComposite;return function(e){var a=null!==e&&void 0!==e&&e.length?e.filter((function(e){return e.value})):e;n({metrics:d(d({},i),{},(0,o.Z)({},t,r||Array.isArray(a)?a:a.value?[a]:[]))})}},O=function(){var e=g(),t=(0,i.Z)(e,2),n=t[0],o=t[1],r=n.metrics,a=y({scope:"hosts",setConfiguration:o,metrics:r,isComposite:!0}),l=y({scope:"charts",setConfiguration:o,metrics:r,isComposite:!0}),u=y({scope:"chartLabels",setConfiguration:o,metrics:r,isComposite:!0}),c=y({scope:"os",setConfiguration:o,metrics:r});return{metrics:r,setLookup:function(e){var t=e.aggregation,n=e.denoter,i=e.dimensions,a=e.timePeriod,l=e.options;o({metrics:d(d({},r),{},{lookup:d(d(d(d(d(d({},r.lookup),t?{aggregation:t}:{}),n?{denoter:n}:{}),i?{dimensions:i}:{}),a?{timePeriod:a}:{}),l?{options:l}:{})})})},setOn:function(e){return o({metrics:d(d({},r),{},{on:e})})},setHosts:a,setCharts:l,setChartLabels:u,setOs:c,setCalcActive:function(e){return o({metrics:d(d({},r),{},{calc:d(d({},r.calc),{},{active:e},e?{}:{value:""})})})},setCalcValue:function(e){return o({metrics:d(d({},r),{},{calc:d(d({},r.calc),{},{value:e})})})},setUnitsValue:function(e){return o({metrics:d(d({},r),{},{units:e})})}}},w=function(){var e=g(),t=(0,i.Z)(e,2),n=t[0],r=t[1],a=n.alertId,l=n.alertingConditions,u=!!a,c=function(e){return function(t){return r({alertingConditions:d(d({},l),{},{interval:d(d({},l.interval),{},(0,o.Z)({},e,t))})})}},s=c("value"),v=c("unit"),f=function(e){return function(t){return r({alertingConditions:d(d({},l),{},(0,o.Z)({},e,d(d({},l[e]),{},{active:t})))})}},p=f("delayNotification"),m=function(e){return function(t){return function(n){return function(i){return r({alertingConditions:d(d({},l),{},(0,o.Z)({},e,d(d({},l[e]),{},(0,o.Z)({},t,d(d({},l[e][t]),{},(0,o.Z)({},n,i))))))})}}}},b=m("delayNotification"),h=b("up"),y=h("value"),O=h("unit"),w=b("down"),D=w("value"),j=w("unit"),C=b("max"),A=C("value"),_=C("unit"),N=f("agentOptions"),Z=m("agentOptions"),x=Z("warningAlertsDuration"),k=x("value"),S=x("unit"),I=Z("criticalAlertsDuration"),P=I("value"),T=I("unit"),V=function(e){return function(t){return r({alertingConditions:d(d({},l),{},{agentOptions:d(d({},l.agentOptions),{},{sendTo:d(d({},l.agentOptions.sendTo),{},(0,o.Z)({},e,t))})})})}},E=V("value"),F=V("clearNotifications"),L=function(e){return function(t){return r({alertingConditions:d(d({},l),{},{agentOptions:d(d({},l.agentOptions),{},{execScript:d(d({},l.agentOptions.execScript),{},(0,o.Z)({},e,t))})})})}},M=L("active"),U=L("path");return{isEdit:u,alertingConditions:l,setMainDenoter:function(e){return r({alertingConditions:d(d({},l),{},{denoter:e,critical:d(d({},l.critical),{},{denoter:e}),warning:d(d({},l.warning),{},{denoter:e})})})},setIntervalValue:s,setIntervalUnit:v,setThreshold:function(e,t){return function(n){return r({alertingConditions:d(d({},l),{},(0,o.Z)({},e,d(d({},l[e]),{},(0,o.Z)({},t,n))))})}},setRecoveryThreshold:function(e,t){return function(n){return r({alertingConditions:d(d({},l),{},(0,o.Z)({},e,d(d({},l[e]),{},{recovery:d(d({},l[e].recovery),{},(0,o.Z)({},t,n))})))})}},setDelayNotificationActive:p,setDelayNotificationUpValue:y,setDelayNotificationUpUnit:O,setDelayNotificationDownValue:D,setDelayNotificationDownUnit:j,setDelayNotificationMaxDelayValue:A,setDelayNotificationMaxDelayUnit:_,setDelayNotificationMultiplier:function(e){return r({alertingConditions:d(d({},l),{},{delayNotification:d(d({},l.delayNotification),{},{multiplier:e})})})},setAgentOptionsActive:N,setAgentOptionsRepeatNotification:function(e){return r({alertingConditions:d(d({},l),{},{agentOptions:d(d({},l.agentOptions),{},{off:e})})})},setAgentOptionsWarningAlertsDurationValue:k,setAgentOptionsWarningAlertsDurationUnit:S,setAgentOptionsCriticalAlertsDurationValue:P,setAgentOptionsCriticalAlertsDurationUnit:T,setAgentOptionsSendToValue:E,setAgentOptionsSendToClearNotifications:F,setAgentOptionsExecScriptActive:M,setAgentOptionsExecScriptPath:U}},D=function(){var e=g(),t=(0,i.Z)(e,2),n=t[0],o=t[1],a=n.metrics.on,l=n.description,u=l.templateName,c=l.templateDescription,v=l.summary;return(0,r.useEffect)((function(){if(a){var e=(0,s._2)({on:a,templateName:u,templateDescription:c}),t=e.template,i=e.info;o({description:d(d({},n.description),{},{templateName:t,templateDescription:i})})}}),[a]),{templateName:u,templateDescription:c,summary:v,setTemplateName:function(e){return o({description:d(d({},n.description),{},{templateName:e})})},setTemplateDescription:function(e){return o({description:d(d({},n.description),{},{templateDescription:e})})},setSummary:function(e){return o({description:d(d({},n.description),{},{summary:e})})}}}},88387:function(e,t,n){n.d(t,{An:function(){return d},Oe:function(){return s},RW:function(){return A},_2:function(){return y},jx:function(){return _},t7:function(){return v}});n(47941),n(38880),n(15581),n(34514),n(54747),n(49337),n(33321),n(69070);var i=n(29439),o=n(93433),r=n(4942),a=(n(92222),n(21249),n(57640),n(9924),n(85827),n(41539),n(25387),n(2490),n(72608),n(74916),n(26699),n(32023),n(57327),n(88449),n(59849),n(91058),n(54678),n(73210),n(82526),n(41817),n(69720),n(69826),n(31672),n(59461),n(26833),n(60593)),l=n(28721);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var i=n.target.checked;return e(t?!i:i)}},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){return e(t?!n:n)}},d=function(e){return function(t){var n=t.target.value;return e(n)}},f={critical:"$status == $CRITICAL",warning:"$status >= $WARNING"},p=function(e){var t=e.flavour,n=e.formula,i=void 0===n?a.hl.value:n,o=e.isFormula,r=e.denoter,l=e.value,u=e.recovery,c=f[t];return o?l:null!==u&&void 0!==u&&u.value&&c?"$this ".concat(null===r||void 0===r?void 0:r.symbol," ((").concat(c,")  ? (").concat(u.value,")) : (").concat(l,")"):"".concat(i," ").concat(null===r||void 0===r?void 0:r.symbol," (").concat(l,")")},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,n=e.unit;return"".concat(t).concat(null===n||void 0===n?void 0:n.symbol)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"value";return function(){var t=arguments.length>1?arguments[1]:void 0,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return t[e]}));return t?n:n.join(" ")}},b=g(),h=g("label"),y=function(e){var t=e.templateName,n=e.templateDescription,i=e.on,o=(0,l.Z)(),r=i?"".concat(i.split(".").join("_"),"_").concat(o):o;return{template:t||r,info:n||"Alert description"}},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;return function(){var n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.items,a=void 0===o?[]:o,l=i.expression,u=void 0===l?"":l,c=null===(n=[t(a),u].join(" "))||void 0===n?void 0:n.trim();return c?(0,r.Z)({},e,c):{}}},w=O("hosts"),D=O("charts",(function(){return h(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],!0).reduce((function(e,t){var n,i=(null===(n=/\.(.*?)@/.exec(t))||void 0===n?void 0:n[1])||t;return e.includes(i)||e.push(i),e}),[]).join(" ")})),j=O("chart labels",(function(e){return b(e,!0).map((function(e){return e.split(":").join("=")})).join(" ")})),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.detection,n=e.metrics,i=void 0===n?{}:n,r=e.description,l=void 0===r?{}:r,u=e.alertingConditions,s=void 0===u?{}:u,v=i.on,d=i.hosts,f=i.os,g=i.charts,h=i.chartLabels,y=i.lookup,O=i.calc,C=i.units,A=l.templateName,_=l.templateDescription,N=l.summary,Z=s.agentOptions,x=void 0===Z?{}:Z,k=s.interval,S=void 0===k?{}:k,I=s.delayNotification,P=void 0===I?{}:I,T=x.execScript,V=void 0===T?{}:T;x.sendTo;return c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c({},A?{template:A}:{}),v?{on:v}:{}),w(d)),null!==f&&void 0!==f&&f.length?{os:b(f)}:{}),D(g)),j(h)),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.aggregation,n=e.denoter,i=e.dimensions,o=void 0===i?[]:i,r=e.timePeriod,a=e.options,l=arguments.length>1?arguments[1]:void 0,u=(void 0===a?[]:a).map((function(e){return e.value})).join(" "),c=o.map((function(e){return e.value})).filter(Boolean),s=c.length?"".concat((null===n||void 0===n?void 0:n.value)||"of"," ").concat(c.join(",")):"foreach"==(null===n||void 0===n?void 0:n.value)?"foreach *":null,v="anomalies"==l?"anomaly-rate":"";return{lookup:[null===t||void 0===t?void 0:t.value,null===r||void 0===r?void 0:r.after,u,s,v].filter(Boolean).join(" ")}}(y,null===t||void 0===t?void 0:t.method)),null!==O&&void 0!==O&&O.value?{calc:O.value}:{}),C&&null!==O&&void 0!==O&&O.value?{units:C}:{}),S.value?{every:m(S)}:{}),function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.alertId,o=n.alertingConditions,r=void 0===o?{}:o,l=r.critical,u=r.warning;return i?c(c({},null!==l&&void 0!==l&&l.value?{crit:l.value}:{}),null!==u&&void 0!==u&&u.value?{warn:u.value}:{}):l&&u&&null!==(e=l.denoter)&&void 0!==e&&e.value&&void 0!==l.value&&null!==(t=u.denoter)&&void 0!==t&&t.value&&void 0!==u.value?{crit:p({flavour:"critical",formula:a.hl.value,isFormula:l.isFormula,denoter:l.denoter,value:l.value,recovery:l.recovery}),warn:p({flavour:"warning",formula:a.hl.value,isFormula:u.isFormula,denoter:u.denoter,value:u.value,recovery:u.recovery})}:{}}(e)),x.active&&V.active&&V.path?{exec:V.path}:{}),_?{info:_}:{}),N?{summary:N}:{}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.active,n=e.up,i=e.down,r=e.multiplier,a=e.max;if(!t||0==parseInt(null===n||void 0===n?void 0:n.value,10)&&0==parseInt(null===i||void 0===i?void 0:i.value,10))return{};var l=[].concat((0,o.Z)(parseInt(null===n||void 0===n?void 0:n.value,10)>0?["up ".concat(m(n))]:[]),(0,o.Z)(parseInt(null===i||void 0===i?void 0:i.value,10)>0?["down ".concat(m(i))]:[]),(0,o.Z)(parseFloat(r)>0?["multiplier ".concat(r)]:[]),(0,o.Z)(parseInt(null===a||void 0===a?void 0:a.value,10)>0?["max ".concat(m(a))]:[]));return l.length?{delay:l.join(" ")}:{}}(P)),x.active?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.off,n=e.warningAlertsDuration,i=e.criticalAlertsDuration,r=[].concat((0,o.Z)(t?["off"]:[]),(0,o.Z)(!t&&null!==n&&void 0!==n&&n.value?["warning ".concat(m(n))]:[]),(0,o.Z)(!t&&null!==i&&void 0!==i&&i.value?["critical ".concat(m(i))]:[]));return r.length?{repeat:r.join(" ")}:{}}(x):{}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.active,n=e.sendTo||{},i=n.value,o=n.clearNotifications;return c(c({},i?{to:i}:{}),t&&!o?{options:"no-clear-notification"}:{})}(x))},A=function(){var e=C(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return Object.entries(e).reduce((function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1];return[].concat((0,o.Z)(e),["".concat(r,": ").concat(a)])}),[]).join("\n")},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.context,i=void 0===n?"":n,o=(e.calculation,e.displayName),r=void 0===o?"":o,l=e.configInfo,u=void 0===l?"":l,s=e.critical,v=void 0===s?"":s,d=e.warning,f=void 0===d?"":d,p=e.lookupMethod,m=void 0===p?"":p,g=e.lookupOptions,b=void 0===g?[]:g,h=(e.lookupAfter,e.lookupBefore,e.lookupDimensions),y=void 0===h?"":h,O=e.summary;return c(c(c({},a.rT),t?{alertId:t}:{}),{},{metrics:c(c({},a.rT.metrics),{},{on:i,lookup:c(c({},a.rT.metrics.lookup),{},{aggregation:Object.values(a.yA).find((function(e){return e.value==m})),dimensions:y.split(" ").map((function(e){return{label:e,value:e}})),options:Object.values(a.YC).filter((function(e){var t=e.value;return b.includes(t)}))})}),alertingConditions:c(c({},a.rT.alertingConditions),{},{critical:{value:v},warning:{value:f}}),description:{summary:O,templateName:r,templateDescription:u}})}}}]);