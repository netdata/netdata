!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="847a4d7a-3856-4ba0-9ad1-99b69fa265e6",e._sentryDebugIdIdentifier="sentry-dbid-847a4d7a-3856-4ba0-9ad1-99b69fa265e6")}catch(e){}}(),(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[388],{803:(e,t,n)=>{n.d(t,{Z:()=>b});var r=n(4942),a=n(45987),o=n(67294),c=n(22464),i=n(60677),l=n(54851),u=(0,i.default)(l.Flex).attrs((function(){return{width:{max:"315px"},overflow:"hidden"}})).withConfig({displayName:"styled__Container",componentId:"sc-sd3r49-0"})(["color:",";"],(0,l.getColor)("bright")),s=["children"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const f=function(e){var t=e.children,n=(0,a.Z)(e,s);return o.createElement(u,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"data-testid":"nodeInfoContent"},n),t)};var m=n(10314),p=["align","badge","base","children","connectivityState","content","isBasic","status","nodeName","nodeType"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const b=function(e){var t=e.align,n=void 0===t?"bottom":t,i=e.badge,l=e.base,u=void 0===l?{background:"main",padding:[2]}:l,s=e.children,d=e.connectivityState,b=e.content,v=e.isBasic,y=void 0===v||v,h=e.status,O=e.nodeName,w=e.nodeType,x=(0,a.Z)(e,p);return o.createElement(c.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({align:n,base:u,content:function(){return o.createElement(f,{"data-testid":"nodeInfoTooltip-tooltipContent"},b||(0,m.yK)(i,d,h,O,w))},"data-testid":"nodeInfoTooltip",isBasic:y},x),s)}},41729:(e,t,n)=>{n.d(t,{ZP:()=>x,lG:()=>h,om:()=>y});var r=n(29439),a=n(93433),o=n(45987),c=n(4942),i=n(67294),l=n(60677),u=n(6264),s=n(54851),d=n(39434),f=["item","onItemClick","itemProps"],m=["value","disabled","onClick","label","selected","indeterminate","textColor","iconName","count","level"],p=["baseKey","extraKey","param","Item","testIdPrefix","collection","getValue","getLabel","itemsProps","itemProps","capitalized","multi"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){return e[0].toUpperCase()+e.slice(1)},y=(0,l.default)(s.Flex).attrs((function(e){return b({as:"li",role:"option",padding:[1,2],gap:1,justifyContent:"between",width:"100%"},e)})).withConfig({displayName:"checkboxes__ItemContainer",componentId:"sc-1vef46u-0"})(["cursor:",";opacity:",";align-items:",";"," ",""],(function(e){return e.disabled?"default":"pointer"}),(function(e){var t=e.disabled;return e.stale||t?.7:1}),(function(e){return e.alignItems||"center"}),(function(e){var t=e.multi,n=e.selected,r=e.theme;return!t&&n&&"\n    background-color: ".concat(function(e){var t=e.theme;return("Dark"===t.name?(0,s.getRgbColor)(["green","netdata"],.3):(0,s.getRgbColor)(["green","frostee"]))({theme:t})}({theme:r}),";\n  ")}),(function(e){var t=e.multi,n=e.selected,r=e.theme;return!t&&!n&&"\n    &:hover {\n      background-color: ".concat((0,s.getColor)("borderSecondary")({theme:r}),";\n    }\n  ")})),h=(0,l.default)(s.Checkbox).withConfig({displayName:"checkboxes__FullWidthCheckbox",componentId:"sc-1vef46u-1"})(["width:100%;"]),O=function(e){var t=e.baseKey,n=e.extraKey,c=e.param,l=e.Item,d=e.testIdPrefix,f=e.collection,m=e.getValue,g=e.getLabel,v=e.itemsProps,y=e.itemProps,h=e.capitalized,O=void 0===h||h,w=e.multi,x=void 0===w||w,P=(0,o.Z)(e,p),j=(0,u.I0)(c,{defaultValue:[],key:t,extraKey:n}),I=(0,r.Z)(j,2),k=I[0],C=I[1];(0,i.useEffect)((function(){if(f.length&&k.length){var e=k.filter((function(e){return f.some((function(t){return m(t)===e}))}));e.length!==k.length&&C(e)}}),[f.length,C]);var E=(0,i.useCallback)((function(e){var t=e.value,n=e.checked;C(x?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)?n?t:[]:n?[].concat((0,a.Z)(e),[t]):e.filter((function(e){return e!==t}))}:function(){return n?[t]:[]})}),[C]),Z=(0,i.useMemo)((function(){return function(e){var t=e.collection,n=e.selected,r=e.getValue,o=e.getLabel,c=e.itemsProps,i=e.multi;if(!t.length)return[];var l=i&&t.length<=n.length,u=i&&!l&&!!n.length;return t.reduce((function(e,t){var i=n.includes(r(t));return[].concat((0,a.Z)(e),[b(b(b({},c.row),t),{},{value:r(t),label:o(t),selected:i})])}),i?[b(b({},c.head),{},{label:"Select all",value:t.map(r),selected:l,indeterminate:u})]:[])}({collection:f,selected:k,getValue:m,getLabel:g,itemsProps:v,multi:x})}),[k,C,f]);return i.createElement(s.MenuDropdown,b({hideShadow:!0,height:{max:"300px"},width:{max:"600px"},background:"mainBackground",overflow:"auto","data-testid":"".concat(d,'-filter-selections"'),searchMargin:[0,0,2],items:Z,Item:l,onItemClick:E,value:k,"data-value":k.join(",")||"all-selected",hasSearch:f.length>5,itemProps:b(b({},y),{},{testIdPrefix:d,capitalized:O,multi:x})},P))},w=function(e){return e};O.defaultProps={itemProps:{padding:[1,.5],maxLength:30,multi:!0},itemsProps:{head:{textColor:"textLite"},row:{textColor:"text"}},Item:function(e){var t=e.item,n=e.onItemClick,r=e.itemProps,a=(0,o.Z)(e,f),c=t.value,l=t.disabled,u=t.onClick,p=t.label,g=t.selected,O=t.indeterminate,w=t.textColor,x=t.iconName,P=t.count,j=t.level,I=void 0===j?0:j,k=(0,o.Z)(t,m),C=r.capitalized,E=r.multi,Z=l||!E&&g,L=function(e){l||(u&&u(e),n({value:c,label:p,checked:!g,item:t}))};return i.createElement(y,b(b(b(b({"aria-selected":g,selected:g,disabled:Z,stale:0===P||"0"===P},k),a),r),{},{"data-testid":"".concat(r.testIdPrefix,"-filters-item")}),i.createElement(s.Flex,{gap:2,alignItems:"center",padding:[0,0,0,4*I],width:"100%"},E?i.createElement(h,{"data-testid":"".concat(r.testIdPrefix,"-filters-checkbox-").concat(p),checked:g,disabled:Z,indeterminate:O,onChange:L,label:i.createElement(s.Flex,{gap:1,alignItems:"center",width:"100%"},x&&i.createElement(s.Icon,{name:x,size:"small",color:"textLite"}),i.createElement(d.default,{Component:s.TextSmall,title:p,text:"string"===typeof p&&C?v(p):p.toString(),maxLength:r.maxLength||80,color:w}))}):i.createElement(s.Flex,{gap:1,padding:[0,1],alignItems:"center",onClick:L,"data-testid":"".concat(r.testIdPrefix,"-filters-item-").concat(p)},i.createElement(d.default,{Component:s.TextSmall,title:p,text:"string"===typeof p&&C?v(p):p.toString(),maxLength:r.maxLength||80,color:w}))),!isNaN(P)&&i.createElement(s.Pill,{flavour:"neutral",hollow:!0,"data-testid":"".concat(r.testIdPrefix,"-filters-").concat(p,"-count")},P.toString()))},getValue:w,getLabel:w};const x=O},3388:(e,t,n)=>{n.d(t,{Z:()=>E,c:()=>I});var r=n(29439),a=n(93433),o=n(4942),c=n(45987),i=n(67294),l=n(91966),u=n.n(l),s=n(79655),d=n(32802),f=n(6264),m=n(54851),p=n(39434),g=n(87053),b=n(87393),v=n(3142),y=n(41729),h=["value","disabled","onClick","label","nodeId","selected","status","indeterminate","textColor","iconName","hasAlerts","hasML","hasFn","showAlerts","showMl","showFn","requireML","requireFn","mlEnabled","capabilities","count","multi"],O=["item","onItemClick","itemProps","close"],w=["baseKey","extraKey","statusProps","multi","useFilteredIds","nodeCounts"];function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={Live:{head:{label:"Live nodes",textColor:"textLite",iconName:"connectivityStatusLive",hasML:!0,hasAlerts:!0,hasFn:!0},node:{textColor:"text",showAlerts:!0,showMl:!0,showFn:!0}},Stale:{head:{label:"Stale nodes",textColor:"textLite",iconName:"connectivityStatusStale",hasML:!0},node:{textColor:"text",showMl:!0}},Offline:{head:{label:"Offline nodes",textColor:"textLite",iconName:"connectivityStatusOffline"},node:{textColor:"textLite"}}},I=function(e){var t=e.item,n=t.value,r=t.disabled,a=t.onClick,o=t.label,l=t.nodeId,u=t.selected,f=t.status,w=t.indeterminate,x=t.textColor,j=t.iconName,I=t.hasAlerts,k=t.hasML,C=t.hasFn,E=t.showAlerts,Z=t.showMl,L=t.showFn,D=t.requireML,S=t.requireFn,N=t.mlEnabled,A=t.capabilities,_=t.count,F=t.multi,M=void 0===F||F,T=(0,c.Z)(t,h),U=e.onItemClick,K=e.itemProps,B=e.close,J=(0,c.Z)(e,O),z=(0,d.m3)(l),V=(0,i.useMemo)((function(){return!L||!A||A.some((function(e){return"funcs"===e.name&&e.enabled}))}),[L]),G=r||D&&!N||S&&!V||!M&&u,H=function(e){G||(a&&a(e),U({value:n,checked:!u,status:f}))},q=function(e){e.stopPropagation(),null===B||void 0===B||B()};return i.createElement(y.om,P(P(P(P({"aria-selected":u,selected:u,disabled:G,stale:0===_||"0"===_},T),J),K),{},{"data-testid":"filterNodes-item-".concat(o),multi:M}),i.createElement(m.Flex,{gap:2,alignItems:"center",flex:!0},M?i.createElement(i.Fragment,null,i.createElement(y.lG,{"data-testid":"filterNodes-checkbox-".concat(o),checked:u,disabled:G,indeterminate:w,onChange:H,label:i.createElement(m.Flex,{gap:1,alignItems:"center"},j&&i.createElement(m.Icon,{name:j,size:"small",color:"textLite"}),i.createElement(p.default,{Component:m.TextSmall,title:o,text:o,maxLength:(null===K||void 0===K?void 0:K.maxLength)||80,color:x,truncate:!0}),"Offline"!==f&&!Array.isArray(n)&&i.createElement(g.Z,{as:s.rU,to:z,state:{nodeId:l},"data-testid":"filterNodes-item-gta",color:"textLite",hoverColor:"text",onClick:q},i.createElement(m.Icon,{name:"nav_arrow_goto",height:"10px",width:"10px"})))})):i.createElement(m.Flex,{gap:1,padding:[0,1],alignItems:"center",onClick:H,"data-testid":"filterNodes-item-".concat(o),flex:!0},i.createElement(p.default,{Component:m.TextSmall,title:o,text:o,maxLength:(null===K||void 0===K?void 0:K.maxLength)||80,color:x}),"Offline"!==f&&!Array.isArray(n)&&i.createElement(g.Z,{as:s.rU,to:z,state:{nodeId:l},"data-testid":"filterNodes-item-gta",color:"textLite",hoverColor:"text",onClick:q},i.createElement(m.Icon,{name:"nav_arrow_goto",height:"10px",width:"10px"})))),i.createElement(m.Flex,{gap:1},E&&i.createElement(m.Flex,{gap:1,justifyContent:"center",width:17},i.createElement(v.Z,{id:n,isLive:!0,name:o})),Z&&i.createElement(m.Flex,{gap:1,justifyContent:"center",width:10},i.createElement(b.Z,{badge:"ml","data-testid":"nodes-indicator-machine-learning",capable:!0,enabled:N,name:o})),L&&i.createElement(m.Flex,{gap:1,justifyContent:"center",width:10},i.createElement(b.Z,{badge:"fn","data-testid":"nodes-indicator-fn",capable:!0,enabled:V,name:o})),I&&i.createElement(m.Flex,{gap:1,justifyContent:"center",width:17},i.createElement(m.Icon,{name:"alarm",size:"small",color:"textLite"}),i.createElement(m.TextSmall,{strong:!0,color:"textLite"},"Alerts")),k&&i.createElement(m.Flex,{gap:1,justifyContent:"center",width:10},i.createElement(m.Icon,{name:"anomaliesLens",size:"small",color:"textLite"}),i.createElement(m.TextSmall,{strong:!0,color:"textLite"},"ML")),C&&i.createElement(m.Flex,{gap:1,justifyContent:"center",width:10},i.createElement(m.Icon,{name:"functions",size:"small",color:"textLite"}),i.createElement(m.TextSmall,{strong:!0,color:"textLite"},"Fn")),!isNaN(_)&&i.createElement(m.Pill,{flavour:"neutral",hollow:!0,"data-testid":"".concat(K.testIdPrefix,"-filters-").concat(o,"-count")},_.toString())))},k=function(e){var t=e.ids,n=e.status,r=e.selectedIds,o=e.nodesById,c=e.statusProps,i=e.multi,l=void 0===i||i,u=e.nodeCounts;if(!t.length)return[];var s=l&&!t.some((function(e){return!r.includes(e)})),d=l&&r.length&&!s&&t.some((function(e){return r.includes(e)}));return t.reduce((function(e,t){var i=o[t],s=i.name,d=i.mlInfo,f=i.capabilities,m=r.includes(t);return[].concat((0,a.Z)(e),[P(P(P({value:t,label:s,nodeId:t,selected:m,status:n},d),{},{capabilities:f},c[n].node),{},{multi:l,count:u?u[t]||0:NaN})])}),[P(P({value:t,selected:s,indeterminate:d,disabled:!l,status:n},c[n].head),{},{multi:l})])},C=function(e){return e};const E=function(e){var t=e.baseKey,n=e.extraKey,o=e.statusProps,l=void 0===o?j:o,s=e.multi,p=void 0===s||s,g=e.useFilteredIds,b=void 0===g?C:g,v=e.nodeCounts,y=(0,c.Z)(e,w),h=b((0,f.H7)()),O=(0,f.wT)({defaultValue:[],key:t,extraKey:n}),x=(0,r.Z)(O,2),E=x[0],Z=x[1];(0,i.useEffect)((function(){if(h.length&&E.length){var e=E.filter((function(e){return h.includes(e)}));e.length!==E.length&&Z(e)}}),[h]);var L=(0,d.HZ)(h),D=(0,d.e5)(h),S=(0,d.mf)(h),N=(0,i.useCallback)((function(e){var t=e.value,n=e.checked;Z(p?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)?n?(0,a.Z)(new Set([].concat((0,a.Z)(e),(0,a.Z)(t)))):u()(e,t):n?[].concat((0,a.Z)(e),[t]):e.filter((function(e){return e!==t}))}:function(){return n?[t]:[]})}),[Z]),A=(0,d.d$)(),_=(0,i.useMemo)((function(){var e=k({ids:L,status:"Live",selectedIds:E,nodesById:A,statusProps:l,multi:p,nodeCounts:v}),t=k({ids:D,status:"Stale",selectedIds:E,nodesById:A,statusProps:l,multi:p,nodeCounts:v}),n=k({ids:S,status:"Offline",selectedIds:E,nodesById:A,statusProps:l,multi:p,nodeCounts:v});return e.concat(t,n)}),[E,L.length,D.length,S.length,v]);return i.createElement(m.MenuDropdown,P({hideShadow:!0,height:{max:"60vh"},width:{max:"600px"},overflow:"auto","data-testid":"filterNodes-drop",searchMargin:[2],items:_,Item:I,onItemClick:N,value:E,"data-value":E.join(",")||"all-nodes",hasSearch:!0},y))}},60429:(e,t,n)=>{n.d(t,{C6:()=>A,Cz:()=>F,Kp:()=>y,MN:()=>T,ND:()=>O,hN:()=>D,oW:()=>x,sr:()=>C,tC:()=>Z,uk:()=>h});var r=n(4942),a=n(45987),o=n(29439),c=n(35835),i=n(6792),l=n(93412),u=n(41174),s=n(76410),d=["id","nodeID","chartID","chart","name","class","status","chartContext","alarm"],f=["id","nodeInstances","warningExpr","criticalExpr","calculationExpr","chartContext","chart"],m=["config_hash","last_transition","last_value","status","units"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){return{id:e.roomID,alertCounter:e.alarmCounter,unreachableCount:e.unreachableCount,state:e.state}},v=function(e){return{results:(e.results||[]).map(b)}},y=function(e){return c.Z.get("/api/v2/spaces/".concat(e,"/alarms"),{transform:v})},h=function(e){return c.Z.get("/api/v2/spaces/".concat(e,"/alarms/metas"))},O={contexts:null,names:null,roles:null},w=function(e,t){return"".concat(e,":::").concat(t)},x=function(e){if(!e)return{id:null,nodeId:null};var t=e.split(/:::(.+)/),n=(0,o.Z)(t,2);return{id:n[0],nodeId:n[1]}},P=function(e,t){return"".concat(e,".").concat(t)},j=function(e){return"Error"===e?"Errors":e in l.du?e:l.pB},I=function(e){e.id;var t=e.nodeID,n=e.chartID,r=e.chart,o=e.name,c=e.class,i=e.status,l=e.chartContext,u=e.alarm,s=(0,a.Z)(e,d);return g(g({nodeId:t,chartId:r=r||n,name:o=o||u,displayName:(o||"unknown_alert").replace(/_/g," "),class:j(c),status:i.toLowerCase(),chartContext:l||r||n},s),{},{id:w(P(r,o),t)})},k=function(e){return{results:(e||[]).map(I)}},C=function(e,t,n){return c.Z.get("".concat(i.li,"/spaces/").concat(e,"/rooms/").concat(t,"/alarms-active"),{params:n&&{last_updated:n},transform:k})},E=function(e){return function(t){var n=t.alarms,r=void 0===n?{}:n;return Object.keys(r).map((function(t){var n=r[t],a=(n.id,n.status),o=n.value,c=n.last_updated;return{id:w(t,e),status:a.toLowerCase(),value:o,when:c||Math.floor(Date.now()/1e3)}}))}},Z=function(e){return c.Z.get("".concat(i.li,"/nodes/").concat(e,"/alarms-values"),{transform:E(e)})},L=function(e,t){return function(n){var r=n.id,o=n.nodeInstances,c=n.warningExpr,i=n.criticalExpr,l=n.calculationExpr,d=n.chartContext,m=n.chart,p=(0,a.Z)(n,f),b=(null===o||void 0===o?void 0:o[0])||{},v=(0,u.hK)(b.transitionAt),y=b.value,h=b.units,O=(0,s.m9)(y,h);return g(g({chartId:t,transitionAt:v,transitionValue:y,units:h,formattedTransitionValue:O,nodeInstances:o.map((function(e){var t;return g(g({},e),{},{status:null===(t=e.status)||void 0===t?void 0:t.toLowerCase(),fullHostname:e.parentHostname?"".concat(e.parentHostname,"/").concat(p.hostname):p.hostname})})),critical:i,warning:c,calculation:l},p),{},{status:p.status.toLowerCase(),id:w(r,e),chartContext:d||m})}},D=function(e,t,n,r,a){return c.Z.get("/api/v2/spaces/".concat(n,"/rooms/").concat(r,"/alarms/").concat(t,"/nodes/").concat(e,"/charts/").concat(a),{transform:L(e,a)})},S=function(e){return e.results},N=function(e){return e.data},A=function(e,t){return c.Z.get("/api/v2/spaces/".concat(e,"/rooms/").concat(t,"/alarms"),{transform:S}).then(N)},_=function(e){var t=e.results;return Object.entries(t).map((function(e){var t=(0,o.Z)(e,2),n=t[0];return g(g({},function(e,t){var n=e.alarm_instances,r=e.clear,a=e.critical,o=e.error,c=e.node_instances,i=e.unique_configs;return{alertInstances:n,clear:r,critical:a,error:o,warning:e.warning,nodeId:t,nodeInstances:c,uniqueConfigs:i}}(t[1],n)),{},{nodeId:n})}))},F=function(e,t,n){return c.Z.get("/api/v2/spaces/".concat(e,"/rooms/").concat(t,"/alarms/").concat(n),{transform:_}).then(N)},M=function(e){var t=e.results;return Object.entries(t).map((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1],c=r.config_hash,i=r.last_transition,l=r.last_value,u=r.status,s=r.units;return g(g({},(0,a.Z)(r,m)),{},{configHash:c,lastTransition:i,lastValue:l,name:n,status:u.toLowerCase(),units:s})}))},T=function(e,t,n,r){return c.Z.get("/api/v2/spaces/".concat(e,"/rooms/").concat(t,"/alarms/").concat(n,"/nodes/").concat(r),{transform:M}).then(N)}},40854:(e,t,n)=>{n.d(t,{$o:()=>s,E3:()=>c,Gs:()=>m,HI:()=>f,J6:()=>d,ZP:()=>i,bc:()=>l,p$:()=>u});var r=n(4480),a=n(93412),o=n(60429),c={id:null,loaded:!1,nodeId:null,chartId:null,name:"",calculation:"",lookupAfter:0,lookupBefore:0,status:"Unknown",date:"",fullyLoaded:!1,fullyLoading:!1,info:"",warning:"",critical:"",updateEvery:0,exec:"",source:"",recipient:"Unknown",units:"",delayUpDuration:0,delayDownDuration:0,delayMaxDuration:0,delayMultiplier:0,delay:0,delayUpToTimestamp:"",lookupDimensions:"",lookupMethod:"",lookupOptions:"",class:"Unknown",type:"Unknown",component:"Unknown"};const i=(0,r.cn)({key:"alert",default:{}});var l=(0,r.cn)({key:"selectedAlert",default:null}),u=(0,r.cn)({key:"alertsTabsAtom",default:a.U}),s=(0,r.xu)({key:"alertsConfiguration",default:function(e){var t=e.spaceId,n=e.roomId;return(0,o.C6)(t,n)}}),d=(0,r.xu)({key:"alertConfiguration",default:function(e){var t=e.spaceId,n=e.roomId,r=e.alert;return(0,o.Cz)(t,n,r)}}),f=(0,r.xu)({key:"alertInstances",default:function(e){var t=e.spaceId,n=e.roomId,r=e.alertName,a=e.nodeId;return(0,o.MN)(t,n,r,a)}}),m=(0,r.xu)({key:"selectedAlertConfiguration",default:{alertName:null,nodeId:null}})},76410:(e,t,n)=>{n.d(t,{e8:()=>m,m9:()=>d,pK:()=>f,yi:()=>s});var r=n(89250),a=n(67294),o=n(72840),c=n(6264),i=n(21257),l=n(19411),u=n(41174),s=function(e){var t=(0,r.s0)(),n=(0,o.A3)(),i=(0,c.XT)({extraKey:"alerts"}),l=(0,c.Sf)("alertStatuses",{extraKey:"alerts"});return(0,a.useCallback)((function(r){e&&i([e]),r&&"string"===typeof r&&l([r]),t("".concat(n,"/alerts"))}),[e,n,i])},d=function(e,t){if(void 0===e)return"-";var n=(0,i.J)(e);return t?"".concat(n," ").concat(t):n},f=function(e,t){return(0,a.useMemo)((function(){return d(e,t)}),[e,t])},m=function(e){var t=e.rawTime,n=e.secs,r=void 0!==n&&n,o=e.long,c=void 0!==o&&o,i=(0,u.rA)(),s=i.localeTimeString,d=i.localeDateString;return(0,a.useMemo)((function(){var e=new Date(t);return isNaN(e.valueOf())?{}:{timeAgo:(0,l.Z)(e,new Date),formattedDate:"".concat(d(e,{long:c})," ").concat(s(e,{secs:r}))}}),[t,s,d])}},48224:(e,t,n)=>{n.d(t,{Bk:()=>D,DZ:()=>I,E5:()=>P,ER:()=>k,E_:()=>Z,Nf:()=>L,O0:()=>j,__:()=>M,fV:()=>_,fp:()=>x,n_:()=>N,o2:()=>A,sb:()=>E,v3:()=>T,yX:()=>F,yx:()=>C});var r=n(15861),a=n(4942),o=n(64687),c=n.n(o),i=n(67294),l=n(4480),u=n(72840),s=n(25464),d=n(15321),f=n(32802),m=n(93412),p=n(38700),g=n(40854),b=n(48962),v=n(60429),y=n(21257);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(e){return O(O({},e),{},{class:e.class||g.E3.class,type:e.type||g.E3.type,component:e.component||g.E3.component,status:e.status||g.E3.status})},x=(0,l.CG)({key:"alertState",get:function(e){var t=e.id,n=e.key;return function(e){var r=(0,e.get)(g.ZP)[t]||g.E3;return n?r[n]:r}},set:function(e){var t=e.id,n=e.key;return function(e,r){var o=e.get,c=e.set;if(!n&&"deleted"===r.state){var i=o(g.ZP);delete i[r.id],c(g.ZP,i);var l=o(g.ZP);return delete l[r.id],void c(b.Z,l)}c(g.ZP,n?"function"!==typeof r?function(e){return O(O({},e),{},(0,a.Z)({},t,w(O(O({},e[t]),{},(0,a.Z)({},n,r)))))}:function(e){return O(O({},e),{},(0,a.Z)({},t,w(O(O({},e[t]),{},(0,a.Z)({},n,r(e[t][n]))))))}:function(e){return O(O({},e),{},(0,a.Z)({},t,w(O(O(O({},g.E3),e[t]),r))))})}}}),P=function(e,t){return(0,l.sJ)(x({id:e,key:t}))},j=function(){return(0,l.FV)(g.bc)},I=(0,l.CG)({key:"alertsState",get:function(e){return function(t){var n=t.get;return e.map((function(e){return n(x({id:e}))}))}},cachePolicy_UNSTABLE:{eviction:"most-recent"}}),k=function(e){return(0,l.sJ)(I(e))},C=function(e){var t=e.id,n=e.chartId,a=e.name,o=e.nodeId,s=(0,u.UL)(),d=(0,p.th)(),f=(0,l._8)((function(e){var i=e.set;return(0,r.Z)(c().mark((function e(){var r,l,u,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(x({id:t,key:"fullyLoading"}),!0),u=(0,v.oW)(t),o=o||u.nodeId,a=a||(null===(l=null===(r=u.id)||void 0===r?void 0:r.replace)||void 0===l?void 0:l.call(r,".".concat(n),"")),(f=(0,v.hN)(o,a,d,s,n)).then((function(e){var n=e.data;return i(x({id:t}),O(O({},n),{},{name:a,nodeId:o,id:t,fullyLoaded:!0,fullyLoading:!1,loaded:!0}))})).catch((function(){return i(x({id:t,key:"fullyLoading"}),!1)})),e.abrupt("return",(function(){return f.cancel()}));case 7:case"end":return e.stop()}}),e)})))}),[s,d]);(0,i.useEffect)((function(){t&&f()}),[t,f])},E=function(){var e=L(),t=(0,s.zN)(),n=(0,f.Ne)(t);return(0,i.useMemo)((function(){return n.map((function(t){var n=e.filter((function(e){return e.nodeId===t.id}));if(!n.length)return t;var r=n.map((function(e){return e.status}));return O(O({},t),{},(0,a.Z)({},m.nb.alertStatus,(0,y.j)(r)))}))}),[e,n])},Z=(0,l.CG)({key:"roomAlerts",get:function(e){return function(t){var n=t.get,r=n((0,d.e8)({id:e,key:"ids"}));return n(I(r))}}}),L=function(){var e=(0,u.UL)();return(0,l.sJ)(Z(e))},D=function(){var e=(0,u.UL)();return(0,l.sJ)((0,d.e8)({id:e,key:"loaded"}))},S={warning:0,critical:0,clear:0},N=function(e){var t=k(e);return(0,i.useMemo)((function(){return t.reduce((function(e,t){var n=t.status;return e[n]=e[n]+1,e}),O({},S))}),[e])},A=function(){var e=(0,p.th)(),t=(0,u.UL)();return(0,l.sJ)((0,g.$o)({spaceId:e,roomId:t}))},_=function(e){var t=(0,p.th)(),n=(0,u.UL)(),r=(0,l.sJ)((0,g.J6)({spaceId:t,roomId:n,alert:e})),a=(0,i.useMemo)((function(){return r.map((function(e){return e.nodeId}))}),[r]),o=(0,f.Ne)(a);return(0,i.useMemo)((function(){return r.map((function(e,t){var n;return O(O({},e),{},{nodeName:null===(n=o[t])||void 0===n?void 0:n.name})}))}),[r,o])},F=function(e,t){var n=(0,p.th)(),r=(0,u.UL)();return(0,l.sJ)((0,g.HI)({spaceId:n,roomId:r,alertName:e,nodeId:t}))},M=function(){var e=(0,u.UL)();return(0,l.FV)((0,g.Gs)(e))},T=function(){var e=(0,u.UL)();return(0,l.rb)((0,g.Gs)(e))}},21257:(e,t,n)=>{n.d(t,{J:()=>r,j:()=>a});var r=function(e){var t=e<1?Number(e).toPrecision(3):Number(e).toFixed(2),n=Number.parseFloat(t);return Math.abs(n)>=1e9||Math.abs(n)<=1e-5&&0!==n?n.toExponential(3):n},a=function(e){return e.includes("critical")?"critical":e.includes("warning")?"warning":e.includes("clear")?"clear":e[0]}},48962:(e,t,n)=>{n.d(t,{E:()=>a,Z:()=>o});var r=n(4480),a={loaded:!1,status:null,value:0};const o=(0,r.cn)({key:"valueAtom",default:{}})},34528:(e,t,n)=>{n.d(t,{in:()=>s,ev:()=>m,rw:()=>p});var r=n(93433),a=n(4942),o=n(4480);const c=(0,o.cn)({key:"alertIdsByNodeId",default:{}});function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=[],s=(0,o.nZ)({key:"nodesAlertIdsState",get:function(e){return(0,e.get)(c)},set:function(e,t){return(0,e.set)(c,t)}}),d=(0,o.CG)({key:"nodeAlertIdsState",get:function(e){return function(t){return(0,t.get)(c)[e]||u}},set:function(e){return function(t,n){(0,t.set)(c,(function(t){return l(l({},t),{},(0,a.Z)({},e,(0,r.Z)(n).sort((function(e,t){return e.id-t.id}))))}))}}}),f=(0,o.CG)({key:"nodesAlertIdsState",get:function(e){return function(t){var n=(0,t.get)(c);return e.reduce((function(e,t){return[].concat((0,r.Z)(e),(0,r.Z)(n[t]||[]))}),[])}},cachePolicy_UNSTABLE:{eviction:"most-recent"}}),m=function(e){return(0,o.sJ)(d(e))},p=function(e){return(0,o.sJ)(f(e))}},3142:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(4942),a=n(45987),o=n(67294),c=n(54851),i=n(48224),l=n(34528),u=n(10314),s=n(803),d=["id","isLive","name","onClick"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const p=function(e){var t=e.id,n=e.isLive,r=e.name,f=e.onClick,p=(0,a.Z)(e,d),g=(0,l.ev)(t),b=(0,i.n_)(g),v=b.critical,y=b.warning,h=m(m({},(null===p||void 0===p?void 0:p["data-testid"])&&{dataTestId:null===p||void 0===p?void 0:p["data-testid"]}),{},{isLive:n}),O=(0,u.kR)(m({count:v,type:"critical"},h)),w=(0,u.kR)(m({count:y,type:"warning"},h));return o.createElement(s.Z,m({badge:"alerts","data-testid":"node-alerts",nodeName:r},p),o.createElement(c.AlertMasterCard,{onClick:O.text||w.text?f:null,pillLeft:O,pillRight:w}))}},87393:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(4942),a=n(45987),o=n(67294),c=n(54851),i=n(10314),l=n(803),u=["children","badge","capable","enabled","name","onClick"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const d=function(e){var t=e.children,n=e.badge,d=e.capable,f=e.enabled,m=e.name,p=e.onClick,g=(0,a.Z)(e,u),b=(0,i.Dy)(d,f);return o.createElement(l.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({badge:n,"data-testid":"node-".concat(n,"-status"),status:b.status,nodeName:m},g),o.createElement(c.Flex,{alignItems:"center",gap:2,onClick:f?p:void 0,cursor:f&&p?"pointer":"default","data-ga":"nodes-list::click-capability::".concat(b.label)},t,o.createElement(c.Pill,{background:b.background,borderColor:b.border,color:b.color,padding:[1,2],textSize:"small"},b.label)))}},15321:(e,t,n)=>{n.d(t,{e8:()=>c,uy:()=>l,Lv:()=>i});var r=n(4480),a=n(72840);const o={ids:(0,r.xu)({key:"roomAlertIds",default:[]}),error:(0,r.xu)({key:"roomAlertError",default:null}),updatedAt:(0,r.xu)({key:"roomAlertsUpdatedAt",default:""}),loaded:(0,r.xu)({key:"roomAlertsLoaded",default:!1})};var c=(0,r.CG)({key:"roomAlertState",get:function(e){var t=e.id,n=e.key;return function(e){return(0,e.get)(o[n](t))}},set:function(e){var t=e.id,n=e.key;return function(e,r){(0,e.set)(o[n](t),r)}}}),i=function(e,t){return(0,r.sJ)(c({id:e,key:t}))},l=function(e){var t=(0,a.UL)();return i(t,e)}}}]);