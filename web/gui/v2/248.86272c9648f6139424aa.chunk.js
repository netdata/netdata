!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="82236445-15b0-40cd-8d1e-940f6f189593",e._sentryDebugIdIdentifier="sentry-dbid-82236445-15b0-40cd-8d1e-940f6f189593")}catch(e){}}(),(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[248],{39434:(e,t,n)=>{t.__esModule=!0,t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n(67294)),o=c(n(53087)),a=c(n(81743)),l=["text","maxLength","Component","noTooltip"];function c(e){return e&&e.__esModule?e:{default:e}}function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}var u=function(e){var t=e.text,n=e.maxLength,c=void 0===n?15:n,i=e.Component,u=void 0===i?"div":i,s=e.noTooltip,d=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,l),f=(0,r.useMemo)((function(){return t?(0,o.default)(t,c):null}),[t,c]);return s||f===t?r.default.createElement(u,d,f):r.default.createElement(a.default,{content:t},r.default.createElement(u,d,f))};t.default=u},43007:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var r=n(29439),o=n(4942),a=n(93433),l=n(67294),c=n(48286),i=n(91966),u=n.n(i),s=n(89250),d=n(32802),f=n(3388),m=n(6264),p=n(15267),g=n(95338),h=n(58986),b=n(54851),v=n(86498);const x=(0,l.forwardRef)((function(e,t){var n=e.selectedNodesNumber;return l.createElement(b.Flex,{"data-testid":"selectNodesIndicator",ref:t,cursor:"pointer"},l.createElement(b.Box,{margin:[0,1,0,0]},l.createElement(b.TextSmall,null,"Selected")),l.createElement(b.Flex,{border:{size:"1px",type:"solid",color:"dropdown"},round:!0,padding:[0,1],width:{min:7.5},height:5,background:"mainBackground",as:b.TextSmall,justifyContent:"center",alignItems:"center",color:"textDescription"},n||"-"))}));var y=n(16476),O=n(38944);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={Live:{head:{label:"Live nodes",textColor:"textLite",iconName:"connectivityStatusLive",hasML:!0,hasAlerts:!0,hasFn:!0},node:{textColor:"text",showAlerts:!0,showMl:!0,showFn:!0}},Stale:{head:{label:"Stale nodes",textColor:"textLite",iconName:"connectivityStatusStale",hasML:!0},node:{textColor:"text",showMl:!0}},Offline:{head:{label:"Offline nodes",textColor:"textLite",iconName:"connectivityStatusOffline"},node:{textColor:"textLite"}}},k=[],S=function(e,t,n,r){var o=!e.some((function(e){return!n.includes(e)})),l=n.length&&!o&&e.some((function(e){return n.includes(e)}));return e.length?e.reduce((function(e,o){var l=r[o],c=l.name,i=l.mlInfo,u=l.capabilities,s=n.includes(o);return[].concat((0,a.Z)(e),[j(j(j({value:o,label:c,nodeId:o,selected:s,status:t},i),{},{capabilities:u},E[t].node),{},{maxLength:80})])}),[j(j({value:e,selected:o,indeterminate:l,status:t},E[t].head),{},{maxLength:80})]):[]};const C=(0,l.memo)((function(){var e=(0,m.wT)(),t=(0,r.Z)(e,2),n=t[0],o=t[1],i=(0,l.useState)(n||k),w=(0,r.Z)(i,2),j=w[0],E=w[1];(0,l.useEffect)((function(){E(n||k)}),[n]);var C=(0,p.Z)(!1),L=(0,r.Z)(C,4),Z=L[0],P=L[1],I=L[3],M=(0,l.useCallback)((function(){Z&&(o(j),I())}),[j]),_=(0,d.HZ)(),T=(0,d.e5)(),D=(0,d.mf)(),N=(0,d.Y0)(),F=(0,l.useCallback)((function(e){var t=e.value,n=e.checked;E((function(e){return Array.isArray(t)?n?(0,a.Z)(new Set([].concat((0,a.Z)(e),(0,a.Z)(t)))):u()(e,t):n?[].concat((0,a.Z)(e),[t]):e.filter((function(e){return e!==t}))}))}),[]),A=(0,l.useMemo)((function(){return{live:{counter:_.length,statusText:"Live"},stale:{counter:T.length,statusText:"Stale"},offline:{counter:D.length,statusText:"Offline"},unseen:{counter:N.length,statusText:"Unseen"}}}),[_.length,T.length,D.length,N.length]),B=(0,s.bS)("/spaces/:spaceSlug/rooms/:roomSlug/nodes/:nodeId"),W=(0,y.Z)();(0,c.Z)((function(){W(Z)}),[Z]);var z=(0,d.d$)(),H=(0,l.useMemo)((function(){var e=S(_,"Live",j,z),t=S(T,"Stale",j,z),n=S(D,"Offline",j,z);return e.concat(t,n)}),[j,_.length,T.length,D.length]);return l.createElement(b.Menu,{dropProps:{align:{top:"bottom",left:"left"},"data-toolbox":!0},dropdownProps:{height:{max:"60vh"},width:{max:"600px"},overflow:"auto",padding:[0,0,3],"data-testid":"filterNodes-drop"},itemProps:{padding:[1,4],maxLength:60},disabled:!!B,items:H,Item:f.c,onChange:F,value:j,"data-value":j.join(",")||"all-nodes",closeOnClick:!1,onClose:M,hasSearch:!0},l.createElement(O.Z,{"data-testid":"nodesIndicator",round:"2px",alignItems:"center",justifyContent:"end",width:{min:75},background:"elevationLevelOne",disabled:!!B},l.createElement(b.Flex,{cursor:"pointer",onClick:P,padding:[2,3],gap:2,alignItems:"center"},l.createElement(b.TextSmall,{strong:!0},"Nodes"),l.createElement(h.Z,null),Object.keys(A).map((function(e){return l.createElement(l.Fragment,{key:e},l.createElement(g.Z,{statusText:A[e].statusText,counter:A[e].counter,statusColor:v.B[e]}),l.createElement(h.Z,null))})),l.createElement(x,{selectedNodesNumber:j.length}),l.createElement(b.Icon,{name:"chevron_down",size:"small",color:"textLite"}))))}))}}]);