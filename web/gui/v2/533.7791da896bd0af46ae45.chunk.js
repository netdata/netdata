!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8943bcb3-d501-4076-920c-56a9e3e9d8f0",e._sentryDebugIdIdentifier="sentry-dbid-8943bcb3-d501-4076-920c-56a9e3e9d8f0")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"1f9bd6d85714735ca8bbf884fbe65fc5566ec047"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[533],{35533:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var n=a(67294),l=a(57509),r=a(54227),o=a(12008),d=a(91268),i=a(78266),c=a(45987),s=(a(74916),a(64765),a(89250)),u=a(12599),m=a(17563),f=["alertId"],g=a(22648),E=a(37518),p=a(92253),b=a(80854),h=a(17208),w=a(39840),y=a(95248),x=a(97945),I=a(60677),v=(0,I.default)(l.Flex).attrs({alignItems:"center"}).withConfig({displayName:"styled__StyledButtonContainer",componentId:"sc-1glv09p-0"})(["position:sticky;bottom:0;"]),C=function(e){var t=e.disabled,a=e.nodeId,r=e.alertId,o=e.context,d=e.lastStatusChange,i=e.onClose,c=e.isLoading,u=e.small,m=void 0!==u&&u,f=e.testid,g=void 0===f?"alertDetailsModal":f,E=(0,s.s0)(),p=(0,x.m3)(a),b=(0,n.useCallback)((function(){i&&i(),r?E(p,{state:{alertId:r}}):E(p)}),[p,r]),h=(0,y.TQ)(),w=(0,n.useCallback)((function(){var e=1e3*d;h({highlight:{after:e-6e4,before:e},correlation:!0}),b()}),[d,o,b,r]);return n.createElement(v,{justifyContent:"end",gap:2},n.createElement(l.Flex,{gap:2,justifyContent:"end"},n.createElement(l.Button,{small:m,label:"Run correlations",onClick:w,flavour:"hollow",isLoading:c,width:m?"112px":"170px","data-testid":"".concat(g,"-runCorrelations-button"),"data-ga":"alert-modal::click-run-correlations::alerts-view"}),n.createElement(l.Button,{small:m,label:"Go to chart",onClick:b,isLoading:c,disabled:c||t,width:m?"112px":"150px","data-testid":"".concat(g,"-goToNode-button"),"data-ga":"alert-modal::click-goto-chart::alerts-view"})))},k=(0,n.memo)(C),L=a(29876),S=a(20686),_=function(e){var t=e.alertId,a=e.context,r=e.name,o=e.nodeId,d=e.status,i=e.lastStatusChange,c=e.fullyLoaded,s=(0,g.m)(),u=s?l.H4:l.H0;return n.createElement(l.Flex,{column:!0,gap:4},n.createElement(l.Flex,{justifyContent:"between"},n.createElement(l.Flex,{alignItems:"center",gap:2},n.createElement(S.Z,{margin:s?null:[.5,0,0],type:"".concat(d,"AlertsTable"),"data-testid":"alertView-statusPill"},d),n.createElement(u,{"data-testid":"alertView-alertName"},r)),!1),n.createElement(l.Flex,{justifyContent:"between",alignItems:"center"},n.createElement(L.Z,{alertId:t}),c&&!s&&n.createElement(k,{lastStatusChange:i,alertId:t,context:a,name:r,nodeId:o,small:!0,testid:"alertView"})))},B=a(46189),F=I.default.img.withConfig({displayName:"sc-404__Illustration",componentId:"sc-4w81fg-0"})(["height:35%;width:35%;"]),V=I.default.div.withConfig({displayName:"sc-404__ButtonContainer",componentId:"sc-4w81fg-1"})(["margin:",";"],(0,l.getSizeBy)(4)),T=function(){var e="".concat(B.Z.assetsBaseURL,"/img/no-nodes-room.svg");return n.createElement(l.Flex,{column:!0,alignItems:"center",justifyItems:"center",justifyContent:"center",height:"100%",width:"100%",padding:[0,0,"10%"]},n.createElement(F,{src:e,alt:"Unreachable alert",title:"Unreachable alert"}),n.createElement(l.H3,null,"We couldn't find the alert"),n.createElement(l.Text,null,"This can be a temporary problem of that specific alert."),n.createElement(V,null,n.createElement(l.Button,{label:"Retry",icon:"reload"})))},Z=a(50709),R=function(e){var t=e.children;return n.createElement(l.Flex,{background:"modalHeaderBackground",height:12,flex:!1,gap:4,padding:[0,2,0,4],alignItems:"center"},n.createElement(l.Icon,{name:"logo_s",color:"success",width:"23px"}),t)},N=function(e){var t=e.alertId,a=(0,E.Hm)("name"),r=(0,o.E5)(t),d=r.fullyLoaded,c=void 0!==d&&d,s=r.fullyLoading,u=void 0===s||s,m=r.info,f=r.units,y=r.lastStatusChangeValue,x=r.lastStatusChange,I=r.context,v=r.instance,C=r.name,k=r.nodeId,L=r.status,S=r.lastUpdated,B=r.value;(0,o.yx)(t);var F=(0,w.pK)(B,f),V=(0,w.pK)(y,f),N=(0,g.m)();return n.createElement(l.Flex,{column:!0,width:N?"100%":{max:280},padding:N?null:[0,0,10],background:N?"modalBackground":null},N&&n.createElement(R,null,n.createElement(l.Flex,{column:!0},n.createElement(l.H6,{color:"textLite"},"ROOM"),n.createElement(l.Text,{"data-testid":"alertView-mobile-roomName"},a))),n.createElement(l.Flex,{column:!0,padding:N?[3]:[0],overflow:N?"auto":"visible",gap:3},n.createElement(_,{alertId:t,context:I,status:L,name:C,nodeId:k,lastStatusChange:x,fullyLoaded:c}),c?null:u?n.createElement(i.Z,{title:"Loading alert..."}):n.createElement(T,null),c&&m&&n.createElement(n.Fragment,null,n.createElement(b.Z,{iconName:"documentation"},"Alert Description"),n.createElement(l.Text,{"data-testid":"alertView-info"},m),n.createElement(Z.Z,{alertId:t})),c&&n.createElement(p.Z,{id:t,context:I,instance:v,formattedLastValue:F,formattedLastStatusChangeValue:V,lastStatusChange:x,lastUpdated:S,isFormattedValueLoaded:c,nodeId:k,status:L,testid:"alertView"}),c&&n.createElement(h.Z,{id:t,testid:"alertView"})),N&&n.createElement(l.Box,{position:"sticky",padding:[4],background:"modalBackground",bottom:0,border:{side:"top",color:"border"}},n.createElement(l.TextSmall,null,"In order to ",n.createElement(l.TextSmall,{strong:!0},"Run Correlations")," or"," ",n.createElement(l.TextSmall,{strong:!0},"View the Chart")," you will have to visit this alert from its\u2019 dedicated page on a desktop device.")))},H=function(e){var t=e.children;return(0,g.m)()?n.createElement(l.Layer,{full:!0},n.createElement(l.Flex,{width:"100%",background:"mainBackground","data-testid":"alertView-mobileContainer"},t)):t},j=function(){var e=function(){var e=(0,s.UO)(),t=e.alertId,a=(0,c.Z)(e,f),l=(0,s.TH)().search,r=m.parse(l).transition,o=(0,n.useRef)(r||t),d=(0,s.s0)();return(0,n.useEffect)((function(){r&&r!==t&&d((0,u.Gn)("/spaces/:spaceSlug/rooms/:roomSlug/alerts/".concat(r),a),{replace:!0})}),[t,r]),o.current}(),t=(0,o.E5)(e),a=t.name,g=void 0===a?"unknown alert":a,E=t.fullyLoaded,p=void 0!==E&&E,b=(0,o.Bk)();return(0,r.bV)({title:g,id:e,destination:e,params:location.hash,type:"alerts",isReady:p}),b?n.createElement(d.Z,{overflow:{vertical:"auto"}},b&&n.createElement(l.Box,{padding:[10,6]},n.createElement(H,null,n.createElement(N,{alertId:e})))):n.createElement(i.Z,{title:"Loading alert..."})}}}]);