!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="1a59dc0b-b81c-4b7c-b2c5-69ea0b9220be",e._sentryDebugIdIdentifier="sentry-dbid-1a59dc0b-b81c-4b7c-b2c5-69ea0b9220be")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"833aaee1cc06f5081274f22d18347a1cce30fb04"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[7154],{77154:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});t(66992),t(41539),t(88674),t(78783),t(33948);var r=t(67294),o=t(2145),i=t(64487),c=t(54576),u=t(9058),a=t(92501),s=t(13477),l=t(49254),d=t(39469),f=t(24533),g=t(7335),v=t(78266),m=t(29439),p=t(58591),y=t(93017),b={ErrInvalidRedirectURI:"Invalid redirect URI",ErrUntrustedRedirectURI:"Untrusted redirect URI",ErrSpaceMemberAlreadyExists:"Space member already exists",ErrInvalidSpaceID:"Invalid space ID",ErrInvalidInvitationToken:"Invalid invitation token",ErrInvitationNotFound:"Invitation not found",ErrInvitationEmailMismatch:"Invitation email mismatch",ErrInvitationExpired:"Invitation expired",ErrUnauthenticated:"Unauthenticated",ErrInternalServerError:"Internal server error"},w=function(){var e=(0,y.Z)(),n=(0,m.Z)(e,2)[1];(0,r.useEffect)((function(){var e,t,r=(0,p.m$)(),o=r.error_msg_key,i=r.error_message;i&&n({message:decodeURIComponent((e=o,t=i,b[e]||t||"An unexpected error occurred"))})}),[])},h=t(65840),O=(0,o.Z)((function(){return Promise.all([t.e(3241),t.e(8517),t.e(3212),t.e(2876),t.e(2934)]).then(t.bind(t,92876))}),"Layout"),I=(0,c.withChartProvider)((function(){var e=(0,s.Iy)("isLoaded"),n=(0,s.Iy)("email"),t=(0,s.jr)(),o=(0,s.Iy)("isAnonymous"),c=(0,h.vS)(),u=(0,d.Hu)();return(0,r.useEffect)((function(){o||u()}),[o]),(0,r.useEffect)((function(){if(t&&n)try{i.av({id:t,email:n})}catch(e){console.warn("Sentry: unable to set user")}}),[n,t]),(0,g.aG)(),(0,d.ZP)(),(0,l.ZP)(),(0,f.ZP)(),w(),r.createElement(r.Suspense,{fallback:r.createElement(v.Z,null)},r.createElement(O,{key:c,isUserLoaded:e}))})),k=(0,a.Pf)((function(){var e=(0,u.e)().getRoot();return r.createElement(I,{chart:e})}))},94221:function(e,n,t){t.d(n,{c:function(){return c}});t(41539),t(39714),t(66992),t(78783),t(33948),t(41637);var r=t(26398),o=t(64637),i=function(e){return window.localNetdataRegistry.mg=e.agent.mg,window.localNetdataRegistry.hostname=(0,o.lV)(e.agent.nm||"agent"),{cloudStatus:e.cloud.status,canBeClaimed:e.can_be_claimed,keyFilename:e.key_filename,claimId:e.cloud.claim_id,mg:e.agent.mg,nd:e.agent.nd,success:e.success,message:e.message}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.key,t=e.token,o=e.rooms,c=e.url,u=new URLSearchParams({key:n,rooms:o,token:t,url:c}).toString();return u=n&&o&&t&&c&&u?"?".concat(u):"",r.Z.get("/api/v2/claim".concat(u),{baseURL:window.envSettings.agentApiUrl,transform:i})}},24533:function(e,n,t){t.d(n,{Hu:function(){return m},Lz:function(){return p}});t(47941),t(82526),t(57327),t(41539),t(88449),t(2490),t(59849),t(38880),t(15581),t(34514),t(54747),t(49337),t(33321),t(69070);var r=t(4942),o=t(29439),i=t(67294),c=t(4480),u=t(74059),a=t(13477),s=t(28234),l=t(94221);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var g=(0,c.xu)({key:"claimStatusAtom",default:{loaded:!1,loading:!1,cloudStatus:"disabled",canBeClaimed:!1,claimId:null,keyFilename:"",error:"",claiming:!1,claimingError:""}}),v=(0,c.xu)({key:"checkClaimStatus",default:function(){return 1}}),m=function(){var e,n=null===(e=window.localNetdataRegistry)||void 0===e?void 0:e.mg,t=(0,c.Zl)(v(n));return(0,i.useCallback)((function(){return t((function(e){return e+1}))}),[n])},p=function(){var e,n=null===(e=window.localNetdataRegistry)||void 0===e?void 0:e.mg,t=(0,c.FV)(g({machineGuid:n})),r=(0,o.Z)(t,2),u=r[0],a=r[1];return[u,(0,i.useCallback)((function(e){return a((function(n){return f(f({},n),e)}),[])}))]};n.ZP=function(){var e,n=(0,u.Q6)(),t=null===(e=window.localNetdataRegistry)||void 0===e?void 0:e.mg,r=(0,c.FV)(v(t)),d=(0,o.Z)(r,2),g=d[0],m=d[1],y=p(t),b=(0,o.Z)(y,2),w=b[0],h=b[1],O=w.loading,I=(0,a.Iy)("isAnonymous");return(0,i.useEffect)((function(){!O&&t&&n&&!I&&(h({loading:!0,nodeId:null,spaceId:null,roomIds:[]}),(0,l.c)().then((function(e){var n=e.data;h(f(f({loading:!1,loaded:!0},n),{},{error:""}))})).catch((function(e){var n,t=null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data;h({loading:!1,loaded:!0,error:(0,s.r)(null===t||void 0===t?void 0:t.errorMsgKey)||(null===t||void 0===t?void 0:t.errorMessage)||"Something went wrong",cloudStatus:"disabled",canBeClaimed:!1,keyFilename:""})})))}),[t,g,n,I]),f(f({},w),{},{checkAgain:m})}},65840:function(e,n,t){t.d(n,{HK:function(){return a},M5:function(){return l},vS:function(){return u},x4:function(){return s}});var r=t(29439),o=t(4480),i=(0,o.cn)({key:"spaceKeyAtom",default:0}),c=(0,o.cn)({key:"roomViewLoading",default:!0}),u=function(){return(0,o.sJ)(i)},a=function(){var e=(0,o.FV)(i),n=(0,r.Z)(e,2),t=n[0],c=n[1];return function(){return c(t+1)}},s=function(){return(0,o.sJ)(c)},l=function(){return(0,o.FV)(c)}},39469:function(e,n,t){t.d(n,{Hu:function(){return w},zp:function(){return h}});t(47941),t(82526),t(57327),t(41539),t(88449),t(2490),t(59849),t(38880),t(15581),t(34514),t(54747),t(49337),t(33321),t(69070);var r,o=t(4942),i=t(29439),c=t(67294),u=t(4480),a=t(39915),s=t(74059),l=t(13477),d=t(28234),f=t(24533),g=t(18761);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p=null===(r=window.localNetdataRegistry)||void 0===r?void 0:r.mg,y=(0,u.xu)({key:"currentAgentBearerAtom",default:{loading:!1,token:localStorage.getItem("agentJWT:".concat(p))||"",expiration:localStorage.getItem("agentJWTExp:".concat(p))||null,bearerProtection:!0,error:""}}),b=(0,u.xu)({key:"checkAgentBearer",default:function(){return 1}}),w=function(){var e=(0,f.Lz)(),n=(0,i.Z)(e,1)[0].mg,t=(0,u.Zl)(b(n));return(0,c.useCallback)((function(){return t((function(e){return e+1}))}),[n])},h=function(){var e=(0,f.Lz)(),n=(0,i.Z)(e,1)[0],t=n.claimId,r=n.mg,o=n.nd;return(0,u.FV)(y({nodeId:o,machineGuid:r,claimId:t}))};n.ZP=function(){var e=(0,s.Q6)(),n=(0,f.Lz)(),t=(0,i.Z)(n,1)[0],r=t.claimId,o=t.mg,v=t.nd,p=(0,u.FV)(b(o)),y=(0,i.Z)(p,2),w=y[0],O=y[1],I=h(),k=(0,i.Z)(I,2),P=k[0],j=P.loading,S=P.token,E=P.expiration,Z=P.bearerProtection,x=P.error,D=k[1],A=(0,a.Z)(w),R=(0,l.Iy)("isAnonymous");return(0,c.useEffect)((function(){!j&&o&&e&&!R&&r&&v&&(w===A&&E&&1e3*E>(new Date).getTime()+3600||(D((function(e){return m(m({},e),{},{loading:!0})})),(0,g.op)(v,o,r).then((function(e){var n=e.data;D(m(m({loading:!1},n),{},{error:""})),localStorage.setItem("agentJWT:".concat(o),null===n||void 0===n?void 0:n.token),localStorage.setItem("agentJWTExp:".concat(o),null===n||void 0===n?void 0:n.expiration)})).catch((function(e){var n,t=null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data;localStorage.removeItem("agentJWT:".concat(o)),localStorage.removeItem("agentJWTExp:".concat(o)),D({loading:!1,token:"",expiration:null,bearerProtection:!0,error:(0,d.r)(null===t||void 0===t?void 0:t.errorMsgKey)||(null===t||void 0===t?void 0:t.errorMessage)||"Something went wrong"})}))))}),[o,E,w,e,R,A]),{token:S,bearerProtection:Z,checkAgain:O,error:x}}},49254:function(e,n,t){t.d(n,{Hu:function(){return m},ej:function(){return p}});t(47941),t(82526),t(57327),t(41539),t(88449),t(2490),t(59849),t(38880),t(15581),t(34514),t(54747),t(49337),t(33321),t(69070);var r=t(4942),o=t(29439),i=t(67294),c=t(4480),u=t(74059),a=t(13477),s=t(28234),l=t(18761);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var g=(0,c.xu)({key:"userAccessAtom",default:{loaded:!1,loading:!1,userStatus:"notLoggedIn",userNodeStatus:"noAccess",nodeId:null,spaceId:null,roomIds:[],error:""}}),v=(0,c.xu)({key:"checkUserAccess",default:function(){return 1}}),m=function(){var e,n=null===(e=window.localNetdataRegistry)||void 0===e?void 0:e.mg,t=(0,c.Zl)(v(n));return(0,i.useCallback)((function(){return t((function(e){return e+1}))}),[n])},p=function(){var e,n=null===(e=window.localNetdataRegistry)||void 0===e?void 0:e.mg;return(0,c.FV)(g({machineGuid:n}))};n.ZP=function(){var e,n=(0,u.Q6)(),t=null===(e=window.localNetdataRegistry)||void 0===e?void 0:e.mg,r=(0,c.FV)(v(t)),d=(0,o.Z)(r,2),g=d[0],m=d[1],y=p(t),b=(0,o.Z)(y,2),w=b[0],h=b[1],O=w.loading,I=(0,a.Iy)("isAnonymous");return(0,i.useEffect)((function(){!O&&t&&n&&!I&&(h((function(e){return f({loading:!0,nodeId:null,spaceId:null,roomIds:[]},e)})),(0,l.yM)(t).then((function(e){var n=e.data;h(f(f({loading:!1,loaded:!0},n),{},{error:""}))})).catch((function(e){var n,t=null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data;h({loading:!1,loaded:!0,error:(0,s.r)(null===t||void 0===t?void 0:t.errorMsgKey)||(null===t||void 0===t?void 0:t.errorMessage)||"Something went wrong",userStatus:"notLoggedIn",userNodeStatus:"noAccess",nodeId:null,spaceId:null,roomIds:[]})})))}),[t,g,n,I,O]),f(f({},w),{},{checkAgain:m})}},7335:function(e,n,t){t.d(n,{aG:function(){return k},H3:function(){return h},XU:function(){return P},DH:function(){return I},z2:function(){return w},lL:function(){return O}});var r=t(29439),o=t(93433),i=t(15861),c=t(4942),u=t(64687),a=t.n(u),s=(t(21249),t(57640),t(9924),t(85827),t(41539),t(25387),t(2490),t(72608),t(57327),t(88449),t(59849),t(26699),t(32023),t(92222),t(66992),t(70189),t(78783),t(88921),t(96248),t(13599),t(11477),t(64362),t(15389),t(90401),t(45164),t(91238),t(54837),t(87485),t(56767),t(76651),t(61437),t(35285),t(39865),t(33948),t(69826),t(31672),t(59461),t(2707),t(47941),t(82526),t(38880),t(15581),t(34514),t(54747),t(49337),t(33321),t(69070),t(67294)),l=t(4480),d=t(89250),f=t(13477),g=(0,l.xu)({key:"visitedNodes",default:function(){return[]}}),v=t(97945),m=t(18761);function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,c.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var b=(0,l.CG)({key:"visitedNodeIdsValue",get:function(e){return function(n){return(0,n.get)(g(e)).map((function(e){return e.id}))}}}),w=function(){var e=(0,f.jr)(),n=(0,l.sJ)(g(e)),t=(0,l._8)((function(e){var n=e.set;return function(e){n(v.Jz,{values:e.reduce((function(e,n){return y(y({},e),{},(0,c.Z)({},n.id,y(y({},n),{},{loaded:!0})))}),{}),merge:!0})}}),[]);return(0,s.useEffect)((function(){t(n)}),[n]),(0,l.sJ)(b(e))},h=function(e){var n=(0,f.jr)(),t=(0,l.sJ)(g(n)),r=(0,s.useMemo)((function(){return e?t.filter((function(n){return n.name.toUpperCase().includes(e.toUpperCase())})):t}),[t,e]);return(0,s.useMemo)((function(){return r.map((function(e){return e.id}))}),[r])},O=function(){return(0,l._8)((function(e){var n=e.snapshot,t=e.set;return function(){var e=(0,i.Z)(a().mark((function e(r,o){var i,c,u,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getPromise((0,f.KL)("id"));case 2:return i=e.sent,e.next=5,n.getPromise((0,v.zP)({id:r}));case 5:return c=e.sent,u=c.urls,s=c.name,l=u.filter((function(e){return e!==o})),t((0,v.zP)({id:r,key:"urls"}),l),l.length||t(g(i),(function(e){return e.filter((function(e){return e.id!==r}))})),e.prev=11,e.next=14,l.length?(0,m.RX)(i,r,s,l):(0,m.Sd)(i,[r]);case 14:(0,m.Wy)(i,r).catch((function(){})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),t((0,v.zP)({id:r,key:"urls"}),u);case 20:case"end":return e.stop()}}),e,null,[[11,17]])})));return function(n,t){return e.apply(this,arguments)}}()}),[])},I=function(){var e=(0,d.TH)().pathname,n=(0,f.jr)(),t=k({autoFetch:!1});return(0,l._8)((function(e){var n=e.snapshot,r=e.set;return function(){var e=(0,i.Z)(a().mark((function e(i,c,u){var s,l,d,p,b,w;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getPromise((0,f.KL)("isAnonymous"));case 2:if(!e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n.getPromise((0,f.KL)("id"));case 7:return s=e.sent,e.next=10,n.getPromise((0,v.zP)({id:i}));case 10:if(l=e.sent,d=l.urls,p=l.name,b=c?[c].concat((0,o.Z)(d)):d,b=(0,o.Z)(new Set([window.location.href].concat((0,o.Z)(b)))),w=b.length!==d.length,e.prev=16,r((0,v.zP)({id:i,key:"urls"}),b),r(g(s),(function(e){var n=e.find((function(e){return e.id===i})),t=e.filter((function(e){return e.id!==i}));return n?[y(y({},n),{},{accessCount:n.accessCount+1,lastAccessTime:(new Date).toISOString()})].concat((0,o.Z)(t)):[{accessCount:1,id:i,lastAccessTime:(new Date).toISOString(),urls:b,name:u}].concat((0,o.Z)(t))})),!w){e.next=22;break}return e.next=22,(0,m.RX)(s,i,u||p,b);case 22:return t(),e.next=25,(0,m.Wy)(s,i);case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(16),r((0,v.zP)({id:i,key:"urls"}),d);case 30:case"end":return e.stop()}}),e,null,[[16,27]])})));return function(n,t,r){return e.apply(this,arguments)}}()}),[t,e,n])},k=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoFetch,n=void 0===e||e,t=(0,f.Iy)(),o=t.id,i=t.isAnonymous,c=(0,l.FV)(g(o)),u=(0,r.Z)(c,2)[1],a=(0,s.useState)(0),d=(0,r.Z)(a,2),v=d[0],p=d[1],y=(0,s.useCallback)((function(){p((function(e){return e+1}))}),[p]);return(0,s.useEffect)((function(){if(o&&(n||v))if(i){var e=(window.visitedNodes||[]).sort((function(e,n){return new Date(n.lastAccessTime)-new Date(e.lastAccessTime)}));u(e)}else(0,m.Fz)(o).then((function(e){if(e){var n=e.data.results.sort((function(e,n){return new Date(n.lastAccessTime)-new Date(e.lastAccessTime)}));u(n)}}))}),[n,v,o,i]),y},P=function(){var e=(0,f.jr)(),n=g(e);return(0,l._8)((function(e){var t=e.snapshot,r=e.set;return function(){var e=(0,i.Z)(a().mark((function e(o){var i,c,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPromise((0,v.$E)(o));case 2:return i=e.sent,c=i.map((function(e){return e.machineGUID})),e.next=6,t.getPromise(n);case 6:u=e.sent,(s=u.filter((function(e){return!c.includes(e.id)}))).length!==u.length&&r(n,s);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),[e])}},39915:function(e,n,t){var r=t(67294),o=t(18446),i=t.n(o),c=t(9872);n.Z=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i(),o=(0,r.useRef)(),u=(0,r.useRef)(e);return!(0,c.Z)().current||n&&t(u.current,e)||(o.current=u.current,u.current=e),o.current}}}]);