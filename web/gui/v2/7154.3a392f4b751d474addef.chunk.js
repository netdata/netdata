!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="178d632a-5ca3-42d8-a90e-567d4baa919d",e._sentryDebugIdIdentifier="sentry-dbid-178d632a-5ca3-42d8-a90e-567d4baa919d")}catch(e){}}();var _global="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};_global.SENTRY_RELEASE={id:"f81fb6a9df497df4056a0be3b169a0ddcb17e366"},(self.webpackChunkcloud_frontend=self.webpackChunkcloud_frontend||[]).push([[7154],{77154:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});t(66992),t(41539),t(88674),t(78783),t(33948);var r=t(67294),o=t(2145),a=t(64487),i=t(54576),c=t(9058),u=t(92501),s=t(13477),l=t(49254),d=t(39469),f=t(24533),g=t(7335),v=t(78266),p=t(29439),m=t(58591),y=t(93017),b={ErrInvalidRedirectURI:"Invalid redirect URI",ErrUntrustedRedirectURI:"Untrusted redirect URI",ErrSpaceMemberAlreadyExists:"Space member already exists",ErrInvalidSpaceID:"Invalid space ID",ErrInvalidInvitationToken:"Invalid invitation token",ErrInvitationNotFound:"Invitation not found",ErrInvitationEmailMismatch:"Invitation email mismatch",ErrInvitationExpired:"Invitation expired",ErrUnauthenticated:"Unauthenticated",ErrInternalServerError:"Internal server error"},w=function(){var e=(0,y.Z)(),n=(0,p.Z)(e,2)[1];(0,r.useEffect)((function(){var e,t,r=(0,m.m$)(),o=r.error_msg_key,a=r.error_message;a&&n({message:decodeURIComponent((e=o,t=a,b[e]||t||"An unexpected error occurred"))})}),[])},h=(0,o.Z)((function(){return Promise.all([t.e(3241),t.e(9305),t.e(6942),t.e(2934)]).then(t.bind(t,46942))}),"Layout"),O=(0,i.withChartProvider)((function(){var e=(0,s.Iy)("isLoaded"),n=(0,s.Iy)("email"),t=(0,s.jr)(),o=(0,s.Iy)("isAnonymous"),i=(0,d.Hu)();return(0,r.useEffect)((function(){o||i()}),[o]),(0,r.useEffect)((function(){if(t&&n)try{a.av({id:t,email:n})}catch(e){console.warn("Sentry: unable to set user")}}),[n,t]),(0,g.aG)(t),(0,d.ZP)(),(0,l.ZP)(),(0,f.ZP)(),w(),r.createElement(r.Suspense,{fallback:r.createElement(v.Z,null)},r.createElement(h,{isUserLoaded:e}))})),I=(0,u.Pf)((function(){var e=(0,c.e)().getRoot();return r.createElement(O,{chart:e})}))},94221:function(e,n,t){t.d(n,{c:function(){return i}});t(41539),t(39714),t(66992),t(78783),t(33948),t(41637);var r=t(26398),o=t(64637),a=function(e){return window.localNetdataRegistry.mg=e.agent.mg,window.localNetdataRegistry.hostname=(0,o.lV)(e.agent.nm||"agent"),{cloudStatus:e.cloud.status,canBeClaimed:e.can_be_claimed,keyFilename:e.key_filename,claimId:e.cloud.claim_id,mg:e.agent.mg,nd:e.agent.nd,success:e.success,message:e.message}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.key,t=e.token,o=e.rooms,i=e.url,c=new URLSearchParams({key:n,rooms:o,token:t,url:i}).toString();return c=n&&o&&t&&i&&c?"?".concat(c):"",r.Z.get("/api/v2/claim".concat(c),{baseURL:window.envSettings.agentApiUrl,transform:a})}},24533:function(e,n,t){t.d(n,{Hu:function(){return p},Lz:function(){return m}});t(47941),t(82526),t(57327),t(41539),t(88449),t(2490),t(59849),t(38880),t(15581),t(34514),t(54747),t(49337),t(33321),t(69070);var r=t(4942),o=t(29439),a=t(67294),i=t(4480),c=t(74059),u=t(13477),s=t(28234),l=t(94221);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var g=(0,i.xu)({key:"claimStatusAtom",default:{loaded:!1,loading:!1,cloudStatus:"disabled",canBeClaimed:!1,claimId:null,keyFilename:"",error:"",claiming:!1,claimingError:""}}),v=(0,i.xu)({key:"checkClaimStatus",default:function(){return 1}}),p=function(){var e,n=null===(e=window.localNetdataRegistry)||void 0===e?void 0:e.mg,t=(0,i.Zl)(v(n));return(0,a.useCallback)((function(){return t((function(e){return e+1}))}),[n])},m=function(){var e,n=null===(e=window.localNetdataRegistry)||void 0===e?void 0:e.mg,t=(0,i.FV)(g({machineGuid:n})),r=(0,o.Z)(t,2),c=r[0],u=r[1];return[c,(0,a.useCallback)((function(e){return u((function(n){return f(f({},n),e)}),[])}))]};n.ZP=function(){var e,n=(0,c.Q6)(),t=null===(e=window.localNetdataRegistry)||void 0===e?void 0:e.mg,r=(0,i.FV)(v(t)),d=(0,o.Z)(r,2),g=d[0],p=d[1],y=m(t),b=(0,o.Z)(y,2),w=b[0],h=b[1],O=w.loading,I=(0,u.Iy)("isAnonymous");return(0,a.useEffect)((function(){!O&&t&&n&&!I&&(h({loading:!0,nodeId:null,spaceId:null,roomIds:[]}),(0,l.c)().then((function(e){var n=e.data;h(f(f({loading:!1,loaded:!0},n),{},{error:""}))})).catch((function(e){var n,t=null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data;h({loading:!1,loaded:!0,error:(0,s.r)(null===t||void 0===t?void 0:t.errorMsgKey)||(null===t||void 0===t?void 0:t.errorMessage)||"Something went wrong",cloudStatus:"disabled",canBeClaimed:!1,keyFilename:""})})))}),[t,g,n,I]),f(f({},w),{},{checkAgain:p})}},39469:function(e,n,t){t.d(n,{Hu:function(){return w},zp:function(){return h}});t(47941),t(82526),t(57327),t(41539),t(88449),t(2490),t(59849),t(38880),t(15581),t(34514),t(54747),t(49337),t(33321),t(69070);var r,o=t(4942),a=t(29439),i=t(67294),c=t(4480),u=t(37176),s=t(74059),l=t(13477),d=t(28234),f=t(24533),g=t(18761);function v(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?v(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var m=null===(r=window.localNetdataRegistry)||void 0===r?void 0:r.mg,y=(0,c.xu)({key:"currentAgentBearerAtom",default:{loading:!1,token:localStorage.getItem("agentJWT:".concat(m))||"",expiration:localStorage.getItem("agentJWTExp:".concat(m))||null,bearerProtection:!0,error:""}}),b=(0,c.xu)({key:"checkAgentBearer",default:function(){return 1}}),w=function(){var e=(0,f.Lz)(),n=(0,a.Z)(e,1)[0].mg,t=(0,c.Zl)(b(n));return(0,i.useCallback)((function(){return t((function(e){return e+1}))}),[n])},h=function(){var e=(0,f.Lz)(),n=(0,a.Z)(e,1)[0],t=n.claimId,r=n.mg,o=n.nd;return(0,c.FV)(y({nodeId:o,machineGuid:r,claimId:t}))};n.ZP=function(){var e=(0,s.Q6)(),n=(0,f.Lz)(),t=(0,a.Z)(n,1)[0],r=t.claimId,o=t.mg,v=t.nd,m=(0,c.FV)(b(o)),y=(0,a.Z)(m,2),w=y[0],O=y[1],I=h(),P=(0,a.Z)(I,2),k=P[0],j=k.loading,E=k.token,S=k.expiration,Z=k.bearerProtection,x=k.error,D=P[1],A=(0,u.Z)(w),R=(0,l.Iy)("isAnonymous");return(0,i.useEffect)((function(){!j&&o&&e&&!R&&r&&v&&(w===A&&S&&1e3*S>(new Date).getTime()+3600||(D((function(e){return p(p({},e),{},{loading:!0})})),(0,g.op)(v,o,r).then((function(e){var n=e.data;D(p(p({loading:!1},n),{},{error:""})),localStorage.setItem("agentJWT:".concat(o),null===n||void 0===n?void 0:n.token),localStorage.setItem("agentJWTExp:".concat(o),null===n||void 0===n?void 0:n.expiration)})).catch((function(e){var n,t=null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data;localStorage.removeItem("agentJWT:".concat(o)),localStorage.removeItem("agentJWTExp:".concat(o)),D({loading:!1,token:"",expiration:null,bearerProtection:!0,error:(0,d.r)(null===t||void 0===t?void 0:t.errorMsgKey)||(null===t||void 0===t?void 0:t.errorMessage)||"Something went wrong"})}))))}),[o,S,w,e,R,A]),{token:E,bearerProtection:Z,checkAgain:O,error:x}}},49254:function(e,n,t){t.d(n,{Hu:function(){return p},ej:function(){return m}});t(47941),t(82526),t(57327),t(41539),t(88449),t(2490),t(59849),t(38880),t(15581),t(34514),t(54747),t(49337),t(33321),t(69070);var r=t(4942),o=t(29439),a=t(67294),i=t(4480),c=t(74059),u=t(13477),s=t(28234),l=t(18761);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var g=(0,i.xu)({key:"userAccessAtom",default:{loaded:!1,loading:!1,userStatus:"notLoggedIn",userNodeStatus:"noAccess",nodeId:null,spaceId:null,roomIds:[],error:""}}),v=(0,i.xu)({key:"checkUserAccess",default:function(){return 1}}),p=function(){var e,n=null===(e=window.localNetdataRegistry)||void 0===e?void 0:e.mg,t=(0,i.Zl)(v(n));return(0,a.useCallback)((function(){return t((function(e){return e+1}))}),[n])},m=function(){var e,n=null===(e=window.localNetdataRegistry)||void 0===e?void 0:e.mg;return(0,i.FV)(g({machineGuid:n}))};n.ZP=function(){var e,n=(0,c.Q6)(),t=null===(e=window.localNetdataRegistry)||void 0===e?void 0:e.mg,r=(0,i.FV)(v(t)),d=(0,o.Z)(r,2),g=d[0],p=d[1],y=m(t),b=(0,o.Z)(y,2),w=b[0],h=b[1],O=w.loading,I=(0,u.Iy)("isAnonymous");return(0,a.useEffect)((function(){!O&&t&&n&&!I&&(h((function(e){return f({loading:!0,nodeId:null,spaceId:null,roomIds:[]},e)})),(0,l.yM)(t).then((function(e){var n=e.data;h(f(f({loading:!1,loaded:!0},n),{},{error:""}))})).catch((function(e){var n,t=null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data;h({loading:!1,loaded:!0,error:(0,s.r)(null===t||void 0===t?void 0:t.errorMsgKey)||(null===t||void 0===t?void 0:t.errorMessage)||"Something went wrong",userStatus:"notLoggedIn",userNodeStatus:"noAccess",nodeId:null,spaceId:null,roomIds:[]})})))}),[t,g,n,I,O]),f(f({},w),{},{checkAgain:p})}},7335:function(e,n,t){t.d(n,{aG:function(){return P},H3:function(){return h},XU:function(){return k},DH:function(){return I},z2:function(){return w},lL:function(){return O}});var r=t(29439),o=t(93433),a=t(15861),i=t(4942),c=t(64687),u=t.n(c),s=(t(21249),t(57640),t(9924),t(85827),t(41539),t(25387),t(2490),t(72608),t(57327),t(88449),t(59849),t(26699),t(32023),t(92222),t(66992),t(70189),t(78783),t(88921),t(96248),t(13599),t(11477),t(64362),t(15389),t(90401),t(45164),t(91238),t(54837),t(87485),t(56767),t(76651),t(61437),t(35285),t(39865),t(33948),t(69826),t(31672),t(59461),t(2707),t(47941),t(82526),t(38880),t(15581),t(34514),t(54747),t(49337),t(33321),t(69070),t(67294)),l=t(4480),d=t(89250),f=t(13477),g=(0,l.xu)({key:"visitedNodes",default:function(){return[]}}),v=t(97945),p=t(18761);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var b=(0,l.CG)({key:"visitedNodeIdsValue",get:function(e){return function(n){return(0,n.get)(g(e)).map((function(e){return e.id}))}}}),w=function(){var e=(0,f.jr)(),n=(0,l.sJ)(g(e)),t=(0,l._8)((function(e){var n=e.set;return function(e){n(v.Jz,{values:e.reduce((function(e,n){return y(y({},e),{},(0,i.Z)({},n.id,y(y({},n),{},{loaded:!0})))}),{}),merge:!0})}}),[]);return(0,s.useEffect)((function(){t(n)}),[n]),(0,l.sJ)(b(e))},h=function(e){var n=(0,f.jr)(),t=(0,l.sJ)(g(n)),r=(0,s.useMemo)((function(){return e?t.filter((function(n){return n.name.toUpperCase().includes(e.toUpperCase())})):t}),[t,e]);return(0,s.useMemo)((function(){return r.map((function(e){return e.id}))}),[r])},O=function(){return(0,l._8)((function(e){var n=e.snapshot,t=e.set;return function(){var e=(0,a.Z)(u().mark((function e(r,o){var a,i,c,s,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getPromise((0,f.KL)("id"));case 2:return a=e.sent,e.next=5,n.getPromise((0,v.zP)({id:r}));case 5:return i=e.sent,c=i.urls,s=i.name,l=c.filter((function(e){return e!==o})),t((0,v.zP)({id:r,key:"urls"}),l),l.length||t(g(a),(function(e){return e.filter((function(e){return e.id!==r}))})),e.prev=11,e.next=14,l.length?(0,p.RX)(a,r,s,l):(0,p.Sd)(a,[r]);case 14:(0,p.Wy)(a,r).catch((function(){})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),t((0,v.zP)({id:r,key:"urls"}),c);case 20:case"end":return e.stop()}}),e,null,[[11,17]])})));return function(n,t){return e.apply(this,arguments)}}()}),[])},I=function(){var e=(0,d.TH)().pathname,n=(0,f.jr)(),t=P(n,{autoFetch:!1});return(0,l._8)((function(e){var n=e.snapshot,r=e.set;return function(){var e=(0,a.Z)(u().mark((function e(a,i,c){var s,l,d,m,b,w;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getPromise((0,f.KL)("isAnonymous"));case 2:if(!e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n.getPromise((0,f.KL)("id"));case 7:return s=e.sent,e.next=10,n.getPromise((0,v.zP)({id:a}));case 10:if(l=e.sent,d=l.urls,m=l.name,b=i?[i].concat((0,o.Z)(d)):d,b=(0,o.Z)(new Set([window.location.href].concat((0,o.Z)(b)))),w=b.length!==d.length,e.prev=16,r((0,v.zP)({id:a,key:"urls"}),b),r(g(s),(function(e){var n=e.find((function(e){return e.id===a})),t=e.filter((function(e){return e.id!==a}));return n?[y(y({},n),{},{accessCount:n.accessCount+1,lastAccessTime:(new Date).toISOString()})].concat((0,o.Z)(t)):[{accessCount:1,id:a,lastAccessTime:(new Date).toISOString(),urls:b,name:c}].concat((0,o.Z)(t))})),!w){e.next=22;break}return e.next=22,(0,p.RX)(s,a,c||m,b);case 22:return t(),e.next=25,(0,p.Wy)(s,a);case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(16),r((0,v.zP)({id:a,key:"urls"}),d);case 30:case"end":return e.stop()}}),e,null,[[16,27]])})));return function(n,t,r){return e.apply(this,arguments)}}()}),[t,e,n])},P=function(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).autoFetch,t=void 0===n||n,o=(0,l.FV)(g(e)),a=(0,r.Z)(o,2)[1],i=(0,s.useState)(0),c=(0,r.Z)(i,2),u=c[0],d=c[1],f=(0,s.useCallback)((function(){d((function(e){return e+1}))}),[d]);return(0,s.useEffect)((function(){e&&(t||u)&&(0,p.Fz)(e).then((function(e){if(e){var n=e.data.results.sort((function(e,n){return new Date(n.lastAccessTime)-new Date(e.lastAccessTime)}));a(n)}}))}),[t,u,e]),f},k=function(){var e=(0,f.jr)(),n=g(e);return(0,l._8)((function(e){var t=e.snapshot,r=e.set;return function(){var e=(0,a.Z)(u().mark((function e(o){var a,i,c,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPromise((0,v.$E)(o));case 2:return a=e.sent,i=a.map((function(e){return e.machineGUID})),e.next=6,t.getPromise(n);case 6:c=e.sent,(s=c.filter((function(e){return!i.includes(e.id)}))).length!==c.length&&r(n,s);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),[e])}},37176:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(67294);function o(e){var n=(0,r.useRef)();return(0,r.useEffect)((function(){n.current=e})),n.current}}}]);